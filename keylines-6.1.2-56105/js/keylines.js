//
//     KeyLines v6.1.2-56105 sdk
//     Licensed to Illunex Inc for EffectMall expires on Sat Jun 26 2021
//
//     Copyright © 2011-2020 Cambridge Intelligence Limited.
//     All rights reserved.
//
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).KeyLines=t()}(this,(function(){"use strict";var e=null;function t(e,t,n){if(e){e.parentNode&&e.parentNode.removeChild(e);t&&t.appendChild(e);n()}}function n(e,t){if(e&&"object"==typeof e)if(Array.isArray(e))e.forEach(t);else for(var n=Object.keys(e),r=n.length,i=0;i<r;i++){var o=n[i];t(e[o],o)}}function r(e){return"rtl"===window.getComputedStyle(e).direction}function i(e){if(null===e)return null;switch(typeof e){case"object":if(Array.isArray(e))return e.slice();if(f(e))return u(e);if(e instanceof Date)return new Date(e.getTime());var t={};n(e,(function(e,n){t[n]=e}));return t;case"boolean":case"string":case"number":return e;default:return}}function o(e){return e*(Math.PI/180)}function a(e,t,r){var i,o=t,s=r;if(2===arguments.length&&"string"==typeof o){s=o;o=!0}if(null===e)return null;function l(e,t){o&&"_"===t.charAt(0)||(i[t]=a(e,o&&t!==s))}if("object"==typeof e){if(Array.isArray(e)){for(var c=[],d=0;d<e.length;d++)c.push(a(e[d],o,s));return c}if(f(e))return u(e,!0);if(e instanceof Date)return new Date(e.getTime());i={};n(e,l);return i}return"boolean"==typeof e||"string"==typeof e||"number"==typeof e?e:void 0}function u(e,t){void 0===t&&(t=!1);var n,r=Object.getPrototypeOf(e).constructor;if(t){n=new r;a(Array.from(e)).forEach((function(e){n.add?n.add(e):n.set(e[0],e[1])}))}else n=new r(e);return n}function s(e,t){if(e.size!==t.size)return!1;var n=!1;e.forEach((function(e){n=n||!t.has(e)}));return!n}function l(){return Object.isPrototypeOf&&Array.from&&"undefined"!=typeof Set&&"undefined"!=typeof Map}function f(t){null==e&&l&&(e=l());return!!e&&(Object.prototype.isPrototypeOf.call(Map.prototype,t)||Object.prototype.isPrototypeOf.call(Set.prototype,t))}var c=1e3/60,d="undefined"!=typeof requestAnimationFrame;function h(e){return d?requestAnimationFrame(e):setTimeout(e,c)}function v(e){d?cancelAnimationFrame(e):clearTimeout(e)}function p(e,t){void 0===t&&(t=0);return M(e)?setTimeout(e,t):null}function g(e,t){if(M(e))return setInterval(e,t)}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];KeyLines._loggerDisabled||console.log([].slice.call(e).join(" "))}var y=Number.isNaN||b;function b(e){return e!=e}var x=Number.isFinite||w;function w(e){return"number"==typeof e&&isFinite(e)}function A(e){return e>>>0===parseFloat(e)}function M(e){return"function"==typeof e}function I(e,t){var n=t||"";return n.slice(Math.max(n.length-5,0))==="."+e}function E(e){return!("object"!=typeof e||e instanceof Date||Array.isArray(e)||V(e))}function C(e){return"[object Date]"===Object.prototype.toString.call(e)&&!y(e.getTime())}function k(e,t){return void 0===e&&void 0===t||(!(!y(e)||!y(t)||"number"!=typeof e||"number"!=typeof t)||(Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((function(e,n){return S(e,t[n])})):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t))}function S(e,t){return E(e)&&E(t)?Object.keys(t).every((function(n){return S(e[n],t[n])})):k(e,t)}function T(e,t){M(e)&&p((function(){e(t)}))}function R(e,t){M(e)&&e(t)}var Z=Number.isInteger||B;function B(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function O(e,t){try{t(null,e())}catch(e){t(e)}}function G(e){if("object"==typeof e&&e&&!Array.isArray(e)){var t=e;if(t.items)return t.items}return e}function Y(e){return Array.isArray(e)?e:[e]}function F(e,t){for(var n=[],r=Y(e),i=0;i<r.length;i++)t[r[i]]&&n.push(r[i]);return n}function D(e,t){var r=a(e)||{};if("string"==typeof e)return e;n(t,(function(e,t){z(r,t)&&!V(r[t])||(r[t]=e)}));return r}function P(e){return void 0!==e}function z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function V(e){return null==e}function X(e){return!("number"!=typeof e||!y(e))||null==e}function W(){return"✄"}function U(e){return e.lastIndexOf(W())}function N(e){if(V(e))return null;var t=""+e,n=U(t);-1!==n&&(t=t.substring(0,n));return t}function j(e){if(V(e))return null;var t=""+e,n=U(t);return-1!==n?t.substring(n+1):null}function K(e,t){return e.indexOf(t)>-1}var H=Object.values||_;function _(e){return Object.keys(e).map((function(t){return e[t]}))}function J(e){return Object.keys(e)}function Q(e){return Object.keys(e).length>0}function q(e){return Y(e).reduce((function(e,t){e[N(t)]=!0;return e}),{})}function $(e){return Y(e).reduce((function(e,t){e.add(N(t));return e}),new Set)}function ee(e){var t={};e.forEach((function(e){t[e.id]=e}));return t}function te(e){var t={};e.forEach((function(e){t[e]=e}));return t}function ne(e){return e.map((function(e){return e.id}))}function re(e,t){if(e){n(t,(function(t,n){e[n]=t}));return e}return t}var ie=Number.assign||oe;function oe(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),i=function(e){var n=t[e];null!=n&&Object.keys(n).forEach((function(e){r[e]=n[e]}))},o=0;o<t.length;o++)i(o);return r}function ue(e,t,n,r){return Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}function se(e,t){return Math.max(1e-4,ue(0,0,e,t))}function le(e,t){var n=e,r=t,i=se(n,r);return[n/=i,r/=i]}function fe(e,t,n,r){var i=le(e,t),o=le(n,r);return i[0]*o[0]+i[1]*o[1]}function ce(){}function de(e,t){var n,r,i;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var u=Date.now();i=o;function s(){r=Date.now();e.apply(void 0,i)}if(!n)if(!r||u-r>=t)s();else{n=p((function(){n=null;s()}),t-(u-r))}}}function he(e){void 0===e&&(e=null);var t=e,n=48271,r=2147483647,i=r/n,o=r%n,a=1/r;return{setSeed:function(e){t=e},next:function(){if(t){var e=n*(t%i)-o*(t/i);return(t=e>0?e:e+r)*a}return Math.random()}}}var ve,pe={};function ge(e){if(!pe[e]){var t=e;e.match(/'/)&&(t=e.replace(/'/g,"\\'"));t.match(/\s/)&&(t="'"+t+"'");pe[e]=t}return pe[e]}function me(e,t,n){void 0===n&&(n=function(e){return e});var r=new Map,i=[],o=[];e.forEach((function(e){var t=n(e);t&&r.set(t,{item:e,inDegree:0})}));e.forEach((function(e){var i=t(e),o=n(e);i&&i.forEach((function(e){r.has(e)&&e!==o&&r.get(e).inDegree++}))}));e.forEach((function(e){var t=n(e);t&&0===r.get(t).inDegree&&o.push(e)}));for(;o.length>0;){var a=o.shift();i.push(a);var u=t(a);if(u)for(var s=0;s<u.length;s++){var l=r.get(u[s]);l&&1==l.inDegree--&&o.push(l.item)}}if(i.length<r.size)throw new Error("Cycle detected");return i}function ye(e){return E(e.pos)&&!V(e.pos.lat)&&!V(e.pos.lng)}function be(e,t){for(var n=e.split("."),r=t.split("."),i=0;i<n.length&&i<r.length;i++){var o=parseInt(n[i],10),a=parseInt(r[i],10);if(o!==a)return o-a}return n.length!==r.length?n.length-r.length:0}function xe(e){return 0===e?0:e<0?-1:1}function we(e){for(var t=0,n=e.length;t<n;t++){var r=e.charCodeAt(t);if(r>=1536&&(r<=1791||r>=64336&&r<=65023||r>=65136&&r<=65279||r>=1872&&r<=1919||r>=2208&&r<=2303))return!0}return!1}function Ae(e){return Math.floor(e*(11/14))}function Me(e){var t=e.charCodeAt(0);return t<=55295||t>=57344?t:1024*(t-55296)+(e.charCodeAt(1)-56320)+65536}function Ie(e){return[[169,169],[174,174],[8252,8252],[8265,8265],[8419,8419],[8482,8482],[8505,8505],[8596,8601],[8617,8618],[8986,8987],[9e3,9e3],[9096,9096],[9167,9167],[9193,9203],[9208,9210],[9410,9410],[9642,9643],[9654,9654],[9664,9664],[9723,9726],[9728,9733],[9735,9746],[9748,9861],[9872,9989],[9992,10002],[10004,10004],[10006,10006],[10013,10013],[10017,10017],[10024,10024],[10035,10036],[10052,10052],[10055,10055],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10083,10087],[10133,10135],[10145,10145],[10160,10160],[10175,10175],[10548,10549],[11013,11015],[11035,11036],[11088,11088],[11093,11093],[12336,12336],[12349,12349],[12951,12951],[12953,12953],[65039,65039],[126976,127231],[127245,127247],[127279,127279],[127340,127345],[127358,127359],[127374,127374],[127377,127386],[127405,127487],[127489,127503],[127514,127514],[127535,127535],[127538,127546],[127548,127551],[127561,128317],[128326,128591],[128640,128767],[128884,128895],[128981,129023],[129036,129039],[129096,129103],[129114,129119],[129160,129167],[129198,129279],[129292,129338],[129340,129349],[129351,131069],[917536,917631]].some((function(t){return e>=t[0]&&e<=t[1]}))}function Ee(e){return Ce(e).some((function(e){return Ie(Me(e))}))}function Ce(e){for(var t,n=0,r=e.length,i=[];n<r;++n){t=!1;var o=e.charCodeAt(n);if(o>=55296&&o<=56319&&n+1<r&&(o=e.charCodeAt(n+1))>=56320&&o<=57343){i.push(e.slice(n,n+2));++n;t=!0}t||i.push(e.charAt(n))}return i}function ke(e){var t,n,r,i=[],o=e.length;for(t=0;t<o;t++){r=Me(n=e[t]);if(0===t)i.push(n);else if(s(r))i[i.length-1]+=n;else if(65038===r||65039===r)i[i.length-1]+=n;else if(a(r))i[i.length-1]+=n;else if(u(r)&&2===i[i.length-1].length&&u(Me(i[i.length-1])))i[i.length-1]+=n;else if(8205===r&&Ee(i[i.length-1])&&t<o-1&&Ie(Me(e[t+1]))){i[i.length-1]+=n;i[i.length-1]+=e[++t]}else r>=917536&&r<=917631?i[i.length-1]+=n:i.push(n)}function a(e){return e>=127995&&e<=127999}function u(e){return e>=127462&&e<=127487}function s(e){return e>=768&&e<=879||e>=8400&&e<=8447}return i}!function(e){e[e.Neutral=0]="Neutral";e[e.Ltr=1]="Ltr";e[e.Rtl=2]="Rtl"}(ve||(ve={}));var Se,Le={};!function(e){e[e.L=0]="L";e[e.R=1]="R";e[e.EN=2]="EN";e[e.AN=3]="AN";e[e.ON=4]="ON";e[e.B=5]="B";e[e.S=6]="S";e[e.AL=7]="AL";e[e.WS=8]="WS";e[e.CS=9]="CS";e[e.ES=10]="ES";e[e.ET=11]="ET";e[e.NSM=12]="NSM";e[e.LRE=13]="LRE";e[e.RLE=14]="RLE";e[e.PDF=15]="PDF";e[e.LRO=16]="LRO";e[e.RLO=17]="RLO";e[e.BN=18]="BN"}(Se||(Se={}));var Te,Re=Se.L,Ze=Se.R,Be=Se.EN,Oe=Se.AN,Ge=Se.ON,Ye=Se.B,Fe=Se.S,De=Se.AL,Pe=Se.WS,ze=Se.CS,Ve=Se.ES,Xe=Se.ET,We=Se.NSM,Ue=Se.LRE,Ne=Se.RLE,je=Se.PDF,Ke=Se.LRO,He=Se.RLO,_e=Se.BN;!function(e){e[e.D=2]="D";e[e.C=3]="C";e[e.U=4]="U";e[e.T=5]="T"}(Te||(Te={}));var Je=Te.D,Qe=Te.T,qe=[9,_e,10,Fe,11,Ye,12,Fe,13,Pe,14,Ye,28,_e,31,Ye,32,Fe,33,Pe,35,Ge,38,Xe,43,Ge,44,Ve,45,ze,46,Ve,48,ze,58,Be,59,ze,65,Ge,91,Re,97,Ge,123,Re,127,Ge,133,_e,134,Ye,160,_e,161,ze,162,Ge,166,Xe,170,Ge,171,Re,173,Ge,174,_e,176,Ge,178,Xe,180,Be,181,Ge,182,Re,185,Ge,186,Be,187,Re,192,Ge,215,Re,216,Ge,247,Re,248,Ge,697,Re,699,Ge,706,Re,720,Ge,722,Re,736,Ge,741,Re,750,Ge,751,Re,768,Ge,880,We,884,Re,886,Ge,894,Re,895,Ge,900,Re,902,Ge,903,Re,904,Ge,1014,Re,1015,Ge,1155,Re,1162,We,1418,Re,1423,Ge,1425,Xe,1470,We,1471,Ze,1472,We,1473,Ze,1475,We,1476,Ze,1478,We,1479,Ze,1488,We,1536,Ze,1542,Oe,1544,Ge,1545,De,1547,Xe,1548,De,1549,ze,1550,De,1552,Ge,1563,We,1611,De,1632,We,1642,Oe,1643,Xe,1645,Oe,1648,De,1649,We,1750,De,1757,We,1758,Oe,1759,Ge,1765,We,1767,De,1769,We,1770,Ge,1774,We,1776,De,1786,Be,1809,De,1810,We,1840,De,1869,We,1958,De,1969,We,1984,De,2027,Ze,2036,We,2038,Ze,2042,Ge,2070,Ze,2074,We,2075,Ze,2084,We,2085,Ze,2088,We,2089,Ze,2096,We,2137,Ze,2142,We,2208,Ze,2260,De,2274,We,2275,Oe,2307,We,2362,Re,2363,We,2364,Re,2365,We,2369,Re,2377,We,2381,Re,2382,We,2385,Re,2392,We,2402,Re,2404,We,2433,Re,2434,We,2492,Re,2493,We,2497,Re,2503,We,2509,Re,2510,We,2530,Re,2534,We,2546,Re,2548,Xe,2555,Re,2561,Xe,2563,We,2620,Re,2622,We,2625,Re,2649,We,2672,Re,2674,We,2677,Re,2691,We,2748,Re,2749,We,2753,Re,2761,We,2765,Re,2768,We,2786,Re,2790,We,2801,Re,2809,Xe,2817,Re,2818,We,2876,Re,2877,We,2879,Re,2880,We,2881,Re,2887,We,2893,Re,2903,We,2914,Re,2918,We,2946,Re,2947,We,3008,Re,3009,We,3021,Re,3024,We,3059,Re,3065,Ge,3066,Xe,3072,Ge,3073,We,3134,Re,3137,We,3142,Re,3160,We,3170,Re,3174,We,3192,Re,3199,Ge,3201,Re,3202,We,3260,Re,3261,We,3276,Re,3285,We,3298,Re,3302,We,3329,Re,3330,We,3393,Re,3398,We,3405,Re,3406,We,3426,Re,3430,We,3530,Re,3535,We,3538,Re,3544,We,3633,Re,3634,We,3636,Re,3647,We,3648,Xe,3655,Re,3663,We,3761,Re,3762,We,3764,Re,3773,We,3784,Re,3792,We,3864,Re,3866,We,3893,Re,3894,We,3895,Re,3896,We,3897,Re,3898,We,3902,Ge,3953,Re,3967,We,3968,Re,3973,We,3974,Re,3976,We,3981,Re,4030,We,4038,Re,4039,We,4141,Re,4145,We,4146,Re,4152,We,4153,Re,4155,We,4157,Re,4159,We,4184,Re,4186,We,4190,Re,4193,We,4209,Re,4213,We,4226,Re,4227,We,4229,Re,4231,We,4237,Re,4238,We,4253,Re,4254,We,4957,Re,4960,We,5008,Re,5024,Ge,5120,Re,5121,Ge,5760,Re,5761,Pe,5787,Re,5792,Ge,5906,Re,5920,We,5938,Re,5941,We,5970,Re,5984,We,6002,Re,6016,We,6068,Re,6070,We,6071,Re,6078,We,6086,Re,6087,We,6089,Re,6100,We,6107,Re,6108,Xe,6109,Re,6112,We,6128,Re,6155,Ge,6158,We,6160,_e,6277,Re,6279,We,6313,Re,6314,We,6432,Re,6435,We,6439,Re,6441,We,6450,Re,6451,We,6457,Re,6464,We,6470,Ge,6622,Re,6656,Ge,6679,Re,6681,We,6683,Re,6686,We,6742,Re,6743,We,6744,Re,6753,We,6754,Re,6755,We,6757,Re,6765,We,6771,Re,6784,We,6832,Re,6916,We,6964,Re,6965,We,6966,Re,6971,We,6972,Re,6973,We,6978,Re,6979,We,7019,Re,7028,We,7040,Re,7042,We,7074,Re,7078,We,7080,Re,7082,We,7083,Re,7086,We,7142,Re,7143,We,7144,Re,7146,We,7149,Re,7150,We,7151,Re,7154,We,7212,Re,7220,We,7222,Re,7227,We,7376,Re,7379,We,7380,Re,7393,We,7394,Re,7401,We,7405,Re,7406,We,7412,Re,7413,We,7416,Re,7424,We,7616,Re,7680,We,8125,Re,8126,Ge,8127,Re,8130,Ge,8141,Re,8144,Ge,8157,Re,8160,Ge,8173,Re,8178,Ge,8189,Re,8192,Ge,8203,Pe,8206,_e,8207,Re,8208,Ze,8232,Ge,8233,Pe,8234,Ye,8235,Ue,8236,Ne,8237,je,8238,Ke,8239,He,8240,ze,8245,Xe,8260,Ge,8261,ze,8287,Ge,8288,Pe,8294,_e,8298,Ge,8304,_e,8305,Be,8308,Re,8314,Be,8316,Ve,8319,Ge,8320,Re,8330,Be,8332,Ve,8336,Ge,8352,Re,8400,Xe,8448,We,8450,Ge,8451,Re,8455,Ge,8456,Re,8458,Ge,8468,Re,8469,Ge,8470,Re,8473,Ge,8478,Re,8484,Ge,8485,Re,8486,Ge,8487,Re,8488,Ge,8489,Re,8490,Ge,8494,Re,8495,Xe,8506,Re,8508,Ge,8512,Re,8517,Ge,8522,Re,8526,Ge,8528,Re,8544,Ge,8585,Re,8722,Ge,8723,Ve,8724,Xe,9014,Ge,9083,Re,9109,Ge,9110,Re,9352,Ge,9372,Be,9450,Re,9900,Ge,9901,Re,10240,Ge,10496,Re,11264,Ge,11493,Re,11499,Ge,11503,Re,11506,We,11513,Re,11520,Ge,11647,Re,11648,We,11744,Re,11776,We,12288,Ge,12289,Pe,12293,Ge,12296,Re,12321,Ge,12330,Re,12334,We,12336,Re,12337,Ge,12342,Re,12344,Ge,12349,Re,12353,Ge,12441,Re,12443,We,12445,Ge,12448,Re,12449,Ge,12539,Re,12540,Ge,12736,Re,12784,Ge,12829,Re,12832,Ge,12880,Re,12896,Ge,12924,Re,12927,Ge,12977,Re,12992,Ge,13004,Re,13008,Ge,13175,Re,13179,Ge,13278,Re,13280,Ge,13311,Re,13312,Ge,19904,Re,19968,Ge,42128,Re,42192,Ge,42509,Re,42512,Ge,42607,Re,42611,We,42612,Ge,42622,We,42624,Ge,42654,Re,42656,We,42736,Re,42738,We,42752,Re,42786,Ge,42888,Re,42889,Ge,43010,Re,43011,We,43014,Re,43015,We,43019,Re,43020,We,43045,Re,43047,We,43048,Re,43056,Ge,43064,Re,43072,Xe,43124,Re,43136,Ge,43204,Re,43214,We,43232,Re,43250,We,43302,Re,43310,We,43335,Re,43346,We,43392,Re,43395,We,43443,Re,43444,We,43446,Re,43450,We,43452,Re,43453,We,43493,Re,43494,We,43561,Re,43567,We,43569,Re,43571,We,43573,Re,43584,We,43587,Re,43588,We,43596,Re,43597,We,43644,Re,43645,We,43696,Re,43697,We,43698,Re,43701,We,43703,Re,43705,We,43710,Re,43712,We,43713,Re,43714,We,43756,Re,43758,We,43766,Re,43777,We,44005,Re,44006,We,44008,Re,44009,We,44013,Re,44016,We,64285,Re,64286,Ze,64287,We,64297,Ze,64298,Ve,64336,Ze,64830,De,64848,Ge,65021,De,65024,Ge,65040,We,65056,Ge,65072,We,65104,Ge,65105,ze,65106,Ge,65108,ze,65109,Ge,65110,ze,65119,Ge,65120,Xe,65122,Ge,65124,Ve,65129,Ge,65131,Xe,65136,Ge,65279,De,65281,_e,65283,Ge,65286,Xe,65291,Ge,65292,Ve,65293,ze,65294,Ve,65296,ze,65306,Be,65307,ze,65313,Ge,65339,Re,65345,Ge,65371,Re,65382,Ge,65504,Re,65506,Xe,65509,Ge,65512,Xe,1114109,Ge],$e={1536:{t:4},1537:{t:4},1538:{t:4},1539:{t:4},1540:{t:4},1541:{t:4},1544:{t:4},1547:{t:4},1568:{t:2},1569:{t:4,isolated:65152},1570:{t:1,isolated:65153,initial:65154},1571:{t:1,isolated:65155,initial:65156},1572:{t:1,isolated:65157,initial:65158},1573:{t:1,isolated:65159,initial:65160},1574:{t:2,isolated:65161,final:65163,median:65164,initial:65162},1575:{t:1,isolated:65165,initial:65166},1576:{t:2,isolated:65167,final:65169,median:65170,initial:65168},1577:{t:1,isolated:65171,initial:65172},1578:{t:2,isolated:65173,final:65175,median:65176,initial:65174},1579:{t:2,isolated:65177,final:65179,median:65180,initial:65178},1580:{t:2,isolated:65181,final:65183,median:65184,initial:65182},1581:{t:2,isolated:65185,final:65187,median:65188,initial:65186},1582:{t:2,isolated:65189,final:65191,median:65192,initial:65190},1583:{t:1,isolated:65193,initial:65194},1584:{t:1,isolated:65195,initial:65196},1585:{t:1,isolated:65197,initial:65198},1586:{t:1,isolated:65199,initial:65200},1587:{t:2,isolated:65201,final:65203,median:65204,initial:65202},1588:{t:2,isolated:65205,final:65207,median:65208,initial:65206},1589:{t:2,isolated:65209,final:65211,median:65212,initial:65210},1590:{t:2,isolated:65213,final:65215,median:65216,initial:65214},1591:{t:2,isolated:65217,final:65219,median:65220,initial:65218},1592:{t:2,isolated:65221,final:65223,median:65224,initial:65222},1593:{t:2,isolated:65225,final:65227,median:65228,initial:65226},1594:{t:2,isolated:65229,final:65231,median:65232,initial:65230},1595:{t:2},1596:{t:2},1597:{t:2},1598:{t:2},1599:{t:2},1600:{t:3,isolated:1600,final:1600,median:1600,initial:1600},1601:{t:2,isolated:65233,final:65235,median:65236,initial:65234},1602:{t:2,isolated:65237,final:65239,median:65240,initial:65238},1603:{t:2,isolated:65241,final:65243,median:65244,initial:65242},1604:{t:2,isolated:65245,final:65247,median:65248,initial:65246},1605:{t:2,isolated:65249,final:65251,median:65252,initial:65250},1606:{t:2,isolated:65253,final:65255,median:65256,initial:65254},1607:{t:2,isolated:65257,final:65259,median:65260,initial:65258},1608:{t:1,isolated:65261,initial:65262},1609:{t:2,isolated:65263,initial:65264},1610:{t:2,isolated:65265,final:65267,median:65268,initial:65266},1646:{t:2},1647:{t:2},1649:{t:1},1650:{t:1},1651:{t:1},1652:{t:4},1653:{t:1},1654:{t:1},1655:{t:1},1656:{t:2},1657:{t:2},1658:{t:2},1659:{t:2},1660:{t:2},1661:{t:2},1662:{t:2,isolated:64342,final:64344,median:64345,initial:64343},1663:{t:2},1664:{t:2},1665:{t:2},1666:{t:2},1667:{t:2},1668:{t:2},1669:{t:2},1670:{t:2,isolated:64378,final:64380,median:64381,initial:64379},1671:{t:2},1672:{t:1},1673:{t:1},1674:{t:1},1675:{t:1},1676:{t:1},1677:{t:1},1678:{t:1},1679:{t:1},1680:{t:1},1681:{t:1},1682:{t:1},1683:{t:1},1684:{t:1},1685:{t:1},1686:{t:1},1687:{t:1},1688:{t:1,isolated:64394,initial:64395},1689:{t:1},1690:{t:2},1691:{t:2},1692:{t:2},1693:{t:2},1694:{t:2},1695:{t:2},1696:{t:2},1697:{t:2},1698:{t:2},1699:{t:2},1700:{t:2},1701:{t:2},1702:{t:2},1703:{t:2},1704:{t:2},1705:{t:2,isolated:64398,final:64400,median:64401,initial:64399},1706:{t:2},1707:{t:2},1708:{t:2},1709:{t:2},1710:{t:2},1711:{t:2,isolated:64402,final:64404,median:64405,initial:64403},1712:{t:2},1713:{t:2},1714:{t:2},1715:{t:2},1716:{t:2},1717:{t:2},1718:{t:2},1719:{t:2},1720:{t:2},1721:{t:2},1722:{t:2},1723:{t:2},1724:{t:2},1725:{t:2},1726:{t:2},1727:{t:2},1728:{t:1},1729:{t:2},1730:{t:2},1731:{t:1},1732:{t:1},1733:{t:1},1734:{t:1},1735:{t:1},1736:{t:1},1737:{t:1},1738:{t:1},1739:{t:1},1740:{t:2,isolated:64508,final:64510,median:64511,initial:64509},1741:{t:1},1742:{t:2},1743:{t:1},1744:{t:2},1745:{t:2},1746:{t:1},1747:{t:1},1749:{t:1},1757:{t:4},1774:{t:1},1775:{t:1},1786:{t:2},1787:{t:2},1788:{t:2},1791:{t:2},1808:{t:1},1810:{t:2},1811:{t:2},1812:{t:2},1813:{t:1},1814:{t:1},1815:{t:1},1816:{t:1},1817:{t:1},1818:{t:2},1819:{t:2},1820:{t:2},1821:{t:2},1822:{t:1},1823:{t:2},1824:{t:2},1825:{t:2},1826:{t:2},1827:{t:2},1828:{t:2},1829:{t:2},1830:{t:2},1831:{t:2},1832:{t:1},1833:{t:2},1834:{t:1},1835:{t:2},1836:{t:1},1837:{t:2},1838:{t:2},1839:{t:1},1869:{t:1},1870:{t:2},1871:{t:2},1872:{t:2},1873:{t:2},1874:{t:2},1875:{t:2},1876:{t:2},1877:{t:2},1878:{t:2},1879:{t:2},1880:{t:2},1881:{t:1},1882:{t:1},1883:{t:1},1884:{t:2},1885:{t:2},1886:{t:2},1887:{t:2},1888:{t:2},1889:{t:2},1890:{t:2},1891:{t:2},1892:{t:2},1893:{t:2},1894:{t:2},1895:{t:2},1896:{t:2},1897:{t:2},1898:{t:2},1899:{t:1},1900:{t:1},1901:{t:2},1902:{t:2},1903:{t:2},1904:{t:2},1905:{t:1},1906:{t:2},1907:{t:1},1908:{t:1},1909:{t:2},1910:{t:2},1911:{t:2},1912:{t:1},1913:{t:1},1914:{t:2},1915:{t:2},1916:{t:2},1917:{t:2},1918:{t:2},1919:{t:2},2208:{t:2},2209:{t:2},2210:{t:2},2211:{t:2},2212:{t:2},2213:{t:2},2214:{t:2},2215:{t:2},2216:{t:2},2217:{t:2},2218:{t:1},2219:{t:1},2220:{t:1},2221:{t:4},2222:{t:1},2223:{t:2},2224:{t:2},2225:{t:1},2226:{t:1},2227:{t:2},2228:{t:2},2230:{t:2},2231:{t:2},2232:{t:2},2233:{t:1},2234:{t:2},2235:{t:2},2236:{t:2},2237:{t:2},2274:{t:4},8204:{t:4},8205:{t:3},8239:{t:4},8294:{t:4},8295:{t:4},8296:{t:4},8297:{t:4},65269:{t:1,isolated:65269,initial:65270},65271:{t:1,isolated:65271,initial:65272},65273:{t:1,isolated:65273,initial:65274},65275:{t:1,isolated:65275,initial:65276}},et={1611:!0,1612:!0,1613:!0,1614:!0,1615:!0,1616:!0,1617:!0,1618:!0,1619:!0,1620:!0,1621:!0,1648:!0},tt={1456:!0,1457:!0,1458:!0,1459:!0,1460:!0,1461:!0,1462:!0,1463:!0,1464:!0,1465:!0,1466:!0,1467:!0,1473:!0,1474:!0},nt={"ل":{"ا":"ﻻ","آ":"ﻵ","أ":"ﻷ","إ":"ﻹ"},"ا":{"ل":{"ل":{"ه":"ﷲ"}}}},rt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{",">":"<","<":">"},it=63;function ot(e,t){if(Le[t])return Le[t];var n={characters:[],logicalOrder:e,result:[]},r=at(e),i=ft(e,r),o=i.length;i.forEach((function(e,t){ct(e);lt(e);if(0!==e.characters.length){ut(e);st(e);wt(e);At(e);Ct(e);kt(e);Mt(e);Lt(e,tt,!1);St(e);n.result=n.result.concat(e.reorderedCharacters);t<o-1&&n.result.push({text:"\n",level:0,type:Ye,index:0});n.characters=n.characters.concat(e.characters)}}));n.types=r;Le[t]=n;return n}function at(e){return e.map((function(e){return Gt(e)||0}))}function ut(e){dt(e);ht(e);vt(e);pt(e);gt(e);mt(e);yt(e)}function st(e){bt(e);xt(e)}function lt(e){var t=e.level,n=[];n.push({level:e.level,override:ve.Neutral});var r=0,i=n[0],o=i.level,a=[];function u(e,t){if(e<it){n.push({level:e,override:t});return e}}e.characters.forEach((function(e){var s=e.type;if(s===Ne){o+=Ft(o)?2:1;t=u(o,ve.Neutral)}else if(s===Ue){o+=Yt(o)?2:1;t=u(o,ve.Neutral)}else if(s===He){o+=Ft(o)?2:1;t=u(o,ve.Rtl)}else if(s===Ke){o+=Yt(o)?2:1;t=u(o,ve.Ltr)}s===je?n.length>1&&(i=n.pop()):i=n[n.length-1];t=i.level;o=t;if(-1===[_e,Ne,Ue,He,Ke,je].indexOf(s)){i.override>ve.Neutral&&(e.type=i.override===ve.Rtl?Ze:Re);e.embeddingLevel=t;e.index=r++;a.push(e)}}));e.characters=a}function ft(e,t){var n=0,r=[],i=[];t.forEach((function(e){if(e!==Ye)i.push(e);else if(i.length>0){o(i);n++;i.length=0}}));i.length>0&&o(i);function o(t){var i=n,o=t.map((function(t){return{text:e[n++],level:0,embeddingLevel:void 0,type:t,index:0}})),a=e.slice(i,i+t.length);r.push({symbols:a,level:0,characters:o})}return r}function ct(e){e.level=1}function dt(e){e.characters.filter(Dt(We)).forEach((function(t){t.isNSM=!0;if(t.index>0){var n=e.characters[t.index-1].type;n===De&&(t.type=De);Ze===n&&(t.type=Ze)}}))}function ht(e){e.characters.filter(Dt(Be)).forEach((function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===De){t.type=Oe;break}if([Ze,Re].indexOf(r)>-1)break}}))}function vt(e){e.characters.filter(Dt(De)).forEach((function(e){e.type=Ze;e.isAL=!0}))}function pt(e){e.characters.filter(Dt([Ve,ze])).forEach((function(t){var n=t.index;if(n>0&&n<e.characters.length-1){var r=e.characters[n-1].type;r!==e.characters[n+1].type||r!==Be&&r!==Oe||(t.type=r)}}))}function gt(e){e.characters.filter(Dt(Xe)).forEach((function(t){var n=t.index,r=n;if(n>0){for(var i=e.characters[n-1].type;r-- >0&&i===Xe;)i=e.characters[r].type;if(i===Be){t.type=Be;return}}if(n<e.characters.length-1){var o=e.characters[n+1].type;r=n;for(;r++<e.characters.length-1&&o===Xe;)o=e.characters[r].type;o===Be&&(t.type=Be)}}))}function mt(e){e.characters.filter(Dt([Xe,ze,Ve,Oe])).forEach((function(e){e.type=Ge}))}function yt(e){e.characters.filter(Dt(Be)).forEach((function(t){for(var n=t.index-1;n>=0;n--){var r=e.characters[n].type;if(r===Ze)return;if(r===Re){t.type=Re;return}}}))}function bt(e){e.characters.filter(Dt([Ye,Fe,Pe,Ge])).forEach((function(t){var n=t.index;if(e.level<t.embeddingLevel)t.type=Yt(t.embeddingLevel)?Re:Ze;else if(0!==n&&n!==e.characters.length-1&&n>0&&n<e.characters.length-1){for(var r=e.characters[n-1].type,i=e.characters[n+1].type,o=n;o-- >0&&-1===[Ze,De,Be,Oe,Re].indexOf(r);)r=e.characters[o].type;o=n;for(;o++<e.characters.length-1&&-1===[Ze,De,Be,Oe,Re].indexOf(i);)i=e.characters[o].type;[Ze,De,Be,Oe].indexOf(r)>-1&&[Ze,De,Be,Oe].indexOf(i)>-1?t.type=Ze:t.type=r===Re&&i===Re||Yt(t.embeddingLevel)?Re:Ze}}))}function xt(e){e.characters.filter(Dt([Ye,Fe,Pe,Ge])).forEach((function(e){e.type=Yt(e.embeddingLevel)?Re:Ze}))}function wt(e){var t;e.characters.forEach((function(e){var n=e.type;t=e.embeddingLevel;n===Re?Ft(t)&&t++:n===Ze||n===De?Yt(t)&&t++:n!==Be&&n!==Oe||(Yt(t)?t+=2:t++);e.level=t}))}function At(e){e.characters.filter((function(e){return rt[e.text]&&Ft(e.level)})).forEach((function(e){e.text=rt[e.text]}))}function Mt(e){var t=e.highestLevel;e.reorderedCharacters=a(e.characters);for(;t>0;){It(e,t);t--}}function It(e,t){var n,r=[];e.levelRuns.forEach((function(e){if(e.level>=t)if(n)n.endIndex+=e.length;else{n={startIndex:e.idx,endIndex:e.idx+e.length};r.push(n)}else n=null}));r.forEach((function(t){Et(e,t)}))}function Et(e,t){var n=t.startIndex,r=t.endIndex,i=e.reorderedCharacters.slice(n,r).reverse();e.reorderedCharacters=e.reorderedCharacters.slice(0,n).concat(i).concat(e.reorderedCharacters.slice(r))}function Ct(e){var t=0;e.characters.forEach((function(e){e.level>t&&(t=e.level)}));e.highestLevel=t}function kt(e){var t=[],n=0,r=0,i={idx:0,length:0,level:e.characters[0].level};e.characters.forEach((function(e){if(e.level!==n&&0!==r){t.push(i);i={idx:r,length:0,level:e.level}}i.length++;r++;n=e.level}));t.push(i);e.levelRuns=t}function St(e){Lt(e,et,!0);Rt(e);Bt(e);Ot(e)}function Lt(e,t,n){for(var r=e.reorderedCharacters.reverse(),i=[],o=0,a=r.length;o<a;o++){var u=r[o],s=Tt(o,r,t);o+=s.length;n||(u.text+=s.join(""));i.push(u)}var l=0;e.reorderedCharacters=i.reverse();e.reorderedCharacters.forEach((function(e){e.index=l++}))}function Tt(e,t,n){for(var r=[],i=e+1;i<t.length;i++){if(!n[t[i].text.charCodeAt(0)])return r;r.push(t[i].text)}return r}function Rt(e){for(var t=e.reorderedCharacters.reverse(),n=[],r=0,i=t.length;r<i;r++){var o=t[r],a=nt[o.text[0]];if(a){var u=Zt(r,a,t);if(u){r+=u.length;o.text=u.text}}n.push(o)}var s=0;e.reorderedCharacters=n.reverse();e.reorderedCharacters.forEach((function(e){e.index=s++}))}function Zt(e,t,n){for(var r=0,i=t,o=e+1;o<n.length;o++){var a=i[n[o].text[0]];if(!a)return!1;r++;if("string"==typeof a)return{text:a,length:r};i=a}return!1}function Bt(e){var t,n=function(){e.arabicTextRuns.push(t);t=void 0},r=e.reorderedCharacters;e.arabicTextRuns=[];for(var i=0,o=r.length;i<o;i++){var a=r[i].text.charCodeAt(0),u=$e[a];if(u&&[Ze,Je,Re].indexOf(u.t)>-1){t?t.endIndex=i+1:t={startIndex:i,endIndex:i+1};if(i+1<o){var s=r[i+1].text.charCodeAt(0),l=$e[s];l&&l.t===Ze&&n()}else n();u.t===Re&&n()}else u&&u.t===Qe||t&&n()}t&&n()}function Ot(e){e.arabicTextRuns.forEach((function(t){for(var n,r=t.startIndex,i=t.endIndex,o=r;o<i;o++){var a=e.reorderedCharacters[o],u=$e[a.text.charCodeAt(0)];n=null;i-r>1?o===r?n=u.initial:o===i-1?n=u.final:o>r&&o<i-1&&(n=u.median):n=u.isolated;n&&(a.text=String.fromCharCode(n)+a.text.substring(1))}}))}function Gt(e){for(var t=e.charCodeAt(0),n=0;n<qe.length;n+=2)if(t<qe[n])return qe[n+1];return Ge}function Yt(e){return e%2==0}function Ft(e){return e%2!=0}function Dt(e){var t=Y(e);return function(e){return t.indexOf(e.type)>-1}}var Pt={},zt={},Vt="rgb(128, 128, 128)",Xt={aqua:"rgb(0, 255, 255)",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",green:"rgb(0, 128, 0)",grey:Vt,gray:Vt,lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",orange:"rgb(255,165,0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",yellow:"rgb(255, 255, 0)",white:"rgb(255, 255, 255)",ci:"rgb(0, 174, 239)",cia:"rgba(0, 174, 239, 0.5)",keyline:"rgb(88, 89, 91)",midgrey:"rgb(145, 146, 149)",lightgrey:"rgb(208, 209, 211)",edit:"rgb(114, 179, 0)",attention:"rgb(220, 0, 0)",information:"rgb(0, 150, 255)",description:"rgb(255, 175, 0)",textback:"rgba(255,255,255,0.6)",transparent:"rgba(255,255,255,0.0)",touch:"rgba(255,0,0,0.6)"};function Wt(e,t,n){return"rgb("+e+","+t+","+n+")"}function Ut(e,t,n,r){return"rgba("+e+","+t+","+n+","+r+")"}var Nt=/^(?:rgb)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?\)$/i,jt=/^(?:rgba)?\(\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\s?,\s?([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5]),\s?(0|1|0\.\d{0,20}|1\.0)\)$/i,Kt=/^#([0-9a-f])([0-9a-f])([0-9a-f])$/i,Ht=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i;function _t(e){return!!Jt(e).length}function Jt(e){var t=[];if("string"!=typeof e)return t;var n=Xt[e.toLowerCase()]||e,r=n.match(Nt);r||(r=n.match(jt));if(r){for(var i=1;i<4;i++)t.push(parseInt(r[i],10));void 0!==r[4]&&t.push(+r[4])}else{if(!(r=n.match(Ht))&&(r=n.match(Kt)))for(i=1;i<4;i++)r[i]+=r[i];if(r)for(i=1;i<4;i++)t.push(parseInt(r[i],16))}return t}function Qt(e){if("transparent"===e)return 0;var t=e.match(jt);return t?parseFloat(t[4]):1}function qt(e){var t=Jt(e),n=rn(t[0],t[1],t[2]);n.push(Qt(e));return n}function $t(e){var t=an(e[0],e[1],e[2]);return Ut(t[0],t[1],t[2],e[3])}function en(e,t){return 1===t?e:un(e,t)}function tn(e){function t(){return Math.floor(239*Math.random())+1}var n=Wt(t(),t(),t());return e&&n in e?tn(e):n}function nn(e,t,n){var r=null;e&&(e.bg&&e.gh?r=t*n:e.bg?r=t:e.gh&&(r=n));return 0===r?1e-6:r}function rn(e,t,n){var r,i=e/255,o=t/255,a=n/255,u=Math.max(i,o,a),s=Math.min(i,o,a),l=0,f=(u+s)/2;if(u===s){l=0;r=0}else{var c=u-s;r=f>.5?c/(2-u-s):c/(u+s);switch(u){case i:l=(o-a)/c+(o<a?6:0);break;case o:l=(a-i)/c+2;break;case a:l=(i-o)/c+4}l/=6}return[l,r,f]}function on(e,t,n){var r=n;r<0&&(r+=1);r>1&&(r-=1);return r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function an(e,t,n){var r,i,o;if(0===t){r=n;i=n;o=n}else{var a=n<.5?n*(1+t):n+t-n*t,u=2*n-a;r=on(u,a,e+1/3);i=on(u,a,e);o=on(u,a,e-1/3)}return[Math.round(255*r),Math.round(255*i),Math.round(255*o)]}function un(e,t){var n=e+t;if(!Pt[n]){var r=Jt(e),i=Qt(e);Pt[n]=Ut(r[0],r[1],r[2],i*t)}return Pt[n]}
function sn(e){var t=Jt(e),n=Qt(e);return[t[0],t[1],t[2],Math.floor(255*n)]}function ln(e,t){void 0===t&&(t=!1);if(e){if(t)return sn(e);var n=zt[e];if(!n){n=sn(e);zt[e]=n}return n}}function fn(){Pt={};zt={}}function cn(e,t){var n=Jt(e),r=n[0],i=n[1],o=n[2],a=n[3],u=rn(r,i,o),s=u[0],l=u[1],f=u[2],c=an(s,l,Math.min(f*t,1)),d=c[0],h=c[1],v=c[2];return void 0===a?Wt(d,h,v):Ut(d,h,v,a)}function dn(e,t){var n=Jt(e),r=n[0],i=n[1],o=n[2],a=n[3];return Ut(r,i,o,Math.min((void 0!==a?a:1)*t,1))}var hn={arc:"A",bezier:"B",circle:"C",image:"I",line:"L",rect:"R",roundrect:"RR",text:"T",triangle:"TR"},vn=14,pn=26,gn=Math.PI/2,mn={};var uB=new Date().getTime()/36774;var lr={a:"LTMxLC02NCwtNTgsLTYzLC0zNiwtNjgsLTY5LC02MiwtNTcsLTY4LC0zNCw0NCwtMjEsMzMsNTQsLTIxLC00NiwtMzA=",b:"LTIyLC01NiwtNTgsLTUsLTEyLC02MywtNjUsLTExLDEsLTY0LC03Myw1MiwyNSw0LDczLC0yLC0xNCw2LDE2LC0yMiwtNDYsLTcxLDM0LDEwLC01NA=="};var yn={};function bn(){yn={}}var xn="sans-serif",wn={browserMinimumFontSize:1,minimumFontChecked:!1};function An(e){wn.browserMinimumFontSize=e}function Mn(e){wn.minimumFontChecked=e}function In(e,t,n,r){var i=!!n,o=ge(r||xn);if(e!==yn.context||t!==yn.fontSize||i!==yn.bold||o!==yn.family){yn.context=e;yn.fontSize=t;yn.bold=i;yn.family=o;var a="normal"+" "+(i?"bold":"normal")+" "+t+"px"+" "+o;e.font=a;e.textBaseline="bottom"}}function En(e){var t={x:0,y:0},n=e.a;if(n.hiddenByGenerator)return t;if(e.anchorIndex>-1){var r=n.positionIndex[e.anchorIndex];if(r>-1){t.x=n.anchorBuffer.getData()[r];t.y=n.anchorBuffer.getData()[r+1]}}return t}function Cn(e,t){var n=0,r=0,i=0,o=0,a=En(t);switch(t.p){case hn.circle:n=t.x-t.r;r=t.x+t.r;i=t.y-t.r;o=t.y+t.r;break;case hn.line:case hn.rect:case hn.roundrect:case hn.image:case hn.text:n=Math.min(t.x1,t.x2);r=Math.max(t.x1,t.x2);i=Math.min(t.y1,t.y2);o=Math.max(t.y1,t.y2);break;case hn.triangle:n=Math.min(t.x1,t.x2,t.x3);r=Math.max(t.x1,t.x2,t.x3);i=Math.min(t.y1,t.y2,t.y3);o=Math.max(t.y1,t.y2,t.y3);break;case hn.arc:var u=t.x+t.r*Math.cos(t.sa),s=t.y+t.r*Math.sin(t.sa),l=t.x+t.r*Math.cos(t.ea),f=t.y+t.r*Math.sin(t.ea);n=Math.min(u,l);r=Math.max(u,l);i=Math.min(s,f);o=Math.max(s,f);for(var c=(Math.floor(t.sa/gn)+1)*gn;c<t.ea;){var d=t.x+t.r*Math.cos(c),h=t.y+t.r*Math.sin(c);n=Math.min(n,d);r=Math.max(r,d);i=Math.min(i,h);o=Math.max(o,h);c+=gn}break;case hn.bezier:var v=t.bezier.xs,p=t.bezier.ys;n=v[0];r=v[0];i=p[0];o=p[0];for(var g=1;g<v.length;g++){n=Math.min(n,v[g]);r=Math.max(r,v[g]);i=Math.min(i,p[g]);o=Math.max(o,p[g])}}return{x1:n+=a.x,y1:i+=a.y,x2:r+=a.x,y2:o+=a.y}}function kn(e,t){return{x1:Math.min(e.x1,t.x1),y1:Math.min(e.y1,t.y1),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function Sn(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2}function Ln(e,t,n,r,i,o){var a=o||0;return Math.sqrt((e-r)*(e-r)+(t-i)*(t-i))+a<n}function Tn(e,t,n,r,i){return e.x1<t&&r<e.x2&&e.y1<n&&i<e.y2}function Rn(e,t,n,r,i,o,a){var u=n*n;return(e-r)*(e-r)+(t-i)*(t-i)<u&&(e-r)*(e-r)+(t-a)*(t-a)<u&&(e-o)*(e-o)+(t-i)*(t-i)<u&&(e-o)*(e-o)+(t-a)*(t-a)<u}function Zn(e,t,n,r,i,o,a){var u=Math.floor((n.x2-n.x1)/2),s=Math.floor((n.y2-n.y1)/2),l=1,f="-resize",c=Math.floor(4*r);Gn(e,t,{x:n.x1,y:n.y1},c,l,i+a+"nw"+f,o);On(e,t,{x:n.x1+u,y:n.y1},c,l,i+a+"n"+f,o);Gn(e,t,{x:n.x2,y:n.y1},c,l,i+a+"ne"+f,o);On(e,t,{x:n.x2,y:n.y1+s},c,l,i+a+"e"+f,o);Gn(e,t,{x:n.x2,y:n.y2},c,l,i+a+"se"+f,o);On(e,t,{x:n.x2-u,y:n.y2},c,l,i+a+"s"+f,o);Gn(e,t,{x:n.x1,y:n.y2},c,l,i+a+"sw"+f,o);On(e,t,{x:n.x1,y:n.y2-s},c,l,i+a+"w"+f,o)}function Bn(e){return"transparent"===e||e===Xt.transparent}function On(e,t,n,r,i,o,a){var u=t.x(n.x),s=t.y(n.y),l=Bn(a)?Xt.transparent:Xt.white;e.rect(u-r,s-r,u+r,s+r,a,i,l,!0,o,-1)}function Gn(e,t,n,r,i,o,a){var u=Bn(a)?Xt.transparent:Xt.white;e.circle(t.x(n.x),t.y(n.y),r+1,a,i,u,!0,o,-1,void 0,!1)}function Yn(e,t,n,r,i,o,a,u){Zn(e,n,Cn(t,r),i,o,a,u)}function Fn(e,t,n,r,i,o){var a=en(t,n);if(o){e.fillStyle=a;e.fillRect(0,0,r,i)}else{var u=e;(u.webgl?u.webglCanvas:e.canvas).style.background=a}}function Dn(e,t,n,r,i,o){if(t)if(o){for(var a=e.createLinearGradient(0,0,0,i),u=0;u<t.length;u++)a.addColorStop(t[u].r,en(t[u].c,n));e.fillStyle=a;e.fillRect(0,0,r,i)}else{var s=e;Pn(s.webgl?s.webglCanvas:e.canvas,t,n)}}function Pn(e,t,n){for(var r="linear-gradient(",i=0,o=t.length;i<o;i++){var a=t[i];r+=en(a.c,n);r+=" "+100*a.r+"%";i+1<o&&(r+=",")}r+=")";e.style.background=r}function zn(e){var t;"string"==typeof e&&(t=e.split(",")[0]);return t}function Vn(e,t){if("number"==typeof e&&Z(e))return e;var n=Wn();t?document.getElementById(t).appendChild(n):document.body.appendChild(n);var r=e.replace(/\./g,"");n.className!==r&&(n.className=r);var i=window.getComputedStyle(n,":before").getPropertyValue("content");n.parentNode&&n.parentNode.removeChild(n);n.className="";return i.charCodeAt(1)||i.charCodeAt(0)}var Xn=null;function Wn(){if(Xn)return Xn;var e=document.createElement("span");e.style.position="absolute";e.style.left="-10000px";e.style.top="-10000px";e.style.visibility="hidden";e.style.lineHeight="normal";e.style.fontSize="200px";e.style.fontVariant="normal";e.style.fontStyle="normal";e.style.letterSpacing="0";e.style.width="auto";e.style.height="auto";e.style.display="block";e.style.margin="0";e.style.padding="0";e.style.whiteSpace="nowrap";Xn=e;return e}function Un(e,t,n){e.style.fontFamily=n;e.innerText=t}function Nn(e,t,n){var r=Wn();document.body.appendChild(r);Un(r,e,n);var i=r.offsetHeight;Un(r,"","");return i/200*t||t}var jn={},Kn={};function Hn(e,t,n,r,i,o){var a=i||xn,u=t+!!r+a,s=0,l=0,f=jn[u],c=(x(n)?n:vn)/pn;Kn[a]||(Kn[a]=Nn("|M",pn,a));l=Kn[a];if(void 0===f){In(e,pn,r,i);o&&(l=Nn(t,pn,a));if(e.webgl){we(t)&&(l=Ae(pn));s=Jn(e,t,l,pn,r,a)}else s=e.measureText(t).width;f={width:s,height:l};jn[u]=f}return{width:Math.round(f.width*c),height:Math.round(f.height*c)}}function _n(){jn={};Kn={}}function Jn(e,t,n,r,i,o){var a,u,s=0,l=ke(Ce(t));if(we(t)){var f=ot(l,t).result;for(a=0,u=f.length;a<u;a++){var c=f[a];we(c.text)?In(e,n,i,o):In(e,r,i,o);s+=e.measureText(c.text).width}}else for(a=0,u=l.length;a<u;a++)s+=e.measureText(l[a]).width;return s}function Qn(e){var t=e.id||"canvas";void 0===mn[t]&&(mn[t]=r(e));return mn[t]}function qn(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}function $n(){for(var e=arguments.length,t=[],n=0;n<e;n++)for(var r=arguments[n],i=r.length,o=0;o<i;o++)t.push(r[o]);return t}function er(e){var t,n=/[\d.]+/g;if(e){var r=e.match(n);if(null===(t=r)||void 0===t?void 0:t.length)return Math.round(r.map(Number)[0])}return null}function tr(e,t,n,r){var i=window.devicePixelRatio,o=e.width,a=e.height;if(r){e.style.width="100%";e.style.height="100%";e.style.display="block";var u=window.getComputedStyle(e),s=Math.round(e.clientWidth-o),l=Math.round(e.clientHeight-a),f=er(u.width),c=er(u.height);f&&(o=f-s);c&&(a=c-l)}e.style.width=o+"px";e.style.height=a+"px";e.width=Math.round(o*i);e.height=Math.round(a*i);n||t.scale(i,i);bn()}function nr(e,t,n){var r=Math.max(n-e,0),i=Math.max(1e-4,t-e);return Math.min(1,r/i)}function rr(e,t,n){return e*(1-n)+t*n}function ir(e){return e>.15?rr(.75,1,nr(.15,.2,e)):e>.08?rr(.4,.75,nr(.08,.15,e)):rr(.2,.4,nr(.01,.08,e))}function or(e){var t=null;if(e)if("string"==typeof e){if(!(t=document.getElementById(e)))throw new Error("container element not found with id: "+e)}else{if("object"!=typeof e||!e||void 0===e.parentNode)throw new Error("container must be valid DOM element or element id");t=e}return t}function ar(e,t,n){var r=u(),i=Date.now(),o=!1,a=!0;return{update:function(){var u=Date.now(),s=t(u-i);i=u;if(o=o||s){var l=n();if(l){var f=l.canvas;l.webgl&&(f=l.webglCanvas);if(f&&f.clientWidth>0&&f.clientHeight>0){o=!1;a&&e(!0,!1,r)}}}else e(!1,!1,r)},redraw:function(e){o=!0;var t=e||u();r.all||(r.all=t.all);r.positions||(r.positions=t.positions);r.shadow||(r.shadow=t.shadow);r.textures||(r.textures=t.textures);r.colours||(r.colours=t.colours)},allowDraw:function(e){e&&!a&&(o=!0);a=e}};function u(){return{all:!0,colours:!0,textures:!0,positions:!0,shadow:!0}}}function ur(e,t){var n=!0;return{rebuild:t,animate:function(t){var r=e(t,n);n=!1;return r}}}function sr(e){var t=[],n=[];return{push:function(e,r){if(e){e.queue=r;r?n.push(e):t.push(e)}},cancel:function(){t=[];n=[];e()},animate:function(r,i){var o=!1,a=!1;if(t.length>0){var u=t;t=[];for(var s=0;s<u.length;s++){var l=u[s].rebuild;if(u[s].animate(r)){a=a||u[s].queue;t.push(u[s])}e(l)}o=!0}if(!a&&n.length>0){t.push(n.shift());o=!0}i&&(o=o||i.animated());return o}}}function fr(e,t){var n,r,i,o=null;return function(a,u,s){var l=t();if(l===a||o&&r===a);else{n=l;r=a;i=0;if(!o){o=ur((function(e){i=Math.min(u,i+e);t(u<=0?r:n+(r-n)*i/u);var a=i<u;if(!a){o=null;R(s)}return a}));e.push(o,!1)}}}}var cr=!1;function dr(e,t){for(var n=e.replace(/^\s*|\s*$/g,"").split(/[(\s*,\s*)|(\s+)]/),r=0;r<n.length;r++)t(n[r])}function hr(){var e={};function t(t,n,r){dr(t,(function(t){e[t]||(e[t]=[]);e[t].push({handler:n,context:r})}))}function n(e,n,r){t(e,n,r)}function r(t,n){t?dr(t,(function(t){if(n){if(e[t]){for(var r=[],i=0;i<e[t].length;i++)n!==e[t][i].handler&&r.push(e[t][i]);e[t]=r}}else e[t]=[]})):e={}}function i(e,t){r(e,t)}function o(t){if(cr)return!1;var n=t[0],r=!1;if(e)for(var i=2,o=void 0;i--;){var a=i?n:"all",u=i?t.slice(1):t;if(e[a]){var s=e[a].slice(0);for(o=0;o<s.length;o++){var l=s[o];try{r=l.handler.apply(l.context||this,u)||r}catch(e){c(n,e)}}}}return r}function a(t){var n=!1,r=Array.prototype.slice.call(t);e&&(n=o(r));return n}function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return a(e)}function s(){return f}var l=10,f=[];function c(e,t){var n=(new Date).toString()+" Function bound to '"+e+"' threw error: "+t.toString();u("error",n,t);m(n);f.push(n);f.length>l&&f.shift()}function d(e){cr=e}return{bind:n,getErrors:s,suppress:d,trigger:u,unbind:i}}var vr=[0,0],pr=[];function gr(e){if(vr[0]){vr[0]=0;e.setLineDash(pr);e.lineCap="butt"}}function mr(e){return!!e&&"solid"!==e&&"flow"!==e}function yr(e,t,n,r,i){void 0===i&&(i=!1);var o,a;if("dotted"===r){o=.5;a=2*n}else a=(o=Math.max(2,2*n))/2;var u=Math.round(i?t/(o+a):(t+a)/(o+a));if(u>1&&(a=i?(t-u*o)/u:(t-u*o)/(u-1))>0){e.lineCap=o>1?"butt":"round";vr[0]=o;vr[1]=a;e.setLineDash(vr)}return{dash:o,gap:a}}function br(e){var t=0,n=0,r=[],i={bg:!1,gh:!1,anchorBuffer:e,dirty:0,positionIndex:[-1,-1,-1],hiddenByGenerator:!1,isHitTested:!0,goToBeginning:function(){n=0},reset:function(){t=0;n=0;i.hiddenByGenerator=!1},getNext:function(){return r[n++]},getPrevious:function(){return n>0?r[n-1]:null},add:function(e){r[t++]=e;i.dirty=t;n++},forEach:function(e){for(var n=0;n<t;n++)e(r[n])},setAnchorPosition:function(n,r,o,a){var u=i.positionIndex[a];if(-1===u){u=e.getUsedSize();i.positionIndex[a]=u;e.add()}var s=e.getData();s[u]=n;s[u+1]=r;s[u+2]=o;i.dirty=t},getAnchorPosition:function(e){var t=i.positionIndex[e],n=i.anchorBuffer.getData();return{x:n[t],y:n[t+1]}},getAnchorAngle:function(e){var t=i.positionIndex[e];return i.anchorBuffer.getData()[t+2]}};return i}function xr(e,t,n,r,i){e[0]=t;e[1]=n;e[2]=0;var o=r.anchorBuffer.getData();if(i>-1){var a=r.positionIndex[i];if(a>-1){var u=o[a+2];if(u){var s=Math.sin(-u),l=Math.cos(-u);e[0]=t*l+n*s;e[1]=n*l-t*s}e[0]+=o[a];e[1]+=o[a+1];e[2]=u}}}function wr(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=n;e[4]=t;e[5]=i;e[6]=r;e[7]=i;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var l=u[s],f=u[s+1],c=u[s+2];if(c){var d=Math.sin(-c),h=Math.cos(-c),v=t*h+n*d,p=n*h-t*d;e[0]=v;e[1]=p;v=r*h+n*d;p=n*h-r*d;e[2]=v;e[3]=p;v=t*h+i*d;p=i*h-t*d;e[4]=v;e[5]=p;v=r*h+i*d;p=i*h-r*d;e[6]=v;e[7]=p}e[0]+=l;e[1]+=f;e[2]+=l;e[3]+=f;e[4]+=l;e[5]+=f;e[6]+=l;e[7]+=f}}}function Ar(e,t,n,r,i,o,a){e[0]=t;e[1]=n;e[2]=r;e[3]=i;e[4]=0;var u=o.anchorBuffer.getData();if(a>-1){var s=o.positionIndex[a];if(s>-1){var l=u[s],f=u[s+1],c=u[s+2];e[0]+=l;e[1]+=f;e[2]+=l;e[3]+=f;e[4]=c}}}var Mr=15,Ir=30;function Er(e,t,n,r){var i=e*Mr*t;return(i=xe(e)*Math.min(16*n,Math.abs(i)))*(r/1e3)%n}function Cr(e,t,n,r,i,o){var a=Math.max(Ir*i,3*n)/3,u=2*a,s=-(t/2-a+Er(r,i,u+a,o));e.lineDashOffset=s;e.setLineDash([u,a]);return s}function kr(e,t,n,r){return e+n<0||e-n>r.scale(r.width())||(t+n<0||t-n>r.scale(r.height()))}function Sr(e,t,n,r,i){return e>i.scale(i.width())||n<0||(t>i.scale(i.height())||r<0)}function Lr(e,t,n,r,i,o){var a=i/2;return e+a<0&&n+a<0||(t+a<0&&r+a<0||(e-a>o.scale(o.width())&&n-a>o.scale(o.width())||t-a>o.scale(o.height())&&r-a>o.scale(o.height())))}var Tr=new Float32Array(3);function Rr(e,t,n,r,i,o,a,u,s,l){xr(Tr,t.x,t.y,t.a,t.anchorIndex);var f,c,d,h,v,p=n.x(Tr[0]),g=n.y(Tr[1]),m=n.worldToViewDistance(t.r);if(r){f=t.bc&&t.sc;c=void 0;d=n.sw(t.bw);v=0}else{f=t.bc;c=t.bc2;var y=nn(t.a,o,a);if(y){f=un(f,y);c&&(c=un(c,y))}d=n.w(t.bw);h=t.ls;v=t.flowVelocity}var b=u.zoom&&u.zoom.adaptiveStyling;d=Math.max(b?ir(n.getZoomScale()):1,d);u._rendering&&u._rendering.canvasSkipItemsOutOfView&&kr(p,g,m+d,n)||Zr(e,p,g,m,t.sa,t.ea,f,c,d,h,t.off,u,s,l,v)}function Zr(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){e.lineWidth=s;var p,g=o-i,m=0;if("flow"===l||mr(l)){var y=g*r;if("flow"===l){m=Cr(e,y,s,v*xe(f),d,h)}else p=yr(e,y,s,l)}if(u){var b=c.linkStyle.transition,x=void 0,w=void 0;if(f>0){x=a;w=u}else{x=u;w=a}if(0===b){Gr(e,t,n,r,i,o,Or(e,t,n,r,i,o,.5,x,.5,w))}else Br(e,t,n,r,i,x,o,w,b,p,v,m)}else Gr(e,t,n,r,i,o,a);if("flow"===l){e.lineDashOffset=0;e.setLineDash([])}else l&&gr(e)}function Br(e,t,n,r,i,o,a,u,s,l,f,c){var d=a-i,h=Jt(o);3===h.length&&h.push(1);var v=Jt(u);3===v.length&&v.push(1);var p=0;s<1&&(p=d*(1-s)/2);var g=d-2*p,m=p*r,y=0;void 0!==f&&(y+=c);s<1&&Gr(e,t,n,r,i,i+p,o,y);(void 0!==f||l)&&(y+=m);for(var b=Math.ceil(g/(Math.PI/2)),x=(v[0]-h[0])/b,w=(v[1]-h[1])/b,A=(v[2]-h[2])/b,M=(v[3]-h[3])/b,I=h[0],E=h[1],C=h[2],k=h[3],S=1/r,L=Ut(I,E,C,k),T=g/b,R=0;R<b;R++){var Z=i+p+R*T-.25*S,B=i+p+(R+1)*T;R===b-1&&(B+=.25*S);I+=x;E+=w;C+=A;k+=M;Gr(e,t,n,r,Z,B,Or(e,t,n,r,Z,B,0,L,1,L=Ut(Math.floor(I),Math.floor(E),Math.floor(C),k)),y);if(void 0!==f||l){y+=T*r}}s<1&&Gr(e,t,n,r,a-p,a,u,y)}function Or(e,t,n,r,i,o,a,u,s,l){var f=t+r*Math.cos(i),c=t+r*Math.cos(o),d=n+r*Math.sin(i),h=n+r*Math.sin(o),v=e.createLinearGradient(f,d,c,h);v.addColorStop(a,u);v.addColorStop(s,l);return v}function Gr(e,t,n,r,i,o,a,u){e.beginPath();e.strokeStyle=a;u&&(e.lineDashOffset=u);e.arc(t,n,r,i,o,!1);e.stroke();e.closePath();u&&(e.lineDashOffset=0)}function Yr(e,t,n){if(n)return t>=0?Math.max(1,t):-1;var r=4;return t>0?e-t<r?Math.max(.2,t*((e-t)/r)):Math.max(1,t):-1}var Fr=2*Math.PI,Dr=new Float32Array(3);function Pr(e,t,n,r,i,o,a,u){var s,l=n.worldToViewDistance(t.r);s=r?n.sw(t.bw):n.worldToViewDistance(t.bw);var f=nn(t.a,o,a);xr(Dr,t.x,t.y,t.a,t.anchorIndex);var c=n.x(Dr[0]),d=n.y(Dr[1]);if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!kr(c,d,l,n)){s=t.noMinBorderWidth?Math.max(1,s):Yr(l,s,r);r?zr(e,c,d,l,t.bc&&t.sc,s,t.fc&&t.sc,t.fi):zr(e,c,d,l,f?un(t.bc,f):t.bc,s,f?un(t.fc,f):t.fc,t.fi,t.bs)}}function zr(e,t,n,r,i,o,a,u,s){void 0===s&&(s=void 0);e.fillStyle=u?a:Xt.transparent;if(o>=0){mr(s)&&yr(e,Fr*r,o,s,!0);e.lineWidth=o;e.strokeStyle=i}e.beginPath();e.arc(t,n,r,0,Fr,!1);e.closePath();u&&e.fill();if(o>=0){e.stroke();s&&gr(e)}}var Vr=new Float32Array(5);function Xr(e,t,n,r,i,o,a,u,s,l){Ar(Vr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);var f=n.x(Vr[0]),c=n.y(Vr[1]),d=n.x(Vr[2]),h=n.y(Vr[3]),v=u.zoom&&u.zoom.adaptiveStyling?ir(n.getZoomScale()):1,p=Math.max(v,r?n.sw(t.w):n.w(t.w));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Lr(f,c,d,h,p,n))if(r)Wr(e,f,c,d,h,t.c&&t.sc,null,p,void 0,u,s,0,0);else{var g=nn(t.a,o,a),m=t.c,y=t.c2;if(g){m=un(m,g);y&&(y=un(t.c2,g))}Wr(e,f,c,d,h,m,y,p,t.ls,u,s,l,t.flowVelocity)}}function Wr(e,t,n,r,i,o,a,u,s,l,f,c,d){e.lineWidth=u;if(a){var h=e.createLinearGradient(t,n,r,i),v=l.linkStyle.transition;h.addColorStop((1-v)/2,o);h.addColorStop((1+v)/2,a);e.strokeStyle=h}else e.strokeStyle=o;if("flow"===s||mr(s)){var p=r-t,g=i-n,m=Math.sqrt(p*p+g*g);"flow"===s?Cr(e,m,u,d,f,c):yr(e,m,u,s)}e.beginPath();e.moveTo(t,n);e.lineTo(r,i);e.stroke();e.closePath();if("flow"===s){e.lineDashOffset=0;e.setLineDash([])}else s&&gr(e)}var Ur=new Float32Array(5);function Nr(e,t,n,r,i,o,a,u){var s=r?n.sw(t.bw):n.w(t.bw);xr(Ur,0,0,t.a,t.anchorIndex);var l,f,c,d,h,v,p=t.anchorIndex>-1&&Ur[2],g=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(p){l=n.worldToViewDistance(t.x1);f=n.worldToViewDistance(t.y1);c=n.worldToViewDistance(t.x2);d=n.worldToViewDistance(t.y2);h=n.x(Ur[0]);v=n.y(Ur[1]);if(g&&Sr(l+h,f+v,c+h,d+v,n))return}else{Ar(Ur,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);l=n.x(Ur[0]);f=n.y(Ur[1]);c=n.x(Ur[2]);d=n.y(Ur[3]);if(g&&Sr(l,f,c,d,n))return}if(s>=0){s=Yr(Math.min(c-l,d-f)/2,s,r)}if(r)jr(e,l,f,c,d,t.bc&&t.sc,s,t.fc&&t.sc,t.fi,void 0,p,h,v);else{var m=nn(t.a,o,a);jr(e,l,f,c,d,m?un(t.bc,m):t.bc,s,m?un(t.fc,m):t.fc,t.fi,t.bs,p,h,v)}}function jr(e,t,n,r,i,o,a,u,s,l,f,c,d){void 0===l&&(l=void 0);var h=t,v=n,p=r,g=i;if(f){e.save();e.translate(c,d);e.rotate(f)}else if(c||d){h+=c;v+=d;p+=c;g+=d}if(s){e.fillStyle=u;e.fillRect(h,v,p-h,g-v)}if(a>=0)if(mr(l)){var m=a/2;Wr(e,h-m,v,p+m,v,o,null,a,l,void 0,0,0,0);Wr(e,p,v-m,p,g+m,o,null,a,l,void 0,0,0,0);Wr(e,p+m,g,h-m,g,o,null,a,l,void 0,0,0,0);Wr(e,h,g+m,h,v-m,o,null,a,l,void 0,0,0,0)}else{e.lineWidth=a;e.strokeStyle=o;e.strokeRect(h,v,p-h,g-v)}f&&e.restore()}var Kr=new Float32Array(5);function Hr(e,t,n,r,i,o,a,u){xr(Kr,0,0,t.a,t.anchorIndex);var s,l,f,c,d,h,v=t.anchorIndex>-1&&Kr[2],p=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(v){s=n.worldToViewDistance(t.x1);l=n.worldToViewDistance(t.y1);f=n.worldToViewDistance(t.x2);c=n.worldToViewDistance(t.y2);d=n.x(Kr[0]);h=n.y(Kr[1]);if(p&&Sr(s+d,l+h,f+d,c+h,n))return}else{Ar(Kr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);s=n.x(Kr[0]);l=n.y(Kr[1]);f=n.x(Kr[2]);c=n.y(Kr[3]);if(p&&Sr(s,l,f,c,n))return}if(t.vx){s-=t.vx;l-=t.vx;f+=t.vx;c+=t.vx}if(r)jr(e,s,l,f,c,t.sc,-1,t.sc,!0,void 0,v,d,h);else{var g=nn(t.a,o,a),m=e.globalAlpha;e.globalAlpha=null===g?1:g;_r(e,"ci"===t.s?i.getCutoutImage(t.u):i.get(t.u),s,l,f,c,t.s,v,d,h);e.globalAlpha=m}}function _r(e,t,n,r,i,o,a,u,s,l){if(t.isLoaded){var f=t.im;a&&t[a]&&(f=t[a]);if(u){e.save();e.translate(s,l);e.rotate(u)}e.imageSmoothingQuality="high";e.drawImage(f,n,r,i-n,o-r);u&&e.restore()}}var Jr=new Float32Array(5);function Qr(e,t,n,r,i,o,a,u){xr(Jr,0,0,t.a,t.anchorIndex);var s,l,f,c,d,h,v=t.anchorIndex>-1&&Jr[2],p=u._rendering&&u._rendering.canvasSkipItemsOutOfView;if(v){s=n.worldToViewDistance(t.x1);l=n.worldToViewDistance(t.y1);f=n.worldToViewDistance(t.x2);c=n.worldToViewDistance(t.y2);d=n.x(Jr[0]);h=n.y(Jr[1]);if(p&&Sr(s+d,l+h,f+d,c+h,n))return}else{Ar(Jr,t.x1,t.y1,t.x2,t.y2,t.a,t.anchorIndex);s=n.x(Jr[0]);l=n.y(Jr[1]);f=n.x(Jr[2]);c=n.y(Jr[3]);if(p&&Sr(s,l,f,c,n))return}if(r)qr(e,s,l,f,c,n.worldToViewDistance(t.r),t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi,v,d,h);else{var g=nn(t.a,o,a);qr(e,s,l,f,c,n.worldToViewDistance(t.r),g?un(t.bc,g):t.bc,n.w(t.bw),g?un(t.fc,g):t.fc,t.fi,v,d,h)}}function qr(e,t,n,r,i,o,a,u,s,l,f,c,d){var h=t,v=n,p=r,g=i;if(f){e.save();e.translate(c,d);e.rotate(f)}else if(c||d){h+=c;v+=d;p+=c;g+=d}e.beginPath();e.moveTo(h+o,v);e.lineTo(p-o,v);e.arcTo(p,v,p,v+o,o);e.lineTo(p,g-o);e.arcTo(p,g,p-o,g,o);e.lineTo(h+o,g);e.arcTo(h,g,h,g-o,o);e.lineTo(h,v+o);e.arcTo(h,v,h+o,v,o);e.closePath();if(l){e.fillStyle=s;e.fill()}if(u>=0){e.lineWidth=Math.max(1,u);e.strokeStyle=a;e.stroke()}f&&e.restore()}var $r=new Float32Array(3);function ei(e,t,n,r,i,o,a,u){var s;xr($r,0,0,t.a,t.anchorIndex);var l=n.x($r[0]),f=n.y($r[1]),c=n.worldToViewDistance(t.x1),d=n.worldToViewDistance(t.y1),h=n.worldToViewDistance(t.x2),v=n.worldToViewDistance(t.y2),p=u.linkStyle&&u.linkStyle.inline,g=p&&$r[2],m=Math.max(Math.abs(c),Math.abs(d),Math.abs(h),Math.abs(v));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Sr(l-m,f-m,l+m,f+m,n))if(r){s=n.worldToViewDistance(t.fs)*t.pf;t.back&&jr(e,c,d,h,v+s,t.sc,-1,t.sc,!0,void 0,g,l,f)}else{var y=void 0,b=n.worldToViewDistance(t.x),x=n.worldToViewDistance(t.y),w=t.xc,A=n.worldToViewDistance(t.fs);s=A*t.pf;p||(x+=n.worldToViewDistance(t.yOffset));var M=nn(t.a,o,a),I=M?un(t.c,M):t.c,E=1;if(u.zoom&&u.zoom.adaptiveStyling){if(!t.isfi&&A<=5){if(0===(E=Math.max(0,A-3)/2))return;I=un(I,E)}}else if(t.w&&(A<=3||A<wn.browserMinimumFontSize)){var C=n.worldToViewDistance(t.w),k=t.isSel?t.bc:un(t.c,.4);k=M?un(k,M):k;w&&(b-=Math.floor(C/2));t.back&&t.bc!==Xt.textback&&jr(e,b,x-A,b+C,x+s,y=M?un(t.bc,M):t.bc,-1,y,!0,void 0,g,l,f);jr(e,b,x-A,b+C,x+s,k,-1,k,!0,void 0,g,l,f);return}t.back&&jr(e,c,d,h,v+s,y=un(t.bc,M?M*E:E),-1,y,!0,void 0,g,l,f);ti(e,b,x+s/2,t.t,I,A,t.bo,t.ff,w,g,l,f)}}function ti(e,t,n,r,i,o,a,u,s,l,f,c){In(e,o,a,u);e.fillStyle=i;e.textAlign=s?"center":"left";var d=t,h=n;if(l){e.save();e.translate(f,c);e.rotate(l)}else if(f||c){d+=f;h+=c}e.fillText(r,d,h);l&&e.restore()}var ni=1,ri=new Float32Array(3);function ii(e,t,n,r,i,o,a,u){xr(ri,0,0,t.a,t.anchorIndex);var s=n.worldToViewDistance(t.x1),l=n.worldToViewDistance(t.y1),f=n.worldToViewDistance(t.x2),c=n.worldToViewDistance(t.y2),d=n.worldToViewDistance(t.x3),h=n.worldToViewDistance(t.y3),v=n.x(ri[0]),p=n.y(ri[1]),g=t.anchorIndex>-1&&ri[2],m=Math.min(s,Math.min(f,d)),y=Math.min(l,Math.min(c,h)),b=Math.max(s,Math.max(f,d)),x=Math.max(l,Math.max(c,h));if(!(u._rendering&&u._rendering.canvasSkipItemsOutOfView)||!Sr(m+v,y+p,b+v,x+p,n))if(r)oi(e,s,l,f,c,d,h,t.bc&&t.sc,n.sw(t.bw),t.fc&&t.sc,t.fi,g,v,p);else{var w=nn(t.a,o,a);oi(e,s,l,f,c,d,h,w?un(t.bc,w):t.bc,n.w(t.bw),w?un(t.fc,w):t.fc,t.fi,g,v,p)}}function oi(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=t,p=n,g=r,m=i,y=o,b=a;if(c){e.save();e.translate(d,h);e.rotate(c)}else if(d||h){v+=d;p+=h;g+=d;m+=h;y+=d;b+=h}if(Math.abs(g-v)>ni||Math.abs(m-p)>ni){e.beginPath();e.moveTo(v,p);e.lineTo(g,m);e.lineTo(y,b);e.lineTo(v,p);e.closePath();if(f){e.fillStyle=l;e.fill()}if(s>=0){e.lineWidth=Math.max(1,s);e.strokeStyle=u;e.stroke()}}c&&e.restore()}var ai=50,ui=[[-.058808,.057624,.001176,8e-6],[-.056456,.052968,.003432,56e-6],[-.054152,.048456,.005544,152e-6],[-.051896,.044088,.007512,296e-6],[-.049688,.039864,.009336,488e-6],[-.047528,.035784,.011016,728e-6],[-.045416,.031848,.012552,.001016],[-.043352,.028056,.013944,.001352],[-.041336,.024408,.015192,.001736],[-.039368,.020904,.016296,.002168],[-.037448,.017544,.017256,.002648],[-.035576,.014328,.018072,.003176],[-.033752,.011256,.018744,.003752],[-.031976,.008328,.019272,.004376],[-.030248,.005544,.019656,.005048],[-.028568,.002904,.019896,.005768],[-.026936,408e-6,.019992,.006536],[-.025352,-.001944,.019944,.007352],[-.023816,-.004152,.019752,.008216],[-.022328,-.006216,.019416,.009128],[-.020888,-.008136,.018936,.010088],[-.019496,-.009912,.018312,.011096],[-.018152,-.011544,.017544,.012152],[-.016856,-.013032,.016632,.013256],[-.015608,-.014376,.015576,.014408],[-.014408,-.015576,.014376,.015608],[-.013256,-.016632,.013032,.016856],[-.012152,-.017544,.011544,.018152],[-.011096,-.018312,.009912,.019496],[-.010088,-.018936,.008136,.020888],[-.009128,-.019416,.006216,.022328],[-.008216,-.019752,.004152,.023816],[-.007352,-.019944,.001944,.025352],[-.006536,-.019992,-408e-6,.026936],[-.005768,-.019896,-.002904,.028568],[-.005048,-.019656,-.005544,.030248],[-.004376,-.019272,-.008328,.031976],[-.003752,-.018744,-.011256,.033752],[-.003176,-.018072,-.014328,.035576],[-.002648,-.017256,-.017544,.037448],[-.002168,-.016296,-.020904,.039368],[-.001736,-.015192,-.024408,.041336],[-.001352,-.013944,-.028056,.043352],[-.001016,-.012552,-.031848,.045416],[-728e-6,-.011016,-.035784,.047528],[-488e-6,-.009336,-.039864,.049688],[-296e-6,-.007512,-.044088,.051896],[-152e-6,-.005544,-.048456,.054152],[-56e-6,-.003432,-.052968,.056456],[-8e-6,-.001176,-.057624,.058808]],si=[[-.115264,.110592,.004608,64e-6],[-.106048,.092544,.013056,448e-6],[-.097216,.075648,.020352,.001216],[-.088768,.059904,.026496,.002368],[-.080704,.045312,.031488,.003904],[-.073024,.031872,.035328,.005824],[-.065728,.019584,.038016,.008128],[-.058816,.008448,.039552,.010816],[-.052288,-.001536,.039936,.013888],[-.046144,-.010368,.039168,.017344],[-.040384,-.018048,.037248,.021184],[-.035008,-.024576,.034176,.025408],[-.030016,-.029952,.029952,.030016],[-.025408,-.034176,.024576,.035008],[-.021184,-.037248,.018048,.040384],[-.017344,-.039168,.010368,.046144],[-.013888,-.039936,.001536,.052288],[-.010816,-.039552,-.008448,.058816],[-.008128,-.038016,-.019584,.065728],[-.005824,-.035328,-.031872,.073024],[-.003904,-.031488,-.045312,.080704],[-.002368,-.026496,-.059904,.088768],[-.001216,-.020352,-.075648,.097216],[-448e-6,-.013056,-.092544,.106048],[-64e-6,-.004608,-.110592,.115264]];function li(e,t){var n=ui[e];return n[0]*t[0]+n[1]*t[1]+n[2]*t[2]+n[3]*t[3]}function fi(e,t){if(e>=25&&7===t.length){var n=si[e-25];return n[0]*t[3]+n[1]*t[4]+n[2]*t[5]+n[3]*t[6]}var r=si[e];return r[0]*t[0]+r[1]*t[1]+r[2]*t[2]+r[3]*t[3]}var ci={num:ai,segmentDelta:li},di={num:ai/2,segmentDelta:fi};function hi(e,t,n){for(var r=0,i=0;i<n.num;i++){var o=n.segmentDelta(i,e),a=n.segmentDelta(i,t);r+=Math.sqrt(o*o+a*a)}return r}function vi(e,t,n){return n>1?e(t,3,n-1):e(t,0,n)}function pi(e,t,n){return.5===n?t:n<.5?2*t*n:t+2*(e-t)*(n-.5)}function gi(e,t){var n=mi(e[0],e[1],t),r=mi(e[1],e[2],t),i=mi(e[2],e[3],t),o=mi(n,r,t),a=mi(r,i,t),u=yi(e,0,t);return[e[0],n,o,u,a,i,e[3]]}function mi(e,t,n){return e+n*(t-e)}function yi(e,t,n){var r=1-n,i=r*r,o=n*n,a=3*i*n,u=3*r*o,s=o*n;return i*r*e[t]+a*e[t+1]+u*e[t+2]+s*e[t+3]}function bi(e,t,n){var r=1-n,i=n*n,o=3*r*(1-3*n),a=3*(2*n-3*i),u=3*i;return-3*r*r*e[t]+o*e[t+1]+a*e[t+2]+u*e[t+3]}function xi(e,t){return ue(e.x,e.y,t.x,t.y)}function wi(e,t,n,r){return(n-e)*(n-e)+(r-t)*(r-t)}function Ai(e,t,n,r,i,o,a,u,s,l){var f,c,d,h,v,p=t.bezier.xs.map(n.x),g=t.bezier.ys.map(n.y);if(r){f=t.bc&&t.sc;c=void 0;d=n.sw(t.bw);v=0}else{f=t.bc;c=t.bc2;var m=nn(t.a,o,a);if(m){f=un(f,m);c&&(c=un(c,m))}d=n.w(t.bw);h=t.ls;v=t.flowVelocity}var y=u.zoom&&u.zoom.adaptiveStyling;d=Math.max(y?ir(n.getZoomScale()):1,d);if(u._rendering&&u._rendering.canvasSkipItemsOutOfView){for(var b=1/0,x=-1/0,w=1/0,A=-1/0,M=0;M<p.length;M++){b=Math.min(b,p[M]);x=Math.max(x,p[M]);w=Math.min(w,g[M]);A=Math.max(A,g[M])}if(Sr(b,w,x,A,n))return}Mi(e,p,g,t.bezier.midpoint,f,c,d,h,u,s,l,v)}function Mi(e,t,n,r,i,o,a,u,s,l,f,c){e.lineWidth=a;"flow"===u?Cr(e,0,a,c,l,f):mr(u)&&yr(e,100,a,u);if(o&&o!==i){var d=s.linkStyle.transition;ki(e,t,n,Ci(e,t,n,r,(1-d)/2,i,(1+d)/2,o))}else ki(e,t,n,[i]);if("flow"===u){e.lineDashOffset=0;e.setLineDash([])}else u&&gr(e)}function Ii(e,t,n,r,i){var o=Math.atan2(t-i,e-r),a=ue(r,i,e,t)*Math.cos(o-n);return{x:r+a*Math.cos(n),y:i+a*Math.sin(n)}}function Ei(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v,p={x:t,y:n},g=Ii(r,i,o,t,n),m=Ii(a,u,o,t,n),y=0;if(l===a&&f===u)v=m;else{var b=Ii(l,f,o,t,n),x=xi(m,v={x:m.x+(b.x-m.x)/c,y:m.y+(b.y-m.y)/c}),w=s?g:p,A=xi(m,w);if(A<x){w.x=v.x;w.y=v.y;y=(x-A)/x}}var M=xi(p,g),I=e.createLinearGradient(p.x,p.y,g.x,g.y),E=xi(p,m)/M,C=xi(p,v)/M;I.addColorStop(Math.min(1,E),s?d:h);I.addColorStop(Math.min(1,C),s?h:d);return{gradient:I,undrawnFrac:y}}function Ci(e,t,n,r,i,o,a,u){var s=[],l=4===t.length?1:2,f=r<1?0:3,c=vi(bi,t,r),d=vi(bi,n,r),h=Math.atan2(d,c),v=pi(l,r,i),p=vi(yi,t,v),g=vi(yi,n,v),m=pi(l,r,a),y=vi(yi,t,m),b=vi(yi,n,m),x=vi(yi,t,r),w=vi(yi,n,r);if(4===t.length||m<=1||v>=1){v>=1&&s.push(o);s.push(Ei(e,t[f],n[f],t[f+3],n[f+3],h,p,g,!0,y,b,1,o,u).gradient);m<=1&&7===t.length&&s.push(u)}else if(r<1){var A=Ei(e,t[f],n[f],t[f+3],n[f+3],h,p,g,!0,x,w,.5,o,u);s.push(A.gradient);if(A.undrawnFrac){var M=Math.atan2(n[6]-n[3],t[6]-t[3]);s.push(Ei(e,t[3],n[3],t[6],n[6],M,y,b,!1,t[3],n[3],A.undrawnFrac,o,u).gradient)}else s.push(u)}else{if((A=Ei(e,t[f],n[f],t[f+3],n[f+3],h,y,b,!1,x,w,.5,o,u)).undrawnFrac){M=Math.atan2(n[3]-n[0],t[3]-t[0]);s.push(Ei(e,t[0],n[0],t[3],n[3],M,p,g,!0,t[3],n[3],A.undrawnFrac,o,u).gradient)}else s.push(o);s.push(A.gradient)}return s}function ki(e,t,n,r){e.beginPath();e.strokeStyle=r[0];e.moveTo(t[0],n[0]);e.bezierCurveTo(t[1],n[1],t[2],n[2],t[3],n[3]);if(7===t.length){if(r.length>1){e.stroke();e.lineDashOffset+=hi(t,n,ci);e.beginPath();e.strokeStyle=r[1];var i=le(t[4]-t[3],n[4]-n[3]);e.moveTo(t[3]-i[0]/2,n[3]-i[1]/2)}e.bezierCurveTo(t[4],n[4],t[5],n[5],t[6],n[6])}e.stroke();e.lineDashOffset&&(e.lineDashOffset=0)}function Si(e){return e}var Li={getZoomScale:function(){return 1},height:function(){return 1/0},scale:Si,sw:Si,viewToWorldDistance:Si,w:Si,width:function(){return 1/0},worldToViewDistance:Si,x:Si,y:Si};function Ti(e){var t={};Object.keys(e).forEach((function(n){t[hn[n]]=e[n]}));return t}var Ri,Zi,Bi=Ti({arc:Rr,circle:Pr,image:Hr,line:Xr,rect:Nr,roundrect:Qr,text:ei,triangle:ii,bezier:Ai});function Oi(e,t,n,r,i,o,a,u,s,l,f,c){var d,h;if(!n.a.hiddenByGenerator){var v=void 0;if(a){var p=a.shadowType;v=i?n.sc&&(!p||p>-1)&&(null===(d=n.a)||void 0===d?void 0:d.isHitTested):!p||p<1}else v=!i||n.sc&&(null===(h=n.a)||void 0===h?void 0:h.isHitTested);if(v){var g=t&&t[n.p]||Bi[n.p];if(g){var m=n.a;g(e,n,r,i,o,m.bg?u:1,m.gh?s:1,l,f,c)}}}}function Gi(e){e.save();e.setTransform(1,0,0,1,0,0);e.clearRect(0,0,e.canvas.width,e.canvas.height);e.restore()}function Yi(e,t,n){e.globalAlpha=n;e.drawImage(t,0,0,t.width,t.height);e.globalAlpha=1}function Fi(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v,p,g,m=n,y=t,b=!1,x="boolean"==typeof d;a&&Gi(p=a.getContext("2d"));var w=n?n.settings().zoom:1,A=performance.now();function M(e,r){v=e;s&&e.blatOverview&&!l&&s(t,n);b=e.overview||!1;if(a&&r.bg){var i=!e.bg;if(i&&g){Yi(t,a,f);Gi(p)}g=!1;y=i?t:p}m=e.useView&&n?n:Li}function I(e){if(!u||b){g=!0;var t=!0;x&&!o&&(t=d?m!==Li:m===Li);t&&Oi(y,h,e,m,o,r,v,f,c,i,w,A)}}e.forEach(I,M,!1,!1)}function Di(e,t,n,r){var i,o,a=tn(),u=!0,s=5,l=null,f={webgl:[0,0,0,0],rgb:void 0},c=(i={},o={},{getColour:function(e){if(!e)return f;var t=i[e];if(!t){var n=tn(o);t={rgb:n,webgl:ln(n,!0)};i[e]=t;o[n]=e}return t},getId:function(e){return o[e]||null}});function d(i,o,f,h){var v;if(t.webgl)v=r.drawShadowCanvas(Math.floor(i),Math.floor(o));else{if(u){l&&f.drawShadowCanvas(t,n);f.drawShadowCanvas(e,n);u=!1}v=e.getImageData(Math.floor(i),Math.floor(o),1,1).data}var p=Wt(v[0],v[1],v[2]);if(p===a)return null;var g=c.getId(p);if(g)return g;if(r)return null;var m=h||1;return m>s?null:i+m>s&&o+m>s?d(i-1,o-1,f,++m):d(i+1,o+1,f,++m)}function h(){u=!0}function v(e){l=e}function p(){return c}
return{dirty:h,debugCanvas:v,getShadowColourMap:p,test:d}}function Pi(e,t,n){var r=new Map,i=ie({},e,{isStart:!0,isGroup:!0}),o=ie({},e,{isStart:!1,isGroup:!0});i.endMarker=o;o.startMarker=i;return{insert:function(e){n.insertBefore(o,e)},getStartMarker:function(){return i},getEndMarker:function(){return o},getValue:function(){return e},getParent:function(){return t},getChildren:function(){return r}}}function zi(e){var t=new Map;function n(n,r){var i=Pi(n,r,e);if(r){r.getChildren().set(n.id,i);e.insertBefore(r.getEndMarker(),i.getStartMarker());e.insertAfter(i.getStartMarker(),i.getEndMarker())}else{t.set(n.id,i);e.append(i.getStartMarker());e.append(i.getEndMarker())}return i}function r(e){var n;return e.every((function(e){return!!(n=n?n.getChildren().get(e):t.get(e))}))}function i(e){var n,r;if(!e.every((function(e){(n=n?n.getChildren().get(e):t.get(e))&&(r=e);return!!n})))throw new Error("Path not found: "+e+". Last entry: "+r);return n}return{append:n,hasPath:r,get:i}}function Vi(){var e=null,t=null;function n(e){l(t,e)}function r(){e=null;t=null}function i(n){var r=n;r._prev?r._prev._next=r._next:e=r._next;r._next?r._next._prev=r._prev:t=r._prev}function o(){return e}function a(){return t}function u(e){return e._next}function s(e){return e._prev}function l(n,r){if(!r||"object"!=typeof r)throw new Error("Object Required");var i=r;i._prev=n||null;if(n){i._next=n._next;n._next=i}else{i._next=e;e=i}i._next?i._next._prev=i:t=i}function f(e,t){e?l(e._prev||null,t):n(t)}function c(t){for(var n=e;n;n=n._next){var r=t(n);r&&(n=r)}}function d(){for(var t=[],n=e;n;n=n._next)t.push(n);return t}return{append:n,clear:r,forEach:c,getFirst:o,getLast:a,getNext:u,getPrevious:s,insertAfter:l,insertBefore:f,remove:i,toArray:d}}!function(e){e[e.None=0]="None";e[e.Line=1]="Line";e[e.Arc=2]="Arc";e[e.Bezier=3]="Bezier"}(Ri||(Ri={}));!function(e){e[e.MoveTo=0]="MoveTo";e[e.LineTo=1]="LineTo"}(Zi||(Zi={}));function Xi(e){return{a:null,arrowhead:Ri.None,back:!1,bc:void 0,bc2:void 0,bezier:void 0,bo:!1,bs:void 0,bw:0,c:void 0,c2:void 0,custom:void 0,id:e,isDonut:!1,ea:0,fc:void 0,ff:void 0,fi:!1,flowVelocity:0,fs:0,hi:!1,isfi:!1,isSel:!1,ls:void 0,noMinBorderWidth:!1,off:0,p:"",pf:0,r:0,anchorIndex:0,s:null,sa:0,sc:"",t:"",u:"",vx:0,w:0,wbc:void 0,wbc2:void 0,wc:void 0,wc2:void 0,wfc:void 0,wsc:void 0,wmargin:0,x:0,x1:0,x2:0,x3:0,xc:!1,y:0,y1:0,y2:0,y3:0,yOffset:0}}function Wi(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v){var p=t(f,hn.arc);p.x=n;p.y=r;p.r=i;p.sa=o;p.ea=a;p.bw=l;p.ls=c;p.anchorIndex=-1;if(u!==p.bc){p.bc=u;p.wbc=ln(u)}if(s){if(s!==p.bc2){p.bc2=s;p.wbc2=ln(s)}}else{p.bc2=void 0;p.wbc2=void 0}p.isDonut=!!d;p.anchorIndex=d?0:-1;p.off=h;if(v){p.ls="flow";p.flowVelocity=v.velocity||0}else{p.ls=c;p.flowVelocity=0}e(p)}return n}function Ui(e,t){function n(n,r,i,o,a,u,s){var l=t(a,hn.bezier);l.bezier=n;l.bw=o;l.anchorIndex=-1;if(r!==l.bc){l.bc=r;l.wbc=ln(r)}if(i){if(i!==l.bc2){l.bc2=i;l.wbc2=ln(i)}}else{l.bc2=void 0;l.wbc2=void 0}l.bw=o;if(s){l.ls="flow";l.flowVelocity=s.velocity||0}else{l.ls=u;l.flowVelocity=0}e(l)}return n}function Ni(e,t){function n(n,r,i,o,a,u,s,l,f,c,d){var h=t(l,hn.circle);h.x=n;h.y=r;h.anchorIndex=f;h.r=i;h.bw=a;h.fi=s;h.bs=c;h.noMinBorderWidth=!!d;if(o!==h.bc){h.bc=o;h.wbc=ln(o)}if(u!==h.fc){h.fc=u;h.wfc=ln(u)}e(h)}return n}function ji(e,t){function n(n,r,i,o,a,u,s,l,f,c){var d=t(u,hn.image);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=s;d.u=a;d.s=l;d.vx=f;d.hi=c;e(d)}return n}function Ki(e,t){function n(n,r,i,o,a,u,s,l,f,c){var d=t(l,hn.line);d.x1=n;d.y1=r;d.x2=i;d.y2=o;d.anchorIndex=-1;if(a!==d.c){d.c=a;d.wc=ln(a)}if(u){if(u!==d.c2){d.c2=u;d.wc2=ln(u)}}else{d.c2=void 0;d.wc2=void 0}d.w=s;if(c){d.ls="flow";d.flowVelocity=c.velocity||0}else{d.ls=f;d.flowVelocity=0}e(d)}return n}function Hi(e,t){function n(n,r,i,o,a,u,s,l,f,c,d){var h=t(f,hn.rect);h.x1=n;h.y1=r;h.x2=i;h.y2=o;h.bw=u;h.fi=l;h.bs=d;h.anchorIndex=c;if(a!==h.bc){h.bc=a;h.wbc=ln(a)}if(s!==h.fc){h.fc=s;h.wfc=ln(s)}e(h)}return n}function _i(e,t){function n(n,r,i,o,a,u,s,l,f,c,d){var h=t(c,hn.roundrect);h.x1=n;h.y1=r;h.x2=i;h.y2=o;h.r=a;h.bw=s;h.fi=f;h.anchorIndex=d;if(u!==h.bc){h.bc=u;h.wbc=ln(u)}if(l!==h.fc){h.fc=l;h.wfc=ln(l)}e(h)}return n}function Ji(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v,p,g,m,y,b,x,w,A){void 0===x&&(x=!1);var M=t(s,hn.text);M.x=n;M.y=r;M.yOffset=0|(A||0);M.t=i;M.anchorIndex=l;M.fs=a;M.bo=u;M.ff=f;M.wmargin=w||0;M.xc=c;M.w=d;M.isfi=h;M.isSel=x;if(o!==M.c){M.c=o;M.wc=ln(o)}M.x1=p;M.y1=g;M.x2=m;M.y2=y;M.back=v;if(v&&b!==M.bc){M.wbc=ln(b);M.bc=b}M.pf=.08;e(M)}return n}function Qi(e,t){function n(n,r,i,o,a,u,s,l,f,c,d,h,v){var p=t(d,hn.triangle);p.x1=n;p.y1=r;p.x2=i;p.y2=o;p.x3=a;p.y3=u;p.anchorIndex=h;p.bw=l;p.fi=c;p.arrowhead=v;if(s!==p.bc){p.bc=s;p.wbc=ln(s)}if(f!==p.fc){p.fc=f;p.wfc=ln(f)}e(p)}return n}var qi=[8,16,32,64,128,256,512,1024,2048,4096],$i=3;function eo(){var e=8,t=new Float32Array(e*e),n=0;return{getData:function(){return t},add:function(){if(n+$i>t.length){var r=t;e=to(n+$i);(t=new Float32Array(e*e)).set(r)}n+=$i},getUsedSize:function(){return n},getTextureSize:function(){return e}}}function to(e){for(var t=Math.ceil(Math.sqrt(e)),n=8,r=1,i=qi.length;r<i&&!(t<=n);r++)n=qi[r];return n}function no(e,t,r){var i,o,a,u,s,l,f,c,d,h,v=e||{},p={isContentLayer:!1,alwaysUpdate:!1},g=D(t,p),m=Object.keys(g),y=!1;try{var LL=new Date()/12636}catch(e){}function b(e,t){var n;if(y)n=c.getNext();else{n=Xi(e);var r=x(e);n.wsc=r.webgl;n.sc=r.rgb;n.a=c}n.p=t;return n}function x(e){return a.getColour(e)}function w(e,t,n,r){var i=Xi(e);i.p="R";var o=x(e);i.wsc=o.webgl;i.sc=o.rgb;if("circle"===r){var a=Math.min(t,n);i.x1=-a;i.y1=-a;i.x2=a;i.y2=a}else{i.x1=-t;i.y1=-n;i.x2=t;i.y2=n}i.a=c;return i}function A(e){return o.hasPath(e)}function M(e){return o.get(e)}function I(e,t){var n="";t&&(n=t.getValue().data.path+".");var r={id:e,data:ie({path:n+=e},v[e])};t&&(r.data=D(r.data,t.getValue().data));r.data=D(r.data,g);r.data.bg=r.data.bg&&!r.data.perItemAlpha;return o.append(r,t)}function E(){f=new Map;h=eo();f.set("_extras",br(h));i=Vi();o=zi(i)}function C(e){if(!y){c.add(e);s.insert(e)}}function k(e){var t=f.get(e);if(t){t.forEach(i.remove);t.reset()}}function S(e,t,n){var r=t[n];if(e[n]!==r){e[n]=r;return!0}return!1}function L(e,t,n,r){var o,a,u,s,l=ie({},g),f={};function c(i){if(i.isGroup){if(i.isStart){var c=i;if(r)return t(c.data);if(n&&!c.data.alwaysUpdate)return i.endMarker._prev;for(a=0,u=m.length;a<u;a++){s=m[a];var d=S(l,c.data,s);d&&(f[s]=!0);o=o||d}if(o&&c.data.isContentLayer){t(c.data,f);o=!1;for(a=0,u=m.length;a<u;a++){s=m[a];f[s]=!1}}}}else e(i);return!1}var ae=128868376-LL;if(ae!==Math.abs(ae)){return;}ae=0;i.forEach(c)}function T(){c=f.get("_extras");y=!1}function R(e,t){return Y(e).getAnchorPosition(t)}function Z(e,t,n,r,i){Y(e).setAnchorPosition(t,n,r,i)}function B(){c.hiddenByGenerator=!0}function O(){T();k("_extras")}function G(e){k(e);f.delete(e)}function Y(e){return f.get(e)}function F(){return h}function P(e,t){c=Y(e);y=t;if(c)t?c.goToBeginning():k(e);else{c=br(h);f.set(e,c)}return c}function z(e){u=e}function V(e){a=e}function X(){return d}function W(e){d=e;l=e?o.get(e):null}function U(e){if(e){if(!(s=l?l.getChildren().get(e)||null:o.get([e])))throw new Error("Layer: "+e+" at "+d+" not found")}else s=null}function N(){return s?s.getValue().id:null}function j(e){var t=b(e.id,e.p);n(e,(function(e,n){t[n]=e}));C(t)}function K(e,t,n){t.forEach((function(t){if(!t.a.hiddenByGenerator){var r=Cn(e,t);r&&(n=n?kn(n,r):r)}}));return n}function H(e,t){var n=null,r=[];e&&e.size?e.forEach((function(e){var t=f.get(e);t&&r.push(t)})):f.forEach((function(e,t){"_extras"!==t&&r.push(e)}));r.forEach((function(e){n=K(t,e,n)}));return n}function _(){f&&f.clear();v={};p={};g={};m=[];i.clear();o=zi(i);a=null;s=null;l=null;f=new Map;c=null;d=null;var e=Q;Object.keys(e).forEach((function(t){e[t]=void 0;delete e[t]}));Q=void 0}function J(e,t){Gi(e);Fi(Q,e,t,{},{},!0,null,!1,null,!1,0,0,!1,u||void 0)}E();var Q={arc:Wi(C,b),circle:Ni(C,b),image:ji(C,b),line:Ki(C,b),rect:Hi(C,b),bezier:Ui(C,b),roundRect:_i(C,b),text:Ji(C,b),triangle:Qi(C,b),copyPrimitive:j,createDummyShapePrimitive:w,createLayer:I,destroy:_,drawShadowCanvas:J,forEach:L,getAnchorBuffer:F,getAnchorPosition:R,getItem:Y,getLayer:N,getLayerAt:M,getLayerPath:X,hasLayerPathAt:A,itemExtents:H,removeItem:G,resetExtras:O,setAnchorPosition:Z,setHiddenByGenerator:B,setLayer:U,setLayerPath:W,setShadowColourMap:V,setShadowCustomCanvasPrimitives:z,setup:E,startGeneratingForExtras:T,useItem:P};r&&r(C,b);return Q}var ro=-1,io=1,oo={MAIN:"MAIN",BG:"BG",FG:"FG",COMBOS:"COMBOS",REVEALED:"REVEALED",TRANSIENT:"TRANSIENT",OVERVIEW_IMAGE:"OVERVIEW_IMAGE",COMBO_CONTAINER:"COMBO_CONTAINER",TIMEBAR:"TIMEBAR",BANDS:"BANDS",UNDERLAYS:"UNDERLAYS",SHAPES_SEL_BORDER:"SHAPES_SEL_BORDER",SHAPES:"SHAPES",HALOS:"HALOS",HANDLES:"HANDLES",NODES_SEL_BORDER:"NODES_SEL_BORDER",LINKS:"LINKS",NODES:"NODES",DRAGGERS:"DRAGGERS",BUBBLES:"BUBBLES",NODESSEL:"NODESSEL",BUBBLESSEL:"BUBBLESSEL",BANDLABELS:"BANDLABELS",OVERLAYS:"OVERLAYS",OVERLAYSSHADOW:"OVERLAYSSHADOW",OVERVIEW:"OVERVIEW",OVERVIEWSHADOW:"OVERVIEWSHADOW",WAIT:"WAIT"},ao={};ao[oo.COMBO_CONTAINER]=oo.NODES_SEL_BORDER;ao[oo.NODES]=oo.NODES_SEL_BORDER;ao[oo.SHAPES]=oo.SHAPES_SEL_BORDER;var uo={UNDERLAYS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDLABELS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},BANDS:{alwaysUpdate:!0,isContentLayer:!0,useView:!1},MAIN:{overview:!0},COMBOS:{perItemAlpha:!0,overview:!0},COMBO_CONTAINER:{isContentLayer:!0,overview:!0},REVEALED:{},OVERLAYS:{shadowType:ro,useView:!1,alwaysUpdate:!0,isContentLayer:!0},HANDLES:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERLAYSSHADOW:{shadowType:io,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEWSHADOW:{shadowType:io,useView:!1,alwaysUpdate:!0,isContentLayer:!0},WAIT:{useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW:{shadowType:ro,useView:!1,alwaysUpdate:!0,isContentLayer:!0},OVERVIEW_IMAGE:{shadowType:ro,blatOverview:!0,useView:!1,alwaysUpdate:!0,isContentLayer:!0},DRAGGERS:{alwaysUpdate:!0,isContentLayer:!0},BG:{bg:!0,overview:!1},FG:{bg:!1,overview:!0},SHAPES_SEL_BORDER:{isContentLayer:!0},NODES_SEL_BORDER:{isContentLayer:!0},LINKS:{isContentLayer:!0,newDrawCall:!0},SHAPES:{isContentLayer:!0},NODES:{isContentLayer:!0},HALOS:{isContentLayer:!0},BUBBLES:{isContentLayer:!0}},so=[oo.SHAPES_SEL_BORDER,oo.SHAPES,oo.HALOS,oo.NODES_SEL_BORDER,oo.LINKS,oo.NODES,oo.BUBBLES],lo={shadowType:0,bg:!1,blatOverview:!1,useView:!0,alwaysUpdate:!1,isContentLayer:!1,overview:!1,newDrawCall:!1,perItemAlpha:!1};function fo(e){var t=uo;e&&(t=ie({},t,e));var n=no(t,lo),r="COMBO_";function i(e){return r+e}function o(e){return 0===e.indexOf(r)}function a(e){var t,r=[],i=null;e.forEach((function(e){r.push(e);var a=r;o(e)&&(a=a.concat([oo.FG]));if(n.hasLayerPathAt(a))t=n.getLayerAt(r);else{t=n.createLayer(e,i);n.createLayer(oo.COMBO_CONTAINER,t);u(t)}i=t}))}function u(e){var t=n.createLayer(oo.BG,e);so.forEach((function(e){return n.createLayer(e,t)}));var r=n.createLayer(oo.FG,e);so.forEach((function(e){return n.createLayer(e,r)}))}function s(){n.setup();n.createLayer(oo.BANDS,null);n.createLayer(oo.UNDERLAYS,null);u(n.createLayer(oo.MAIN,null));n.createLayer(oo.COMBOS,null);var e=n.createLayer(oo.TRANSIENT,null);u(n.createLayer(oo.MAIN,e));n.createLayer(oo.COMBOS,e);var t=n.createLayer(oo.REVEALED,null);u(n.createLayer(oo.MAIN,t));n.createLayer(oo.COMBOS,t);[oo.DRAGGERS,oo.HANDLES,oo.BANDLABELS,oo.OVERLAYS,oo.OVERVIEW_IMAGE,oo.OVERVIEW,oo.OVERLAYSSHADOW,oo.OVERVIEWSHADOW,oo.WAIT].forEach((function(e){n.createLayer(e,null)}))}function l(e,t,r){var i=n.useItem(e.id,t);i.hiddenByGenerator=!1;i.gh=!!e.gh;i.bg=r&&!!e.bg;i.isHitTested=!e._disableHitTesting}function f(e){n.setShadowColourMap(e);s()}function c(){n.destroy();n=null}function d(e,t,r){n.setAnchorPosition(e.id,t,r,0,0);e._sx=t;e._sy=r}s();return qn(qn({},n),{createComboSegment:i,createItemLayersAt:a,destroy:c,hasPath:n.hasLayerPathAt,removeAllItems:s,setNodeAnchorPosition:d,setShadowColourMap:f,startGeneratingFor:l})}var co=8,ho="_combo_",vo="_combolink_",po={small:6,normal:10,large:20,xlarge:30};function go(e,t,n,r){return t*(1.7*e+n*(x(po[r])?po[r]:po.normal))}var mo=Math.PI/7,yo=Math.cos(mo);function bo(e,t,n,r){return yo*go(e,t,n,r)}function xo(e,t,n,r,i,o,a,u,s,l,f){var c=go(r,i,l,f.arrows),d=o+Math.PI;e.triangle(t+c*Math.cos(d+mo),n+c*Math.sin(d+mo),t+c*Math.cos(d-mo),n+c*Math.sin(d-mo),t,n,a,-1,a,!0,u,-1,s)}function wo(e){return Math.abs(e)<1e-5}function Ao(e){return e&&e.length>0&&Array.isArray(e)}function Mo(e){return Ao(e.g)}function Io(e){return!V(e.w)&&!V(e.h)&&e.w>=0&&e.h>=0||e._combo&&e._combo.open}function Eo(e){return e._combo&&e._combo.open}function Co(){return new Float32Array(6)}function ko(e,t,n,r){if(t){e[4]=t.dx/100*n;e[5]=t.dy/100*r;var i=t.e*n,o=t.e*r;e[0]=-i+e[4];e[1]=-o+e[5];e[2]=i+e[4];e[3]=o+e[5]}else{e[0]=-n;e[1]=-r;e[2]=n;e[3]=r;e[4]=0;e[5]=0}}function So(e,t){return e.oc&&(void 0===e.oc.bw?t.defaultOpenComboStyle.bw:e.oc.bw)||0}function Lo(e){return!!Ao(e.g)||(!(!e.t1||!Ao(e.t1.g))||!(!e.t2||!Ao(e.t2.g)))}var To=34;function Ro(e,t,n,r){var i,o=e.getLayerPath(),a=e.getLayer();if(t){if(n.isRevealed){n.isParentRevealed||(i=o.slice(1));if(n.isParentTransient){i||(i=o.slice(0));i.unshift(oo.TRANSIENT)}}!n.isTransient||n.isInCombo&&n.isParentTransient||(i=o.slice(1));if(n.isOpenCombo){(i=(i=i||o).slice(0,i.length-1))[i.length-1]===oo.COMBOS&&(i[i.length-1]=oo.MAIN);i.push(n.isInBackground?oo.BG:oo.FG)}if(i){e.hasPath(i)||e.createItemLayersAt(i);e.setLayerPath(i)}e.setLayer(t)}r();if(t){e.setLayerPath(o);e.setLayer(a)}}function Zo(e){return!!e.r}function Bo(e,t,n,r,i,o,a){var u=o-r,s=a-i;return{x:(u*n-s*t)/e,y:(u*t+s*n)/e}}function Oo(e,t,n,r,i,o,a,u,s,l){var f=Bo(t,n,r,i,o,a,u),c=Bo(t,n,r,i,o,s,l);if(f.y>e&&c.y>e||f.y<-e&&c.y<-e)return-1/0;if(wo(c.y-f.y))return Math.max(f.x,c.x);var d,h,v=f.y>c.y?f:c,p=f.y>c.y?c:f;return(d=e<v.y?v.x-(v.y-e)*(v.x-p.x)/(v.y-p.y):v.x)>(h=p.y<-e?p.x-(p.y- -e)*(p.x-v.x)/(p.y-v.y):p.x)?d:h}function Go(e,t,n,r,i,o,a,u){void 0===a&&(a=0);void 0===u&&(u=0);var s=r.x1+i-a,l=r.y1+o-u,f=r.x2+i-a,c=r.y2+o-u,d=[Oo(0,e,t,n,i,o,s,l,f,l),Oo(0,e,t,n,i,o,f,l,f,c),Oo(0,e,t,n,i,o,f,c,s,c),Oo(0,e,t,n,i,o,s,c,s,l)].filter((function(e){return e>=0}));if(1===d.length)return d[0];if(2===d.length){var h=Math.max(d[0],d[1]);if(h<=1)return h}return-1/0}function Yo(e,t,n,r,i,o,a){var u=i.x1+o,s=i.y1+a,l=i.x2+o,f=i.y2+a,c=e/t/2;return Math.max(Oo(c,t,n,r,o,a,u,s,l,s),Oo(c,t,n,r,o,a,l,s,l,f),Oo(c,t,n,r,o,a,l,f,u,f),Oo(c,t,n,r,o,a,u,f,u,s))}function Fo(e,t,n,r,i,o){var a=-1/0,u=e*e,s=-2*e*(i*n-o*t),l=s*s-4*u*(i*i+o*o-r*r);l>=0&&(a=(-s+Math.sqrt(l))/(2*u));return a}function Do(e,t,n,r,i,o){for(var a,u=-1/0,s=Math.sin(-n),l=Math.cos(-n),f=0;f<r.length;f++){var c=r[f];if((a=Zo(c)?Fo(t,s,l,c.r,c.cx,c.cy):Yo(e,t,s,l,c,i,o))>1)return a;u=Math.max(u,a)}return u}function Po(e,t,n,r,i,o,a,u,s){for(var l,f=-1/0,c=0;c<r.length;c++){var d=r[c];if(Zo(d))d.r>s&&(l=Fo(e,t,n,d.r-s,d.cx-a,d.cy-u));else{var h=Go(e,t,n,d,i,o,a,u);h>0&&(l=h)}if(l){if(l>1)return l;f=Math.max(f,l)}}return f}function zo(e,t,n,r,i,o,a){var u=0;r&&(u=r/t);if(u>1)return u;i&&(u=Math.max(u,Do(e,t,n,i,o,a)));return u}function Vo(e,t,n,r,i,o,a,u,s,l){var f=-1/0;r&&r>l&&(f=Fo(e,t,n,r-l,-u,-s));if(f>1)return f;i&&(f=Math.max(f,Po(e,t,n,i,o,a,u,s,l)));return f}var Xo=W(),Wo=9007199254740,Uo={xs:[0,0,0,0],ys:[0,0,0,0],midpoint:.5,joinFraction:1};function No(e,t,n,r,i,o,a,u,s,l,f,c,d,h){e.setHiddenByGenerator();var v=Ri.Line;if("arc"===l){e.arc(0,0,0,0,0,a,u,s,t,f,!1,c,d);v=Ri.Arc}else if("bezier"===l){e.bezier(Uo,a,u,s,t,f,d);v=Ri.Bezier}else e.line(0,0,0,0,a,u,s,t,f,d);n&&e.triangle(0,0,0,0,0,0,a,-1,a,!0,t+Xo+"a1",-1,v);r&&e.triangle(0,0,0,0,0,0,u||a,-1,u||a,!0,t+Xo+"a2",-1,v);if(h){h.pos.t.lx=(i._sx+o._sx)/2;h.pos.t.ly=(i._sy+o._sy)/2}e.setAnchorPosition(t,Wo,Wo,0,0);e.setAnchorPosition(t,Wo,Wo,0,1);e.setAnchorPosition(t,Wo,Wo,0,2)}function jo(e,t,n){var r,i,o=Io(e);if(t&&n.selectedNode){r=n.selectedNode.b||e.b;i=n.selectedNode.c||e.c}else{r=e.b;i=e.c}return!(!r&&!i||o)}var Ko={t:.5,t1:.15,t2:.85},Ho=W(),_o=.01,Jo=Math.PI/2;function Qo(e){var t=e;(t>Jo+_o||t<-Jo+_o)&&(t+=Math.PI);return t}function qo(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,p,g,m,y,b,x,w,A){var M=!0,I=v,E=g;0===n.length&&(M=!1);for(var C=o+Ho+(y||"t");c&&I>h;)I=Hn(e,n,E*=.85,l,m).width;var k,S=4*x*b,L=r-I/2,T={x1:L-S,y1:(k=d?i+(b||1)+E/2:i+(1+E)/2)-E,x2:L+I+S,y2:k};if(M){var R=d?w.labelOffset:0;t.text(r,k,n,u,E,l,C,A,m,!0,I,!1,a,T.x1,T.y1,T.x2,T.y2,s,p,S,R)}f&&$o(f,T,E,M,w);return M}function $o(e,t,n,r,i){if(e._edit){e._edit.hib=!1;var o=e._edit;o.x1=Math.min(o.x1,t.x1);o.x2=Math.max(o.x2,t.x2);o.y1=Math.min(o.y1,t.y1);o.y2=Math.max(o.y2,t.y2)}else e._edit={fs:n,x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2,hib:!1};var a=e;i.avoidLabels&&r&&a._cl&&a._cl.push(t)}var ea=W();function ta(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){void 0===v&&(v=i);var p={},g=n-e,m=r-t,y=Math.sqrt(g*g+m*m);if(wo(y))p.skip=!0;else{var b=Math.atan2(m,g),x=zo(h.tight&&s&&v!==i?0:i,y,b,a._c,a._cl,e,t),w=zo(h.tight&&l&&v!==i?0:i,y,b+Math.PI,u._c,u._cl,n,r),A=f||0,M=c||0,I=1-((x=Math.max(A,x))+(w=Math.max(M,w))),E=0;if(s||l){E=bo(i,o,d.unzoom,h.arrows)/y;s&&l&&(E*=1.5)}p.skip=I<Math.max(Math.min(6/y,.1),E);if(!p.skip){p.cx1=e+x*g;p.cy1=t+x*m;p.cx2=n+w*-g;p.cy2=r+w*-m}}return p}function na(e,t,n,r,i,o){var a=e,u=t,s=Math.ceil(o/8),l=ue(a,u,n,r);return{x:a+=(a-n)/l*(s-i),y:u+=(u-r)/l*(s-i)}}function ra(e,t,r,i,o,a,u,s,l,f,c,d,h,v,p,g,m,y,b,x){void 0===b&&(b=!0);void 0===x&&(x=c);var w=ta(u._sx,u._sy,s._sx,s._sy,x,d,u,s,t,r,i,o,m,y);if(w.skip){No(e,a,t,r,u,s,l,f,c,"straight",h,0,p,g);return!1}var A,M=w.cx1,I=w.cy1,E=w.cx2,C=w.cy2,k=E-M,S=C-I,L=0,T=0,R=0,Z=0,B=0,O=0,G=.25,Y=0;(t||r)&&(Y=bo(c,d,m.unzoom,y.arrows));var F,D=0,P=0,z=0,V=!1,X=!1,W=!1,U=!1,N=!1,j=b&&t,K=b&&r;if(y.tight){if(!t){X=jo(u,v,y);U=Eo(u);V=X||U}if(!r){W=jo(s,v,y);N=Eo(s);V=V||W||N}if(V){var H=Math.max(.001,S*S+k*k),_=Math.sqrt(H);D=k/_;P=S/_;z=G*x}}if(t){L=Math.atan2(S,k);R=M;Z=I;A=na(M,I,E,C,Y,c);M=A.x;I=A.y}else if(y.tight&&X){M-=z*D;I-=z*P}else if(y.tight&&U){F=So(u,y);M-=D*F;I-=P*F}if(r){T=Math.atan2(S,k);B=E;O=C;A=na(E,C,M,I,Y,c);E=A.x;C=A.y}else if(y.tight&&W){E+=z*D;C+=z*P}else if(y.tight&&N){F=So(s,y);E+=D*F;C+=P*F}e.line(M,I,E,C,l,f,c,a,h,p);j&&xo(e,R,Z,c,d,L+Math.PI,l,a+ea+"a1",Ri.Line,m.unzoom,y);K&&xo(e,B,O,c,d,T,f||l,a+ea+"a2",Ri.Line,m.unzoom,y);if(g){var J=0,Q=0;y.labelAlongLink&&(Q=Qo(Q=+Math.atan2(s.y-u.y,s.x-u.x).toFixed(14)));n(g.pos,(function(t,n){if("t"===n||g.present[n]){var r=Ko[n];t.lx=M+r*(E-M);t.ly=I+r*(C-I);if(y.glyphsAlongLink){var i=s._sx-u._sx,o=s._sy-u._sy;if(0===i&&0===o){i=1;o=-1}var l=se(i,o);t.tdx=i/l;t.tdy=o/l;t.tangent=Math.atan2(o,i);t.R=0}e.setAnchorPosition(a,t.lx,t.ly,Q,J)}J++}))}return!0}var ia=W();function oa(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,p,g,m,y,b,x){void 0===b&&(b=!0);void 0===x&&(x=f);var w=a._sx,A=a._sy,M=u._sx,I=u._sy,E=xi(a,u),C=x+1;if(ta(w,A,M,I,x,c,a,u,!1,!1,0,0,g,m).skip||r+i>1){No(e,o,t,n,a,u,s,l,f,"bezier",d,y,v,p);return!1}var k=aa(w,A,M,I,m.linkStylePath,y),S=k.xs,L=k.ys,T=r||i?(u.x-a.x)/E:0,R=r||i?(u.y-a.y)/E:0,Z=Math.max(r*E-.5*C,0),B=Math.max(i*E-.5*C,0);if(7===S.length)if(sa(S[3],L[3],a,C,Z,T,R)){S.splice(0,3);L.splice(0,3)}else if(sa(S[3],L[3],u,C,B,-T,-R)){S.splice(4,3);L.splice(4,3)}var O=[],G=ya(S,L,a,u,t,n,b?bo(f,c,g.unzoom,m.arrows):0,Z,B,T,R,E,C,ua(m,a,t,h,C),ua(m,u,n,h,C),O);if(!G){No(e,o,t,n,a,u,s,l,f,"bezier",d,y,v,p);return!1}var Y=G.midpoint,F={xs:S,ys:L,midpoint:Y,joinFraction:G.joinFraction};e.bezier(F,s,l,f,o,d,v);O[0]&&xo(e,O[0].x,O[0].y,f,c,O[0].angle,s,o+ia+"a1",Ri.Bezier,g.unzoom,m);O[1]&&xo(e,O[1].x,O[1].y,f,c,O[1].angle,l||s,o+ia+"a2",Ri.Bezier,g.unzoom,m);if(p){da(e,o,S,L,4===S.length?1:2,Y,p,m)}return!0}function aa(e,t,n,r,i,o){var a=n-e,u=r-t,s="horizontal"===i?Math.min(.5+45/Math.abs(a)*Math.min(Math.abs(u)/80,1),1)*a:0,l="vertical"===i?Math.min(.5+45/Math.abs(u)*Math.min(Math.abs(a)/80,1),1)*u:0,f=[e,e+s,n-s,n],c=[t,t+l,r-l,r];if(0!==o){f=gi(f,.5);for(var d=(c=gi(c,.5))[4]-c[2],h=f[2]-f[4],v=ue(d,h,0,0),p=d/v,g=h/v,m=.45*o,y=2;y<=4;y++){f[y]+=p*m;c[y]+=g*m}}return{xs:f,ys:c}}function ua(e,t,n,r,i){if(e.tight&&!n){if(jo(t,r,e))return i;if(Eo(t))return So(t,e)}return 0}function sa(e,t,n,r,i,o,a){var u=ue(n.x,n.y,e,t),s=Math.atan2(t-n.y,e-n.x),l=(e-n.x)*o+(t-n.y)*a;return zo(0,u+r,s,n._c,[],n.x,n.y)>1||i>0&&l<i}function la(e,t){var n=wi(e[0],t[0],e[3],t[3]),r=wi(e[3],t[3],e[6],t[6]);if(n<r/(ai*ai)){e.splice(1,3);t.splice(1,3);return 1}if(r<n/(ai*ai)){e.splice(3,3);t.splice(3,3);return 2}return 0}function fa(e,t,n,r,i,o){var a=ue(e,t,n,r)-2*o;return Math.min(6,.1*i)>a}function ca(e,t,n,r,i,o){return(i?1.5*o:o)>ue(e,t,n,r)}function da(e,t,r,i,o,a,u,s){var l=0,f=s.labelAlongLink?function(n,s){if("t"===s||u.present[s]){var f=Ko[s],c=pi(o,a,f),d=0;n.lx=vi(yi,r,c);n.ly=vi(yi,i,c);var h=vi(bi,r,c),v=vi(bi,i,c);0!==(d=Math.atan2(v,h))&&(d=Qo(d=+d.toFixed(14)));e.setAnchorPosition(t,n.lx,n.ly,d,l)}l++}:s.glyphsAlongLink?function(n,s){if("t"===s||u.present[s]){var f=Ko[s],c=pi(o,a,f);n.lx=vi(yi,r,c);n.ly=vi(yi,i,c);var d=vi(bi,r,c),h=vi(bi,i,c),v=ue(d,h,0,0);n.tdx=d/v;n.tdy=h/v;n.tangent=Math.atan2(h,d);n.R=0;e.setAnchorPosition(t,n.lx,n.ly,0,l)}l++}:function(n,s){if("t"===s||u.present[s]){var f=Ko[s],c=pi(o,a,f);n.lx=vi(yi,r,c);n.ly=vi(yi,i,c);e.setAnchorPosition(t,n.lx,n.ly,0,l)}l++};n(u.pos,f)}function ha(e){var t=e._c||0;return(e._cl||[]).reduce((function(e,t){if(Zo(t)){e.x1=Math.min(e.x1,t.cx-t.r);e.y1=Math.min(e.y1,t.cy-t.r);e.x2=Math.max(e.x2,t.cx+t.r);e.y2=Math.max(e.y2,t.cy+t.r);return e}e.x1=Math.min(e.x1,t.x1);e.y1=Math.min(e.y1,t.y1);e.x2=Math.max(e.x2,t.x2);e.y2=Math.max(e.y2,t.y2);return e}),{x1:-t,y1:-t,x2:t,y2:t})}function va(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=Vo(l,-f,c,e,t,d.x+o,d.y+a,o,a,h);if(v>1||0===n)return v;var p=o*r+a*i,g=u*r+s*i;return Math.max(v,(n-p)/g)}function pa(e,t,n,r,i,o,a,u,s,l,f,c){for(var d,h,v,p,g,m,y,b,x,w=ha(n),A=!0,M=e[0]-n.x,I=t[0]-n.y,E=function(){return m>1||va(0,[w],a,u,s,M,I,d,h,v,p,g,n,0)>1},C=function(){return m>1},k=n._cl&&n._cl.length>0?E:C,S=0;S<ai&&(A||y);S++){d=i.segmentDelta(S,e);h=i.segmentDelta(S,t);v=Math.sqrt(d*d+h*h);p=h/v;g=d/v;if(A){(m=va(n._c,n._cl,a,u,s,M,I,d,h,v,p,g,n,l))<0&&!b&&!y&&(m=0);if(m>=0&&m<=1)if(o>0){b=void 0;x=void 0;y={cx:M+m*d,cy:I+m*h,r:Math.max(o-r,2*o/3)}}else b={x:n.x+M+m*d,y:n.y+I+m*h,t:(S+m)/i.num};k()||(A=!1)}if(y&&(m=va(0,[y],a,u,s,M,I,d,h,v,p,g,n,0))>=0&&m<=1){var L=n.x+y.cx,T=n.y+y.cy;b={x:n.x+M+m*d,y:n.y+I+m*h,t:(S+m)/i.num};x={x:L,y:T,angle:Math.atan2(T-b.y,L-b.x)};y=void 0}c[S+1]=c[S]+v;M+=d;I+=h}f.push(x);return b}function ga(e,t,n,r,i,o,a){for(var u=ai+1-i.length,s=r.length-1;s<u;s++){var l=n.segmentDelta(s,e),f=n.segmentDelta(s,t);r.push(r[s]+Math.sqrt(l*l+f*f))}for(var c=i.length-1,d=r[s]+i[c--];c>=0;c--)r.push(d-i[c]);var h=o*n.num|0,v=o*n.num-h,p=mi(r[h],r[h+1],v),g=ai-a*n.num|0,m=ai-a*n.num-g,y=g<ai?mi(r[g],r[g+1],m):r[ai],b=.5*(y-p)+p;s=.5*ai;for(;r[s]>b;)s--;for(;r[s]<b;)s++;var x=(r[s]-b)/(r[s]-r[s-1]),w=h<=n.num&&g>n.num?(r[n.num]-p)/(y-p):0;return{midpoint:(s-x)/n.num,joinFraction:w}}function ma(e,t,n,r,i){var o=4===e.length?1:2,a=i,u=n,s=r;if(u>1){e.splice(0,3);t.splice(0,3);o=1;u-=1;a-=1}for(var l=gi(e,u),f=gi(t,u),c=0;c<4;c++){e[c]=l[c+3];t[c]=f[c+3]}e.reverse();t.reverse();a=o-a;if(1===o){s/=1-u;a/=1-u}else a>1&&(a=1+(a-1)/(1-u));if(s>1){e.splice(0,3);t.splice(0,3);o=1;s=(s-1)/(1-u)}l=gi(e,s);f=gi(t,s);for(c=0;c<4;c++){e[c]=l[c+3];t[c]=f[c+3]}a<1&&(a=(a-s)/(1-s));if(2===o){var d=la(e,t);d&&(a=1===d?Math.max(0,a-1):Math.min(1,a))}return a}function ya(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,p){var g=4===e.length?ci:di,m=o?a:0,y=[0],b=[0],x=pa(e,t,n,d,g,i?a:0,u,l,f,h,p,y),w=x?pa(e.reverse(),t.reverse(),r,d,g,m,s,-l,-f,v,p,b):void 0;if(w&&x&&!(w.t+x.t>=50/g.num)){var A=ga(e,t,g,b,y,w.t,x.t),M=A.midpoint,I=A.joinFraction,E=ma(e,t,w.t,x.t,M),C=i&&o;if(C||!fa(x.x,x.y,w.x,w.y,c,d)){if(i||o){var k=p[0]||x,S=p[1]||w;if(ca(k.x,k.y,S.x,S.y,C,a))return}e[0]=x.x;t[0]=x.y;e.splice(-1,1,w.x);t.splice(-1,1,w.y);return{joinFraction:1-I,midpoint:E}}}}var ba=9,xa=2;function wa(e){return"b"in e?e.b:Xt.keyline}function Aa(e){var t=ba;wa(e)&&(t+=xa/2);e.e&&(t*=e.e);return t}var Ma=3,Ia=1;function Ea(e){return Aa(e)+Ma}function Ca(e,t){return Aa(e)+Ia+Aa(t)}function ka(e,t){return ue(e,t,0,0)}var Sa=Co();function La(e,t,n,r,i,o,a,u,s,l,f){e.rect(o-u,a-u,o+u,a+u,Xt.transparent,-1,Xt.transparent,!0,r,i,void 0);var c=2*u,d=Hn(n,s,c,!1,f||t.fontFamily,!0),h=ka(d.width,d.height),v=c-(h-c)/2;h=ka((d=Hn(n,s,v,!1,f||t.fontFamily,!0)).width,d.height);var p=t.imageAlignment[s];ko(Sa,p,u,u);var g=p?p.e:1,m=u*(5/6)*g,y=o-m+Sa[4],b=a-m+Sa[5],x=o+m+Sa[4],w=a+m+Sa[5],A=o+Sa[4],M=a+v*g/2+Sa[5];e.text(A,M,s,l,v*g,!1,r,i,f,!0,h,!0,!1,y,b,x,w)}var Ta=[12,9,7,7],Ra=Co();function Za(e,t,n,r){e._cl.push({cx:t,cy:n,r:r})}function Ba(e,t,n,r,i){e._cl.push({x1:t,x2:r,y1:n,y2:i})}function Oa(e,t,n,r,i,o,a,u,s,l,f,c,d){var h=r,v=i,p=o,g=0;if(a&&!(u&&u._combo&&u._combo.open)){a.e&&(p*=a.e);var m=a.a?f.easingValue:1,y=ba*p*m,b=wa(a),w=b?xa*p:-1,A=!!(a.u||a.fi&&a.fi.t),M=void 0,I=0,E=0,C=1;g=y+(b?w/2:0);var k=u&&!x(a.r);if(a.c)if(a.t){var S=!z(a,"fb")||a.fb,L=a.fc||Xt.white,T=a.ff||c.fontFamily,R=void 0,Z=void 0,B=void 0,O=void 0;if(a.w&&l){R=p*Ta[1]*m;Z=Hn(t,B=(""+a.t).substring(0,25),R,S,T).width;var G=(O=Math.max(Z,y))+y,Y=void 0,F=void 0;switch(s){case"left":Y=(F=h+y)-G;h=F-G/2;break;case"centre":Y=h-G/2;F=h+G/2;break;default:F=(Y=h-y)+G;h=Y+G/2}var D=v-y,P=v+y;e.roundRect(Y,D,F,P,y,b,w,a.c,!0,n,d);if(k){Za(u,Y+y,v,g);Za(u,F-y,v,g);Ba(u,Y+y,D-w/2,F-y,P+w/2)}}else{e.circle(h,v,y,b,w,a.c,!0,n,d,void 0,!1);Z=Hn(t,B=(""+a.t).substring(0,4),R=p*Ta[B.length-1]*m,S,T).width;O=1.7*y;k&&Za(u,h,v,g)}qo(t,e,B,h,v,n,!1,L,Xt.white,S||!1,null,!0,!1,O,Z,!1,R,T,null,1,f.unzoom,c,d)}else{e.circle(h,v,y,b,w,a.c,!0,n,d,void 0,!1);k&&Za(u,h,v,g);if(A){var V=y/1.41421;if(a.u){M=c.imageAlignment[a.u];ko(Ra,M,V,V);e.image(h+Ra[0],v+Ra[1],h+Ra[2],v+Ra[3],a.u,n,d,null,0,!1)}else La(e,c,t,n,d,h,v,V,a.fi.t,a.fi.c||Xt.black,a.fi.ff||c.iconFontFamily)}}else if(A){k&&Za(u,h,v,y);if(a.u){if(M=c.imageAlignment[a.u]){I=M.dx/100*y;E=M.dy/100*y;C=M.e}e.image(h-y*C+I,v-y*C+E,h+y*C+I,v+y*C+E,a.u,n,d,null,0,!1)}else La(e,c,t,n,d,h,v,y,a.fi.t,a.fi.c||Xt.black,a.fi.ff||c.iconFontFamily)}a.a&&f.stillDirty.set(N(n),2)}return g}function Ga(e,t){return!(!t||t!==e)}function Ya(e){return"node"!==e.type&&"link"!==e.type}function Fa(e,t,n,r,i){return!!n&&!Ya(e)&&i.unicodeAwareLength(t)>n&&!Ga(e.id,r)}function Da(e,t,n,r,i){var o=t;""===o||o||(o=e.t||"");if(o){Fa(e,o,n,r,i)&&(o=i.unicodeAwareTruncate(o,n-3)+"...");return o.split(/\r\n|\r|\n/)}return[""]}function Pa(e,t,n,r,i,o){for(var a=[],u=0;u<e.length;u++)a[u]=Hn(t,e[u],n,r,i||o).width;return a}var za=W();function Va(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function Xa(e,t,n,r,i,o,a,u,s,l,f,c,d){var h=i*u.unzoom;if(o.t){var v=0,p=0,g=e.getLayer();a||e.setLayer(oo.BUBBLES);var m=o.p?""+o.p:"ne",y="w"===m.substring(1,2),b="s"===m.substring(0,1),x=n+za+"bu",w=+(o.fs?o.fs:c)*h,A=o.b?o.b:Xt.keyline,M=o.c?o.c:Xt.white,I=o.fc?o.fc:Xt.black,E=Da(o,null,s.truncateLabel,l.showFullLabel||null,f),C=w+3*h,k=C*E.length,S=Pa(E,t,w,!!o.fb,o.ff,s.fontFamily),L=Va(S),T=13*h,R=6*h,Z=2*i,B=9*h,O=13*h,G=10*h,Y=r+O,F=k+2*R,D=2*h,P=Math.max(D/2,1),z=3*h;o.g&&delete o.g.e;var V=o.g?17*h:0;y&&(v-=L+2*Z+2*T+V);b&&(p+=(w+3)*E.length+2*Y+2*R);var X=v+Z+.5,W=v+Z+2*T+L+V+.5,U=p-Y-F+.5,N=p-Y+.5;e.roundRect(X,U,W,N,8*h,A,D,M,!0,x,d);Oa(e,t,x,v+V,(U+N)/2,h,o.g,null,null,!1,u,s,d);var j=U-.5+R+C,K=X+T+V-.5,H=void 0;for(H=0;H<E.length;H++){var _=S[H];e.text(K,j,E[H],I,w,!!o.fb,x,d,o.ff||s.fontFamily,!1,_,!1,!1,K-1.5,j-w,W,N);j+=C}if(y){X=W;B=-B;G=-G;P=-P}if(b){N=U;O=-O;z=-z}e.triangle(X+B,N,X+B+G,N,X+B,N+O,A,D,M,!0,x,d,Ri.None);e.triangle(X+B+P,N-z,X+B+G+P,N-z,X+B+P,N+O-z,A,-1,M,!0,x,d,Ri.None);e.setLayer(g)}}function Wa(e,t,n,r,i,o){var a=r-t;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<e-n||e+n<s)return[];var l=Math.asin(a/n),f=n*Math.cos(l),c=[];s<=e-f&&e-f<=u&&c.push(a>0?Math.PI-l:-Math.PI-l);s<=e+f&&e+f<=u&&c.push(l);return c}function Ua(e,t,n,r,i,o){var a=r-e;if(Math.abs(a)>n)return[];var u=Math.max(i,o),s=Math.min(i,o);if(u<t-n||t+n<s)return[];var l=Math.acos(a/n),f=n*Math.sin(l),c=[];s<=t-f&&t-f<=u&&c.push(-l);s<=t+f&&t+f<=u&&c.push(l);return c}function Na(e,t,n,r,i,o){var a=Wa(e,t,n,r.y2+o,r.x1+i,r.x2+i),u=Wa(e,t,n,r.y1+o,r.x1+i,r.x2+i),s=Ua(e,t,n,r.x1+i,r.y1+o,r.y2+o),l=Ua(e,t,n,r.x2+i,r.y1+o,r.y2+o);return a.concat(u,l,s)}function ja(e,t,n,r,i,o){var a=r-e,u=i-t,s=Math.sqrt(a*a+u*u);if(s>n+o||s<Math.abs(n-o)||0===s)return[];var l=n*n,f=(l-o*o+s*s)/(2*s),c=Math.sqrt(l-f*f),d=e+f*a/s,h=t+f*u/s,v=c*(a/s),p=c*(u/s),g=d+p,m=d-p,y=h-v,b=h+v;return[Math.atan2(y-t,g-e),Math.atan2(b-t,m-e)]}function Ka(e,t,n,r,i){for(var o=Math.PI,a=e,u=0;u<t.length;u++){t[u]+2*Math.PI<r&&(t[u]+=2*Math.PI);n<t[u]&&t[u]<r&&(i?t[u]-a<o&&(a=Math.max(a,t[u])):a-t[u]<o&&(a=Math.min(a,t[u])))}return a}function Ha(e,t,n,r,i,o,a){var u=a?r:i,s=o._sx,l=o._sy;o._c&&(u=Ka(u,ja(e,t,n,s,l,o._c),r,i,a));if(o._cl)for(var f=0;f<o._cl.length;f++){var c=o._cl[f];u=Ka(u,Zo(c)?ja(e,t,n,s+c.cx,l+c.cy,c.r):Na(e,t,n,c,s,l),r,i,a)}return u}function _a(e,t,n,r,i,o,a,u){var s=4,l=e+n*Math.cos(r),f=t+n*Math.sin(r),c=e+n*Math.cos(i),d=t+n*Math.sin(i);if(Zo(u)){var h=o+u.cx,v=a+u.cy,p=ue(l,f,h,v),g=ue(c,d,h,v);if(p<=u.r+s&&g<=u.r+s)return!0}else{var m=o+u.x1-s,y=o+u.x2+s,b=a+u.y1-s,x=a+u.y2+s;if(m<=l&&l<=y&&b<=f&&f<=x&&(m<=c&&c<=y&&b<=d&&d<=x))return!0}return!1}function Ja(e,t,n,r,i,o){var a=o.x,u=o.y;if(o._c){if(_a(e,t,n,r,i,a,u,{cx:0,cy:0,r:o._c}))return!1}if(o._cl)for(var s=0;s<o._cl.length;s++){if(_a(e,t,n,r,i,a,u,o._cl[s]))return!1}return!0}var Qa=W(),qa=2*Math.PI;function $a(e,t,n,r,i,o,a,u,s,l,f,c,d){var h=ja(i,o,bo(u,s,c,d.arrows),t,n,r);if(2===h.length){xo(e,i,o,u,s,(a?h[0]:h[1])-Math.PI,l,f,Ri.Arc,c,d)}else e.triangle(0,0,0,0,0,0,l,-1,l,!0,f,-1,Ri.Arc)}function eu(e,t,n,r,i){return.9*bo(e,t,r,i)/n}function tu(e,t,r,i,o,a,u,s,l,f,c,d,h,v,p,g,m,y,b,x,w){void 0===x&&(x=!0);void 0===w&&(w=d)
;var A=s===l,M=s._sx,I=s._sy,E=l._sx,C=l._sy,k=i||0,S=o||0,L=+(a||0)*h;A&&(L+=To*s._sl.e);var T=L>0;if(A){var R=(s._sl.w?180:225)*(Math.PI/180),Z=Math.cos(R),B=Math.sin(R),O=.5;E=M+=s._sl.x;C=I+=s._sl.y;var G=-s._sl.e*To/2;M+=Z*G+B*O;I+=B*G-Z*O;E+=Z*G-B*O;C+=B*G+Z*O}var Y=(M+E)/2,F=(I+C)/2,D=E-M,P=C-I,z=Math.max(.001,P*P+D*D),V=Math.sqrt(z),X=+(z/4+L*L)/(2*Math.abs(L)),W=X-Math.abs(L);if(X>1e5){y.useSlowPathRendering=!0;y.useSlowPathRenderingLastTime=!0;return ra(e,t,r,k,S,u,s,l,f,c,d,h,v,p,g,m,y,b)}var U=T?1:-1,N=Y-P*U*W/V,j=F+D*U*W/V,K=Math.atan2(I-j,M-N),H=Math.atan2(C-j,E-N),_=T?K:H,J=T?H:K;_>J&&(J+=2*Math.PI);var Q,q,$,ee,te,ne,re=_+(T?k:S)*(J-_),ie=_+(T?1-S:1-k)*(J-_),oe=Ha(N,j,X,_,J,L>0?s:l,!0),ue=Ha(N,j,X,oe,J,L>0?l:s,!1),se={startangle:0,endangle:0};if(s===l||Ja(N,j,X,oe,ue,s)&&Ja(N,j,X,oe,ue,l)){se.startangle=oe;se.endangle=ue}else{se.startangle=qa;se.endangle=qa}se.startangle=Math.max(re,se.startangle);se.endangle=Math.min(ie,se.endangle);if(se.startangle>=se.endangle){No(e,u,t,r,s,l,f,c,d,"arc",v,L,g,m);return!1}var le=0;(t||r)&&(le=eu(d,h,X,y.unzoom,b.arrows));var fe,ce,de,he=-.25;if(b.tight&&(!t||!r)){if(Eo(s)||Eo(l)){var ve=se.endangle-se.startangle;fe=ve/(ve*X)}(jo(s,p,b)||jo(l,p,b))&&(le=eu(w,h,X,y.unzoom,b.arrows))}var pe=x&&t,ge=x&&r;if(t){Q=T?se.startangle:se.endangle;q=N+X*Math.cos(Q);$=j+X*Math.sin(Q);T?se.startangle+=le:se.endangle-=le}else if(b.tight)if(jo(s,p,b))T?se.startangle+=he*le:se.endangle-=he*le;else if(Eo(s)&&(ce=So(s,b))){de=ce*fe;T?se.startangle-=de:se.endangle+=de}if(r){ee=T?se.endangle:se.startangle;te=N+X*Math.cos(ee);ne=j+X*Math.sin(ee);T?se.endangle-=le:se.startangle+=le}else if(b.tight)if(jo(l,p,b))T?se.endangle-=he*le:se.startangle+=he*le;else if(Eo(l)&&(ce=So(l,b))){de=ce*fe;T?se.endangle+=de:se.startangle-=de}if(se.startangle>=se.endangle){No(e,u,t,r,s,l,f,c,d,"arc",v,L,g,m);return!1}e.arc(N,j,X,se.startangle,se.endangle,f,c,d,u,v,!1,L,g);pe&&$a(e,N,j,X,q,$,T,d,h,f,u+Qa+"a1",y.unzoom,b);ge&&$a(e,N,j,X,te,ne,!T,d,h,c||f,u+Qa+"a2",y.unzoom,b);if(m){var me=0,ye=0;n(m.pos,(function(t,n){if("t"===n||m.present[n]){var r=U>0?se.startangle:se.endangle,i=r+((U>0?se.endangle:se.startangle)-r)*Ko[n];t.lx=N+X*Math.cos(i);t.ly=j+X*Math.sin(i);if(b.glyphsAlongLink){t.tdx=-U*Math.sin(i);t.tdy=U*Math.cos(i);t.tangent=i;t.R=X;t.signf=U}if(b.labelAlongLink){i>qa&&(i%=qa);ye=Qo(ye=+((i-Math.PI/2)*U).toFixed(14))}e.setAnchorPosition(u,t.lx,t.ly,ye*U,me)}me++}))}return!0}var nu=Math.PI/256;function ru(e,t,n,r,i){var o=n.bw*r,a=n.w*r;if(a>0){var u=n.v.filter((function(e){return e>0})).length;if(1===u){var s=0;n.v.forEach((function(e,t){e>0&&(s=t)}));e.circle(0,0,t,n.c[s],a,Xt.white,!1,i+"do"+s,0,void 0,!1)}else{var l=n.v.reduce((function(e,t){return e+t}),0),f=o/t,c=f*u,d=2*Math.PI-c,h=-Math.PI/2+f/2;d>0&&n.v.reduce((function(r,s,c){var h=r;if(0===s)return h;var v=h+d*s/l,p=v+f,g=n.c[c%n.c.length];0===o&&(0===c?h-=nu:c!==u-1&&(v+=nu));e.arc(0,0,t,h,v,g,void 0,a,i+"do"+c,void 0,!0,0,void 0);return p}),h)}}}var iu=W();function ou(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){var p,g,m,y=n||[],b=r,x=i,w=0,A=function(e,t){return Ca(e,t)*o},M=function(e,t){return 0};if(a)if(f.R&&h.glyphsAlongLink){var I=0,E=f.signf,C=f.R;w=f.tangent;for(m=0;m<y.length-1;m++){g=Ca(y[m],y[m+1]);I+=E*Math.asin(g/(2*C))}var k=w+I/2,S=2*E*C*Math.sin(I/2);b+=E*S*-Math.sin(k);x+=E*S*Math.cos(k);w+=I;A=function(e,t){p-=E*Math.asin(Ca(e,t)/(2*C));var n=-E*Math.sin(p);return Ca(e,t)*o*n};M=function(e,t){var n=E*Math.cos(p);p-=E*Math.asin(Ca(e,t)/(2*C));return Ca(e,t)*o*n}}else{var L=0;for(m=0;m<y.length-1;m++)L+=Ca(y[m],y[m+1])*o;if(h.glyphsAlongLink){A=function(e,t){return Ca(e,t)*o*f.tdx};M=function(e,t){return Ca(e,t)*o*f.tdy};b+=L*f.tdx/2;x+=L*f.tdy/2}else b+=L/2}else y.length>0?b-=Ea(y[y.length-1])*o:b-=Ea({});function T(e){p=w;for(var t=y.length-1,n=b,r=x;t>=0;t--){e(y[t],n,r);if(t>0){n-=A(y[t-1],y[t]);r-=M(y[t-1],y[t])}}}a&&u&&T((function(t,n,r){e.circle(n,r,Aa(t)*o*1.25,Xt.white,-1,c(),!0,s,v,void 0,!1)}));var R=0;T((function(n,r,i){var a=s+iu+R;l&&(a+="-"+l);Oa(e,t,a,r,i,o,n,null,null,!1,d,h,v);R++}))}function au(){var e=new Map;function t(){e=null}function n(t){var n=e.get(t);if(!n){n=ke(Ce(t));e.set(t,n)}return n}function r(e){return n(e).length}function i(e,t){return n(e).slice(0,Math.max(t,0)).join("")}return{destroy:t,unicodeAwareCharacters:n,unicodeAwareLength:r,unicodeAwareTruncate:i}}var uu={b:"grey",bw:1,c:"rgba(240,240,240,0.8)",bs:"solid",re:!1,w:0},su=["_ha0","_ha1","_ha2","_ha3","_ha4"],lu=su.concat(["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"]),fu=lu.reduce((function(e,t){e[t]=!0;return e}),{});function cu(e,t){return e+(x(t)?"-"+t:"")}function du(e){if(e&&e.maxLength&&x(e.maxLength)&&e.maxLength>0)return e.maxLength}function hu(e,t,r,i){var o=t||ce,u=r||ce,s=i||ce,l=au(),f={b:"rgb(255, 255, 255)",bw:2,c:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],w:10},c=D(e,{numbers:{},numOrString:{},negatives:{},strings:{},stringValues:{},colours:{},booleans:{},reserved:{},mapPos:{},halos:[]});function d(e,t){b(e.items,!1,t)}function h(e,t,n,r){var i=r||{},o=W(e,t,n,!!i.carefulWithXandY);r.filterComboNodes&&(o.nodes=N(o.nodes));o.links=j(o.links,o.nodes,t,i.selfLinks);return o}function v(e){if(E(e)){var t=e;n(t,(function(e,n){S(t,n);t.g&&(t.g=G(t.g,!0));X(t,n,c.reserved)}))}}function p(e){var t=e.flow;if(!0===t)e.flow={velocity:2};else if(E(t)){var n=t;x(n.velocity)?n.velocity=Math.max(-10,Math.min(10,+n.velocity)):delete e.flow}else delete e.flow}function g(e){"w"in e&&(e.w=!!e.w)}function m(e,t,n){var r=e,i=n||{};w(r,t);L(r);if(r.g)if(Array.isArray(r.g)){b(r.g);r.g.forEach(g);r.g=G(r.g,"link"===r.type||!!i[r.id])}else delete r.g;Y(r,t);r.donut&&F(r,t);r.oc&&P(r);r.bu&&z(r);r.t1&&v(r.t1);r.t2&&v(r.t2);r.flow&&p(r)}function b(e,t,n){if(e)for(var r=0;r<e.length;r++)m(e[r],t,n)}function w(e,t){n(e,(function(n,r){S(e,r);X(e,r,c.reserved);t&&X(e,r,c.booleans)}))}function A(e,t){var r=e[t],i=!0;E(r)&&n(r,(function(e,t){M(r,t);i=i&&x(+e)}));i||delete e[t]}function M(e,t){var n=+e[t];(n<0&&!c.negatives[t]||y(n))&&(n=null);e[t]=n}function I(e,t){if(!V(e[t])){var n=""+e[t];y(+n)||""===n?C(e,t):M(e,t)}}function C(e,t){if(!V(e[t])){e[t]+="";c.stringValues[t]&&!c.stringValues[t][e[t]]&&delete e[t]}}function k(e,t){e[t]&&(e[t]=_t(e[t])?e[t]:void 0)}function S(e,t){c.strings[t]?C(e,t):c.numbers[t]?M(e,t):c.numOrString[t]?I(e,t):c.colours[t]?k(e,t):c.mapPos[t]&&A(e,t)}function L(e){if(E(e.fi)){var t=e.fi;if(!V(t.t))if("string"==typeof t.t){var n=l.unicodeAwareCharacters(t.t);t.t=n[0]}else t.t=String.fromCharCode(t.t);t.c&&(t.c=_t(t.c)?t.c:void 0);"ff"in t&&"string"!=typeof t.ff&&(t.ff=void 0)}else null!==e.fi&&delete e.fi}function T(e){return/^(ne|nw|se|sw|n|s|e|w)$/.test(e)}function R(e){return Z(e)&&e>=0&&e<360}function B(e){for(var t=0;t<e.length;t++){var n=e[t].p;if(R(n))return!0;if(T(n))return!1}return!1}function O(e){var t=B(e),n=t?R:T,r={};return function(e){var i=e,o=i.p;if(!n(o))return!1;(!t||i.r<0)&&delete i.r;var a=t?cu(o,i.r):o;if(r[a])return!1;r[a]=!0;return!0}}function G(e,t){var n=e;if(!Array.isArray(n))return!1;if(!t){var r=O(n);n=n.filter(r)}n.forEach(L);return n}function Y(e,t){c.halos.forEach((function(n){var r=e[n];if(r)if(t)"c"in r||"r"in r||"w"in r||delete e[n];else if("c"in r&&"r"in r&&"w"in r){k(r,"c");if(V(r.c)||V(r.r)||V(r.w)||!x(+r.r)||!x(+r.w))delete e[n];else{r.r=+r.r;r.w=+r.w}}else delete e[n]}))}function F(e,t){if(t||Array.isArray(e.donut.v)){if(e.donut.v){var n=e.donut.v;n.forEach((function(e,t){(!x(e)||e<0)&&(n[t]=0)}))}e.donut.c&&(Array.isArray(e.donut.c)&&!e.donut.c.some((function(e){return!_t(e)}))||delete e.donut.c);["bw","w"].forEach((function(t){t in e.donut&&M(e.donut,t)}));"b"in e.donut&&k(e.donut,"b");t||(e.donut=D(e.donut,f))}else delete e.donut}function P(e){E(e.oc)?m(e.oc):delete e.oc}function z(e){if(Array.isArray(e.bu))delete e.bu;else{var t=e.bu;t.p||(t.p="ne");var n=t.p;/^(ne|nw|se|sw)$/.test(n)?t.g&&L(t.g):delete e.bu}}function X(e,t,n){n[t]&&delete e[t]}function W(e,t,n,r){var i=t||{},o=n||{},a={nodes:{},links:{}};function u(e,t){return e.id in t.nodes||e.id in t.links}function s(e){return!!("node"===e.type&&e.id in o||"link"===e.type&&e.id in i)}e&&(a=e.reduce((function(e,t){if(t.id&&!u(t,e)&&!s(t)){if("node"===t.type){var n=!0;r&&i[t.id]&&(n=!1);n&&U(t)}var o="node"===t.type?"nodes":"links";o in e&&(e[o][t.id]=t)}return e}),a));return a}function U(e){if("node"===e.type){e.x=e.x||0;e.y=e.y||0}}function N(e){var t=a(e);n(e,(function(e){e.parentId&&delete t[e.parentId]}));return t}function j(e,t,r,i){var o={};n(e,(function(e,n){if(K(e,t,r,i))o[n]=e;else{var a=e.parentId;if(a){var u=t[a]||r[a];u&&u._combo&&(u._combo.linkIds=u._combo.linkIds.filter((function(t){return t!==e.id})))}}}));return o}function K(e,t,n,r){if(!r&&e.id1===e.id2)return!1;var i=t||{},o=n||{};return!(!o[e.id1]&&!i[e.id1]||!o[e.id2]&&!i[e.id2])}function H(e,t){_("hi",e,t)}function _(e,t,n){var r={};Q(e,t,n,r);J(r,e,n);s(e);"hi"===e&&u()}function J(e,t,n){Object.keys(e).forEach((function(e){var r=n[e];if(r._combo.linkIds.every((function(e){return n[e][t]}))){r[t]=!0;o(e)}else if(void 0!==r[t]){delete r[t];o(e)}}))}function Q(e,t,r,i){n(r,(function(n,a){var u=n.parentId;if((!0===t[n.id1][e]||!0===t[n.id2][e])&&!0!==n[e]){n[e]=!0;u&&r[u]&&(i[u]=!0);o(a)}}))}return{donutDefaults:f,typeCheck:d,filterNodesAndLinks:h,ensureObject:m,ensureTypesInArray:b,setZeroXY:U,hasValidEnds:K,ensureHiddenItemConsistency:H,ensureConsistency:_,applyPropertyRuleToComboLinks:J}}function vu(e,t,n,r,i,o,a,u,s,l,f){var c,d=e.getLayer(),h="solid",v=su;e.setLayer(oo.HALOS);for(var p=!0,g=0;g<v.length;g++)if(c=i[v[g]]){p=!1;f?oa(e,i.a1||!1,i.a2||!1,i.b1||0,i.b2||0,t,n,r,c.c,void 0,c.w,o,h,a,void 0,void 0,u,s,i.off||0,!1,l):i.off||n===r?tu(e,!1,!1,i.b1||0,i.b2||0,i.off||0,t,n,r,c.c,void 0,c.w,o,h,a,void 0,void 0,u,s,!1,l):ra(e,!1,!1,i.b1||0,i.b2||0,t,n,r,c.c,void 0,c.w,o,h,a,void 0,void 0,u,s,!1,l)}i._noHalos=p;e.setLayer(d)}var pu=W();function gu(e,t,n,r,i,o){var a=0,u=0,s="centre";if(-1!==e.indexOf("n")||-1!==e.indexOf("s")){u=-n;2===e.length&&(u-=r.dy);-1!==e.indexOf("s")&&(u*=-1)}if(-1!==e.indexOf("e")||-1!==e.indexOf("w")){a=t;s="right";2===e.length&&(a+=r.dx);if(-1!==e.indexOf("w")){a*=-1;s="left"}}!i&&o&&(-1!==["n","s"].indexOf(e)?u*=Math.sqrt(2):-1!==["e","w"].indexOf(e)&&(a*=Math.sqrt(2)));return{gdx:a,gdy:u,growDirection:s}}function mu(e){var t="centre";e>0&&e<180?t="right":e>180&&(t="left");return t}function yu(e,t,n,r,i){var a,u,s=o(e);if("circle"===i){a=Math.sin(s)*r;u=-Math.cos(s)*r}else{var l=[Math.atan2(t,n),Math.atan2(t,-n),Math.atan2(-t,-n),Math.atan2(-t,n)],f=void 0;for(f=0;f<l.length;f++)l[f]<0&&(l[f]+=2*Math.PI);if(s<l[0]||s>l[3])a=-(u=-n)*Math.tan(s);else if(s<l[1]){a=t;u=s===Math.PI/2?0:-a/Math.tan(s)}else if(s<l[2])a=-(u=n)*Math.tan(s);else{a=-t;u=s===Math.PI/2*3?0:-a/Math.tan(s)}}return{gdx:a,gdy:u}}function bu(e,t){return{gdx:Math.sin(o(e))*t,gdy:-Math.cos(o(e))*t}}function xu(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v,p=0,g=x(l.r);if(-1!==["n","ne","e","se","s","sw","w","nw"].indexOf(l.p))v=gu(l.p,n,r,f,s,u);else{var m="box",y=0;if(u){m="circle";y=s?Math.min(n,r):Math.sqrt(2)*n}var b=l.p;(v=g?bu(b,l.r*o):yu(b,n,r,y,m)).growDirection=mu(b)}if(null!==v.gdx){v.gdx<0&&v.gdy<0&&l.e&&(i._sl.e=Math.max(i._sl.e,l.e));p=Oa(e,t,a+pu+cu(l.p,l.r),v.gdx,v.gdy,o,l,i,v.growDirection,!0,c,d,h)}return v.gdy+p}var wu=W();function Au(e,t,n,r,i,o){for(var a,u=!0,s=0;s<lu.length;s++){var l=lu[s];if(a=i&&o.selectedNode[l]||r[l]){u=!1;var f=t+wu+l,c=a.r*n,d=a.w*n;d/2>=c?e.circle(0,0,c+d/2,Xt.white,-1,a.c,!0,f,0,void 0,!1):e.circle(0,0,c,a.c,d,Xt.white,!1,f,0,void 0,!1)}}r._noHalos=u&&!i}var Mu=W();function Iu(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v){var p=n||[],g=r;if(a){for(var m=0,y=0;y<p.length-1;y++)m+=Ca(p[y],p[y+1])*o;g+=m/2}else p.length>0?g-=Ea(p[p.length-1])*o:g-=Ea({});if(l){var b=g;if(p.length>0){w((function(e,t){b=t}));var x=p[0].e||1;b-=x*o*To/2;l._sl.e*=x}l._sl.x=b;l._sl.y=i;l._sl.w=!0}function w(e){for(var t=p.length-1,n=g;t>=0;t--){e(p[t],n);t>0&&(n-=Ca(p[t-1],p[t])*o)}}if(a&&u){var A=ao[e.getLayer()];Ro(e,A,v,(function(){w((function(t,n){e.circle(n,i,Aa(t)*o*1.25,Xt.white,-1,f(),!0,s,h,void 0,!1)}))}))}var M=0;w((function(n,r){Oa(e,t,s+Mu+M,r,i,o,n,l,null,!1,c,d,h);M++}))}function Eu(e,t){return e._combo&&e._combo.open?"circle":t?"circle"===e.sh?e.sh:"box":"box"===e.sh||"circle"===e.sh?e.sh:e.sq?"box":"circle"}function Cu(e,t,n,r,i,o){var a=t+r,u=n+r;if("circle"===e){i(Math.min(a,u))}else o(-a,-u,a,u)}function ku(e,t,n,r,i,o,a,u,s,l,f,c){Cu(c,t,n,r,(function(t){e.circle(0,0,t,i,o,u,s,l,f,a,!1)}),(function(t,n,r,c){e.rect(t,n,r,c,i,o,u,s,l,f,a)}))}function Su(e,t,n,r,i){Cu(i,t,n,r,(function(t){e._c=t}),(function(t,n,r,i){e._cl.push({x1:t,y1:n,x2:r,y2:i})}))}function Lu(e,t,n,r,i,o){var a=3*t,u=3*(r-t)-a,s=1-a-u,l=3*n,f=3*(i-n)-l,c=1-l-f;function d(e){return((s*e+u)*e+a)*e}function h(e,t){var n=v(e,t);return((c*n+f)*n+l)*n}function v(e,t){var n,r,i,o,l,f;for(i=e,f=0;f<8;f++){o=d(i)-e;if(Math.abs(o)<t)return i;l=(3*s*i+2*u)*i+a;if(Math.abs(l)<1e-6)break;i-=o/l}if((i=e)<(n=0))return n;if(i>(r=1))return r;for(;n<r;){o=d(i);if(Math.abs(o-e)<t)return i;e>o?n=i:r=i;i=(r-n)/2+n}return i}return h(e,1/(200*o))}function Tu(e){return e<0?0:e>1?1:e}function Ru(e){return e<0?0:e>1?1:Lu(e,.25,.01,.25,1,1)}function Zu(e){return Math.atan(e-.5)/(2*Math.atan(.5))+.5}var Bu=4,Ou=27;function Gu(e,t){var r=vn,i=W(),o={b1:0,b2:0,c:"",c2:void 0,fb:!1,fbc:"",fc:"",ff:"",flow:void 0,fs:0,t1:void 0,t2:void 0,w:0},a=Co(),u={arrows:"normal",fontFamily:void 0,glyphsAlongLink:!1,iconFontFamily:void 0,imageAlignment:{},editcolour:void 0,tight:!1,avoidLabels:!1,selectionFontColour:void 0,selectedNode:null,isNodeSelStyle:!1,selectedLink:null,isLinkSelStyle:!1,labelOffset:0,truncateLabel:!1,defaultOpenComboStyle:uu,labelAlongLink:!1,linkStylePath:"direct"},s={dx:0,dy:0},l={},f={present:{t:!0,t1:!1,t2:!1},pos:{t:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t1:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1},t2:{lx:0,ly:0,tdx:1,tdy:0,tangent:0,R:0,signf:1}}},c={},d={unzoom:1,easingValue:0,resizeRect:null,stillDirty:new Map,useSlowPathRendering:!1,useSlowPathRenderingLastTime:!1,alwaysRedraw:!1};function h(e,t){l[e]=t}function v(){var e;return null!=(e=u.editcolour)?e:Xt.edit}function p(){return u.selectionFontColour||Xt.white}function g(e,t){u.arrows=e.arrows;x(e.labelOffset)&&(u.labelOffset=e.labelOffset);var n=du(e.truncateLabels);u.truncateLabel=void 0!==n&&n;u.editcolour=e.selectionColour;u.fontFamily=e.fontFamily;u.glyphsAlongLink=!e.linkStyle.inline&&"along"===e.linkStyle.glyphs;u.iconFontFamily=e.iconFontFamily;u.imageAlignment=e.imageAlignment||{};u.avoidLabels=!!e.linkEnds.avoidLabels;u.tight="loose"!==e.linkEnds.spacing;u.selectionFontColour=e.selectionFontColour;u.selectedNode=e.selectedNode||null;u.isNodeSelStyle=E(e.selectedNode);u.selectedLink=e.selectedLink||null;u.isLinkSelStyle=E(e.selectedLink);u.labelAlongLink=!!e.linkStyle.inline;u.linkStylePath=t?e.linkStyle.path:"direct"}function m(e,t){return bo(e,t,d.unzoom,u.arrows)}function y(t,n,r){return("horizontal"===t||"vertical"===t)&&n!==r&&e.privateTopParentId(n)!==e.privateTopParentId(r)}function b(t,n,r,i,a,s,l){var h,v=l.isSelected,p=l.isRevealed,g=1;n._edit=null;var m=n.id;v&&u.isLinkSelStyle?w(h=o,u.selectedLink,n):h=n;var y=!1;p&&(y=e.privateTopParentId(n.id1)!==e.privateTopParentId(n.id2));i.parentId&&(g=I(1,i.parentId,r));a.parentId&&(g=Math.min(g,I(1,a.parentId,r)));var b=(h.w||1)*g*d.unzoom,x=h.c||Xt.midgrey;f.present.t=!!(n.t||n.g&&n.g.length||s);f.present.t1=!!n.t1;f.present.t2=!!n.t2;if(c[n.id])oa(t,!!n.a1,!!n.a2,h.b1||0,h.b2||0,m,i,a,x,h.c2,b,g,h.ls,v,h.flow,f,d,u,n.off||0);else if(n.off||i===a){var A=n.off||0;y&&(A/=g);tu(t,!!n.a1,!!n.a2,h.b1||0,h.b2||0,A,m,i,a,x,h.c2,b,g,h.ls,v,h.flow,f,d,u)}else ra(t,!!n.a1,!!n.a2,h.b1||0,h.b2||0,m,i,a,x,h.c2,b,g,h.ls,v,h.flow,f,d,u);n._x=f.pos.t.lx;n._y=f.pos.t.ly}function w(e,t,n){e.b1=(t.b1||0)>=0?t.b1:n.b1;e.b2=(t.b2||0)>=0?t.b2:n.b2;e.c=t.c||n.c;e.c2=t.c2||n.c2;e.fb=t.fb||n.fb;e.fbc=t.fbc||n.fbc;e.fc=t.fc||n.fc;e.flow=t.flow||n.flow;e.ff=t.ff||n.ff;e.fs=t.fs||n.fs;e.t1=t.t1||n.t1;e.t2=t.t2||n.t2;e.ls=t.ls||n.ls;e.w=t.w||n.w}function A(i,a,s,h,g,m,b,x){var A,C=x.isSelected,k=x.isRevealed,S=1;s._edit=null;var L=s.id,T=C&&!u.isLinkSelStyle,R=T;C&&u.isLinkSelStyle?w(A=o,u.selectedLink,s):A=s;E(A.flow)&&(d.alwaysRedraw=!0);var Z=!1;k&&(Z=e.privateTopParentId(s.id1)!==e.privateTopParentId(s.id2));g.parentId&&(S=I(1,g.parentId,h));m.parentId&&(S=Math.min(S,I(1,m.parentId,h)));var B=(A.w||1)*S*d.unzoom,O=A.c||Xt.midgrey,G=0;f.present.t=!!(s.t||s.g&&s.g.length||b);f.present.t1=!!s.t1;f.present.t2=!!s.t2;var Y,F=f.present.t||f.present.t1||f.present.t2;c[s.id]=y(u.linkStylePath,g.id,m.id);if(c[s.id])Y=oa(a,!!s.a1,!!s.a2,A.b1||0,A.b2||0,L,g,m,O,A.c2,B,S,A.ls,C,A.flow,f,d,u,s.off||0);else if(s.off||g===m){var D=s.off||0;Z&&(D/=S);Y=tu(a,!!s.a1,!!s.a2,A.b1||0,A.b2||0,D,L,g,m,O,A.c2,B,S,A.ls,C,A.flow,f,d,u)}else Y=ra(a,!!s.a1,!!s.a2,A.b1||0,A.b2||0,L,g,m,O,A.c2,B,S,A.ls,C,A.flow,f,d,u);s._x=f.pos.t.lx;s._y=f.pos.t.ly;if(F){var P=0;n(f.pos,(function(e,n){if(f.present[n]){var o=void 0,c=void 0,h=void 0,g=void 0,m=void 0,y=void 0,b=null;if("t"===n||"string"==typeof s[n])y=s[n];else{b="t1"===n?A.t1:"t2"===n?A.t2:s[n];var x=s[n];y=b.t?b.t:x.t;o=b.fb?b.fb:x.fb;c=b.fbc?b.fbc:x.fbc;h=b.fc?b.fc:x.fc;g=b.ff?b.ff:x.ff;m=b.fs?b.fs:x.fs}var w=!1;m=+(m||A.fs||r)*S*d.unzoom;y=y||"";g=g||A.ff||u.fontFamily;var M=h||A.fc||Xt.black,I=c||A.fbc||Xt.textback,E=!!(void 0!==o?o:A.fb);if(T){M=p();I=v()}var C=Da(s,y,u.truncateLabel,l.showFullLabel||null,t),k=Pa(C,i,m,E,g,u.fontFamily),Z=m+3*d.unzoom;G=Z*C.length;var B=0,O=0;C.length>0&&(B-=k[0]/2);for(var F=-((C.length-1)*Z)/2,D=0;D<C.length;D++){0===D&&(O=F);var z=C[D],V=qo(i,a,z,0,F,L,!0,M,I,E,s,!1,!0,99,k[D],T,m,g,n,1,d.unzoom,u,P);z.length>0&&!Y&&(s._edit={hib:!0});w=w||V;F+=Z}w&&(R=!1);var X="t"===n?s.g:b&&b.g;if(Ao(X)){ou(a,i,X,B,O,S,!w,T,L,"t"===n?null:n,e,v,d,u,P);R=!1}}P++}))}if(R){var z=Math.max(.66*(A.w||0),+(A.fs||r)*d.unzoom/2);a.circle(0,0,z,Xt.white,-1,v(),!0,L,0,void 0,!1)}s.bu&&Xa(a,i,L,G/2+4,S,s.bu,!1,d,u,l,t,r,0);if(g.du){s._du=!0;M(g,"id1",L,a,B,O,Y)}if(m.du){s._du=!0;M(m,"id2",L,a,B,O,Y)}s._noHalos||vu(a,L,g,m,s,S,C,d,u,B,c[s.id]);Y||(s._edit={hib:!0})}function M(e,t,n,r,o,a,u){var s=u?o:0,l=r.getAnchorPosition(e.id,0);r.circle(l.x,l.y,1.5*s,a,s,Xt.white,!0,n+i+t,-1,void 0,!1)}function I(e,t,n){var r=e,i=n[t];if(i){r*=i._combo.e;i.parentId&&(r=I(r,i.parentId,n))}return r}function C(e,t){for(var n=e,r=n.x,i=n.y;n.parentId;){r=(n=t[n.parentId]).x+(r-n.x)*n._combo.e;i=n.y+(i-n.y)*n._combo.e}return{x:r,y:i}}function k(e,t,n,r,o){if(!n.hi){var s,l,f,c,h,p,g,m,y,b,w=o.isOpenCombo,A=1,M=n.id,E=Io(n),k=Eu(n,E),L=o.isSelected,T=L&&u.isNodeSelStyle,R=L&&!u.isNodeSelStyle,Z=u.selectedNode,B=T&&Z.b||n.b,O=T&&Z.bs||n.bs,G=T&&Z.c||n.c,Y=(E?1:T&&Z.e||n.e||1)*d.unzoom;l=E&&(T&&Z.re||n.re)||!1;f=T&&Z.u||n.u;c=T&&Z.fi||n.fi;h=T&&x(Z.bw)?Z.bw:n.bw;p=n.w;g=n.h;m=n.x;y=n.y;var F,D=n.donut&&"circle"===k&&!w?n.donut:void 0;if(w){var P=n.oc;if(P){h=0;if(null===P.b)B=void 0;else{void 0===P.bw?h=u.defaultOpenComboStyle.bw:P.bw>0&&(h=P.bw);B=P.b||u.defaultOpenComboStyle.b}O=P.bs||u.defaultOpenComboStyle.bs;G=P.c||u.defaultOpenComboStyle.c;l=P.re||u.defaultOpenComboStyle.re;p=P.w||u.defaultOpenComboStyle.w}else{B=u.defaultOpenComboStyle.b;h=u.defaultOpenComboStyle.bw;O=u.defaultOpenComboStyle.bs;G=u.defaultOpenComboStyle.c;l=u.defaultOpenComboStyle.re;p=u.defaultOpenComboStyle.w}if(T){var z=u.selectedNode.oc;if(z){B=z.b||B;h=z.bw||h;O=z.bs||O;G=z.c||G}}c=void 0;f=void 0;k="circle";A=T&&u.selectedNode.e||n.e||1;g=p*=Y=n._combo.e}var V=1;if(n.parentId){V=I(1,n.parentId,r);var X=C(n,r);p*=V;g*=V;Y*=V;m=X.x;y=X.y}t.setNodeAnchorPosition(n,m,y);if(!n.du){if(D){F=!0;s=D.b;h=Y*(D.w+2*D.bw);O=void 0}else if(B&&(void 0===h||h>0)){F=!0;s=B;h=Y*(h||Bu)}else{F=!1;s=Xt.white;h=0;O=void 0}var W,U,N=!!G,j=!!f||!(!c||!c.t),K=N?G:Xt.white;n._c=0;n._cl=[];n._edit=null;n._sl?n._sl.e=Y:n._sl={x:0,y:0,e:Y,w:!1};if(E){W=p/2;U=g/2}else U=W=Y*Ou;var H,_,J,Q=W+h/2,q=U+h/2;if(D){H=Y*D.w;_=h/2}else _=.75*(H=F?h:Y*Bu);J=u.tight?F||N?h/2:_-H/2:_+H/2;if(j||F||N){Su(n,Q,q,J,k);if(L&&(!R&&l||R)){var $=ao[t.getLayer()];Ro(t,$,o,(function(){if(R){var e=v();ku(t,Q,q,_,e,H,void 0,e,!1,M,0,k)}l&&(d.resizeRect=t.createDummyShapePrimitive(M,Q+_,q+_,k))}))}}N&&ku(t,Q,q,0,s,-1,O,K,N,M,0,k);if(j)if(f){b=u.imageAlignment[f];ko(a,b,W,U);var ee=n.ci?"ci":null,te=1,ne=!1,re=0;t.image(a[0],a[1],a[2],a[3],f,M,re,ee,te,ne)}else{var ie=E?Math.min(W,U):W;La(t,u,e,M,0,0,0,ie,c.t,c.c||Xt.black,c.ff||u.iconFontFamily)}if(F){var oe=D&&0===D.bw?-1:h||-1;oe>=0&&ku(t,Q,q,0,s,oe,O,K,!1,M,0,k)}D&&ru(t,Math.min(Q,q),D,Y,M+i);S(t,e,h,W,U,n,E,k,F,N,j,R,Y,A,M,T,o)}}}function S(e,n,i,o,a,f,c,h,g,m,y,b,w,A,M,I,E){var C,k,S,L,T,R,Z,B=0,O=0,G=0,Y=Mo(f),F=!1,D=E.isOpenCombo,z=f._combo&&f._combo.open?A:w;if(I){var V=u.selectedNode;k=V.fb||f.fb;S=V.fbc||f.fbc;L=V.fc||f.fc;T=V.ff||f.ff;R=(V.fs||f.fs||r)*z;Z=V.tc||f.tc}else{k=f.fb;S=f.fbc;L=f.fc;T=f.ff;R=(f.fs||r)*z;Z=f.tc}D&&(Z=!1);var X=3*z+R/2,W=L||Xt.black,U=S||Xt.textback;if(b){W=p();U=v()}var N=a+X,j=Da(f,null,u.truncateLabel,l.showFullLabel||null,t),K=Pa(j,n,R,!!k,T,u.fontFamily),H=R+3,_=H,J=H*j.length;j.length>0&&(B-=K[0]/2);var Q=y||g||m,q=P(Z)?!!Z:!y&&!c,$=(j.length-1)*(_/2);if(Q)q&&(N=-$);else{if(Y){var ee=Ea((fe=f.g)[fe.length-1])*z;B=ee;G+=K[0]/2+ee}N=0}j.length>0&&(O=N);g&&!q&&(N+=i-3*z);if(Q){var te=3,ne=3;s.dx=0;s.dy=y?-8:0;var re=2;if(!c&&"circle"===h){te+=re;ne+=re;if(y){s.dx+=re;s.dy+=re}}if(c&&!D){te++;ne++}var ie=te*z,oe=ne*z;s.dx*=z;s.dy*=z;if(D){var ue=((f.oc.w||u.defaultOpenComboStyle.w||0)+(f.oc.bw||u.defaultOpenComboStyle.bw||0))/2/Math.sqrt(2),se=o/Ou;f._sl.e=se;f._sl.x=-ue*w-ie/A;f._sl.y=-ue*w-oe/A}else{f._sl.x=-o+(ie-s.dx);f._sl.y=-a+(oe-s.dy)}if(Y){var le="circle"===h,fe=f.g;for(C=0;C<fe.length;C++){var ce=xu(e,n,o-ie,a-oe,f,w,M,le,c,fe[C],s,d,u,0),de=x(fe[C].r);q||de||(N=Math.max(N,ce+X))}}}for(var he=0;he<j.length;he++){var ve=qo(n,e,j[he],G,N,M,!0,W,U,!!k,f,!1,!0,99,K[he],b,R,T||u.fontFamily,null,z,d.unzoom,u,0);F=F||ve;N+=_}if(!Q){var pe=!f.t||!F;Iu(e,n,f.g||null,pe?0:B,O,z,pe,b,M,f,v,d,u,0,E)}var ge=!f._noHalos||I;!c&&ge&&Ro(e,oo.HALOS,E,(function(){Au(e,M,z,f,I,u)}));if(f.bu){var me=0;Q?me=a:J>0?me=J/2+4:Mo(f)&&(me=13*z);Xa(e,n,M,me,z,f.bu,D,d,u,l,t,r,0)}}function L(e,t){var r=[],i=D(e,{sh:"box",x:0,y:0});function o(e,t){e&&r.push(t)}if(Io(i))if("circle"===i.sh){var a=Math.min(i.w,i.h)/2;n(t,(function(e){if(Io(e)){var t=e.w,n=e.h;"circle"===e.sh?o(Ln(i.x,i.y,a,e.x,e.y,Math.min(t,n)/2),e.id):o(Rn(i.x,i.y,a,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Ln(i.x,i.y,a,e.x,e.y),e.id)}))}else{var u={x1:i.x-i.w/2,y1:i.y-i.h/2,x2:i.x+i.w/2,y2:i.y+i.h/2};n(t,(function(e){if(Io(e)){var t=e.w,n=e.h;if("circle"===e.sh){var r=Math.min(t,n)/2;o(Tn(u,e.x-r,e.y-r,e.x+r,e.y+r),e.id)}else o(Tn(u,e.x-t/2,e.y-n/2,e.x+t/2,e.y+n/2),e.id)}else o(Sn(u,e.x,e.y),e.id)}))}return r}function T(){return d.stillDirty.size>0}function R(){return d.alwaysRedraw}function Z(t,n,r,i,o,a,s,l,f,c,h,v){var p,g,m,y,x={isSelected:!1,isOpenCombo:!1,isInCombo:!1,isInBackground:!1,isTransient:!1,isParentTransient:!1,isRevealed:!1,isParentRevealed:!1};d.useSlowPathRendering=d.useSlowPathRenderingLastTime;d.useSlowPathRenderingLastTime=!1;var w=v&&!d.useSlowPathRendering&&!r.allDirty,M=new Set;function I(t){var r=n[t];if(r){var i=e.privateFirstVisibleItemInAncestry(r.id1),o=e.privateFirstVisibleItemInAncestry(r.id2);!i||i._combo&&i._combo.open||M.add(i.id);!o||o._combo&&o._combo.open||M.add(o.id)}}l.forEach(I);if(d.resizeRect){var E=r.dirty.get(d.resizeRect.id);(r.allDirty||2===E)&&(d.resizeRect=null)}function S(e,r){var i=e.parentId,o=!1;if(i){if(!r&&s(i)||f(i))return!0;var a=t[i]||n[i];a&&a.parentId&&(o=S(a,!1))}i=e.id;var u=r&&l.has(i)||M.has(i)||c(i),d=!r&&s(i),h=!r&&f(i);return o||!u&&(d||h)}function L(n){w=!1;var r,a,u,l=[],f=!1,d=!!n._combo&&n._combo.open,h=!(!n.parentId&&!d);x.isOpenCombo=d;x.isInBackground=!!n.bg;x.isSelected=s(n.id);x.isInCombo=!!n.parentId;if(M.has(n.id)||c(n.id)){x.isRevealed=!0;M.add(n.id);l.push(oo.REVEALED)}else x.isRevealed=!1;if(h){var v=e.privateGetAncestryIds(n.id);l.push(oo.COMBOS);r=!1;for(var p=0;p<v.length-1;p++){var g=v[p];l.push(i.createComboSegment(g));var m=t[g];r||(r=m&&m._combo&&S(m,!1));if(!x.isRevealed&&!a&&(a=M.has(g)||c(g))){x.isRevealed=!0;M.add(n.id);l.unshift(oo.REVEALED)}}x.isParentTransient=!!r;x.isParentRevealed=!!a;d&&l.push(i.createComboSegment(n.id))}else{l.push(oo.MAIN);x.isParentTransient=!1;x.isParentRevealed=!1}x.isRevealed||(f=S(n,!1)&&(!Io(n)||h))&&l.unshift(oo.TRANSIENT);x.isTransient=f;i.startGeneratingFor(n,w,x.isInCombo||x.isOpenCombo);if(d)u=oo.COMBO_CONTAINER;else{u=Io(n)?oo.SHAPES:oo.NODES;l.push(n.bg?oo.BG:oo.FG)}h&&!i.hasPath(l)&&i.createItemLayersAt(l);i.setLayerPath(l);i.setLayer(u);k(o,i,n,t,x)}function T(r){w=!1;var a,u,f,d=[],v=!1,p=r.parentId&&(r._combo||t[r.parentId]),g=r.parentId&&n[r.parentId];x.isInBackground=!!r.bg;x.isSelected=s(r.id);x.isInCombo=!!r.parentId;x.isRevealed=l.has(r.id)||c(r.id)||M.has(r.parentId);if(!x.isRevealed)if(f=S(r,!0)){d.push(oo.TRANSIENT);x.isTransient=!0}else x.isTransient=!1;i.startGeneratingFor(r,w,x.isInCombo);a=t[r.id1];u=t[r.id2];if(x.isRevealed){a=e.privateFirstVisibleItemInAncestry(r.id1);u=e.privateFirstVisibleItemInAncestry(r.id2);if(!a||!u||a===u&&a!==t[r.id1])return;d.push(oo.REVEALED)}if(p){for(var m=e.privateGetAncestryIds(r.id),y=[],b=g?2:1,I=0;I<m.length-b;I++){var E=m[I];y.push(i.createComboSegment(E));if(!f){var C=t[E];v||x.isRevealed||(v=C&&C._combo&&S(C,!1));v&&d.unshift(oo.TRANSIENT)}}x.isParentTransient=v;if(y.length>0){d.push(oo.COMBOS);d=d.concat(y);i.hasPath(d)||i.createItemLayersAt(d)}else d.push(oo.MAIN)}else d.push(oo.MAIN);d.push(r.bg?oo.BG:oo.FG);i.setLayerPath(d);i.setLayer(oo.LINKS);A(o,i,r,t,a,u,h,x)}function R(e){return e.parentId||u.glyphsAlongLink&&Lo(e)||e._du}function Z(n){var r;x.isInBackground=!!n.bg;x.isSelected=s(n.id);x.isInCombo=!!n.parentId;x.isRevealed=l.has(n.id)||c(n.id)||M.has(n.parentId);if(!x.isRevealed){r=S(n,!0);x.isTransient=r}i.startGeneratingFor(n,!0,x.isInCombo);var o=t[n.id1],a=t[n.id2];if(x.isRevealed){o=e.privateFirstVisibleItemInAncestry(n.id1);a=e.privateFirstVisibleItemInAncestry(n.id2);if(!o||!a||o===a&&o!==t[n.id1])return}b(i,n,t,o,a,h,x)}d.stillDirty.clear();d.easingValue=Zu(Date.now()%1e3/1e3);d.unzoom=a.getUnzoom();function B(e){var t=n[e];R(t)?T(t):Z(t)}if(r.allDirty){i.removeAllItems();d.alwaysRedraw=!1;y=Object.keys(t);m=Object.keys(n);for(p=0,g=y.length;p<g;p++)L(t[y[p]]);for(p=0,g=m.length;p<g;p++)T(n[m[p]])}else{var O=[],G=[],Y=function(e,r){var o=t[r];if(o)if(o.parentId||o._combo)L(o);else if(1===e)if(o.parentId){var a=C(o,t);i.setNodeAnchorPosition(o,a.x,a.y)}else i.setNodeAnchorPosition(o,o.x,o.y);else L(o);else if(n[r])2===e?O.push(r):G.push(r);else{w=!1;i.removeItem(r)}};r.dirty.forEach(Y);if(r.allLinksMoved)for(p=0,g=(m=Object.keys(n)).length;p<g;p++)B(m[p]);else if(r.allLinksDirty){d.alwaysRedraw=!1;for(p=0,g=(m=Object.keys(n)).length;p<g;p++)T(n[m[p]])}else{O.forEach((function(e){T(n[e])}));G.forEach(B)}}return{stillDirty:d.stillDirty,rebuildAll:d.useSlowPathRendering||!w}}function B(e,t,n,r){var o=e.getLayerPath();e.setLayerPath(null);e.startGeneratingForExtras();e.setLayer(oo.HANDLES);if(d.resizeRect&&1===r.size){Yn(e,t,n,d.resizeRect,1,d.resizeRect.id,v(),i);Yn(e,t,n,d.resizeRect,4,d.resizeRect.id,Xt.transparent,i)}e.setLayerPath(o)}return{animated:T,contains:L,currentArrowLength:m,editColour:v,fontSize:r,generate:Z,generateHandles:B,getAlwaysRedraw:R,setOptions:g,setSpecialOptions:h}}var Yu=1e-6,Fu=22e-17;function Du(e){return"number"==typeof e&&isFinite(e)}function Pu(e){return Du(e)&&(0|e)===e}function zu(e,t){return Math.sqrt(e*e+t*t)}function Vu(e,t,n,r){return zu(e-n,t-r)}function Xu(e,t){return Math.round(e/t)*t}function Wu(e,t){return Math.ceil(e/t)*t}function Uu(e,t,n){return e<t?t:e>n?n:e}function Nu(e,t,n){return n*e+(1-n)*t}function ju(e,t,n){var r=t-e;return r>Fu?(n-e)/r:0}function Ku(e,t,n,r,i,o){return e+(t-e)/(1+Math.pow(i*Math.E,-r*(o-n)))}var Hu=2147483647;function _u(){return Hu*Math.random()|0}function Ju(e){var t=48271,n=44488,r=3399,i=Math.round(e)%Hu;function o(){var e=t*(i%n|0)-r*(i/n|0);return(i=e>0?e:e+Hu)-1}o.reset=function(e){return i=e};o.state=function(){return i};return o}var Qu,qu=function(){var e=function(){throw"Invalid operation"},t=function(){return Math.random()*Hu|0};t.reset=e;t.state=e;return t}();function $u(){return qu}!function(e){function t(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=$u());var r=t-e,i=function(){return e+r*(n()/Hu)};i.rng=n;return i}e.uniform=t;function n(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=$u());var r=t-e,i=function(){return Math.round(e+r*(n()/Hu))};i.rng=n;return i}e.uniformi32=n;function r(e,t,n){void 0===e&&(e=0);void 0===t&&(t=1);void 0===n&&(n=$u());var r=2/Hu,i=-1,o=!1,a=function(){if(o){o=!1;return e+t*i}var a,u,s;do{s=(a=n()*r-1)*a+(u=n()*r-1)*u}while(s>=1||0===s);var l=Math.sqrt(-2*Math.log(s)/s);i=u*l;o=!0;return e+t*a*l};a.rng=n;return a}e.gaussian=r}(Qu||(Qu={}));function es(e,t){Object.setPrototypeOf(e,t);function n(){this.constructor=e}if(null!==t){n.prototype=t.prototype;e.prototype=new n}else e.prototype=Object.create(e)}function ts(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e}function ns(){return{next:function(){return ws},size:0}}function rs(e){var t={value:e,done:!1};return{next:function(){var e=t;t=ws;return e},size:1}}function is(e,t){var n=0,r={value:null,done:!1},i={next:function(){var i=e.next();i.done?r.done=!0:r.value=t(i.value,n++);return r},size:0};"size"in e&&(i.size=e.size);return i}function os(e,t){for(var n=0,r=e.next();!r.done;n++,e.next())t(r.value,n)}function as(e,t){var n=ns(),r=0;return{next:function(){for(var i=n.next();i.done;){var o=e.next();if(o.done)break;i=(n=t(o.value,r++)).next()}return i
}}}function us(e,t,n){for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n=t(n,r.value,i);return n}function ss(e,t){return{next:function(){for(;;){var n=e.next();if(n.done)return n;if(t(n.value))return n}}}}function ls(e,t){var n={value:e-1,done:!1};return{next:function(){++n.value>=t&&(n.done=!0);return n},size:t-e}}function fs(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return cs(e)}function cs(e,t){return void 0!==t?ds(e,t):hs(e)}function ds(e,t){var n={value:null,done:!1,i:-1};return{next:function(){n.i++;n.i<e.length?n.value=t(e[n.i],n.i):n.done=!0;return n},size:e.length}}function hs(e){var t={value:null,done:!1,i:-1};return{next:function(){t.i++;t.i<e.length?t.value=e[t.i]:t.done=!0;return t},size:e.length}}function vs(e,t,n){return"function"==typeof t?ps(e,t,n):gs(e,t)}function ps(e,t,n){void 0===n&&(n=[]);for(var r=e.next(),i=0;!r.done;r=e.next(),i++)n.push(t(r.value,i));return n}function gs(e,t){void 0===t&&(t=[]);for(var n=e.next();!n.done;n=e.next())t.push(n.value);return t}function ms(e,t){void 0===t&&(t=[null,null]);var n={value:t,done:!1},r={next:function(){var r=e.next();if(r.done){n.done=!0;return n}t[0]=r.value;if((r=e.next()).done){n.done=!0;return n}t[1]=r.value;return n},size:0};"size"in e&&(r.size=Math.floor(e.size/2));return r}function ys(e,t){for(var n=e.next();!n.done;n=e.next())t=n.value;return t}function bs(e,t){var n=e.next();return n.done?t:n.value}function xs(e,t){return{next:function(){return e.next()},size:t}}var ws={value:null,done:!0},As={empty:ns,single:rs,map:is,forEach:os,flatMap:as,reduce:us,filter:ss,fromRange:ls,from:fs,fromArray:cs,toArray:vs,pairs:ms,last:ys,first:bs,withSize:xs};function Ms(e){return e.buffer&&e.buffer instanceof ArrayBuffer}function Is(e,t){for(var n=0;n<e.length;n++)e[n]=t}function Es(e,t){return e<t}function Cs(e,t,n){var r=e[t];e[t]=e[n];e[n]=r}function ks(e,t,n,r,i){void 0===n&&(n=Es);void 0===r&&(r=0);void 0===i&&(i=e.length-r);for(var o,a=0;i>0;){o=0|r;if(n(e[o+=a=i/2|0],t)){r=++o;i-=a+1}else i=a}return r}function Ss(e,t){void 0===t&&(t=0);for(var n=t,r=0,i=e.length;r<i;r++)e[r]=n++}function Ls(e,t){for(var n=0;n<t.length;n++)if(t[n]<0)t[n]=~t[n];else for(var r=n,i=t[n];i!==n;){Cs(e,r,i);i=t[r=i];t[r]=~i}}var Ts,Rs=function(){function e(e,t,n,r,i,o){void 0===r&&(r=Ts.sizeFromShape(e));void 0===i&&(i=0);void 0===o&&(o=Ts.computeStrides(e));this.shape=e;this.dtype=t;this.values=n;this.size=r;this.offset=i;this.strides=o;this.rank=this.shape.length;this.lastIndex=Ts.lastIndex(this);this.lastStride=this.strides[this.rank-1];this.contiguous=this.lastIndex-i==r-1}e.prototype.getNextIndex=function(e){return e<0?this.offset:(e+=this.lastStride)>this.lastIndex?-1:e};return e}(),Zs=function(e){es(t,e);function t(){var t=null!==e&&e.apply(this,arguments)||this;t.rankType=0;return t}t.prototype.get=function(){return this.values[this.index()]};t.prototype.set=function(e){this.values[this.index()]=e};t.prototype.index=function(){return 0|this.offset};return t}(Rs),Bs=function(e){es(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=1;u.stride0=u.strides[0];return u}t.prototype.get=function(e){return this.values[this.index(e)]};t.prototype.set=function(e,t){this.values[this.index(e)]=t};t.prototype.index=function(e){return this.offset+e*this.stride0|0};return t}(Rs),Os=function(e){es(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=2;u.stride0=u.strides[0];u.stride1=u.strides[1];return u}t.prototype.get=function(e,t){return this.values[this.index(e,t)]};t.prototype.set=function(e,t,n){this.values[this.index(e,t)]=n};t.prototype.index=function(e,t){return this.offset+e*this.stride0+t*this.stride1|0};return t}(Rs),Gs=function(e){es(t,e);function t(t,n,r,i,o,a){var u=e.call(this,t,n,r,i,o,a)||this;u.rankType=3;u.stride0=u.strides[0];u.stride1=u.strides[1];u.stride2=u.strides[2];return u}t.prototype.get=function(e,t,n){return this.values[this.index(e,t,n)]};t.prototype.set=function(e,t,n,r){this.values[this.index(e,t,n)]=r};t.prototype.index=function(e,t,n){return this.offset+e*this.stride0+t*this.stride1+n*this.stride2|0};return t}(Rs);function Ys(e,t,n){null==t&&(t=Ts.inferShape(e));null==n&&(n=Ts.inferDType(e,"f32"));var r=Ms(e)||Array.isArray(e)?e:[e],i=Ts.asTypedArray(r,n);return new(Ts.getViewCtor(t.length))(t,n,i)}function Fs(e,t,n){void 0===t&&(t="f32");var r=Ts.sizeFromShape(e),i=Ds(t,r,n);return new(Ts.getViewCtor(e.length))(e,t,i,r)}function Ds(e,t,n){var r;switch(e){case"f64":r=new Float64Array(t);break;case"f32":r=new Float32Array(t);break;case"i32":r=new Int32Array(t);break;default:Ts.throwUnknownDType(e)}void 0!==n&&Is(r,n);return r}function Ps(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=[],i=[],o=e.offset,a=0,u=t.length;a<u;a++){var s=e.strides[a];if(Pu(t[a]))o+=s*t[a];else{i.push(e.shape[a]);r.push(s)}}return new(Ts.getViewCtor(i.length))(i,e.dtype,e.values,Ts.sizeFromShape(i),o,r)}function zs(e,t){void 0===t&&(t=0);for(var n=e.rank,r=e.shape,i=[],o=0;o<n;o++)i.push("all");var a=[];for(o=0;o<r[t];o++){i[t]=o;var u=[e].concat(i);a.push(Ps.apply(null,u))}return a}function Vs(e,t,n,r){var i=Ts.getViewCtor(e.rank),o=t.length;void 0!==r?o=Math.min(r.length,o):r=Ds(e.dtype,o);switch(e.rank){case 0:r[0]=e.get();return new i([1],e.dtype,r);case 1:for(var a=0;a<o;a++){var u=e.get(t[a]);r[a]=u}return new i([o],e.dtype,r)}throw new Error("Rank not impl")}function Xs(e){for(var t=Fs(e.shape,e.dtype),n=-1,r=e.values,i=-1,o=t.values;(n=e.getNextIndex(n))>=0&&(i=t.getNextIndex(i))>=0;)o[i]=r[n];return t}function Ws(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]=t}function Us(e,t){void 0===t&&(t=[0,0]);for(var n=Number.MAX_VALUE,r=Number.MIN_VALUE,i=-1,o=e.values;(i=e.getNextIndex(i))>=0;){o[i]>r&&(r=o[i]);o[i]<n&&(n=o[i])}t[0]=n;t[1]=r;return t}function Ns(e,t){for(var n=-1,r=e.values;(n=e.getNextIndex(n))>=0;)r[n]/=t}function js(e){return Ks(e)[1]}function Ks(e,t){void 0===t&&(t=0);var n=e.size;if(0===n)return[NaN,NaN];for(var r=0,i=0,o=1,a=e.values,u=-1;(u=e.getNextIndex(u))>=0;){var s=a[u],l=r;i+=(s-(r+=(s-r)/o))*(s-l);o++}return n>1?[Math.sqrt(i/(e.size-t)),r]:[0,r]}!function(e){function t(e){switch(e){case 0:return Zs;case 1:return Bs;case 2:return Os;case 3:return Gs}throw new Error(e+" views not implemented")}e.getViewCtor=t;function n(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}e.sizeFromShape=n;function r(e){for(var t=e.rank,n=e.offset,r=0;r<t;r++)n+=e.strides[r]*(e.shape[r]-1);return n}e.lastIndex=r;function i(e){throw new Error("Unknown data type "+e)}e.throwUnknownDType=i;function o(e,t){void 0===t&&(t=[]);if(Array.isArray(e))for(var n=0,r=e;n<r.length;n++){o(r[n],t)}else t.push(e);return t}function a(e){var t=e.length,n=new Array(t);n[t-1]=1;for(var r=t-2;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}e.computeStrides=a;function u(e){if(Ms(e))return[e.length];if(!Array.isArray(e))return[];for(var t=[];e instanceof Array;){t.push(e.length);e=e[0]}return t}e.inferShape=u;function s(e,t){return e instanceof Float32Array?"f32":e instanceof Int32Array?"i32":e instanceof Float64Array?"f64":t}e.inferDType=s;function l(e,t){return s(e)===t?e:f(Array.isArray(e)?o(e):e,t)}e.asTypedArray=l;function f(e,t){switch(t){case"f32":return new Float32Array(e);case"i32":return new Int32Array(e);case"f64":return new Float64Array(e)}i(t);return null}e.copyToTypedArray=f}(Ts||(Ts={}));var Hs;!function(e){function t(e){return o(e.tl.x,e.br.x,e.tl.y,e.br.y)}e.copy=t;function n(e,t){t.tl.x=e.tl.x;t.tl.y=e.tl.y;t.br.x=e.br.x;t.br.y=e.br.y}e.copyTo=n;function r(e){return e.br.x-e.tl.x}e.width=r;function i(e){return e.br.y-e.tl.y}e.height=i;function o(e,t,n,r){if(e>t){var i=t;t=e;e=i}if(n>r){i=r;r=n;n=i}return{tl:{x:e,y:n},br:{x:t,y:r}}}e.create=o;function a(e,t,n){var o=r(e),a=i(e);e.tl.x=t;e.tl.y=n;e.br.x=t+o;e.br.y=n+a}e.moveTo=a;function u(e,t){void 0===t&&(t={x:0,y:0});t.x=e.tl.x+.5*(e.br.x-e.tl.x);t.y=e.tl.y+.5*(e.br.y-e.tl.y);return t}e.center=u;function s(e,t){return e.tl.x===t.tl.x&&e.tl.y===t.tl.y&&e.br.x===t.br.x&&e.br.y===t.br.y}e.equals=s;function l(e,t,n,r){return!(t+r>e.br.x||t-r<e.tl.x||n+r>e.br.y||n-r<e.tl.y)}e.contains=l;function f(e,t){return l(e,t.x,t.y,0)}e.containsPoint=f;function c(e,t,n){var o=.5*(t-r(e)),a=.5*(n-i(e));e.tl.x-=o;e.tl.y-=a;e.br.x+=o;e.br.y+=a}e.resize=c;function d(e,t,n){c(e,r(e)*t,i(e)*n)}e.scale=d;function h(e,t){return e.tl.x<t.br.x&&e.br.x>t.tl.x&&e.tl.y<t.br.y&&e.br.y>t.tl.y}e.intersects=h;function v(e,t){return o(Math.min(e.tl.x,t.tl.x),Math.max(e.br.x,t.br.x),Math.min(e.tl.y,t.tl.y),Math.max(e.br.y,t.br.y))}e.union=v}(Hs||(Hs={}));var _s=function(){function e(e,t,n,r){this.parentIdx=e;this.quad=t;this.beginIdx=n;this.endIdx=r;this.firstChild=-1}return e}();function Js(e,t,n,r,i){var o=r-n+1;return o<=0?-1:1===o?t[e[n]]<=i?n:-1:ks(e,i,(function(e,n){return t[e]<=n}),n,o)-1}var Qs=new Uint32Array([1431655765,858993459,252645135,16711935]);function qs(e,t){e=((e=((e=((e=(e|e<<8)&Qs[3])|e<<4)&Qs[2])|e<<2)&Qs[1])|e<<1)&Qs[0];t=((t=((t=((t=(t|t<<8)&Qs[3])|t<<4)&Qs[2])|t<<2)&Qs[1])|t<<1)&Qs[0];return(e|(t<<=1))>>>0}var $s=function(){function e(e,t){void 0===t&&(t=2);this.maxDepth=e;this.splitThreshold=t;this.N=0;this.aabb=Hs.create(0,1,0,1);this.zorder=null;this.tree=[];this.path=new el(this.tree,this.aabb)}e.prototype.build=function(t,n,r){var i=t.size,o=this.zorder;if(void 0!==r)this.aabb=Hs.copy(r);else{var a=Us(t),u=a[0],s=a[1],l=Us(n),f=l[0],c=l[1];this.aabb=r=Hs.create(u,s,f,c)}null!==o&&o.length===i||Ss(o=this.zorder=new Int32Array(i));for(var d=Hs.width(r),h=Hs.height(r),v=new Uint32Array(i),p=d>0?65535/d:0,g=h>0?65535/h:0,m=r.tl.x,y=r.tl.y,b=function(e,t){return qs((e-m)*p>>>0,(t-y)*g>>>0)},x=0;x<i;){var w=o[x],A=t.get(w),M=n.get(w);if(Hs.contains(r,A,M,0)){v[w]=b(A,M);x++}else Cs(o,x,--i)}this.N=i;void 0===this.maxDepth&&(this.maxDepth=Uu(Math.ceil(Math.log(i+1)),1,e.MAX_DEPTH));var I=o.subarray(0,this.N);Array.prototype.sort.call(I,(function(e,t){return v[e]-v[t]}));this.buildTree(r,I,v,this.maxDepth,this.splitThreshold,b)};e.prototype.buildTree=function(t,n,r,i,o,a){var u=n.length,s={x:0,y:0},l=Hs.copy(t),f=this.tree,c=this.path;f.length=0;f.push(new _s(-1,-1,0,u-1));c.resize(l);for(var d=0;d>=0;){var h=f[d];if(h.firstChild<0&&h.endIdx-h.beginIdx>=o-1&&c.depth<i){c.copyTo(l);Hs.center(l,s);var v=a(s.x,s.y),p=a(l.br.x,s.y),g=a(s.x,l.br.y),m=h.beginIdx,y=h.endIdx,b=Js(n,r,m,y,v),x=1/0;if(b>=m){x=f.push(new _s(d,0,m,b))-1;m=b+1}var w=Js(n,r,m,y,p);if(w>=m){x=Math.min(x,f.push(new _s(d,1,m,w))-1);m=w+1}var A=Js(n,r,m,y,g);if(A>=m){x=Math.min(x,f.push(new _s(d,2,m,A))-1);m=A+1}y>=m&&(x=Math.min(x,f.push(new _s(d,3,m,y))-1));h.firstChild=x}d=e.nextDFS(f,c,!0)}};e.prototype.traverse=function(){if(null===this.tree||0===this.tree.length)return ns();var t=this.tree,n=Hs.copy(this.aabb),r=new el(this.tree,n),i=0,o={value:null,done:!1};function a(){if(i>=0){var a=t[i];r.copyTo(n);o.value={id:i,aabb:n,count:a.endIdx-a.beginIdx+1};i=e.nextDFS(t,r,!0)}else o.done=!0;return o}return{next:a,size:t.length}};e.nextDFS=function(e,t,n){var r=t.currentIdx,i=n?e[r].firstChild:-1;if(i>=0){t.descend(i);return i}var o=e.length;r=e[r].parentIdx;for(;r>=0;){if((i=t.pop()+1)<o&&e[i].parentIdx===r){t.descend(i);return i}r=e[r].parentIdx}return-1};e.MAX_DEPTH=15;return e}(),el=function(){function e(e,t){this.tree=e;this.path=new Int32Array($s.MAX_DEPTH);this.resize(t)}e.prototype.resize=function(e){this.cxcy0=Hs.center(e);this.w0=Hs.width(e);this.h0=Hs.height(e);this.hypot0=zu(this.w0,this.h0);this.reset()};e.prototype.reset=function(){this.hypot=this.hypot0;this.currentIdx=0;this.depth=0};e.prototype.descend=function(e){this.hypot*=.5;this.path[++this.depth]=e;this.currentIdx=e};e.prototype.pop=function(){this.hypot*=2;var e=this.depth--,t=this.path[e];this.currentIdx=this.path[e-1];return t};e.prototype.copyTo=function(e){for(var t=e.tl,n=e.br,r=this.w0,i=this.h0,o=this.cxcy0,a=o.x,u=o.y,s=0,l=this.depth,f=this.tree,c=this.path;s<=l;s++){r*=.5;i*=.5;switch(f[c[s]].quad){case 0:a-=r;u-=i;break;case 1:a+=r;u-=i;break;case 2:a-=r;u+=i;break;case 3:a+=r;u+=i}}t.x=a-r;t.y=u-i;n.x=a+r;n.y=u+i};return e}();function tl(e,t,n){return e>=t&&e<=n}var nl=function(e){es(t,e);function t(t,n,r){void 0===t&&(t="f32");var i=e.call(this,n,r)||this;i.dtype=t;i.outboundExpansions=null;return i}t.prototype.buildXYM=function(e,t,n,r){var i=r.length;if(void 0===this.zxs||this.zxs.length<i){this.zxs=Ds(this.dtype,i);this.zys=Ds(this.dtype,i);this.zms=Ds(this.dtype,i)}for(var o=this,a=o.zxs,u=o.zys,s=o.zms,l=0;l<i;l++){var f=r[l];a[l]=e.get(f);u[l]=t.get(f);s[l]=n.get(f)}this.index=r};t.prototype.build=function(t,n,r,i){e.prototype.build.call(this,t,n,r);this.buildXYM(t,n,i,this.zorder);this.computeExpansions()};t.prototype.buildSubset=function(t,n,r,i,o){this.buildXYM(n,r,o,t);e.prototype.build.call(this,Ys(this.zxs),Ys(this.zys),i);var a=this.zorder;Ls(this.zxs,a);Ls(this.zys,a);Ls(this.zms,a);Ls(t,a);this.computeExpansions()};t.prototype.computeExpansions=function(){for(var e=this,t=e.tree,n=e.N,r=e.zxs,i=e.zys,o=e.zms,a=this.outboundExpansions=Fs([t.length,3],this.dtype),u=a.values,s=t.length-1,l=n;l>0&&s>=0;s--){var f=t[s];if(!(f.firstChild>=0)){for(var c=0,d=0,h=0,v=f.endIdx;v>=f.beginIdx;v--){var p=o[v];d+=r[v]*p;h+=i[v]*p;c+=p;l--}for(var g=s;g>=0;){u[m=a.index(g,0)]+=d;u[m+1]+=h;u[m+2]+=c;f=t[g=f.parentIdx]}}}for(s=t.length-1;s>=0;s--){var m;p=1/u[(m=a.index(s,0))+2];u[m]*=p;u[m+1]*=p}};t.prototype.runOnPoint=function(e,t,n,r,i,o){void 0===o&&(o=.5);null!==this.outboundExpansions&&0!==this.outboundExpansions.size&&this.runOnPointInternal(e,t,n,r,this.path,i,o,-1)};t.prototype.runOnPoints=function(e,t,n,r){void 0===r&&(r=.5);if(null!==this.outboundExpansions&&0!==this.outboundExpansions.size)for(var i=this,o=i.zxs,a=i.zys,u=i.zms,s=i.N,l=i.index,f=i.path,c=t.values,d=n.values,h=0;h<s;h++){var v={x:0,y:0};this.runOnPointInternal(e,o[h],a[h],u[h],f,v,r,h);var p=l[h];c[t.index(p)]+=v.x;d[n.index(p)]+=v.y}};t.prototype.runOnPointInternal=function(e,t,n,r,i,o,a,u){var s=this,l=s.tree,f=s.zxs,c=s.zys,d=s.zms,h=s.outboundExpansions;i.reset();for(var v=0;v>=0;){var p=l[v],g=p.beginIdx,m=p.endIdx,y=h.get(v,0),b=h.get(v,1);if(!tl(u,g,m)&&i.hypot/Vu(t,n,y,b)<a)e(t,n,r,y,b,h.get(v,2),o);else{if(p.firstChild>=0){i.descend(v=p.firstChild);continue}for(;g<=m;){g!==u&&e(t,n,r,f[g],c[g],d[g],o);g++}}v=$s.nextDFS(l,i,!1)}};t.prototype.traverse=function(){var t=this.outboundExpansions;return is(e.prototype.traverse.call(this),(function(e){e.x=t.get(e.id,0);e.y=t.get(e.id,1);e.mass=t.get(e.id,2);return e}))};return t}($s),rl={BarnesHut:nl},il={x:0,y:0};function ol(e,t){var n=zu(e,t);return n>Fu?{x:e/n,y:t/n}:{x:e,y:t}}function al(e,t){return e.x*t.x+e.y*t.y}function ul(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y,u=r*(e.x+t.x)+i*(e.y+t.y),s=o*(e.x+n.x)+a*(e.y+n.y),l=r*(n.y-t.y)-i*(n.x-t.x);if(Math.abs(l)<Fu)return null;var f=(a*u-i*s)*(l=.5/l),c=(r*s-o*u)*l;return{x:f,y:c,rSq:(e.x-f)*(e.x-f)+(e.y-c)*(e.y-c)}}function sl(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y;t.tl.x=Math.min(t.tl.x,i);t.tl.y=Math.min(t.tl.y,o);t.br.x=Math.max(t.br.x,i);t.br.y=Math.max(t.br.y,o);n=e.next()}return t}function ll(e){for(var t={tl:{x:1/0,y:1/0},br:{x:-1/0,y:-1/0}},n=e.next();!n.done;){var r=n.value,i=r.x,o=r.y,a=r.r;t.tl.x=Math.min(t.tl.x,i-a);t.tl.y=Math.min(t.tl.y,o-a);t.br.x=Math.max(t.br.x,i+a);t.br.y=Math.max(t.br.y,o+a);n=e.next()}return t}function fl(e,t,n){var r=Us(e),i=r[0],o=r[1],a=Us(t),u=a[0],s=o-i,l=a[1]-u;if(s<Yu&&l<Yu)return null;var f=Math.max(s,l),c=i+.5*s,d=u+.5*l;return[{x:c-n*f,y:d-f},{x:c,y:d+n*f},{x:c+n*f,y:d-f}]}function cl(e,t,n,r,i,o){var a=ul(r<0?e[~r]:{x:t.get(r),y:n.get(r)},i<0?e[~i]:{x:t.get(i),y:n.get(i)},o<0?e[~o]:{x:t.get(o),y:n.get(o)});if(null!==a){a.adx=r;a.bdx=i;a.cdx=o}return a}function dl(e,t,n){for(var r=e.length-1,i=e.length-1;i>0;i-=2){var o=e[i],a=e[i-1];if(t===o&&n===a||t===a&&n===o){Cs(e,i,r);Cs(e,i-1,r-1);e.length-=2;return}}e.push(t,n)}function hl(e,t){void 0===t&&(t=[-1,-1]);var n={value:t,done:!1},r=0,i=0,o=-1,a=-1,u=-1;return{next:function(){if(r<e.length||i>0)switch(i){case 0:o=e[r++];a=e[r++];u=e[r++];t[0]=o;t[1]=a;i++;break;case 1:t[1]=u;i++;break;case 2:t[0]=a;i=0}else n.done=!0;return n},size:e.length}}function vl(e,t,n,r,i){var o=new Int32Array(e.size);Ss(o);return pl(o,e,t,n,r,i)}function pl(e,t,n,r,i,o){void 0===i&&(i=0);for(var a=r.length,u=null;;){if(null===(u=gl(e,t,n,r))||i--<=0)break;r.length=a;for(var s=u[0],l=u[1];s<l;s++){t.set(s,t.get(s)+o());n.set(s,n.get(s)+o())}}return u}function gl(e,t,n,r){var i=t.size;if(i<3)return null;var o=fl(t,n,1e3);if(null===o)return[0,i];var a=[cl(o,t,n,-1,-2,-3)],u=-1;Array.prototype.sort.call(e,(function(e,n){return t.get(n)-t.get(e)}));for(var s=e.length-1;s>=0;s--){for(var l=e[s],f=[],c=t.get(l),d=n.get(l),h=a.length-1;h>u;){var v=a[h],p=v.x,g=v.y,m=v.rSq,y=v.adx,b=v.bdx,x=v.cdx,w=c-p;if(w>0&&w*w>m)Cs(a,++u,h);else{h--;var A=d-g;if(!(w*w+A*A-m>Fu)){dl(f,y,b);dl(f,b,x);dl(f,x,y);Cs(a,h+1,a.length-1);a.pop()}}}for(var M=0,I=f.length-1;M<I;){var E=cl(o,t,n,f[M++],f[M++],l);if(null===E)return[l,l+1];a.push(E)}}var C=r.length;for(s=a.length-1;s>=0;s--){var k=a[s];k.adx>=0&&k.bdx>=0&&k.cdx>=0&&r.push(k.adx,k.bdx,k.cdx)}return r.length===C?[0,i]:null}var ml={edgesOf:hl,triangulate:vl,triangulateSubset:pl};function yl(e,t){return function(n,r,i){var o=e.get(n),a=e.get(r),u=e.get(i),s=t.get(n),l=t.get(r),f=t.get(i),c=Vu(o,s,a,l);return Vu(u,f,o,s)<c&&Vu(u,f,a,l)<c}}function bl(e,t,n,r){return function(i,o){var a=e.get(i),u=e.get(o);return Vu(a,t.get(i),u,t.get(o))-(n.get(i)+n.get(o))>r}}function xl(e,t){var n=e[t],r=e[t+(t%3==2?-2:1)];if(n>r){var i=n;n=r;r=i}return[n,r]}function wl(e){var t=new Int32Array(e.length);Ss(t);Array.prototype.sort.call(t,(function(t,n){var r=xl(e,t),i=r[0],o=r[1],a=xl(e,n),u=a[0],s=a[1];return i===u?o-s:i-u}));return t}function Al(e,t){return is(ss(cs(e),(function(e){return e>=0})),(function(e){return xl(t,e)}))}function Ml(e,t,n){if(0===t.length)return ns();var r=wl(t),i=[],o=new Int32Array(e),a=new Int32Array(r.length);Is(a,-1);for(var u=0;u<r.length-1;){var s=xl(t,c=r[u]),l=xl(t,d=r[u+1]);if(s[0]!==l[0]||s[1]!==l[1]){i.push(c);o[s[0]]=1;o[s[1]]=1}else{a[c]=d;a[d]=c;u++}u++}if(u===r.length-1){i.push(r[u]);o[r[u]]=1}if(n)for(var f=0;f<i.length;f++){var c,d=void 0,h=void 0;switch((c=i[f])%3){case 0:d=c+1;h=c+2;break;case 1:d=c+1;h=c-1;break;case 2:d=c-2;h=c-1}var v=t[c],p=t[d],g=t[h];if(0===o[g]&&n(v,p,g)){i[f]=-1;i.push(a[d],a[h]);o[g]=1}}return Al(i,t)}var Il={longestSideConcavity:yl,circleConcavity:bl,concave:Ml},El=function(){function e(e,t){this.xs=[];this.ys=[];this.bins=[];this.xs.push({index:0,size:e});this.ys.push({index:0,size:t});this.bins.push({filled:0,data:[!1]})}e.prototype.rows=function(){return this.ys.length};e.prototype.cols=function(){return this.xs.length};e.prototype.splitRow=function(e,t){for(var n=this,r=n.xs,i=n.ys,o=n.bins,a=i.length,u=i[e].index,s=0;s<r.length;s++)o[s].data.push(o[s].data[u]);var l={index:a,size:t};i.splice(e+1,0,l);return i[e].size-=t};e.prototype.splitColumn=function(e,t){var n=this,r=n.xs,i=n.bins,o=r.length,a=r[e].index;i.push({data:i[a].data.slice(0),filled:i[a].filled});var u={index:o,size:t};r.splice(e+1,0,u);return r[e].size-=t};e.prototype.isEmpty=function(e,t){return!this.bins[this.xs[t].index].data[this.ys[e].index]};e.prototype.totalFilled=function(e){return this.bins[this.xs[e].index].filled};e.prototype.fillRange=function(e,t,n,r){for(var i=this,o=i.xs,a=i.ys,u=i.bins,s=n;s<=r;s++)for(var l=u[o[s].index],f=e;f<=t;f++){l.data[a[f].index]=!0;l.filled+=a[f].size}};e.prototype.width=function(e){return this.xs[e].size};e.prototype.height=function(e){return this.ys[e].size};return e}();function Cl(e,t){for(var n=1.2,r=0,i=0,o=0,a=0;a<e.length;a++){var u=Hs.width(e[a]),s=Hs.height(e[a]);r+=u*s*n;i=Math.max(i,u);o=Math.max(o,s)}var l=Math.sqrt(r/t),f=l*t;return Hs.create(0,Math.max(i,f),0,Math.max(o,l))}var kl=function(){function e(e){void 0===e&&(e=Yu);this.tolerance=e}e.prototype.addRectangle=function(e,t,n){for(var r=Hs.height(n),i=Hs.width(n),o=0,a=0,u=0,s=0,l=t.rows(),f=Hs.width(e)-i,c=Hs.height(e);o<=f;)if(Sl(e,u,r)>0||c-t.totalFilled(a)<r){o+=t.width(a++);u=0;s=0}else{for(;s<l&&!t.isEmpty(s,a);)u+=t.height(s++);if(s<l&&Sl(e,u,r)<=0){if(this.tryToFit(t,s,a,i,r,this.tolerance)){Hs.moveTo(n,e.tl.x+o,e.tl.y+u);return!0}u+=t.height(s++)}}return!1};e.prototype.tryToFit=function(e,t,n,r,i,o){for(var a=e.width(n),u=e.height(t),s=e.cols(),l=e.rows(),f=n,c=t;u<i-o;){if(++c>=l)return!1;u+=e.height(c)}for(;a<r-o;){if(++f>=s)return!1;a+=e.width(f)}for(var d=n;d<=f;d++)for(var h=t;h<=c;h++)if(!e.isEmpty(h,d))return!1;var v=a-r;v>o&&e.splitColumn(f,v);var p=u-i;p>o&&e.splitRow(c,p);e.fillRange(t,c,n,f);return!0};e.prototype.solve=function(e,t){void 0===t&&(t=Cl(e,1));for(var n=new El(Hs.width(t),Hs.height(t)),r=0;r<e.length;r++)if(!this.addRectangle(t,n,e[r])){var i=new Int32Array(e.length-r);Ss(i,r);return{bounds:t,bins:n,unpacked:i}}return{bounds:t,bins:n,unpacked:[]}};return e}();function Sl(e,t,n){return n-(Hs.height(e)-t)}var Ll={DynamicBins:El,estimateDimensions:Cl,Solver:kl};function Tl(e,t){var n={value:null,done:!1},r={value:null,done:!0,group:null};function i(){for(;r.done;){var i=e.next();if(i.done){n.done=!0;return n}t.reset(i.value);r=t.next()}n.value=[r.group,r.value];r=t.next();return n}return{next:i}}function Rl(e,t,n){void 0===n&&(n=new Int32Array(t.countVertices()));var r=[],i=t.adjacency();i.reset(e);Is(n,-1);n[e]=e;function o(){for(;;){var e=i.next();if(e.done){if(!Zl(r,i))return e}else if(n[e.value]<0){n[e.value]=e.group;r.push(e.value);return e}}}return{next:o}}function Zl(e,t){for(;e.length>0;){var n=e.shift();if(t.reset(n)>0)return!0}return!1}function Bl(e,t,n){return e<=n&&n<t}function Ol(e,t,n){for(var r=Object.keys(t||{}),i=0;i<r.length;i++){var o=r[i],a=e[o],u=t[o];void 0===a?e[o]=u:n&&Gl(a)&&Ol(a,u,n)}return e}function Gl(e){return e&&"object"==typeof e&&!Array.isArray(e)}function Yl(e,t,n){return e.indexOf(t)>=0?t:n}function Fl(e){return e}function Dl(e){var t,n=!1;return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(!n){n=!0;t=e.apply(this,r)}return t}}var zl=function(){function e(e){this.buffer=e;this.start=0;this.size=this.end=e.length}e.wrapArray=function(t){return new e(t)};e.prototype.get=function(e){return this.buffer[e]};e.prototype.set=function(e,t){this.buffer[e]=t};e.prototype.has=function(e){return Bl(this.start,this.end,e)};return e}(),Vl=function(){function e(e,t){this.size=e;this.value=t;this.start=0;this.end=e}e.fromSize=function(t,n){return new e(t,n)};e.prototype.get=function(){return this.value};e.prototype.set=function(){};e.prototype.has=function(e){return Bl(this.start,this.end,e)};return e}(),Xl=function(){function e(e,t){this.buffer=e;this.inverse=t;this.start=0;this.size=this.end=e.length}e.fromValues=function(t){for(var n=[],r={},i=0,o=t.next();!1===o.done;o=t.next()){var a=o.value;if(void 0===r[a]){r[a]=i;n.push(a);i++}}return new e(n,r)};e.fromKeyValuePairs=function(t){for(var n=[],r={},i=0,o=t.next();!1===o.done;o=t.next()){var a=o.value,u=a[0],s=a[1];if(void 0!==r[s])throw new Error("Value must be unique: "+s);if(u>=0){for(;n.length<=u;){n.push(null);i++}n[u]=s;r[s]=u;i--}}if(i>0)throw new Error("Keys must be contiguous");return new e(n,r)};e.prototype.get=function(e){return this.buffer[e]};e.prototype.has=function(e){return Bl(this.start,this.end,e)};e.prototype.set=function(e,t){this.buffer[e]=t;this.inverse[t]=e};e.prototype.getUniqueInverse=function(e){return this.inverse[e]};e.prototype.getInverse=function(e){return rs(this.inverse[e])};return e}(),Wl=function(){function e(e,t,n){this.as=e;this.bs=t;this.emptyValue=n;this.start=0;this.size=this.end=e.length}e.fromIdPairs=function(t,n,r,i){var o=new Int32Array(n),a=new Int32Array(r);Is(o,i);Is(a,i);for(var u=t.next();!1===u.done;u=t.next()){var s=u.value,l=s[0],f=s[1];l!==i&&(o[l]=f);f!==i&&(a[f]=l)}return new e(o,a,i)};e.prototype.get=function(e){return this.as[e]};e.prototype.has=function(e){return Bl(this.start,this.end,e)};e.prototype.set=function(){};e.prototype.getUniqueInverse=function(e){return this.bs[e]};e.prototype.getInverse=function(e){return rs(this.bs[e])};return e}();function Ul(e){for(var t=e.iterateAdjacentPairs(),n=new Int32Array(e.countVertices()),r=t.next();!r.done;){var i=r.value,o=i[0],a=i[1];n[o]++;n[a]++;r=t.next()}return zl.wrapArray(n)}function Nl(e,t){void 0===t&&(t=Ul(e));for(var n=e.countVertices(),r=e.iterateAdjacentPairs(),i=new Float32Array(e.countVertices()),o=r.next();!o.done;){var a=o.value,u=a[0],s=a[1];i[u]+=t.get(s);i[s]+=t.get(u);o=r.next()}for(var l=0;l<n;l++)i[l]/=Math.max(1,t.get(l));return zl.wrapArray(i)}function jl(e,t){void 0===t&&(t=0);for(var n=new Int32Array(e.countVertices()),r=ys(Rl(t,e,n),t),i=r!==t?ys(Rl(r,e,n),r):r,o=0,a=i;a!==r;o++)a=n[a];return{diameter:o,extremes:[r,i]}}function Kl(e,t,n){var r=Xl.fromValues(e),i=function(e){var t=e[0],n=e[1],i=e[2];return[r.getUniqueInverse(t),r.getUniqueInverse(n),i]},o=n.buildKeyed(is(t,i),e.size),a=Xl.fromKeyValuePairs(o);return{vertexMap:r,edgeMap:a}}function Hl(e){var t=null,n=null;if("function"!=typeof e){t=e.defaultValue;void 0!==e.map&&(n=e.map)}else n=e;return{map:n,defaultValue:t}}function _l(e,t,n){n=void 0!==n?n:e.size;var r={},i=[];Object.keys(t).forEach((function(e){var o=Hl(t[e]),a=o.map,u=o.defaultValue;if(null!==a){for(var s=[],l=0;l<n;l++)s.push(u);i.push({buffer:s,map:a});r[e]=zl.wrapArray(s)}else r[e]=Vl.fromSize(n,u)}));for(var o=e.next(),a=i.length;!o.done;o=e.next()){var u=o.value,s=u[0],l=u[1];if(s>=0&&s<n)for(var f=0;f<a;f++){var c=i[f];c.buffer[0|s]=c.map(l)}}return r}function Jl(e,t){return Object.keys(t).reduce((function(n,r){n[r]=Ql(e,t[r]);return n}),{})}function Ql(e,t){var n=Hl(t),r=n.map,i=n.defaultValue;if(null===r)return Vl.fromSize(e,i);for(var o=[],a=0;a<e;a++)o.push(r(a));return zl.wrapArray(o)}function ql(e,t){var n=-1,r=[n,n],i=is(ls(e.start,e.end),(function(i){var o=e.get(i),a=t.getUniqueInverse(o);r[0]=i;r[1]=void 0!==a?a:n;return r}));return Wl.fromIdPairs(i,e.size,t.size,n)}var $l=function(){function e(e,t,n){this.tourStart=e;this.tours=t;this.nTours=n;this.defaultValue=-1;this.start=0;this.size=this.end=t.length}e.prototype.iterateGroups=function(){for(var e=this.tourStart,t=[],n=0,r=this.nTours;r>0;){if(e[n]===n){t.push(n);r--}n++}return cs(t)};e.prototype.iterateGroup=function(e){e=this.tourStart[e];var t=this.tours,n={done:!1,value:e},r=!1;return{next:function(){n.value=e;n.done=r;r||(t[e]>e?e=t[e]:r=!0);return n}}};e.prototype.groupSize=function(e){e=this.tourStart[e];for(var t=1;e<(e=this.tours[e]);)t++;return t};e.prototype.countGroups=function(){return this.nTours};e.prototype.get=function(e){return this.tourStart[e]};e.prototype.set=function(){throw new Error("Readonly")};e.prototype.has=function(e){return e>=this.start&&e<this.size};e.build=function(t){for(var n=t.length,r=new Int32Array(n),i=new Int32Array(n),o=0,a=0;a<n;a++){var u=ef(t,a,!1),s=void 0;if(u===a){o++;s=a}else s=i[u];t[a]=u;r[s]=a;i[u]=a}return new e(t,r,o)};return e}();function ef(e,t,n){for(var r=t,i=0;r>=0&&e[r]!==r;){r=e[r];i++}if(n)for(var o=void 0;i>1;){o=t;t=e[t];e[o]=r;i--}return r}function tf(e){return nf(e.iterateAdjacentPairs(!1),e.countVertices())}function nf(e,t){var n=new Int32Array(t);Ss(n,0);for(var r=e.next();!r.done;r=e.next()){var i=r.value,o=i[0],a=i[1],u=ef(n,o,!0),s=ef(n,a,!0);u>s?n[u]=s:u<s&&(n[s]=u)}return $l.build(n)}function rf(e){var t=new Int32Array(e);return $l.build(t)}var of=-1;function af(e,t,n,r){var i={done:!1,value:r},o=0;return{next:function(){if(t<n){r[0]=e[o++];r[1]=e[o++];r[2]=t++}else i.done=!0;return i},size:n-t}}function uf(e,t,n,r,i){var o={done:!1,value:i},a=0;return{next:function(){for(;t<n;){var r=e[a++],u=e[a++];if(r!==of&&u!==of){i[0]=r;i[1]=u;i[2]=t++;return o}t++}o.done=!0;return o},size:n-t-r}}var sf=function(){function e(e,t,n){void 0===e&&(e="d");void 0===t&&(t=!1);void 0===n&&(n=!1);this.directedCategory=e;this.selfLoops=t;this.rewriteEdges=n;this.badIncidence=0;this.initialize(0,0)}e.prototype.rawPairs=function(){return this.pairs};e.prototype.iterateEdges=function(){return ls(0,this.E)};e.prototype.iterateVertices=function(){return ls(0,this.V)};e.prototype.countVertices=function(){return this.V};e.prototype.countEdges=function(){return this.E};e.prototype.countInvalidIncidence=function(){null===this.buffers&&this.buildAdjacency();return this.badIncidence};e.prototype.source=function(e){return this.pairs[2*e]};e.prototype.target=function(e){return this.pairs[2*e+1]};e.prototype.containsEdge=function(e){return Bl(0,this.E,e)};e.prototype.containsVertex=function(e){return Bl(0,this.V,e)};e.prototype.incidence=function(){null===this.buffers&&this.buildAdjacency();return lf(this.bufferIndex,this.buffers.incidence)};e.prototype.adjacency=function(){null===this.buffers&&this.buildAdjacency();return lf(this.bufferIndex,this.buffers.adjacency)};e.prototype.iterateAdjacentPairs=function(e,t){void 0===t&&(t=[-1,-1,-1]);return 0===this.countEdges()?ns():!e&&this.badIncidence>0?uf(this.pairs,0,this.E,this.badIncidence,t):af(this.pairs,0,this.E,t)};e.prototype.isAdjacent=function(e,t){throw new Error("not impl")};e.prototype.isIncident=function(e,t){throw new Error("not impl")};e.prototype.insertEdge=function(e,t){var n=t[0],r=t[1],i=2*e;if(Bl(0,this.V,n)&&Bl(0,this.V,r)&&(this.selfLoops||n!==r)){this.pairs[i]=n;this.pairs[i+1]=r;this.bufferIndex[n]++;this.bufferIndex[r]++}else{this.badIncidence++;this.pairs[i]=of;this.pairs[i+1]=of}};e.prototype.buildAdjacency=function(){for(var e=this.pairs,t=this.bufferIndex,n=this.rewriteEdges,r="d"===this.directedCategory,i=this.countVertices(),o=0;o<e.length;o+=2)if(e[o]!==of){n&&t[e[o]]<t[e[o+1]]&&Cs(e,o,o+1);r&&t[e[o+1]]--}var a=0;for(o=0;o<i;o++){var u=t[o];t[o]=a;a+=u}t[i]=a;this.buffers=ff(a);var s=cf(e,t,this.buffers,r);if(s>0){var l=this.buffers,f=l.adjacency,c=l.incidence,d=0;for(o=0;o<i;o++){var h=t[o],v=t[o+1];t[o]-=d;for(;h<v;){
if(f[h]>=0){f[h-d]=f[h];c[h-d]=c[h]}else d++;h++}}t[i]-=d;this.badIncidence+=s}};e.prototype.buildKeyed=function(e,t){var n=this;this.initialize(t,e.size);var r=0,i={value:[-1,void 0],done:!1};return{next:function(){var t=e.next();if(t.done)i.done||(i.done=!0);else{n.insertEdge(r,t.value);i.value[0]=r++;i.value[1]=t.value[2]}return i},start:0,end:e.size}};e.prototype.build=function(e,t){this.initialize(t,e.size);for(var n=0,r=e.next();!r.done;r=e.next(),n++)this.insertEdge(n,r.value)};e.prototype.initialize=function(e,t){this.V=e;this.E=t;this.bufferIndex=Ds("i32",e+1);this.pairs=Ds("i32",2*t,of);this.badIncidence=0;this.buffers=null};return e}();function lf(e,t){var n={done:!1,group:0,value:0},r=e[0],i=e[1];return{reset:function(t){r=e[t];var o=(i=e[t+1])-r;n.group=t;n.done=0===o;return o},next:function(){r>=i?n.done=!0:n.value=t[r++];return n}}}function ff(e){return{incidence:Ds("i32",e,of),adjacency:Ds("i32",e,of)}}function cf(e,t,n,r){for(var i=0,o=0,a=0;a<e.length;a+=2,o++){var u=e[a],s=e[a+1];if(u!==of&&s!==of){if(df(n,t[u],s,o)<0||!r&&df(n,t[s],u,o)<0){e[a]=of;e[a+1]=of;i++}}}return i}function df(e,t,n,r){for(var i=e.adjacency,o=e.incidence;t<i.length;){var a=i[t];if(a===of){i[t]=n;o[t]=r;return t}if(a===n)return-1;t++}return-1}var hf=function(){function e(e){this.parent=e;this.vInv=new Int32Array(e.countVertices());Is(this.vInv,of)}e.prototype.induceAll=function(e){return this.induceFrom(is(e.iterateGroups(),(function(t){return e.iterateGroup(t)})))};e.prototype.induceFrom=function(e){var t=this,n=t.vInv,r=t.parent,i=r.incidence(),o=new Int32Array(r.countEdges()),a=new Int32Array(r.countVertices()),u=0,s=0,l=0,f=0;return is(e,(function(e){f=l;for(;s<u;)n[a[s++]]=of;for(var t=e.next();!t.done;t=e.next(),u++){a[u]=t.value;n[t.value]=u-s}for(var c=s;c<u;c++){var d=a[c];i.reset(d);for(var h=i.next();!h.done;h=i.next()){var v=r.target(h.value);d!==v&&n[v]>=0&&(o[l++]=h.value)}}var p={vs:a.subarray(s,u),es:o.subarray(f,l)};return[cs(p.es,(function(e){return[n[r.source(e)],n[r.target(e)],e]})),p]}))};return e}(),vf={degrees:Ul,avgNeighborDegree:Nl,diameter:jl,buildFromLabeledIterators:Kl,buildPropertyBagFrom:_l,buildPropertyBag:Jl,buildProperty:Ql,buildLabelMapping:ql,connectedComponents:tf,connectedComponentsFrom:nf,all:rf,ArrayPropertyMap:zl,ConstantPropertyMap:Vl,StringLabelMap:Xl,DefaultIdMapping:Wl,AdjacencyGraph:sf,SubgraphBuilder:hf,byGroup:Tl,bfs:Rl},pf=function(){function e(e,t){void 0===e&&(e=0);void 0===t&&(t=0);this.padding=e;this.rotation=t}e.prototype.applyTo=function(e,t,n,r,i,o){void 0===i&&(i=0);if(0===t.size)return i;void 0===o&&Ss(o=new Int32Array(t.size));Array.prototype.sort.call(o,(function(e,t){return r.get(t)-r.get(e)}));var a=0;if(0===i){var u=o[a];t.set(u,e.x);n.set(u,e.y);i+=r.get(u)+this.padding;a++}for(var s=this.rotation,l=Math.PI,f=2*l,c=o.length;a<c;){var d=this.sizeRing(o,a,r,i,l),h=this.positionRing(e,t,n,r,o,a,2,s,l+s,i);h+=a+d.n>=c?this.positionRing(e,t,n,r,o,a,1,f+s,f+s,i,-1):this.positionRing(e,t,n,r,o,a,1,l+s,f+s,i);i+=2*d.meanRadius+this.padding;a+=h}return i};e.prototype.sizeRing=function(e,t,n,r,i){void 0===i&&(i=2*Math.PI);for(var o=0,a=0;t<e.length;){var u=e[t++];if((i-=2*(n.get(u)+.5*this.padding)/r)<0)break;a+=n.get(u);o++}return{n:o,meanRadius:o>0?a/o:0}};e.prototype.positionRing=function(e,t,n,r,i,o,a,u,s,l,f){void 0===f&&(f=1);for(var c=0,d=gf(u-s);o<i.length;){var h=i[o];if(h>=0){var v=r.get(h)+.5*this.padding,p=f*(v/(v+l));if(d!==gf(u+2*p-s))break;t.set(h,e.x+Math.cos(u+p)*(v+l));n.set(h,e.y-Math.sin(u+p)*(v+l));i[o]=-1;u+=2*p;c++}o+=a}return c};return e}();function gf(e){return e>0?1:-1}var mf=function(){function e(e,t,n,r){void 0===e&&(e=0);void 0===n&&(n=!0);this.padding=e;this.focalPoint=t;this.robust=n;this.perturb=r;this.state=null}e.prototype.build=function(e,t,n,r,i){var o=e.size,a=this.padding;r=null!=r?r:Fs([o],"f32",1);var u=new sf("u",!1),s=[];if(o>2){var l=vl(e,t,s,this.robust?o:0,this.perturb);if(null!==l)return l;u.build(hl(s),o);var f=xf(u,e,t,n);f.length>0&&u.build(ms(cs(f)),o)}else if(2===o){u.build(cs([[0,1]]),o);Vu(e.get(0),t.get(0),e.get(1),t.get(1))<Yu&&e.set(1,e.get(1)+2*Yu)}else u.build(ns(),o);var c=function(r,i){var o=Vu(e.get(r),t.get(r),e.get(i),t.get(i)),u=n.get(r)+n.get(i)+a;return o-u<u},d=yf(this.focalPoint,e,t,n),h=d.min,v=bf(h,d.distances,r,u,c,i);this.state={root:h,xs:e,ys:t,rs:n,es:v.es,triangles:s,predecessors:v.predecessors,vs:v.vs,ss:r};return null};e.prototype.pack=function(e){void 0===e&&(e=.5);var t=this.state,n=t.xs,r=t.ys,i=t.rs,o=t.predecessors,a=t.vs,u=t.ss,s=t.root,l=this,f=l.focalPoint,c=l.padding;if(s>=0){var d=u.get(s)*e;n.set(s,Nu(f.x,n.get(s),d));r.set(s,Nu(f.y,r.get(s),d))}for(var h=c*e*.5,v=a.length,p=0,g=0;g<v;g++){var m=a[g],y=o[m],b=n.get(m),x=r.get(m),w=n.get(y)-b,A=r.get(y)-x,M=zu(w,A),I=i.get(m)+i.get(y)+c;if(M>Yu){var E=1/M,C=(M-I)*E;if(C>0){p+=C*=C;C+=h*E}C*=e*u.get(m);n.set(m,b+w*C);r.set(m,x+A*C)}}return v>0?p/v:0};e.prototype.packTowards=function(e,t,n){void 0===n&&(n=.5);for(var r=this.state,i=r.xs,o=r.ys,a=r.ss,u=i.size,s=0;s<u;s++){var l=a.get(s)*n;i.set(s,Nu(e.get(s),i.get(s),l));o.set(s,Nu(t.get(s),o.get(s),l))}};e.prototype.solve=function(e,t,n){void 0===t&&(t=.5);n=null!=n?n:Math.max(.25*this.padding,Yu);var r=this,i=r.padding,o=r.focalPoint,a=this.state,u=a.xs,s=a.ys,l=a.rs,f=a.es,c=a.ss,d=0;do{d=0;for(var h=0;h<f.length;){var v=f[h++],p=f[h++],g=u.get(v),m=s.get(v),y=l.get(v),b=u.get(p),x=s.get(p),w=l.get(p),A=b-g,M=x-m,I=zu(A,M),E=y+w+i;if(I+n<E&&I>0){d++;var C=wf(g,m,b,x,y,w,c.get(v),c.get(p),o),k=t*((I-E)/I);A*=k;M*=k;u.set(v,g+C*A);s.set(v,m+C*M);u.set(p,b-(1-C)*A);s.set(p,x-(1-C)*M)}}}while(--e>0&&d>0);return d};return e}();function yf(e,t,n,r){for(var i=t.size,o=new Float32Array(i),a=-1,u=0,s=1/0;u<i;u++){var l=Vu(t.get(u),n.get(u),e.x,e.y),f=r.get(u);o[u]=l+f;if(l<s){a=u;s=l}}return{min:a,distances:o}}function bf(e,t,n,r,i,o){var a=r.countEdges()-r.countInvalidIncidence(),u=r.countVertices(),s=void 0!==o,l=new Int32Array(2*a),f=new Int32Array(u),c=new Int32Array(u);if(u>0&&a>0){for(var d=r.adjacency(),h=Rl(e,r,c),v=0,p=0,g={value:e,done:!1};!1===g.done;g=h.next()){var m=g.value,y=n.get(m),b=t[m];d.reset(m);for(var x=-1,w=d.next(),A=b;!1===w.done;w=d.next()){var M=w.value,I=n.get(M),E=t[M];if(!(E>b||y+I<Yu)){if(i(m,M)){l[v++]=m;l[v++]=M}if(E<A&&(!s||o.get(M)>0)){x=M;A=E}}}if(x>=0&&y>Yu){c[m]=x;f[p++]=m}}l=l.subarray(0,v);f=f.subarray(0,p)}return{predecessors:c,es:l,vs:f}}function xf(e,t,n,r){for(var i=e.countVertices(),o=e.adjacency(),a=e.adjacency(),u=[],s=0;s<i;s++){o.reset(s);for(var l=r.get(s),f=o.next();!f.done;f=o.next()){if(r.get(f.value)<l){a.reset(f.value);for(var c=a.next();!c.done;c=a.next())if(!(c.value<=s)){var d=l+r.get(c.value);Vu(t.get(c.value),n.get(c.value),t.get(s),n.get(s))-d<.5*d&&u.push(s,c.value)}}s<f.value&&u.push(s,f.value)}}return u}function wf(e,t,n,r,i,o,a,u,s){var l=0;if(a!==u)l=(a-u)/(a+u);else{var f=Vu(e,t,s.x,s.y),c=Vu(n,r,s.x,s.y),d=Math.min(f-i,c-o);l=(f-i-(c-o))/(Math.max(f+i,c+o)-d)}return.5*(1+l)}var Af={InterleavingCircles:pf,Solver:mf};function Mf(e,t){var n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)<e.r-t.r+Yu}function If(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,u=t.r,s=o-n,l=a-r,f=u-i,c=Math.sqrt(s*s+l*l);return{x:(n+o+s/c*f)/2,y:(r+a+l/c*f)/2,r:(c+i+u)/2}}function Ef(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,u=t.y,s=t.r,l=n.x,f=n.y,c=n.r,d=2*(r-a),h=2*(i-u),v=2*(s-o),p=r*r+(i*i-o*o-a*a-u*u)+s*s,g=2*(r-l),m=2*(i-f),y=2*(c-o),b=r*r+(i*i-o*o-l*l-f*f)+c*c,x=g*h-d*m,w=(h*b-m*p)/x-r,A=(m*v-h*y)/x,M=(g*p-d*b)/x-i,I=(d*y-g*v)/x,E=A*A+I*I-1,C=2*(w*A+M*I+o),k=w*w+M*M-o*o,S=(-C-Math.sqrt(C*C-4*E*k))/(2*E);return{x:w+A*S+r,y:M+I*S+i,r:S}}function Cf(e,t){switch(t.length){case 0:return{x:0,y:0,r:0};case 1:return e[t[0]];case 2:return If(e[t[0]],e[t[1]]);default:var n=Ef(e[t[0]],e[t[1]],e[t[2]]);if(n.r<0){var r=If(e[t[0]],e[t[1]]),i=If(e[t[0]],e[t[2]]),o=If(e[t[1]],e[t[2]]);n=(n=r.r>i.r?r:i).r>o.r?n:o}return n}}function kf(e){if(0===e.length)return null;for(var t=e.length,n={i:0,prev:null,R:[],c:null};;){var r=n.i,i=n.R,o=n.prev,a=n.c;if(r===t||3===i.length){o.c=Cf(e,i);n=o}else if(null===a)n={i:r+1,prev:n,R:i,c:null};else if(Mf(a,e[r])){if(null===o)return a;o.c=a;n=o}else n={i:r+1,prev:n,R:i.concat([r]),c:null}}}var Sf=function(){function e(e,t){void 0===e&&(e=0);this.maxPerturbations=e;this.rng=t;this.mesh=new sf("u",!1);this.clusterState=null}Object.defineProperty(e.prototype,"clusters",{get:function(){return null===this.clusterState?null:this.clusterState.cc},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"rejectedEdges",{get:function(){return null===this.clusterState?-1:this.clusterState.rejectedEdges},enumerable:!0,configurable:!0});e.prototype.triangulate=function(e,t,n,r){var i=e.length;if(i<=3){switch(i){case 3:r.push(e[0],e[1],e[2]);case 2:r.push(e[0],e[1],e[0]);case 1:r.push(e[0],e[0],e[0])}return null}return pl(e,t,n,r,this.maxPerturbations,Qu.uniform(0,1,this.rng))};e.prototype.buildSubsets=function(e,t,n){for(var r=[],i=e.next();!i.done;i=e.next()){var o=this.triangulate(i.value,t,n,r);if(null!==o)return o}this.mesh.build(hl(r),t.size);this.xs=t;this.ys=n;return null};e.prototype.build=function(e,t){var n=new Int32Array(e.size);Ss(n);return this.buildSubsets(rs(n),e,t)};e.prototype.evaluateEdges=function(e,t){for(var n=this,r=n.mesh,i=n.xs,o=n.ys,a=r.countEdges(),u=r.iterateAdjacentPairs(!1),s=new Int32Array(a),l=new Float32Array(a),f=0,c=u.next();!c.done;c=u.next()){var d=c.value,h=d[0],v=d[1],p=d[2],g=t.get(h),m=t.get(v),y=Vu(i.get(h),o.get(h),i.get(v),o.get(v))-(g+m);if(y<=Math.min(g,m)*e){l[p]=Math.max(0,y);s[p]=1;f++}}return{filter:s,separations:l,valid:f}};e.prototype.evaluate=function(e,t,n,r){void 0===r&&(r=2);var i=this.evaluateEdges(e,t),o=i.valid,a=i.filter,u=i.separations,s=t.size,l=this.mesh,f=0,c=Tf(a,l,s);if(n){for(var d=l.incidence(),h=c.iterateGroups(),v=new Float32Array(o),p=new Int32Array(o),g=h.next();!g.done;g=h.next()){for(var m=Tl(c.iterateGroup(g.value),d),y=0,b=m.next();!b.done;b=m.next()){var x=b.value[1];if(a[x]>0){v[y]=u[x];p[y]=x;a[x]=0;y++}}for(var w=Ks(Ys(v,[y])),A=w[0],M=w[1]+r*A,I=0;I<y;I++)v[I]<=M?a[p[I]]=1:f++}f>0&&(c=Tf(a,l,s))}this.clusterState={rejectedEdges:f,cc:c};return l};e.prototype.describeAll=function(e,t,n){if(null===this.clusterState)return null;for(var r=this.clusterState.cc,i=new Map,o=r.iterateGroups(),a=o.next();!a.done;a=o.next()){var u=vs(r.iterateGroup(a.value)),s=Vs(e,u),l=Vs(t,u),f=Vs(n,u),c=u.length,d={size:c,radius:0,center:{x:js(s),y:js(l)}};if(1===c)d.radius=f.get(0);else{for(var h=new Float32Array(c),v=d.center,p=v.x,g=v.y,m=0;m<c;m++)h[m]=Vu(s.get(m),l.get(m),p,g);var y=js(Ys(h));d.radius=1.5*y+js(f)}i.set(a.value,d)}return i};return e}(),Lf=[-1,-1];function Tf(e,t,n){return nf(cs(e,(function(e,n){return e>0?[t.source(n),t.target(n)]:Lf})),n)}function Rf(e,t){void 0===t&&(t=$u());return new Sf(e,t)}var Zf,Bf={nbody:rl,delaunay:ml,hull:Il,circlePacking:Af,binPacking:Ll,radialExtents:kf,dbscan:Rf,LinearQuadTree:$s,get Rect(){return Hs},origin:il,unit:ol,dot:al,circleIntersecting:ul,pointExtents:sl,circleExtents:ll};!function(e){e.position2d="@@pos2d";e.group="@@group";e.radius="@@radius";e.sparseRadius="@@sparseRadius";e.degree="@@degree";e.avgNeighbourDegree="@@avgDegree";e.speed="@@speed";e.groupSpeed="@@groupSpeed";e.groupCenter="@@groupCenter";e.vAdaptive="@@vAdaptive";e.eAdaptive="@@eAdaptive"}(Zf||(Zf={}));!function(e){function t(t){switch(t){case e.position2d:case e.radius:case e.sparseRadius:case e.degree:case e.avgNeighbourDegree:case e.group:case e.speed:case e.vAdaptive:return{itemType:"v"};case e.eAdaptive:return{itemType:"e"}}return null}e.describe=t}(Zf||(Zf={}));var Of=function(){function e(e,t,n,r,i){this.V=e;this.rng=t;this.adaptive=n;this.minGroupSize=r;this.scale=i;this.groupSeeds=new Map}e.prototype.state=function(){return this.groupSeeds};e.prototype.initialize=function(e,t){var n=this;if(this.adaptive&&void 0!==t&&void 0!==e[Zf.vAdaptive]){var r=e[Zf.vAdaptive],i=e[Zf.group]||rf(this.V);os(i.iterateGroups(),(function(e){var o=r.get(e);t.has(o)&&i.groupSize(e)>=n.minGroupSize&&n.groupSeeds.set(e,t.get(o))}))}};e.prototype.run=function(e){var t=this,n=this,r=n.scale,i=n.groupSeeds,o=n.adaptive,a=n.V,u=e[Zf.position2d],s=e[Zf.radius],l=e[Zf.group]||rf(a),f=e[Zf.groupCenter]||Vl.fromSize(a,il),c=e[Zf.speed]||Vl.fromSize(a,1),d=Qu.uniform(0,1,this.rng);os(l.iterateGroups(),(function(e){var n=l.groupSize(e)>=t.minGroupSize,a=f.get(e)||il,h=n?null!=r?r:Gf(l.iterateGroup(e),s):0;o&&n&&(i.has(e)?d.rng.reset(i.get(e)):i.set(e,d.rng.state()));os(l.iterateGroup(e),(function(e){var t=d()*Math.PI*2,n=Math.sqrt(d())*h;if(0!==c.get(e)){var r=u.get(e);r.x=a.x+Math.cos(t)*n;r.y=a.y+Math.sin(t)*n}}))}))};return e}();function Gf(e,t){var n=.5,r=0,i=0;os(e,(function(e){r+=t.get(e);i++}));r/=i;return Math.sqrt(i/n)*r}function Yf(e,t){void 0===t&&(t={});var n,r=t.seed>0?t.seed:_u();return new Of(e.countVertices(),Ju(r),t.adaptive,null!=(n=t.minGroupSize)?n:0,t.scale)}var Ff={speed:void 0,iterations:{min:10,max:60},focalPoint:0,padding:{proportion:0,min:0,max:0},cpIterations:8,initialize:1,reduceOverlapsOnly:!1,adaptive:!1},Df=function(){function e(e){void 0===e&&(e={});this.groupState=[];this.schedule=null;this.opts=Ol(e,Ff)}e.prototype.isComplete=function(){return this.schedule&&this.schedule.progress>=1};e.prototype.initialize=function(e){var t=e["@@group"],n=e["@@pos2d"],r=e["@@radius"],i=e["@@speed"],o=t.iterateGroups();this.opts.adaptive?vs(o,(function(e){for(var o=Vf(t.iterateGroup(e),n,r),a={x:o.x,y:o.y,id:e,speed:1},u=t.iterateGroup(e),s=u.next();!s.done;s=u.next())if(i.get(s.value)<Yu){var l=n.get(s.value),f=l.x,c=l.y;a.anchor={x:f,y:c,id:s.value};break}return a}),this.groupState):vs(o,(function(e){return{x:0,y:0,id:e,speed:1}}),this.groupState)};e.prototype.run=function(e){var t=e["@@group"],n=e["@@pos2d"];if(null===this.schedule){if(!t||0===n.size){this.schedule=new Xf({min:0,max:0},0);return}var r=e["@@groupSpeed"]||Vl.fromSize(n.size,1),i=e["@@sparseRadius"]||e["@@radius"],o=this.initInternal(n,i,t,r);this.schedule=new Xf(this.opts.iterations,o)}var a=this.runSolver(this.schedule.packingSpeed());this.schedule.update(a.convergence,a.broken)>=1&&this.offsetGroups(n,t)};e.prototype.runSolver=function(e){var t=this,n=t.opts,r=t.solver,i=zs(t.xyrs),o=i[0],a=i[1],u=i[2],s=i[3];if(null!==r.build(o,a,u,s,this.attractionMask))throw new Error("packing fail");var l=1;if(e>Yu)if(n.reduceOverlapsOnly){var f=zs(this.xyrOrigin),c=f[0],d=f[1];r.packTowards(c,d,e)}else l=r.pack(e);return{convergence:l,broken:r.solve(n.cpIterations,.5)}};e.prototype.initInternal=function(e,t,n,r){var i,o=this,a=this.opts,u=a.padding,s=a.reduceOverlapsOnly,l=n.countGroups(),f=zs(this.xyrs=Fs([4,l],"f32")),c=f[0],d=f[1],h=f[2],v=f[3],p=u.min;this.groupState.forEach((function(r,i){var a=Vf(n.iterateGroup(r.id),e,t),s=a.x,l=a.y;if(o.opts.adaptive)if(r.anchor){var f=e.get(r.anchor.id);s=r.anchor.x+a.x-f.x;l=r.anchor.y+a.y-f.y}else{s=r.x;l=r.y}r.x=a.x;r.y=a.y;var g=Uu(a.r*u.proportion-p,0,u.max-p);c.set(i,s);d.set(i,l);h.set(i,a.r+g);v.set(i,1)}));this.opts.adaptive&&this.offsetGroups(e,n);var g=[],m=[];this.groupState.forEach((function(e,t){var n=r.get(e.id);n>Yu?m.push(t):g.push(t);e.speed=n;v.set(t,n)}));var y=null,b=this.opts.focalPoint;if("object"!=typeof b){y=zf(0===b&&g.length>0?g:m,c,d,h)}else y=b;var x=2===this.opts.initialize?g.length>0?1:3:this.opts.initialize;if(3!==x){var w=void 0,A=0;if(1===x&&g.length>0){var M=Pf(c,d,h,y,p,g);w=M.rotation;A=M.radius;if(M.mask){this.attractionMask=M.mask;m.forEach((function(e){return o.attractionMask.set(e,1)}))}}new pf(2*p,w).applyTo(y,c,d,h,A,m)}s&&(this.xyrOrigin=Xs(this.xyrs));var I=Ju(37),E=Us(h)[1],C=Qu.uniform(-.01*E,.01*E,I);this.solver=new mf(2*p,y,!0,C);return null!=(i=this.opts.speed)?i:s?.33:.75};e.prototype.offsetGroups=function(e,t){for(var n=this,r=n.groupState,i=n.xyrs,o=0;o<r.length;o++){for(var a=r[o],u=i.get(0,o)-a.x,s=i.get(1,o)-a.y,l=a.speed,f=t.iterateGroup(a.id),c=f.next();!c.done;){var d=e.get(c.value);d.x+=u*l;d.y+=s*l;c=f.next()}a.x+=u;a.y+=s}};return e}();function Pf(e,t,n,r,i,o){var a,u,s=6*i,l=[],f=0;if(null===pl(o,e,t,l,0)){u=Fs([e.size],"i32");for(var c=bl(e,t,n,s),d=Ml(e.size,l,c),h=d.next(),v=1/0;!1===h.done;h=d.next()){var p=h.value,g=p[0],m=p[1];u.set(g,1);u.set(m,1);var y=.5*(e.get(g)+e.get(m)),b=.5*(t.get(g)+t.get(m)),x=Vu(r.x,r.y,y,b);if(x<v){a=Math.atan2(r.y-b,y-r.x);v=x}}a<0&&(a+=2*Math.PI)}for(var w=0;w<o.length;w++){var A=o[w],M=Vu(r.x,r.y,e.get(A),t.get(A))+n.get(A);M>f&&(f=M)}return{rotation:a,radius:f+=i,mask:u}}function zf(e,t,n,r){for(var i=e.length,o=0,a=0;a<i;a++){o+=(f=r.get(e[a]))*f}for(var u=0,s=0,l=(a=0,1/o);a<i;a++){var f,c=e[a],d=l*(f=r.get(c))*f;u+=d*t.get(c);s+=d*n.get(c)}for(var h=0,v=(a=0,1/0);a<i;a++){c=e[a];var p=Vu(t.get(c),n.get(c),u,s)-r.get(c);if(p<v){h=c;v=p}}return{x:t.get(h),y:n.get(h)}}function Vf(e,t,n){return kf(vs(e,(function(e){var r=t.get(e);return{x:r.x,y:r.y,r:n.get(e)}})))}var Xf=function(){function e(e,t){this.opts=e;this.speed=t;this.repulsionOnly=!1;this.iteration=-1;this.progress=0;this.update(1,1)}e.prototype.packingSpeed=function(){return this.repulsionOnly?0:this.speed};e.prototype.update=function(e,t){var n=++this.iteration,r=this.opts,i=r.min,o=r.max;n>=i&&e<=.04&&(this.repulsionOnly=!0);return this.progress=this.repulsionOnly&&0===t||n>=o?1:0};return e}();function Wf(e){return new Df(e)}var Uf={DefaultSchedule:Xf,create:Wf},Nf={aspectRatio:1.33,padding:{proportion:0,min:0,max:0},groupOrder:void 0};function jf(e,t){return t+2*Uu(t*e.proportion,e.min,e.max)}function Kf(e,t){return e.reduce((function(e,n){var r=.5*(Hs.width(n)+Hs.height(n));return Math.min(e,jf(t,r))}),2*t.max)}function Hf(e,t,n){return Math.max(Wu(t,n),Xu(e,n))}function _f(e,t,n,r){var i=e;if(n&&t>Yu){var o=e/t;i=Uu(Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))*t,e,1.33*e)}var a=Math.max(e+2*r.min,i);return Hf(Math.max(jf(r,e),i),a,t)}var Jf=function(){function e(e){void 0===e&&(e={});this.opts=e;this.groupState=[];this.packingResult=null;this.bounds=null;Ol(e,Nf)}e.prototype.isComplete=function(){return null!==this.packingResult&&0===this.packingResult.unpacked.length};e.prototype.run=function(e){if(e["@@group"]){var t=e["@@pos2d"],n=e["@@sparseRadius"]||e["@@radius"],r=e["@@group"],i=e["@@groupSpeed"];null===this.bounds?this.bounds=this.initInternal(t,n,r,i):null!==this.packingResult&&this.packingResult.unpacked.length>0&&Hs.scale(this.bounds,1.05,1.05);this.packingResult=this.solver.solve(this.groupState,this.bounds);this.offsetGroups(t,r)}};e.prototype.initInternal=function(e,t,n,r){var i=this.opts,o=i.padding,a=i.aspectRatio,u=i.groupOrder,s=vs(void 0!==u?cs(u):n.iterateGroups(),(function(i){var o=ll(is(n.iterateGroup(i),(function(n){var r=e.get(n);return{x:r.x,y:r.y,r:t.get(n)}})));o.filter=r&&r.get(i)<Yu;o.cxcy=Hs.center(o);o.id=i;return o}),this.groupState),l=Kf(s,o),f=s.length>3;s.forEach((function(e){return Hs.resize(e,_f(Hs.width(e),l,f,o),_f(Hs.height(e),l,f,o))}));this.solver=new kl(.01*o.min);return Cl(s,a)};e.prototype.offsetGroups=function(e,t){for(var n=this.groupState,r=0;r<n.length;r++){var i=n[r];if(!i.filter){for(var o=Hs.center(i),a=o.x-i.cxcy.x,u=o.y-i.cxcy.y,s=t.iterateGroup(i.id),l=s.next();!l.done;l=s.next()){var f=e.get(l.value);f.x+=a;f.y+=u}i.cxcy=o}}};return e}();function Qf(e){return new Jf(e)}var qf={create:Qf},$f=function(){function e(e){this.opts=e;this.pinPoint=null}e.prototype.initialize=function(e){if(this.opts.pinTo){var t=this.opts.pinTo.vertex,n=e["@@pos2d"];if(n.has(t)){var r=n.get(t),i=r.x,o=r.y;this.pinPoint={x:i,y:o}}}};e.prototype.run=function(e){if(null!==this.pinPoint)for(var t=e["@@pos2d"],n=t.get(this.opts.pinTo.vertex),r=this.pinPoint.x-n.x,i=this.pinPoint.y-n.y,o=0,a=t.size;o<a;o++){var u=t.get(o);u.x+=r;u.y+=i}};return e}();function ec(e){void 0===e&&(e={});return new $f(e)}function tc(e){return"function"==typeof e.state}var nc={isComplete:function(){return!0},initialize:function(){},run:function(){}};function rc(e){var t=0;return{isComplete:function(){return t>0},initialize:function(t,n){void 0!==e.initialize&&e.initialize(t,n)},state:tc(e)?function(){return e.state()}:void 0,run:function(n){t++;e.run(n)}}}var ic=function(){function e(e){this.layouts=e;this.initialized=!1;this.index=0}e.prototype.isComplete=function(){return this.index>=this.layouts.length};e.prototype.initialize=function(e,t){this.layouts.forEach((function(n){var r=n[0],i=n[1];if(void 0!==r.initialize){var o=t&&t.has(i)?t.get(i):void 0;r.initialize(e,o)}}));this.initialized=!0};e.prototype.run=function(e){for(;!this.isComplete();){var t=this.layouts[this.index][0];if(!t.isComplete()){t.run(e);break}this.index++}};e.prototype.state=function(){for(var e=this,t=e.layouts,n=e.index,r=Math.min(n,t.length-1),i=new Map,o=0;o<=r;o++){var a=t[o],u=a[0],s=a[1];tc(u)&&i.set(s,u.state())}return i};e.prototype.getPhase=function(e){return this.layouts.reduce((function(t,n){var r=n[0];n[1]===e&&t.push(r);return t}),[])};return e}(),oc=["rectangle","circle","adaptive","none"],ac={packing:"rectangle",packingOptions:{}},uc={adaptive:!0,initialize:2,iterations:{min:2,max:60},speed:.5};function sc(e){switch(Yl(oc,e.packing,ac.packing)){case"circle":return Wf(e.packingOptions);case"adaptive":return Wf(Ol(e.packingOptions,uc));case"rectangle":return Qf(e.packingOptions);case"none":return nc}}function lc(e){void 0===e&&(e={});Ol(e,ac,!0);return new ic([[sc(e),0],[rc(ec(e)),1]])}var fc={create:lc},cc={iterations:{min:void 0,max:150},speed:void 0,liveUpdate:!0,scale:{base:.045,attenuation:0},maxRepulsionBias:25e-5,momentum:{beta1:.9,beta2:.94},clustering:{maxLength:300,epsilon:void 0,reweightSpeed:.05,maxSeparation:void 0}},dc=function(){function e(e,t){void 0===t&&(t={});this.graph=e;this.numIterations=0;this.activeGroups=-1;this.groups=[];this.opts=Ol(t,cc,!0)}e.prototype.isComplete=function(){return 0===this.activeGroups};e.prototype.run=function(e){var t;if(0===this.numIterations){var n=this.graph.countVertices(),r=e[Zf.degree]||Ul(this.graph);this.initInternal(e[Zf.group]||rf(n),((t={})[Zf.position2d]=e[Zf.position2d],t[Zf.radius]=e[Zf.radius],t[Zf.sparseRadius]=e[Zf.sparseRadius]||e[Zf.radius],t[Zf.degree]=r,t[Zf.avgNeighbourDegree]=Nl(this.graph,r),t[Zf.speed]=e[Zf.speed]||Vl.fromSize(n,1),t))}this.numIterations++;for(var i=this.groups,o=0;o<this.activeGroups;o++){var a=i[o],u=a.run()>=1;u&&Cs(i,o--,--this.activeGroups);if(!u&&!this.opts.liveUpdate)break;a.extractPositions(e[Zf.position2d])}};e.prototype.initInternal=function(e,t){var n=this,r=new hf(this.graph);this.groups=us(r.induceAll(e),(function(e,r){var i=r[0],o=r[1],a=o.vs.length;if(a<=1)return e;var u=new sf("u",!1,!0);u.build(i,a);e.push(new hc(n.opts,u,o,t));return e}),[]);this.activeGroups=this.groups.length};e.prototype.iterateEdgeState=function(){return as(cs(this.groups),(function(e){return e.iterateEdgeState()}))};e.prototype.iterateVertexState=function(){return as(cs(this.groups),(function(e){return e.iterateVertexState()}))};return e}(),hc=function(){function e(e,t,n,r){this.opts=e;this.subg=t;this.map=n;this.overlappingPairs=null;this.nbodyModel=new nl("f32",14,16);this.vState=Rc(t.countVertices());this.eState=Zc(t.countEdges());this.clustering=Rf(0);this.initialize(n,t,r)}e.prototype.initialize=function(e,t,n){for(var r=e.vs,i=e.es,o=n[Zf.radius],a=n[Zf.sparseRadius],u=n[Zf.degree],s=n[Zf.avgNeighbourDegree],l=n[Zf.speed],f=n[Zf.position2d],c=r.length,d=i.length,h=this,v=h.eState,p=h.vState,g=h.opts,m=2*d/c,y=0,b=0,x=0,w=0;w<c;w++){var A=r[w],M=u.get(A),I=s.get(A),E=o.get(A),C=Mc(E,a.get(A),M,I),k=Ac(E,M,I,m);x+=Math.pow(M-m,2);b+=Math.log(C);y+=k;var S=f.get(A);p.position.xs.set(w,S.x);p.position.ys.set(w,S.y);p.radius.set(w,E);p.mass.set(w,k);p.speed.set(w,l.get(A))}b=Math.exp(b/c);y/=c;x/=c;var L=d>0?Ic(g.scale)*yc(c,x,m,b):1;Ns(p.mass,y*Math.sqrt(1/L));this.avgRadius=b;for(var T=g.clustering,R=T.maxLength,Z=T.reweightSpeed,B=0;B<d;B++){var O=t.source(B),G=t.target(B),Y=bc(p.radius.get(O),p.radius.get(G),R),F=Y[0],D=Y[1];v.targetLength.set(B,F);v.maxTargetLength.set(B,D);var P=u.get(r[O]),z=u.get(r[G]),V=1===Math.min(P,z)&&Math.max(P,z)>2;v.reweightSpeed.set(B,V?0:Z)}var X=jl(t).diameter,W=void 0===g.speed?xc(d,X,g.scale.attenuation):g.speed,U=void 0===g.iterations.min?Math.min(g.iterations.max,wc(c,X)):g.iterations.max;this.schedule=new vc(g.momentum,U,g.maxRepulsionBias,W)};e.prototype.run=function(){if(this.schedule.progress>=1)return 1;var e=this.schedule.update();this.setupIteration();this.applyRepulsion();this.applyAttraction();this.applyOverlapRemoval();this.applyDisplacement();return e};e.prototype.setupIteration=function(){for(var e=this.vState,t=e.position,n=e.displacement,r=e.nesterov,i=e.radius,o=t.xs,a=t.ys,u=r.nxs,s=r.nys,l=0,f=o.size;l<f;l++){o.set(l,o.get(l)+u.get(l));a.set(l,a.get(l)+s.get(l))}Ws(n.dxs,0);Ws(n.dys,0);var c=this.schedule.periodicals(),d=c.edgeLengths,h=c.overlapGraph;if((d||h)&&null===this.clustering.build(o,a)){d&&this.calculateEdgeLengths();h&&(this.overlappingPairs=this.clustering.evaluate(.5,i,!1))}};e.prototype.applyAttraction=function(){for(var e=this.vState,t=e.displacement,n=e.position,r=e.nesterov,i=this.eState,o=i.mass,a=i.targetLength,u=i.maxTargetLength,s=i.massIntegral,l=i.reweightSpeed,f=this.subg.rawPairs(),c=t.dxs,d=t.dys,h=r.nxs,v=r.nys,p=n.xs,g=n.ys,m=o.size,y=0,b=0;y<m;y++){var x=f[b++],w=f[b++],A=p.get(w)-p.get(x),M=g.get(w)-g.get(x),I=o.get(y),E=zu(A,M);if(E>u.get(y)||I>1){var C=Tc(zu(p.get(w)+h.get(w)-(p.get(x)+h.get(x)),g.get(w)+v.get(w)-(g.get(x)+v.get(x))),E,u.get(y),s.get(y),I,l.get(y));o.set(y,C.m);s.set(y,C.int);I=C.m}var k=kc(E,I,a.get(y));A*=k;M*=k;c.values[c.index(w)]-=A;d.values[d.index(w)]-=M;c.values[c.index(x)]+=A;d.values[d.index(x)]+=M}};e.prototype.applyRepulsion=function(){var e=this,t=e.schedule,n=e.vState,r=n.position,i=n.displacement,o=n.mass;this.nbodyModel.build(r.xs,r.ys,void 0,o);var a=Ec(t.repulsion());this.nbodyModel.runOnPoints(a,i.dxs,i.dys,t.theta())};e.prototype.applyOverlapRemoval=function(){if(null!==this.overlappingPairs)for(var e=this.vState,t=e.displacement,n=e.position,r=e.radius,i=[0,0,0],o=t.dxs,a=t.dys,u=n.xs,s=n.ys,l=this.overlappingPairs.iterateAdjacentPairs(!1,i);!l.next().done;){var f=i[0],c=i[1],d=u.get(c)-u.get(f),h=s.get(c)-s.get(f),v=zu(d,h),p=r.get(f),g=r.get(c),m=p+g+.1*Math.min(p,g);if(v<m){var y=Sc(v,.25,m);d*=y;h*=y;o.values[o.index(c)]-=d;a.values[a.index(c)]-=h;o.values[o.index(f)]+=d;a.values[a.index(f)]+=h}}};e.prototype.applyDisplacement=function(){for(var e=this,t=e.schedule,n=e.vState,r=n.moment,i=r.mxs,o=r.mys,a=n.moment2,u=a.m2xs,s=a.m2ys,l=n.displacement,f=l.dxs,c=l.dys,d=n.position,h=d.xs,v=d.ys,p=n.nesterov,g=p.nxs,m=p.nys,y=t.speed()*this.avgRadius,b=t.momentum(),x=b.beta1,w=b.beta2,A=0,M=h.size;A<M;A++){var I=f.get(A),E=c.get(A),C=Nu(i.get(A),I,x),k=Nu(o.get(A),E,x);i.set(A,C);o.set(A,k);var S=Nu(u.get(A),I*I,w),L=Nu(s.get(A),E*E,w);u.set(A,S);s.set(A,L);var T=y*n.speed.get(A);I=T*(C/(Math.sqrt(S)+1e-4));E=T*(k/(Math.sqrt(L)+1e-4));h.set(A,h.get(A)-g.get(A)+I);v.set(A,v.get(A)-m.get(A)+E);g.set(A,I*x);m.set(A,E*x)}};e.prototype.calculateEdgeLengths=function(){var e=this,t=e.vState,n=t.position,r=t.radius,i=e.eState,o=i.targetLength,a=i.maxTargetLength,u=e.subg,s=e.clustering,l=e.opts.clustering,f=n.xs,c=n.ys,d=l.epsilon||Math.max(5,Math.sqrt(f.size)),h=1;s.evaluate(d,r,!0,2);var v=s.describeAll(f,c,r),p=this.clusters=s.clusters;if(!(p.countGroups()<=1)){for(var g=f.size,m=Fs(r.shape,"f32"),y=s.clusters,b=y.iterateGroups(),x=b.next();!x.done;x=b.next()){var w=Lc(g,v.get(x.value));os(y.iterateGroup(x.value),(function(e){m.set(e,w+r.get(e))}))}s.evaluate(h,m,!1);v=s.describeAll(f,c,r);var A=s.clusters;if(!(A.countGroups()<=1))for(var M=u.rawPairs(),I=0,E=0;E<M.length;I++){var C=M[E++],k=M[E++],S=A.get(C),L=A.get(k);if(p.get(C)!==p.get(k)&&S!==L){var T=Nu(mc(f,c,r,C,v.get(S),k,v.get(L)),Vu(f.get(C),c.get(C),f.get(k),c.get(k)),.75);a.set(I,Math.max(o.get(I),T))}}}};e.prototype.iterateEdgeState=function(){var e=this,t=e.map.es,n=e.eState.mass,r=Us(n),i=r[0],o=r[1];return is(this.subg.iterateEdges(),(function(e){return Fl([t[e],{mass:ju(i,o,n.get(e))}])}))};e.prototype.iterateVertexState=function(){var e=this.map.vs,t=this.clusters||{get:function(){return e[0]}};return is(this.subg.iterateVertices(),(function(n){return Fl([e[n],{cluster:e[t.get(n)]}])}))};e.prototype.extractPositions=function(e){for(var t=this.map.vs,n=this.subg.countVertices(),r=this.vState.position,i=r.xs,o=r.ys,a=0;a<n;a++){var u=e.get(t[a]);u.x=i.get(a);u.y=o.get(a)}};return e}(),vc=function(){function e(e,t,n,r){this.moments=e;this.maxIterations=t;this.maxRepulsionBias=n;this.targetSpeed=r;this.progress=0;this.iteration=-1}e.prototype.theta=function(){return gc(5,1.1,0,.9,this.progress,8)};e.prototype.speed=function(){var e=this,t=e.progress,n=e.targetSpeed;return gc(n,.4*n,.75,1,t)};e.prototype.repulsion=function(){return gc(0,this.maxRepulsionBias,.5,.9,this.progress,10)};e.prototype.momentum=function(){var e=this,t=e.moments,n=e.iteration;return{beta1:pc(t.beta1,n),beta2:pc(t.beta2,n)}};e.prototype.periodicals=function(){var e=this,t=e.iteration;return{edgeLengths:t>0&&t%25==0,overlapGraph:e.progress>=.9&&t%10==0}};e.prototype.update=function(){this.iteration++;return this.progress=Uu((this.iteration+1)/this.maxIterations,0,1)};return e}();function pc(e,t){return e-Math.pow(e,1+t)}function gc(e,t,n,r,i,o){void 0===o&&(o=12);return Ku(e,t,.5*(r-n),o/(r-n),1,i-n)}function mc(e,t,n,r,i,o,a){var u=i.radius-Vu(i.center.x,i.center.y,e.get(r),t.get(r)),s=a.radius-Vu(a.center.x,a.center.y,e.get(o),t.get(o));return n.get(r)+Math.max(0,u)+n.get(o)+Math.max(0,s)}function yc(e,t,n,r){return Math.sqrt(Math.max(1,t))*Math.pow(n,1+n/e)*Math.pow(r,2)}function bc(e,t,n){var r=Math.min(e,t),i=e+t+1.5*r;return[i,i+r*n]}function xc(e,t,n){var r=1,i=.02*(e=Math.sqrt(e))+.8*(t=Math.sqrt(t))+.024*e*t;return Math.max(r,i)*(2/(n+2))}function wc(e,t){var n=5,r=Math.log(e),i=Math.log(t/e),o=44.34*r+26.05*i+1.16*r*i;return Math.max(n,o)}function Ac(e,t,n,r){
var i=Math.min(t,n)>r||Math.max(t,n)<r?Math.sqrt(t/Math.max(1,r)):1;return e*Math.max(.5,i)}function Mc(e,t,n,r){var i=.9/Math.max(1,Math.pow(Math.min(n,r),.25));return Math.min(2.5*e,Nu(e,t,i))}function Ic(e){var t=e.base,n=e.attenuation;return t*Math.pow(20,-1*n)}function Ec(e){return function(t,n,r,i,o,a,u){return Cc(e,t,n,r,i,o,a,u)}}function Cc(e,t,n,r,i,o,a,u){var s=i-t,l=o-n,f=s*s+l*l,c=f*e,d=r*a/(Fu+f+c*c);u.x-=s*d;u.y-=l*d}function kc(e,t,n){var r=(e-n)/(Fu+e);r>0&&(r*=r*r*t);return r}function Sc(e,t,n){return t*((e-n)/(Fu+e))}function Lc(e,t){var n=(t.size-1)/e;return(.25+(1-n)/(.06+Math.sqrt(2.5*n))*.15)*t.radius}function Tc(e,t,n,r,i,o){var a=o*(e-n);r+=2*((a-(t-e))/t);i+=Math.max(0,.005*a)+r;return{m:Math.max(1,i),int:.5*r}}function Rc(e){var t=zs(Fs([2,e],"f64")),n=t[0],r=t[1],i=zs(Fs([11,e],"f32")),o=i[0],a=i[1],u=i[2],s=i[3],l=i[4],f=i[5],c=i[6],d=i[7],h=i[8],v=i[9],p=i[10];Ws(l,1);Ws(f,1);Ws(c,1);return{position:{xs:n,ys:r},displacement:{dxs:o,dys:a},nesterov:{nxs:u,nys:s},moment:{mxs:d,mys:h},moment2:{m2xs:v,m2ys:p},mass:l,radius:c,speed:f}}function Zc(e){var t=zs(Fs([4,e],"f32",1));return{targetLength:t[0],maxTargetLength:t[1],mass:t[2],reweightSpeed:t[3],massIntegral:Fs([e],"f64")}}function Bc(e,t){return new dc(e,t)}var Oc={defaultOpts:cc,biasedRepulsionKernel:Cc,attractionKernel:kc,overlapKernel:Sc,clusterSeparationKernel:Lc,edgeReweightingKernel:Tc,create:Bc},Gc=["random","none"],Yc={initialization:"random",initializationOptions:{minGroupSize:2}},Fc=function(e){es(t,e);function t(){return null!==e&&e.apply(this,arguments)||this}t.prototype.fd=function(){return this.getPhase(1)[0]};return t}(ic);function Dc(e,t){void 0===t&&(t={});Ol(t,Yc,!0);var n=[],r=t.initializationOptions;"random"===Yl(Gc,t.initialization,Yc.initialization)&&n.push([rc(Yf(e,r)),0]);n.push([Bc(e,t),1]);n.push([lc(t),2]);return new Fc(n)}var Pc,zc={Impl:Fc,create:Dc},Vc=function(){function e(e,t){this.labels=e;this.layout=t;this.state=null;this.vMap=null;this.eMap=null}e.prototype.isComplete=function(){return null===this.layout||this.layout.isComplete()};e.prototype.addAdaptiveProps=function(e){var t=ts({},e);null!==this.vMap&&(t[Zf.vAdaptive]=this.vMap);null!==this.eMap&&(t[Zf.eAdaptive]=this.eMap);return t};e.prototype.initialize=function(e){null!==this.layout&&this.layout.initialize(this.addAdaptiveProps(e),this.state)};e.prototype.run=function(e){null!==this.layout&&this.layout.run(this.addAdaptiveProps(e))};e.prototype.reset=function(e,t){null!==this.layout&&"function"==typeof this.layout.state&&(this.state=this.layout.state());this.layout=t;this.vMap=ql(e.vertexMap,this.labels.vertexMap);this.eMap=ql(e.edgeMap,this.labels.edgeMap);this.labels=e};return e}(),Xc=function(){function e(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);this.layout=e;this.interval=t;this.batchBudget=n;this.timePerIteration=-1}e.prototype.initialize=function(e){this.input=e;void 0!==this.layout.initialize&&this.layout.initialize(e)};e.prototype.start=function(e){this.onComplete=Dl(e);this.nextStep()};e.prototype.nextStep=function(){var e=this;try{this.work(this.batchBudget);this.layout.isComplete()?this.onComplete(void 0):setTimeout((function(){return e.nextStep()}),this.interval)}catch(e){this.onComplete(e)}};e.prototype.work=function(e){var t=this,n=t.layout,r=t.input,i=Date.now(),o=e+i;do{for(var a=this.timePerIteration>0?Math.max(1,Math.ceil(e/this.timePerIteration)):1,u=0;u<a&&!n.isComplete();u++)n.run(r);var s=Date.now()-i;i+=s;this.timePerIteration=Math.max(s,.01)/a}while(i<o&&!n.isComplete())};return e}();!function(e){e.forceDirected="forcedirected";e.random="random";e.organic="organic";e.diskpacking="diskpacking";e.rectpacking="rectpacking";e.pack="pack"}(Pc||(Pc={}));function Wc(e,t,n){switch(e){case Pc.organic:return Dc(t,n);case Pc.forceDirected:return Bc(t,n);case Pc.random:return rc(Yf(t,n));case Pc.diskpacking:return Wf(n);case Pc.rectpacking:return Qf(n);case Pc.pack:return lc(n);default:throw new Error("unknown layout")}}var Uc={diskpacking:Uf,rectpacking:qf,pack:fc,get Names(){return Pc},createLayout:Wc,get KnownProperties(){return Zf},forceDirected:Oc,organic:zc,AdaptiveProxy:Vc,SetTimeoutRunner:Xc,noopLayout:nc,syncToAsyncLayout:rc,PhasedLayout:ic};function Nc(e,t){for(var n=[],r=t.parts.iterateGroups(),i=r.next();!1===i.done;i=r.next())for(var o=-1,a=t.parts.iterateGroup(i.value),u=a.next();!1===u.done;u=a.next()){var s=t.labels.get(u.value),l=e.labels.getUniqueInverse(s);if(void 0!==l){var f=e.parts.get(l);if(o<0)o=f;else if(o!==f){vs(t.parts.iterateGroup(i.value),(function(e){return t.labels.get(e)}),n);break}}}return n}var jc={adaptiveExpand:{findAdaptiveGroups:Nc}},Kc=function(){function e(e,t,n,r,i){this.nodeList=e;this.edgeList=t;this.staticGraph=n;this.vertexMap=r;this.edgeMap=i}return e}();function Hc(e){return As.fromArray(e,(function(e){return"string"==typeof e?e:e.id}))}function _c(e){return As.fromArray(e,(function(e,t){return[e.id1,e.id2,void 0!==e.id?e.id:t.toString()]}))}function Jc(e,t){var n=new vf.AdjacencyGraph("u",!1,!0),r=vf.buildFromLabeledIterators(Hc(e),_c(t),n);return new Kc(e,t,n,r.vertexMap,r.edgeMap)}function Qc(e,t){var n=e.edges;if(t){var r=[];Object.keys(e.selfAdjacency).forEach((function(t){var n=e.selfAdjacency[t];r.push({id:n[0],id1:t,id2:t,ids:n})}));r.length>0&&(n=n.concat(r))}return Jc(Object.keys(e.vertices),n)}function qc(e,t,n){var r=e.vertexMap,i=e.staticGraph.countVertices(),o=As.flatMap(As.fromArray(t),(function(e,t){var i=n(e,t);if(i.length<1)return As.empty();var o=r.getUniqueInverse(i[0]);return As.fromArray(i,(function(e){return[o,r.getUniqueInverse(e)]}))}));return vf.connectedComponentsFrom(o,i)}var $c=se,ed=Bu,td=Ou,nd=3,rd="_dummy",id=RegExp("^"+rd);function od(e){return id.test(e.id)}function ad(e){var t=x(e)?e:5;t=Math.max(0,t);return t=Math.min(10,t)}function ud(e){return 10*(5-ad(e))}function sd(e,t,r){var i=r||30;n(e,(function(e){if(!e.fixed){e.x+=i*(t.next()-.5);e.y+=i*(t.next()-.5)}}))}function ld(e){var t=0,r=0,i=0,o=1/0,a=1/0,u=-1/0,s=-1/0;n(e,(function(e){t+=1;r+=e.x;i+=e.y;a=Math.min(a,e.x);o=Math.min(o,e.y);u=Math.max(u,e.x);s=Math.max(s,e.y)}));r/=t;i/=t;var l=0,f=!1;n(e,(function(e){var t=e.x-r,n=e.y-i,o=Math.sqrt(t*t+n*n);l=Math.max(o+1.5*e.size,l);f=f||e.fixed}));return{x:r,y:i,sum:t,size:l,fixed:f,miny:o,minx:a,maxy:s,maxx:u}}function fd(e){return"number"==typeof e.w&&!y(e.w)&&"number"==typeof e.h&&!y(e.h)}function cd(e){return!(e.u||e.fi||e.c||e.b||e.w&&e.h)}function dd(e){var t=1/0,r=1/0,i=-1/0,o=-1/0,a=0;n(e,(function(e){var n=e.size||0;t=Math.min(t,e.x-n);r=Math.min(r,e.y-n);i=Math.max(i,e.x+n);o=Math.max(o,e.y+n);a++}));return{x1:t,y1:r,x2:i,y2:o,c:a}}function hd(e,t){var n=As,r=Jc(H(e),t),i=vf.connectedComponents(r.staticGraph),o={},a=r.vertexMap;n.forEach(i.iterateGroups(),(function(t,r){var u={};n.forEach(i.iterateGroup(t),(function(t){var n=a.get(t),i=e[n];u[n]=i;i.c=r}));o[t]={verts:u,edges:[],extents:dd(u),c:r}}));for(var u=0;u<t.length;u++){var s=t[u],l=o[i.get(a.getUniqueInverse(s.id1))];l.edges.push(s);s.c=l.c}return H(o)}function vd(e){var t=0;e.b&&(t=x(e.bw)?e.bw:ed);!e.donut||e._combo&&e._combo.open||(t=e.donut.w+2*e.donut.bw);return t}function pd(e,t){if(e.t){var n=""+e.t;if(void 0!==t&&n.length>t){n=n.substring(0,Math.max(0,t-3));n+="..."}return n.split(/\r\n|\r|\n/)}return[""]}function gd(e,t,n,r,i){for(var o=[],a=0;a<e.length;a++)o[a]=Hn(t,e[a],n,r,i||"sans-serif").width;return o}function md(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n]);return t}function yd(e,t,n,r){var i=0,o=0;if(e.t){var a=(e.fs||vn)*n,u=nd*n,s=pd(e,r);i=md(gd(s,t,a,!!e.fb,e.ff));o=(a+u)*s.length}return{width:i,height:o}}function bd(e,t){return!t&&("boolean"==typeof e.tc?e.tc:!e.w&&(!e.u&&!e.fi))}function xd(e,t,n,r){var i=0,o=(nd+(e.fs||vn))*n.e,a=yd(e,t,n.e,r.maxLength),u=a.width,s=u+(r.padExtents?o:0),l=cd(e),f=l?Math.max(u/10,td):u,c=a.height,d=bd(e,n.isOpenCombo),h=l?2*td:n.height,v=$c(f/2,h/2+c/2);if(r.partial){var p=Math.max(1,u/(4*n.radius))*o,g=Math.min(n.radius+p,u/2);if(d){u/2<=n.radius+o&&(g=u/2);i=$c(g,c/2)}else i=Math.max(g,(n.height+c)/2)}else i=$c(u/2,d?c/2:n.height/2+c);return{width:s,height:c,centred:d,distanceToCorner:i,legacyDistToCorner:v}}function wd(e,t,n,r){var i,o,a=0,u=0,s=0,l=0,f=e.e||1,c=fd(e),d=c&&"circle"===e.sh,h=cd(e),v=!1;if(e.du)return{radius:10,baseRadius:10,borderSize:10,width:10,height:10};o=vd(e);e._combo&&(v="boolean"==typeof r?r:e._combo.open);if(v){u=e.oc.w/2;l=s=e.oc.w;a=u+(o=e.oc&&"bw"in e.oc?e.oc.bw:uu.bw)}else if(c){f=1;if(d){var p=Math.min(e.w,e.h);l=s=p+2*o;a=(u=p/2)+o}else{u=$c(e.w,e.h)/2;s=e.w+2*o;l=e.h+2*o;a=$c(s,l)/2}}else if(!h){l=s=2*(u=td*f)+2*(o*=f);a="box"===e.sh?$c(s,l)/2:u+o}if(n.include&&e.t&&e.t.length>0){var g=xd(e,t,{radius:a,height:l,width:s,e:f},n);i=Math.max(g.legacyDistToCorner,a);a=Math.max(g.distanceToCorner,a);s=Math.max(g.width,s);g.centred?l=Math.max(g.height,l):l+=g.height}else{var m=0;if(e.t){m=(pd(e,n.maxLength).length+1)*((e.fs||vn)*f)}i=a+m/2;!v&&h&&(i+=td*f)}if(h&&e.g&&e.g.length>0){for(var y=0,b=0;b<e.g.length;b++){var x=2*Aa(e.g[b]);y+=x;l=Math.max(l,x)}a=e.t?Math.max(s,y):y/2;s+=y}return{legacyRadius:Math.round(i),radius:Math.round(a),baseRadius:Math.round(u),borderSize:Math.round(o),width:Math.round(s),height:Math.round(l)}}function Ad(e){return bd(e,e._combo&&e._combo.open)}function Md(e,t){var n=0;if(e.t){var r=e.fs||vn,i=fd(e)?1:e.e||1;if(!Ad(e)){n=(r+nd)*i*pd(e,t).length/2}}return Math.round(n)}function Id(e,t,r,i,o,a){if(!t||!x(t.x)||!x(t.y))return 1/0;var u=Math.max(0,0|i),s=0;function l(e){if(void 0!==e.x){var n=e.x-t.x,i=e.y-t.y;if(fd(e)){i+=void 0!==e.labelOffset?e.labelOffset:Md(e,a);var u=Math.abs(n)+e.w/2,l=Math.abs(i)+e.h/2,f=$c(u,l);s=Math.max(s,f)}else{var c=void 0,d=0;if(void 0!==e.size)c=e.size;else if(void 0!==e.r){c=e.r;d=e.labelOffset}else{c=wd(e,r,{include:o,maxLength:a}).radius;d=Md(e,a)}var h=$c(n,i+d);s=Math.max(s,h+c)}}}Array.isArray(e)?e.forEach(l):n(e,l);return Math.round(s+u)}function Ed(e,t,n,r,i){void 0===n&&(n=0);var o=[],a={include:r,maxLength:i};e.forEach((function(e){var r=void 0!==e.r?e.r:wd(e,t,a).radius;r+=n;if(!x(e.x)||!x(e.y)||!x(r))throw new Error("Inputs must be finite");o.push({x:e.x,y:e.y,r:r})}));return Bf.radialExtents(o)}function Cd(e,t,n){var r={include:void 0,maxLength:n};return function(n,i){r.include=i;return void 0!==e[n]?wd(e[n],t,r):null}}function kd(e,t){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a={},u=[];t.forEach((function(e){n(i[e],(function(e){e.forEach((function(e){if(!a[e]){u.push(e);a[e]=!0}}))}));var t=o[e];if(t)for(var r=0;r<t.length;r++)u.push(t[r])}));return u}function Sd(e,t,n){var r=e.getCache({all:!0,combos:"all"}),i=r.adjacency,o=r.selfAdjacency,a=[];i[t]&&(a=i[t][n]||[]);t===n&&o[t]&&(a=a.concat(o[t]));return a}function Ld(e,t){var r=e.getCache({combos:"all",all:!1}),i=r.adjacency,o=r.selfAdjacency,a={};t.forEach((function(e,t){var r=i[t];r&&n(r,(function(e){for(var t=0;t<e.length;t++){var n=e[t];a[n]=!0}}));var u=o[t];if(u)for(var s=0;s<u.length;s++)a[u[s]]=!0}));n(a,(function(e,n){var r=t.get(n);r&&2===r||t.set(n,1)}))}function Td(e){return!!e.weights}function Rd(e){e.all=!!e.all}function Zd(e){return/^(component|chart)$/.test(e.normalization)?e.normalization:"unnormalized"}function Bd(e){if(!/^(chart|component|unnormalized)$/.test(e.normalization))throw new TypeError("opts normalization property should be either 'component', 'chart' or 'unnormalized'")}function Od(e){e.direction=e.direction||"any";if(!/^(any|from|to)$/.test(e.direction))throw new TypeError("opts direction property should be either 'from', 'to' or 'any'")}function Gd(e,t){var n=As,r=D(t,{all:!1});Rd(r);var i=Qc(e.getCache(r),!0),o=vf.connectedComponents(i.staticGraph),a={},u=i.vertexMap;n.forEach(o.iterateGroups(),(function(e){a[e]={nodes:n.toArray(n.map(o.iterateGroup(e),(function(e){return u.get(e)}))),links:[]}}));for(var s=i.edgeList,l=0;l<s.length;l++)for(var f=s[l],c=a[o.get(u.getUniqueInverse(f.id1))],d=0;d<f.ids.length;d++)c.links.push(f.ids[d]);return H(a)}function Yd(e,t,n){return!!(e[t].a2&&e[t].id2===n||e[t].a1&&e[t].id1===n)}function Fd(e,t,n,r,i){return"any"===i.direction||("from"===i.direction&&Yd(e,r,n)||"to"===i.direction&&Yd(e,r,t))}function Dd(e){return Td(e)?Pd:zd}function Pd(e,t,n,r,i){var o=zd(e,t,n,r,i);return y(o)?o:1/o}function zd(e,t,n,r,i){var o=i.getLinks(),a=NaN;Fd(o,e,t,n,r)&&(r.value?o[n].d&&(a=+o[n].d[r.value]):a=1);return a}function Vd(e,t){t.eachLink(e,(function(n){if(zd(n.id1,n.id2,n.id,e,t)<=0)throw new Error("Link Weight must be Positive")}));return{direction:e.direction,value:e.value,weights:Td(e)}}function Xd(e,t){Od(e);return Vd(e,t)}function Wd(e,t,n,r){var i,o=e.getCache(r).adjacency[t][n],a=1/0,u=Dd(r);if(o)for(var s=0;s<o.length;s++){var l=u(t,n,o[s],r,e);if(x(l)){if(l<a){a=l;(i=[]).push(o[s])}l===a&&a!==1/0&&i.push(o[s])}}return{value:a,links:i}}function Ud(e,t,r){function i(e,t){return O[e]-O[t]}function o(e){e.sort(i);return e.shift()}function u(e,t){e.sort(i);K(e,t)||e.push(t)}function s(t,n){var r=Wd(e,t,n,A).value;return x(r)?r:p()||x(r)?1/0:1}function l(e){return e.length>0}function f(){S.length=0;L.length=0;e.eachNode(m,(function(e){for(var t=0;t<Y.length;t++)d(Y[t].dict,e.id,Y[t].value)}))}function c(t,n,r){e.eachNode(t,(function(e){d(n,e.id,r)}))}function d(e,t,n){Array.isArray(n)&&l(n)&&e[t]?e[t].length=0:e[t]=a(n)}function h(){for(var t=Gd(e,m),n={},r=0;r<t.length;r++)for(var i=t[r],o=0;o<i.nodes.length;o++)n[i.nodes[o]]=i.nodes.length;return n}function v(){return!V(m.value)}function p(){return!!m.directed}function g(){return!!m.endpoints}var m=D(t,{all:!1,combos:"toplevel",directed:!1,endpoints:!1,normalization:"component",value:void 0,weights:!1});m.combos="toplevel";Bd(m);Rd(m);var y=v()||p()?"dijkstra":"regular",b=g()?"endpoints":"regular",w=Zd(m),A={direction:p()?"from":"any",value:m.value,weights:Td(m),all:m.all};Xd(m,e);var M,I,E,C,k={},S=[],L=[],T={},Z={},B={},O={},G=0,Y=[{dict:Z,value:0},{dict:O,value:1/0},{dict:T,value:[]},{dict:B,value:0}];function F(e,t){if(!x(O[t])){O[t]=O[M]+1;S.push(t)}if(O[t]===O[M]+1){Z[t]+=Z[M];T[t].push(M)}}function P(e,t){if(O[t]>O[M]+s(M,t)){O[t]=O[M]+s(M,t);u(S,t);Z[t]=0;T[t]=[]}if(O[t]===O[M]+s(M,t)){Z[t]+=Z[M];T[t].push(M)}}var z=e.getCache(m).adjacency,X={regular:function(e){Z[e]=1;O[e]=0;S.push(e);for(;l(S);){M=S.shift();L.push(M);n(z[M],F)}},dijkstra:function(e){Z[e]=1;O[e]=0;S.push(e);for(;l(S);){M=o(S);L.push(M);n(z[M],P)}}},W={regular:function(e){for(;l(L);){I=L.pop();for(var t=(1+B[I])/Z[I],n=0;n<T[I].length;n++){M=T[I][n];B[M]+=Z[M]*t}I!==e&&(k[I]+=B[I])}},endpoints:function(e){k[e]+=L.length-1;for(;l(L);){I=L.pop();for(var t=(1+B[I])/Z[I],n=0;n<T[I].length;n++){M=T[I][n];B[M]+=Z[M]*t}I!==e&&(k[I]+=B[I]+1)}}},U={chart:function(){if(G>2){E=1/((G-1)*(G-2));n(k,(function(e,t){k[t]*=E}))}},component:function(){C=h();n(k,(function(e,t){if(C[t]>2){E=1/((C[t]-1)*(C[t]-2));k[t]*=E}}))},unnormalized:function(){if(!p()){E=.5;n(k,(function(e,t){k[t]*=E}))}}};function N(){_();R(r,k)}var j=X[y]||X.regular,H=W[b]||W.regular,_=U[w]||U.chart;e.eachNode(m,(function(){G++}));c(m,k,0);function J(e,t){f();j(e.id);H(e.id);t()}e.asyncEachNode(m,"betweenness",J,N)}function Nd(e,t,r){var i,o={},a={},u=[],s=e.getCache(r).adjacency;function l(){for(var e=0,t=1/0,n=0;n<u.length;n++){var r=o[u[n]];if(r<=t){e=n;t=r}}return e}function f(e,t,n){a[e]||(a[e]=[]);a[e].push({id:t,links:n})}e.eachNode(r,(function(e){var t=e.id;o[t]=1/0;a[t]=void 0;u.push(t)}));o[t]=0;function c(t,n){var u=Wd(e,i,n,r),s=o[i]+u.value;if(s<o[n]){o[n]=s;a[n]=[{id:i,links:u.links}]}else s===o[n]&&f(n,i,u.links)}for(;u.length>0;){var d=l();i=u[d];if(o[i]===1/0)break;u.splice(d,1);n(s[i],c)}return{distance:o,previous:a}}function jd(e,t,r){if(!e.getNodes()[t])throw new Error("distances error: id(s) must be present in the graph");var i=D(r||{},{combos:"toplevel",all:!1});Xd(i,e);Rd(i);var o=Nd(e,t,i),a={};n(o.distance,(function(e,t){x(e)&&(a[t]=e)}));return a}function Kd(e,t,r){var i=D(t,{all:!1,combos:"toplevel",direction:"any",mode:"auto",normalization:"component",value:void 0,weights:!1});i.combos="toplevel";var o=e.getCache(i).adjacency;function a(e){var t=0;n(e,(function(e){t+=x(e)?1:0}));return t}function u(e){return 0===Object.keys(e).length}function s(e){return!V(e)}function l(t){var n=e.getLinks();return!n[t].a1&&!n[t].a2}function f(e){var t={},r=0,i={},a={};a[e]=!0;function l(e,i){if(!s(t[i])){t[i]=r;n(o[i],(function(e,t){a[t]=!0}))}}for(;!u(a);){i=a;a={};n(i,l);r+=1}return t}function c(){return"any"!==i.direction}function d(){i.mode=i.mode||"auto";if(!i.mode.match(/^(connected|disconnected|auto)$/))throw new TypeError("Option mode property should be either 'connected', 'disconnected' or 'auto'")}function h(){d();return"auto"===i.mode?m():i.mode}function v(){return!V(i.value)}function p(){return!!Zd(i).match(/chart/)}function g(){return!!Zd(i).match(/component/)}function m(){var t="disconnected",n=Gd(e,i);if(1===n.length){t="connected";if(c())for(var r=0;r<n[0].links.length;r++)if(l(n[0].links[r]))return"disconnected"}return t}var y=Xd(i,e);Bd(i);Rd(i);y.all=i.all;var b=v()||c()?"dijkstra":"regular",w=0,A={},M=h(),I={regular:function(e){return f(e)},dijkstra:function(t,n){return jd(e,t,n)}},E={connected:function(e,t){var r=0;n(t,(function(e){r+=x(e)?e:0}));return r?1/r:0},disconnected:function(e,t){var r=0;n(t,(function(t,n){r+=e!==n?1/t:0}));return r}};function C(){R(r,A)}var k=I[b]||I.regular,S=E[M];w=0;e.eachNode(i,(function(){w++}));A={};function L(e,t){var n,r=k(e.id,y),i=a(r);A[e.id]=S(e.id,r);if(w>1){n=p()?Math.pow(i-1,2)/(w-1):g()?i-1:1;A[e.id]*=n}t()}e.asyncEachNode(i,"closeness",L,C)}function Hd(e,t){var n=D(t,{all:!1,combos:"toplevel",consistent:!0,factor:5});n.combos="toplevel";Rd(n);var r,i=[],o=[],a=[],u=[],s={},l=0,f=[],c=[],d=[],h=[],v=[];e.eachNode(n,(function(e){u.push(e.id);o.push([]);a.push([]);s[e.id]=u.length-1;f.push([u.length-1]);c.push(u.length-1);v.push(u.length-1);i.push(0);d.push(0)}));e.eachLink(n,(function(e){var t=m(e,n);l+=t;var r=s[e.id1],u=s[e.id2];if(!a[r][u]){a[r][u]=0;a[u][r]=0}a[r][u]+=t;a[u][r]+=t;i[r]+=t;i[u]+=t;d[r]+=t;d[u]+=t;o[r].push(u);o[u].push(r)}));var p=Math.max(1e4,50*u.length);if(0===u.length)return[];0===l&&(p=0);var g=he();g.setSeed(n.consistent?900736044081:null);function m(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function y(e){r=x(r=+e)?r:5;r=Math.max(0,r);r=(r=Math.min(10,r))*r*r/125}y(n.factor);for(var b=0;b<p;b++){if(g.next()>.95){k(v[Math.floor(g.next()*v.length)],v[Math.floor(g.next()*v.length)])}if(b<.5*p&&g.next()>.98){L(v[Math.floor(g.next()*v.length)])}var w=Math.floor(u.length*g.next()),A=o[w][Math.floor(g.next()*o[w].length)],M=c[A],I=c[w];if(M!==I){C(M,I,w)>=0&&S(w,M)}}function E(){for(var e=[],t=0;t<v.length;t++){for(var n=[],r=0;r<f[v[t]].length;r++)n.push(u[f[v[t]][r]]);e.push(n)}return e}function C(e,t,n){var u=d[t],s=d[e],f=i[n],h=(u-s-f)*f*r;h/=2*l;for(var v=0;v<o[n].length;v++){var p=o[n][v];c[p]===t?h-=a[n][p]:c[p]===e&&(h+=a[n][p])}return h/l}function k(e,t){if(t!==e&&0!==f[e].length&&0!==f[t].length){var n=d[e],i=d[t],u=0;u-=r*n*i/l;for(var s=0;s<f[e].length;s++)for(var h=f[e][s],v=0;v<o[h].length;v++)c[o[h][v]]===t&&(u+=a[h][o[h][v]]);if((u/=l)>0){var p=f[e].length;for(s=0;s<p;s++)S(f[e][0],t)}}}function S(e,t){var n=c[e];c[e]=t;for(var r=[],o=0;o<f[n].length;o++)f[n][o]!==e&&r.push(f[n][o]);if(0===f[t].length){v.push(t);h.splice(h.indexOf(t),1)}f[n]=r;f[t].push(e);d[t]+=i[e];d[n]-=i[e];if(0===f[n].length){h.push(n);v.splice(v.indexOf(n),1)}}function L(e){var t=f[e].length;if(1!==t&&h.length){for(var n=[],r=0;r<t;r++)n.push(f[e][r]);for(r=0;r<t&&h.length;r++)S(n[r],h[0])}}return E()}function _d(e,t){var r=D(t,{all:!1,combos:"toplevel",multi:!0});r.combos="toplevel";Xd(r,e);Rd(r);var i=e.getCache(r).adjacency,o={};e.eachNode(r,(function(t){var a=t.id;o[a]=0;n(i[a],(function(t,n){for(var i=0;i<t.length;i++){var u=zd(a,n,t[i],r,e);if(x(u)){o[a]+=u;if(!r.multi)break}}}))}));return o}function Jd(e,t){var r,i,o=D(t,{all:!1,combos:"toplevel",direction:"any"});o.combos="toplevel";o.direction="any";Rd(o);Vd(o,e);var a={},u=Gd(e,o);function s(e,t){a[t]=e*u[r].nodes.length}for(r=0;r<u.length;r++){var l={};for(i=0;i<u[r].nodes.length;i++)l[u[r].nodes[i]]=!0;n(f(l),s)}return a;function f(t){var n={},r=[],i=[],a=[],u=0,s=[],l=0;e.eachNode(o,(function(e){var o=e.id;if(t[o]){r.push(o);n[o]=r.length-1;i.push([]);a.push({})}}));var f=Math.max(100,5*Math.sqrt(r.length));e.eachLink(o,(function(e){if(t[e.id1]&&t[e.id2]){var r=n[e.id1],s=n[e.id2];if(!a[r][s]){i[r].push(s);i[s].push(r);a[s][r]=0;a[r][s]=0}var f=h(e,o);a[r][s]+=f;a[s][r]+=f;u+=f;l++}}));var c={};if(0===r.length)return c;if(1===r.length){c[r[0]]=1;return c}if(2===r.length){c[r[0]]=.5;c[r[1]]=.5;return c}u/=l;f=Math.max(100,5*Math.sqrt(r.length));for(var d=0;d<r.length;d++)s.push(Math.random());for(d=0;d<f;d++){s=v(s);d%10==0&&p()}p();for(d=0;d<r.length;d++)c[r[d]]=s[d];return c;function h(e,t){return t.value&&e.d?+e.d[t.value]:1}function v(e){for(var t=[],n=0;n<r.length;n++){for(var o=0,s=0;s<i[n].length;s++)o+=a[n][i[n][s]]*e[i[n][s]];o+=u*e[n];t.push(o)}return t}function p(){for(var e=1/g(s),t=0;t<r.length;t++)s[t]*=e}function g(e){for(var t=0,n=0;n<e.length;n++)t+=Math.abs(e[n]);return t}}}function Qd(e,t,r){var i=null;function o(){i=null}function a(e,t,n,r,i){e[n]||(e[n]={});e[r]||(e[r]={});if(!e[n][r]){e[r][n]=[];e[n][r]=e[r][n];t.push(i)}e[n][r].push(i)}function u(e,t,n){var r={id:t.id,id1:t.id1,id2:t.id2,ids:n};e.edges.push(r);e.connections.push(n)}function s(i){var o={connections:[],adjacency:{},vertices:{},edges:[],selfAdjacency:{},selfConnections:[]};t(i,(function(e){o.vertices[e.id]={x:e.x,y:e.y};o.adjacency[e.id]={}}));var s=[],l={};e(i,(function(e){if(e.id1===e.id2){l[e.id1]=l[e.id1]||[];l[e.id1].push(e.id)}else a(o.adjacency,s,e.id1,e.id2,e.id)}));for(var f=s.length,c=r(),d=0;d<f;d++){var h=c[s[d]];u(o,h,o.adjacency[h.id1][h.id2])}if(Q(l)){var v=o.connections.slice();n(l,(function(e){v.push(e)}));o.selfConnections=v}else o.selfConnections=o.connections;o.selfAdjacency=l;return o}function l(e){var t=D(e,{all:!1,combos:"toplevel"}),n=(t.all?"all":"visible")+"-"+t.combos;i||(i={});i[n]||(i[n]=s(t));return i[n]}return{getCache:l,clearCache:o}}function qd(e,t){var r={},i={},o=Qd(l,f,c),a=o.clearCache,u=o.getCache;function s(e,t,r){var i=t.all,o="toplevel"!==t.combos,a="underlying"!==t.combos;n(e,(function(e){!i&&e.hi||!o&&e.parentId||!a&&e._combo||r(e)}))}function l(e,t){s(i,e,t)}function f(e,t){s(r,e,t)}function c(){return i}function d(){return r}function h(e,t){r=e;i=t;a()}function v(n,r,i,o){function a(){var e=[];f(n,(function(t){e.push(t)}));return e}var u=a(),s=u.length,l=-1,c=0,d=500,h=Date.now(),v=h,g=700;function m(){if(++l>=s){y(1);o()}else i(u[l],x)}function y(n){if(t){e.fire("progress",{task:r,progress:n});t.trigger("progress",r,n)}}function b(){h=Date.now();if(c++>d||h-v>g){c=0;v=Date.now();return!0}return!1}function x(){if(b()){y(l/s);p(m,0)}else m()}y(0);x()}function g(e,t,n){var r=u(e);if(t===n)return r.selfAdjacency[t];var i=r.adjacency;return i[t]&&i[t][n]}function m(e){var t=u(e);return e.self?t.selfConnections:t.connections}return{asyncEachNode:v,clearCache:a,connections:m,eachLink:l,eachNode:f,findAdjacency:g,getCache:u,getLinks:c,getNodes:d,privateSetProperties:h}}function $d(e,t,r){var i=e.getNodes(),o=e.getLinks(),a=Y(t),u={},s={},l=q(a),f=D(r,{all:!1,direction:"any",hops:1});if(f.hops<1)throw new Error("neighbours error: hops must be a positive number");Rd(f);var c=0,d={},h={},v=l,p=e.getCache(f),g=p.adjacency,m=p.selfAdjacency;n(l,(function(e,t){var n=N(t);if(!i[n]&&!o[n])throw new Error("neighbours error: ids must be present in the graph");c++}));function y(e,t,n){if(!h[t]&&Fd(o,n,e,t,f)){u[t]=!0;h[t]=!0;if(n!==e){s[e]=!0;e in v&&(s[n]=!0);if(!(e in l)){c++;d[e]=!0}}}}function b(){n(l,(function(e,t){if(i[t]){g[t]&&n(g[t],(function(e,n){for(var r=0;r<e.length;r++){y(n,N(e[r]),t)}}));var r=m[t];if(r)for(var a=0;a<r.length;a++)y(t,r[a],t)}else if(o[t]){var u=o[t];if(!h[u.id2]&&Fd(o,u.id2,u.id1,t,f)){s[u.id2]=!0;h[u.id2]=!0;h[t]=!0;if(!(u.id2 in l)){c++;d[u.id2]=!0}}if(!h[u.id1]&&Fd(o,u.id1,u.id2,t,f)){s[u.id1]=!0;h[u.id1]=!0;h[t]=!0;if(!(u.id1 in l)){c++;d[u.id1]=!0}}}}))}for(;f.hops--&&c;){c=0;b();l=d;d={}}return{nodes:Object.keys(s),links:Object.keys(u)}}function eh(e,t){var n=D(t,{all:!1,combos:"toplevel",directed:!0});n.combos="toplevel";Rd(n);Xd(n,e);var r={},i=[],o=[],a=[],u=[],s=[],l=.85;e.eachNode(n,(function(e){i.push(e.id);r[e.id]=i.length-1;o.push([]);a.push({});u.push(0)}));var f=Math.max(100,5*Math.sqrt(i.length));e.eachLink(n,(function(e){var t=r[e.id1],i=r[e.id2],s=v(e,n);if(!n.directed||e.a2||!e.a1&&!e.a2){if(!a[i][t]){a[i][t]=0;o[i].push(t)}a[i][t]+=s;u[t]+=s}if(!n.directed||e.a1||!e.a1&&!e.a2){if(!a[t][i]){a[t][i]=0;o[t].push(i)}a[t][i]+=s;u[i]+=s}}));for(var c=0;c<i.length;c++)s.push(Math.random());var d=1/g(s);for(c=0;c<i.length;c++)s[c]*=d;for(c=0;c<f;c++)s=p(s);d=1/g(s);for(c=0;c<i.length;c++)s[c]*=d;var h={};for(c=0;c<i.length;c++)h[i[c]]=s[c];return h;function v(e,t){var n=1;t.value&&e.d&&(n=+e.d[t.value]);return n}function p(e){for(var t=[],n=0,r=0,f=0;f<i.length;f++)n+=e[f];for(f=0;f<i.length;f++){for(var c=0,d=0;d<o[f].length;d++){var h=o[f][d];c+=a[f][h]*e[h]/u[h]}0===u[f]&&(r+=l*e[f]);c*=l;c+=(1-l)*n/i.length;t.push(c)}r/=i.length;for(f=0;f<s.length;f++)t[f]+=r;return t}function g(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}}function th(e,t,n,r){var i=e.getNodes();if("string"!=typeof t||"string"!=typeof n)throw new Error("shortestPaths error: ids must be strings");if(!i[t]||!i[n])throw new Error("shortestPaths error: ids must be present in the graph");var o=D(r,{combos:"toplevel",all:!1});Xd(o,e);Rd(o);var a=Nd(e,t,o),u=a.previous;if(a.distance[n]===1/0)return{onePath:[],one:[],items:[],distance:1/0};for(var s=[],l=[],f=n;u[f];){s.unshift(f);l.unshift(f);l.unshift(u[f][0].links[0]);f=u[f][0].id}s.unshift(f);l.unshift(f);function c(e){for(var t=[],n=0;n<e.length;n++)u[e[n].id]&&(t=t.concat(u[e[n].id]));return t}var d={};d[n]=!0;var h=[];h.push({id:n});for(var v=c(h);v.length>0;){for(var p=0;p<v.length;p++){d[v[p].id]=!0;for(var g=0;g<v[p].links.length;g++)d[v[p].links[g]]=!0}v=c(v)}return{onePath:l,one:s,items:Object.keys(d),distance:a.distance[n]}}function nh(e,t){var r=D(t,{all:!1,combos:"toplevel"});r.combos="toplevel";Rd(r);var i=e.getCache(r).adjacency;function o(){var t={},o={},a=[],u=[],s=0;n(t=_d(e,{multi:!1,all:r.all,combos:"toplevel"}),(function(e){s=Math.max(s,e)}));for(var l=Object.keys(t).length,f=0;f<s+1;f++)u[f]=0;e.eachNode(r,(function(e){u[t[e.id]]++}));var c=1;for(f=0;f<s+1;f++){var d=u[f];u[f]=c;c+=d}e.eachNode(r,(function(e){var n=e.id;o[n]=u[t[n]];a[o[n]]=n;u[t[n]]++}));for(f=s;f>1;f--)u[f]=u[f-1];u[0]=1;for(var h=function(e){var r=a[e];n(i[r],(function(e,n){if(t[n]>t[r]){var i=t[n],s=o[n],l=u[i],f=a[l];if(n!==f){o[n]=l;a[s]=f;o[f]=s;a[l]=n}u[i]++;t[n]--}}))},v=0;v<l;v++)h(v);return t}function a(e){var t=0;n(e,(function(e){t=Math.max(t,e)}));return t}var u=o();return{maximumK:a(u),values:u}}function rh(e,t){var n=qd(e,t);return{internalMarkLinks:function(e){return Ld(n,e)},privateGetLinkIdsBetween:function(e,t){return Sd(n,e,t)},privateNeighbourLinks:function(e){return kd(n,e)},clearCache:n.clearCache,connections:n.connections,findAdjacency:n.findAdjacency,privateSetProperties:n.privateSetProperties,betweenness:function(e,t){return Ud(n,e,t)},closeness:function(e,t){return Kd(n,e,t)},clusters:function(e){return Hd(n,e)},components:function(e){return Gd(n,e)},degrees:function(e){return _d(n,e)},distances:function(e,t){return jd(n,e,t)},eigenCentrality:function(e){return Jd(n,e)},kCores:function(e){return nh(n,e)},neighbours:function(e,t){return $d(n,e,t)},pageRank:function(e){return eh(n,e)},shortestPaths:function(e,t,r){return th(n,e,t,r)}}}var ih=2*Math.PI,oh=Math.PI/2;function ah(){var e=-Math.PI/12,t=Math.sin(e),n=Math.cos(e);function r(e,t){if(e.r===t.r){if(e.t){if(!t.t)return-1;if(e.t<t.t)return-1;if(e.t>t.t)return 1}else if(t.t)return 1;return e.id===t.id?0:e.id<t.id?-1:1}return e.r<t.r?1:-1}function i(i,o){var a,u=i;if(!u||0===u.length)return u;var s=D(o,{padding:8,radialPadding:0}),l=s.padding,f=0;u.sort(r);u=u.map((function(e){return{id:e.id,r:e.r+l,x:e.x,y:e.y,labelOffset:e.labelOffset,w:e.w,h:e.h}}));var c=[],d=0,h=u[f++];if(1===u.length)p();else if(2===u.length)m();else if(3===u.length)b();else if(4===u.length)y();else if(u.length>4){var v=u[0].r;u[2].r/v>.5&&u.length>10?b():u[1].r/v>.5&&u.length>10?m():p();a=Math.abs(u[0].y-u[0].r)+s.radialPadding;h=u[f++];for(;h;)w();A();g()}function p(){u[0].x=0;u[0].y=-u[0].labelOffset}function g(){var e=u[0],t=u[0];u.forEach((function(n){n.y<e.y?e=n:n.y>e.y&&(t=n)}));var n=(Math.abs(e.y-e.r)-(Math.sqrt(t.x*t.x+t.y*t.y)+t.r))/4;u.forEach((function(e){e.y+=n}))}function m(){var e=h,t=u[f++];e.x=0;e.y=-t.r-e.labelOffset;t.x=0;t.y=e.r-t.labelOffset}function y(){var e=h,n=u[f++],r=u[f++],i=u[f++];if(n.r===r.r&&r.r===i.r){n=u[2];r=u[1]}var o=e.r+r.r,a=e.r,s=Math.sqrt(o*o-a*a),l=e.r-n.r,c=t*s;e.x=-n.r;e.y=-e.labelOffset-c;n.x=e.r;n.y=-n.labelOffset+c;r.x=l+c;r.y=-s-r.labelOffset;i.x=l-c;i.y=s-i.labelOffset}function b(){var e=h,r=u[f++],i=u[f++],o=(2*e.r+l)/Math.sqrt(3),a=(e.r-r.r)/2,s=1.25*Math.PI;e.x=o*t;e.y=-o*n+a;r.x=o*n;r.y=-o*t-r.labelOffset+a;i.x=o*Math.sin(s);i.y=-o*Math.cos(s)-i.labelOffset+a}function x(e){return 2*e.r+l}function w(){d+=h.r+a+s.radialPadding;a=h.r;var e=ih*d,t=e-x(h),n={items:[],radius:d,spaceLeft:0,circumference:e};c.push(n);for(;h&&t>0;){n.items.push(h);(h=u[f++])&&(t-=x(h))}h&&(t+=x(h));n.spaceLeft=t;if(h&&u.length-f<5){for(var r=0;h;){r+=x(h);n.items.push(h);h=u[f++]}n.radius=(e-t+r)/ih;n.circumference=ih*n.radius;n.spaceLeft=0}}function A(){c.forEach((function(t){var n=ih/(t.circumference-t.spaceLeft),r=0,i=n*t.items[0].r;4===t.items.length&&(i-=e);t.items.forEach((function(e){var o=n*e.r,a=r+o;e.x=t.radius*Math.cos(a-oh-i);e.y=t.radius*Math.sin(a-oh-i)-e.labelOffset;r+=n*x(e)}))}))}return u}return{compareCircles:r,concentricLayout:i}}var uh=function(){};function sh(e,t,r,i){
n(e,(function(e){e.x-=r;e.y-=i}));return{x1:t.x1-r,y1:t.y1-i,x2:t.x2-r,y2:t.y2-i}}function lh(e,t,n){return sh(e,n,(n.x1+n.x2)/2-(t.x1+t.x2)/2,(n.y1+n.y2)/2-(t.y1+t.y2)/2)}function fh(e,t,n,r,i,o,a,u,s){var l=dd(n);o&&(l=lh(n,i,l));x(l.x1)||(l=null);var f={vertices:n,updatedEdges:r,extents:l},c=function(){e.fire("progress",{task:"layout",progress:1});t.trigger("progress","layout",1);u(f,a)};s?c():p(c);return f}function ch(e,t,n,r,i){void 0===i&&(i=uh);return function(o,a,u){return fh(e,t,o,a,r,u,n,i,!0)}}function dh(e,t,n,r,i){void 0===i&&(i=uh);return function(o,a,u){return fh(e,t,o,a,r,u,n,i)}}var hh=Uc.KnownProperties,vh=Uc.Names,ph=As.fromArray,gh={proportion:.12,min:20,max:200},mh=.5;function yh(e,t,n,r){var i,o=te(r?r.nodeIds:[]),a=e.vertexMap,u=vf.buildPropertyBagFrom(ph(e.nodeList,(function(e){return[a.getUniqueInverse(e.id),e]})),((i={})[hh.position2d]=function(e){return e},i[hh.sparseRadius]=function(e){return Math.max(n(e.id,!0).radius,mh)},i[hh.radius]=function(e){var t=n(e.id,!1).radius;return Math.max(t<mh?n(e.id,!0).radius:t,mh)},i[hh.speed]=function(e){return void 0!==o[e.id]?0:1},i));u[hh.group]=t;if(r&&r.absolute){var s=bh(e,u[hh.position2d],t,r.nodeIds);ie(u,s)}return u}function bh(e,t,n,r){for(var i,o=e.vertexMap,a=o.size,u=new Map,s=[],l=0;l<r.length;l++){var f=o.getUniqueInverse(r[l]),c=n.get(f),d=t.get(f);if(!u.has(c)){s.push(c);u.set(c,[])}u.get(c).push({x:d.x,y:d.y})}var h=function(e){return Bf.Rect.center(Bf.pointExtents(ph(e)))};return vf.buildPropertyBagFrom(ph(s,(function(e){return[e,u.get(e)]})),((i={})[hh.groupCenter]={map:h,defaultValue:null},i[hh.groupSpeed]={map:function(){return 0},defaultValue:1},i),a)}function xh(e,t){var n=new Uc.SetTimeoutRunner(e,0,100);n.initialize(t);return n.start.bind(n)}function wh(e,t){e.initialize&&e.initialize(t);return function(n){try{for(;!e.isComplete();)e.run(t)}catch(e){n(e);return}n()}}function Ah(){var e;return(e={})[Uc.Names.organic]=null,e}function Mh(e,t,n){var r=Jc(H(e.v),e.e),i=Dl((function(){return vf.connectedComponents(r.staticGraph)}));function o(t){var n=t.fixed&&Array.isArray(t.fixed)?t.fixed.filter((function(t){return void 0!==e.v[t]})):[],i=!1!==t.pinToFirstFixed&&n.length>0?{vertex:r.vertexMap.getUniqueInverse(n[0])}:void 0;return{nodeIds:n,absolute:!!t.absoluteFixed,pinTo:i}}function a(e,t,i,o,a){var u=Uc.createLayout(e,r.staticGraph,i.libgOpts);if(i.consistent&&n&&void 0!==n[e]){null===n[e]?n[e]=new Uc.AdaptiveProxy(r,u):n[e].reset(r,u);u=n[e]}var s=(a?wh:xh)(u,t),l=function(e){return s((function(t){return e(t)}))};l.state=r;l.fixConfig=o;return l}function u(e,n){var u=o(e),s=yh(r,i(),t,u),l={attenuation:ad(e.tightness)/5-1};e.libgOpts=ie({initializationOptions:{seed:e.consistent?7:void 0,adaptive:e.consistent},packing:e.packing,pinTo:u.pinTo,liveUpdate:!1,packingOptions:{padding:gh,aspectRatio:e.ratio},scale:l},e.libgOpts||{});return a(Uc.Names.organic,s,e,u,n)}function s(e,n,u){void 0===n&&(n=i());var s=o(e),l=yh(r,n,t,s);e.libgOpts=ie({packing:e.packing,pinTo:s.pinTo,packingOptions:{padding:gh,aspectRatio:e.ratio}},e.libgOpts||{});return a(Uc.Names.pack,l,e,s,u)}function l(e,n){var o={absolute:!1,nodeIds:[]},u=yh(r,i(),t);e.libgOpts={reduceOverlapsOnly:!0,initialize:3,iterations:{min:3,max:3},padding:{proportion:(10-ad(e.tightness))/100,min:.5,max:1/0}};return a(Uc.Names.diskpacking,u,e,o,n)}return{state:r,adaptiveState:n||null,organic:u,reduceOverlaps:l,pack:s}}function Ih(e,t,n,r){for(var i,o,a=2*t+24+n,u=Math.floor(Math.sqrt(e.length)),s=Math.ceil(e.length/u),l=0,f=0,c={},d={x:0,y:0},h=0;h<u;h++){for(var v=0;v<s;v++){var p=s*h+v;if(e[p]){c[e[p]]={x:l,y:f};d.x+=l;d.y+=f}l+=a}l=0;f+=a}if("absolute"===r){i=a*(s-1)/2;o=a*(u-1)/2}else{i=d.x/e.length;o=d.y/e.length}for(h=0;h<e.length;h++){c[e[h]].x-=i;c[e[h]].y-=o}return c}function Eh(e,t,n){for(var r=0,i={},o=0;o<t.length;o++)r+=e[t[o]].size;if(1===t.length)i[t[0]]={x:0,y:0};else{var a=Math.PI/4;2===t.length&&(a=Math.PI/2);4===t.length&&(a=0);t.length<4&&(r*=1.5);var u=2*Math.PI/t.length,s=n*r/4;for(o=0;o<t.length;o++){i[t[o]]={x:s*Math.cos(a),y:s*Math.sin(a)};a+=u}}return{positions:i,radius:r}}function Ch(e,t,n,r,i){if(0===n){r[e[0]]={x:0,y:0};return{radius:t,index:-1}}var o=2*t,a=(n+1)*o,u=o,s=Math.sqrt(a/(Math.PI*u))*u,l=Math.floor(2*Math.PI*s/o);l=Math.min(l,n+1);var f,c=2*Math.PI/l;switch(l){case 2:f=Math.PI/2;s*=.75;break;case 3:f=Math.PI/3;s*=.85;break;case 4:f=0;s*=.85;break;case 5:f=0;s*=.9;break;default:f=0}s*=i/2;for(var d=0;d<l;){r[e[n-d]]={x:s*Math.cos(f),y:s*Math.sin(f)};f+=c;d++}return{radius:s,index:n-l}}function kh(e,t,n){var r,i={},o=0,a=e.length-1;do{var u=Ch(e,t,a,i,n);o=Math.max(u.radius,o);a=u.index}while(a>=0);switch(e.length){case 4:r=2;break;case 3:r=2.5;break;case 2:r=3;break;case 1:r=1;break;default:r=2}return{positions:i,radius:o*r}}function Sh(e,t){for(var n=[],r=0;r<t.length;r++)e[t[r]]&&n.push(t[r]);return n}function Lh(e,t,r,i){n(e,(function(e){if(e.arranged){e.x+=t;e.y+=r}}));i(e,{},!1)}function Th(e,t,n,r,i,o){var a=t.map((function(e){return Object.keys(e.verts).filter((function(e){return void 0===n[e]}))})).filter((function(e){return e.length>0}));a.push(Object.keys(n));var u=Mh({v:e,e:[]},r),s=u.state.vertexMap,l=qc(u.state,a,(function(e){return e})),f={packingOptions:{groupOrder:a.map((function(e){return l.get(s.getUniqueInverse(e[0]))})),padding:{proportion:.12,min:20,max:200}}};u.pack({tightness:5,ratio:i,libgOpts:f},l,!0)((function(){return o(e,{},!1)}))}function Rh(e,t,r,i,o,a,u,s){var l={tidy:function(e,t,n){var r=hd(d,o.e);return Th(d,r,e,u,t.ratio,n)},average:function(e,t,n){return Lh(d,t.centre.x,t.centre.y,n)},absolute:function(e,t,n){return Lh(d,t.absolute.x,t.absolute.y,n)}},f={grid:function(e,t,n,r,i){return Ih(e,n,r,i)},circle:function(e,t,n,r){return Eh(t,e,1.25-(5-r)/50).positions},radial:function(e,t,n,r){return kh(e,n,1.25-(5-r)/50).positions}},c=D(a,{tightness:5,position:"average",x:0,y:0});r.trigger("prechange","arrange");t.fire("prechange",{type:"arrange"});var d=o.v,h=ud(c.tightness),v=l[c.position]||l.average,p=f[e]||f.grid,g={x:+c.x||0,y:+c.y||0},m=Y(i);if((m=Sh(d,m)).length){for(var y=0,b={x:0,y:0},x=0;x<m.length;x++){y+=d[m[x]].size;b.x+=d[m[x]].x;b.y+=d[m[x]].y}y/=m.length;b.x/=m.length;b.y/=m.length;var w=p(m,d,y,h,c.position),A={};n(w,(function(e,t){d[t].x=e.x;d[t].y=e.y;A[t]=d[t];A[t].arranged=!0}));var M={centre:b,absolute:g,ratio:c.ratio};v(A,M,dh(t,r,c,o.extents,s))}else s()}function Zh(e){var t={include:!1};function r(e,t,n){return{id:t,x:e.x,y:e.y,fixed:n,d:e.d,labeloff:Md(e),lc:0,size:1,w:1,h:1}}function i(e,t,n,i){if(!(n in e)){if(!(n in t))throw new Error("link has end which is not in nodes list");var o=t[n];if(o.hi)throw new Error("link has end which is hidden");e[n]=r(o,n,n in i)}}function o(e,t,o,a,u,s){for(var l={},f=[],c=0;c<a.length;c++){var d=a[c],h=d[0],v=o[h],p=v.id1,g=v.id2;i(l,t,p,u);i(l,t,g,u);for(var m=[],y=1,b=0;b<d.length;b++){v=o[h=d[b]];m.push({id:h,sign:v.id1===p?1:-1,off:v.off,a1:v.a1||!1,a2:v.a2||!1});y=Math.max(y,v.w||1)}f.push({id:h,id1:p,id2:g,arrowSize:e.currentArrowLength(y,1),links:m,numLinks:m.length});l[p].lc+=1;l[g].lc+=1}n(t,(function(e,t){l[t]||e.hi||!s&&e.parentId||(l[t]=r(e,t,e.id in u))}));return{v:l,e:f}}function a(e,t,n,r){var i=wd(t,e,n);r.size=i.legacyRadius;r.w=i.width;r.h=i.height}function u(e,t,n,r){var i=wd(t,e,n);r.size=i.radius;r.w=i.width;r.h=i.height}function s(n,r,i,o,s){for(var l=Object.keys(vh).indexOf(n)>=0,f=e.privateGetMaxLabelLength(),c="radial"!==n?{include:!0,maxLength:f}:t,d="lens"===n||l?u:a,h=0;h<i.length;h++)d(r,o[i[h]],c,s[i[h]])}return function(e,t,n,r,i,a,u,l){var f={};if(a)for(var c=0;c<a.length;c++)f[a[c]]=!0;var d=o(e,n,r,i().connections({all:!1,combos:l}),f,void 0!==l&&"toplevel"!==l),h=d.v,v=d.e,p=Object.keys(h);s(u,t,p,n,h);return{e:v,extents:dd(h),v:h,vcount:p.length}}}function Bh(e,t,r){void 0===r&&(r="size");var i,o,a,u,s=[],l=Fh(e);function f(e){if(e[u]){for(var n=e[u].vertices,s=0;s<n.length;s++){var l=n[s],f=t[l][r];o+=f;i=Math.max(i,f)}a+=n.length}}for(u=0;u<l;u++){i=0;o=0;a=0;var c=0;n(e,f);var d=o/a,h=s[u-1];h&&i<h.max+h.yOffset&&(c=(h.max+h.yOffset)/2);s[u]={max:i,average:d,sum:o,yOffset:c}}return s}function Oh(e,t,n){var r=[];if(n>0){var i=e[n];i&&i.edges&&i.edges.forEach((function(e){e.id1===t?r.push(e.id2):e.id2===t&&r.push(e.id1)}))}return r}function Gh(e,t,n){return Oh(e,t,n+1)}function Yh(e){var t={up:function(e){e.y=-e.y;e.x=e.x},down:function(e){},right:function(e){var t=e.y;e.y=e.x;e.x=t},left:function(e){var t=e.y;e.y=e.x;e.x=-t}};return t[e]||t.down}function Fh(e){var t=0;n(e,(function(e){t=Math.max(t,e.length)}));return t}function Dh(e){return od(e)&&"intra"===e.duType}function Ph(e,t){return od({id:e.id})&&(Dh(t[e.id1])||Dh(t[e.id2]))}function zh(e,t,r){var i={};function o(t,n){"level"in e[n]||(e[n].level=1/0);e[n].level=Math.min(e[n].level,t)}for(var a=0;a<r.length;a++){n(t.distances(r[a]),o);(i[e[r[a]].c]=i[e[r[a]].c]||[]).push(r[a])}var u=0;n(e,(function(e){u=Math.max(u,e.level)}));return{topByComponent:i,maxLevelNum:u}}function Vh(e,t,n){var r={},i=0;if(n){for(var o=[],a={},u=0;u<e.length;u++)for(var s=0;s<t[u].length;s++)if(!a[t[u][s]]){o.push(t[u][s]);a[t[u][s]]=!0}o.sort((function(e,t){return e-t}));i=o.length;for(u=0;u<e.length;u++){r[u]={};for(s=0;s<o.length;s++)r[u][o[s]]=s}}else for(u=0;u<e.length;u++){r[u]={};for(s=0;s<t[u].length;s++)r[u][t[u][s]]=s;i=Math.max(i,t[u].length)}return{customLevelMap:r,maxLevelNum:i}}function Xh(e){for(var t={},n=Kh(e),r=Wh(n);r;){var i=Hh(Uh(r),t);_h(e,i);Object.keys(i).forEach((function(e){t[e]=!0}));r=Wh(n=Kh(e))}return jh(e)}function Wh(e){var t={},r={},i={},o=[],a=1;function u(s){o.push(s);i[s]=!0;t[s]=a;r[s]=a;a++;for(var l=Object.keys(e[s]),f=0;f<l.length;f++){var c=l[f];if(void 0===t[c]){var d=u(c);if(d)return d;r[s]=Math.min(r[s],r[c])}else i[c]&&(r[s]=Math.min(r[s],t[c]))}if(t[s]===r[s]){var h={},v=void 0;do{v=o.pop();i[v]=!1;h[v]=!0}while(o.length>0&&s!==v);if(Object.keys(h).length>1){var p={};Object.keys(h).forEach((function(t){p[t]=p[t]||{};n(e[t],(function(e,n){h[n]&&(p[t][n]=e)}))}));return p}}}for(var s=Object.keys(e),l=0;l<s.length;l++){var f=s[l];if(!t[f]){var c=u(f);if(c)return c}}}function Uh(e){var t,n=[],r=[],i=new Map,o={},a=!1;function u(e){o[e]=!1;i.has(e)&&i.get(e).forEach((function(t){i.get(e).delete(t);o[t]&&u(t)}))}function s(l){var f=!1;o[l]=!0;for(var c=e[l],d=Object.keys(c),h=0;h<d.length;h++){if(a)return!0;var v=d[h];if(v===t){n.push($n(r,[c[v]]));f=!0}else if(!o[v]){r.push(c[v]);f=s(v)}}r.pop();if(f){n.length<100?u(l):a=!0;return!0}d.forEach((function(e){var t=i.get(e);if(!t){t=new Set;i.set(e,t)}t.add(l)}));return!1}for(var l=Object.keys(e),f=0;f<l.length;f++){i.clear();o={};s(t=l[f]);Nh(e,t);if(Object.keys(e).length<3)break;if(!Wh(e))break}return n}function Nh(e,t){n(e,(function(n,r){r===t&&delete e[r];Object.keys(n).forEach((function(n){n===t&&delete e[r][n]}))}))}function jh(e){var t={},n={};e.forEach((function(e){(t[e.tail]=t[e.tail]||{})[e.head]=qn({isIncomingEdge:!0,tight:!1},e);(t[e.head]=t[e.head]||{})[e.tail]=qn({isIncomingEdge:!1,tight:!1},e);(n[e.tail]=n[e.tail]||[]).push(e.head);n[e.head]=n[e.head]||[]}));return{directedAdjacencyList:n,incidenceList:t}}function Kh(e){var t={};e.forEach((function(e){(t[e.tail]=t[e.tail]||{})[e.head]=e;t[e.head]=t[e.head]||{}}));return t}function Hh(e,t){var n,r,i={},o={},a={},u=[];if(1===e.length){var s=e[0].filter((function(e){return!t[e.id]}));return(n={})[(s.length>0?Jh(s):e[0][0]).id]=!0,n}e.forEach((function(e){var n,r=e.filter((function(e){return!t[e.id]}));if(r.length>0){n=Jh(r);u.push(r)}else n=e[0];0!==n.netDirection||a[n.id]||(a[n.id]=!0);o[n.id]=!0}));if(Object.keys(a).length>0)return a;u.forEach((function(e){e.forEach((function(e){i[e.id]=i[e.id]?++i[e.id]:1}))}));var l=Object.keys(i);if(l.length>0){var f=l.reduce((function(e,t){return i[e]>i[t]?e:t}));if(1!==i[f])return(r={})[f]=!0,r}return o}function _h(e,t){for(var n=Object.keys(t).length,r=0;r<e.length&&n>0;r++){var i=e[r];if(t[i.id]){i.head=i.head===i.id1?i.id2:i.id1;i.tail=i.head===i.id2?i.id1:i.id2;n--}}}function Jh(e){var t=e.filter((function(e){return e.directionInferred}));return(t.length>0?t:e).reduce((function(e,t){return Math.abs(t.netDirection)<Math.abs(e.netDirection)?t:e}))}function Qh(e,t){for(var r={},i={},o=0,a=0;a<e.length;a++){i[a]=qh(e[a],r);o=Math.max(o,i[a].length)}var u={};n(t,(function(e){e.level=r[e.id]||0;0===e.level&&(u[e.c]=u[e.c]||[]).push(e.id)}));return{topByComponent:u,maxLevelNum:o}}function qh(e,t){if(0===e.edges.length)return[];var n=cv(e.edges),r=Xh(n),i=r.directedAdjacencyList,o=r.incidenceList;$h(i,t);ev(n,o,t);return rv(n,o,t)}function $h(e,t){var r=i(e),o=0,a=Object.keys(e).length,u={};function s(e){if(0!==a){var r={};n(e,(function(e,t){u[t]||e.forEach((function(e){e&&(r[e]=!0)}))}));J(e).forEach((function(e){if(!r[e]&&!u[e]){t[e]=o;u[e]=!0;a--}}));o++;s(e)}}s(r)}function ev(e,t,n){var r=Object.keys(t).length,i=tv(e,t,n),o=i.vertsInTightTree,a=i.nonTreeEdges;function u(){var e=Object.keys(o);if(e.length!==r){var i,s=1/0,l={};a.forEach((function(e){var t,r=uv(e,n);if(o[e.tail]||o[e.head])if(r<s){s=r;i=!!o[e.head];l=((t={})[e.id]=!0,t)}else r===s&&(l[e.id]=!0)}));if(s>0){var f=i?-s:s;e.forEach((function(e){n[e]+=f}))}a=a.filter((function(e){if(l[e.id]&&(o[e.head]||o[e.tail])){if((i||0===s)&&o[e.head]&&!o[e.tail]){fv(o,e);lv(t,e,!0);return!1}if((!i||0===s)&&!o[e.head]&&o[e.tail]){fv(o,e);lv(t,e,!0);return!1}}if(o[e.tail]&&o[e.head]){sv(e,n)&&lv(t,e,!0);return!1}return!0}));u()}}u()}function tv(e,t,n){var r=[],i=Object.keys(t);function o(e){return sv(e,n)}for(var a=0,u=i[a];0===H(t[u]).filter(o).length;)u=i[++a];var s=nv(t,u,n);e.forEach((function(e){s[e.id1]&&s[e.id2]||r.push(e)}));return{nonTreeEdges:r,vertsInTightTree:s}}function nv(e,t,r){var i={},o={};function a(t){i[t]=!0;n(e[t],(function(t,n){if(sv(t,r))if(i[n]){if(i[n]&&o[n]){lv(e,t,!0);fv(o,t)}}else{lv(e,t,!0);fv(o,t);a(n)}}))}a(t);return o}function rv(e,t,n){var r,i=ov(t);function o(e){n[e]-=r}for(;i;){r=1/0;for(var a=[],u=0;u<e.length;u++){var s=uv(e[u],n);if(i.tailSegmentVerts[e[u].head]&&!i.tailSegmentVerts[e[u].tail]&&s>0){a.push(e[u]);r=Math.min(s,r)}}Object.keys(i.tailSegmentVerts).forEach(o);a.forEach((function(e){sv(e,n)&&lv(t,e,!0)}));lv(t,qn({id1:i.tail,id2:i.head},i),!1);i=ov(t)}return av(n,t)}function iv(e,t,r){var i=!1,o={},a={};function u(s){a[s]=!0;o[s]=!0;n(e[s],(function(e,n){if(e.tight&&!o[n]){if(s!==t&&n===r){i=!0;return}if(n!==r){a[n]=!0;u(n)}}}))}u(t);var s=0;i||n(e,(function(e,t){n(e,(function(e,n){if(e.isIncomingEdge){a[t]&&!a[n]&&s++;!a[t]&&a[n]&&s--}}))}));return{cutValue:s,tailSegmentVerts:a}}function ov(e){for(var t=Object.keys(e),n=0;n<t.length;n++)for(var r=e[t[n]],i=t[n],o=H(r),a=J(r),u=0;u<o.length;u++)if(o[u].isIncomingEdge&&o[u].tight){var s=a[u],l=iv(e,i,s),f=l.cutValue,c=l.tailSegmentVerts;if(f<0)return{head:s,tail:i,tailSegmentVerts:c}}}function av(e,t){var n=[],r=J(t),i=1/0,o=-1/0;r.forEach((function(t){var n=e[t];i=n<i?n:i;o=n>o?n:o}));r.forEach((function(t){e[t]+=-i}));o+=-i;for(var a=0;a<=o;a++)n.push(a);return n}function uv(e,t){return Math.abs(t[e.id1]-t[e.id2])-1}function sv(e,t){return 1===Math.abs(t[e.id1]-t[e.id2])}function lv(e,t,n){e[t.id1][t.id2].tight=n;e[t.id2][t.id1].tight=n}function fv(e,t){e[t.id1]=!0;e[t.id2]=!0}function cv(e){return e.map((function(e){var t,n=0,r=0;e.links.forEach((function(e){e.a1&&(n+=e.sign);e.a2&&(n-=e.sign);e.a1||e.a2||(r-=e.sign)}));t=0!==n?n>0?e.id1:e.id2:0!==r?r>0?e.id1:e.id2:e.id1<e.id2?e.id2:e.id1;var i=0===n,o=i?r:n,a=t===e.id2?e.id1:e.id2;return qn(qn({},e),{directionInferred:i,netDirection:o,head:t,tail:a})}))}function dv(e,t,r,i,o){for(var a={},u={},s=0;s<i.length;s++)u[s]=hv(t,r,i[s],a);var l=Vh(i,u,o),f={};n(e,(function(e){e.level=l.customLevelMap[e.c][a[e.id]]||0;0===e.level&&(f[e.c]=f[e.c]||[]).push(e.id)}));return{topByComponent:f,maxLevelNum:l.maxLevelNum}}function hv(e,t,r,i){var o={},a=[],u=1/0;function s(t){if(t.d&&x(t.d[e])){var n=t.d[e];if(!o[n]){o[n]=[];a.push(n)}o[n].push(t.id);i[t.id]=n;n<u&&(u=n)}}function l(){for(var e=0;e<a.length;e++){for(var n=a[e],r=[],u=t.neighbours(o[n]),s=((a[e+1]||n+1)+n)/2,l=0;l<u.nodes.length;l++){var f=u.nodes[l];if(V(i[f])){r.push(f);i[f]=s}}if(r.length){a.splice(e+1,0,s);o[s]=r}}}n(r.verts,s);if(u===1/0)return qh(r,i);a.sort((function(e,t){return e-t}));l();return a}function vv(e,t,n,r,i,o,a,u){var s=n(),l=i,f=i?"sequential":"hierarchy";function c(){return a?dv(e,a,s,r,l):o&&o.length>0||!i?zh(e,s,o):Qh(r,e)}var d=c(),h={},v=mv(e,t,r,h,d.maxLevelNum);pv(e,t,f,v,h,u);"hierarchy"===f&&a&&gv(e,s,v,h,d.topByComponent)}function pv(e,t,n,r,i,o){void 0===o&&(o=[]);for(var a=0,u=t.length;a<u;a++){var s=void 0,l=void 0,f=t[a],c=e[N(f.id1)],d=e[N(f.id2)],h=c.level,v=d.level;if(x(h)&&x(v)){f.level=Math.max(h,v);if(h<v){i[d.id]=!0;l=c;s=d}else if(v<h){i[c.id]=!0;l=d;s=c}}var p=Math.abs(h-v);if(p>1)r.insertChain(s,l,f);else if("sequential"===n&&0===p){r.insertInternalLink(c,d,f);o.push(f)}}}function gv(e,t,r,i,o){n(e,(function(n,a){if(!i[a]&&0!==n.level){for(var u=o[n.c],s=void 0,l=1/0,f=0;f<u.length;f++){var c=t.shortestPaths(a,u[f]);if(c.distance<l){s=c;l=c.distance}}for(var d=0;d<s.one.length;d++){var h=s.one[d],v=e[h];if(v&&"level"in v&&v.level<n.level){var p=r.insertEdge(n,v,n.c);n.level-v.level>1&&r.insertChain(n,v,p);break}}}}))}function mv(e,t,n,r,i){var o=0;function a(t,i){var a=t.origId||t.id,u={id:rd+a+"-"+o++,level:t.level-1,origId:a,x:0,y:0,c:t.c,size:10,fixed:!1,lc:t.lc,duType:i,w:20,h:20,labeloff:0};e[u.id]=u;n[t.c].verts[u.id]=u;r[u.id]=!0;return u}function u(e,r,i,o){void 0===o&&(o=0);var a={id:rd+e.id+"-"+r.id,id1:e.id,id2:r.id,c:i,numLinks:o};"level"in e&&"level"in r&&(a.level=Math.max(e.level,r.level));t.push(a);n[i].edges.push(a);return a}function s(e,t,n){var r=n.c,i=n.numLinks,o=a(e,"chain"),l=n.id1===t.id;u(l?o:e,l?e:o,r,i);o.level===t.level+1?u(l?t:o,l?o:t,r,i):s(o,t,n)}return{insertEdge:u,insertChain:s,insertInternalLink:function(e,t,n){var r=n.c,o=n.numLinks;if(e.level>0){var s=a(e,"intra");u(e,s,r,o);u(s,t,r,o)}if(e.level<i-1){var l=a(e,"intra");l.level+=2;u(e,l,r,o);u(l,t,r,o)}}}}function yv(e,t,n,r,i,o,a,u,s){bv(r,i,0,a,u,s);xv(e,t,i,n,o,u)}function bv(e,t,n,r,i,o){var a=2*i+24+o;r||(e.x=n);var u=n-e.subChildrenCount*(a/2),s=e.children;if(s)for(var l=0;l<s.length;l++){var f=t[s[l]],c=f.subChildrenCount;0===c&&(c=1);var d=u+c*a;bv(f,t,(d+u)/2,!1,i,o);u=d}}function xv(e,t,n,r,i,o){for(var a=0,u=Math.PI*(2/3),s=0,l=0;l<t[e].length;l++){var f=t[e][l].vertices,c=r[l].yOffset,d=r[l].average,h=2*((o<d?d:o)+12)+c;a+=s;for(var v=0;v<f.length;v++){var p=f[v],g=n[p];g.y=a;if(!i){var m=g.children;if(m&&m.length>1){var y=wv(Av(m.map((function(e){return n[e]}))),u);h=Math.max(h,y)}}}s=h}}function wv(e,t){return e/(2*Math.tan(t/2))}function Av(e){for(var t=1/0,n=-1/0,r=0;r<e.length;r++){var i=e[r].x;t=Math.min(t,i);n=Math.max(n,i)}return n-t}function Mv(e,t,r,i,o){function a(e,t){return(e.r+t.r)/(e.a-t.a)}function u(e,t,n){var r=t>0?e+n:e+n/2;return r>0?r:e}function s(e,t,n,r){if(r&&1===e.length)return 0;for(var i=t,o=i,s=1;s<e.length;s++)o=Math.max(a(l[e[s]],l[e[s-1]]),o);return u(o,o-i,n)}var l,f=ud(o);n(t,(function(t,n){for(var o=ld(r[+n].verts),a=0,u=a,c=4*i,d=c,h=2*i+24,v=0;v<t.length;v++){var p=t[v].vertices,g=void 0;l={};for(var m=0;m<p.length;m++){var y=p[m],b=(g=e[y]).x-o.minx,x=o.maxx-o.minx+h;if((b*=2*Math.PI/x)<0||b>2*Math.PI)throw new Error("[Radial] Theta angle should be in the range [0; 2*PI]");l[y]={a:b,r:g.size}}u=a;0===v?p.length>1&&(a+=c/2):a+=c;if((a=s(p,a,f,v<1))-u>d){d=a-u+1;c=Math.max(c,d/2);0===v&&p.length<3&&(a/=2)}for(m=0;m<p.length;m++){(g=e[p[m]]).x=a*Math.cos(l[g.id].a);g.y=a*Math.sin(l[g.id].a)}}}))}function Iv(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,(function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)}));for(var o=0;o<t.length;o++)"level"in t[o]&&i(t[o].c,t[o].level,"edges",t[o]);return r}function Ev(e){var t=0,r=0;n(e,(function(e){if("level"in e&&!od(e)){t+=e.size;r+=1}}));return t/r}function Cv(e,t,r){var i=Yh(r);n(t,(function(t){for(var n=0;n<t.length;n++)for(var r=t[n].vertices,o=0;o<r.length;o++)i(e[r[o]])}))}function kv(e,t,r,i,o,a){var u=a.pack(r),s=D(r,{top:[],orientation:"down",stable:!0,flatten:!1}),l=e.v,f=e.e,c=hd(l,f),d=s.level,h=i?1:ud(s.tightness),v=d?[]:F(s.top,l),p=!i&&s.flatten;vv(l,f,t,c,!1,v,d);var g=Iv(l,f),m=Ev(l),y=Bh(g,l);function b(){n(g,(function(e){for(var t=e.length-1;t>=0;t--)for(var n=e[t].vertices,r=[],i=0;i<n.length;i++){var o=n[i],a=Gh(e,o,t);l[o].children=[];l[o].subChildrenCount=0;if(0!==a.length){for(var u=[],s=0;s<a.length;s++)r.indexOf(a[s])<0&&u.push(a[s]);if(u.length>0){l[o].children=u;l[o].subChildrenCount=x(u);for(s=0;s<u.length;s++){r.push(u[s]);l[u[s]].parent=o}}}}}))}function x(e){for(var t=0,n=0;n<e.length;n++){var r=l[e[n]].subChildrenCount;t+=0===r?1:r}return t}b();n(g,(function(e,t){var n={children:e[0].vertices,subChildrenCount:x(e[0].vertices)};yv(t,g,y,n,l,p,!0,m,h)}));i?Mv(l,g,c,m,s.tightness):Cv(l,g,s.orientation);n(l,(function(e){od(e)&&delete l[e.id]}));if(s.tidy)u((function(){return o(l,{},!0)}));else{n(g,(function(e,t){for(var n=c[t].extents,r=dd(c[t].verts),i=(n.x1+n.x2-(r.x1+r.x2))/2,o=(n.y1+n.y2-(r.y1+r.y2))/2,a=0;a<e.length;a++)for(var u=e[a].vertices,s=0;s<u.length;s++){var f=u[s],d=l[f];if(d){d.x+=i;d.y+=o}}}));o(l,{},!0)}}function Sv(){var e,t,r,i,o,a,u,s,l,f,c,d,h,v,p,g,m,y=3,b=.5,x=Ou,w=[],A=[];function M(e,t){l+=f;e.fire("progress",{task:"layout",progress:l});t.trigger("progress","layout",l)}function I(e,t){function n(e,t,n,r,i){return{isLeaf:!0,children:[],points:[],x1:e,y1:t,x2:n,y2:r,depth:i,m:0}}function r(e){return e.depth>=t}function i(e,t){var r,i,o,a,u=.5*(e.x1+e.x2),s=.5*(e.y1+e.y2);if(0===t||1===t){o=e.y1;a=s}else{o=s;a=e.y2}if(0===t||2===t){r=e.x1;i=u}else{r=u;i=e.x2}e.isLeaf=!1;e.children[t]=n(r,o,i,a,e.depth+1)}function o(e,t){t(e);for(var n=0;n<4;n++)e.children[n]&&o(e.children[n],t)}function a(e,t){if(t.x<e.x1||t.y<e.y1||t.x>e.x2||t.y>e.y2)throw Error("[Layout] Error: the point is out of range.");if(r(e)){e.points.push(t);e.m+=t.m}else{e.points.push(t);var n=.5*(e.x1+e.x2),o=.5*(e.y1+e.y2),u=0;t.x>=n&&t.y<o&&(u=1);t.x<n&&t.y>=o&&(u=2);t.x>=n&&t.y>=o&&(u=3);e.children[u]||i(e,u);a(e.children[u],t)}}for(var u=e.length,s=new Float64Array(u),l=new Float64Array(u),f=0;f<u;f++){s[f]=e[f].x;l[f]=e[f].y}var c=Math.min.apply(0,s),d=Math.max.apply(0,s),h=Math.min.apply(0,l),v=Math.max.apply(0,l),p=d-c,g=v-h;p>g?v=h+p:d=c+g;var m=qn(qn({},n(c,h,d,v,0)),{addPoint:function(e){a(m,e)},visit:function(e){o(m,e)}});for(f=0;f<e.length;f++)m.addPoint(e[f]);return m}function E(){var e=[];n(c,(function(t,n){var i=r[n];e.push({id:n,x:p[i],y:g[i],m:m[i]})}));var t=I(e,y);w.length=0;A.length=0;function i(e){function n(t){if(t.isLeaf){var n=e.x-.5*(t.x1+t.x2),o=e.y-.5*(t.y1+t.y2),a=se(n,o);if((t.x2-t.x1)/a>b){for(var u=t.points,s=u.length,l=0;l<s;l++)if(e.id!==u[l].id){a=se(n=e.x-u[l].x,o=e.y-u[l].y);var f=u[l].m;r+=n/a*f;i+=o/a*f}}else{r+=n/a*t.m;i+=o/a*t.m}}}var r=0,i=0;t.visit(n);w.push(r);A.push(i)}for(var o=0;o<e.length;o++)i(e[o]);Z(w,A)}function C(e,t,n){for(var r=t,i=T(e,L(R(t,n),-1)),a=new Float64Array(i.buffer.slice(0)),u=S(i,i),s=0;s<20&&u/o>.01;s++){var l=R(a,n),f=u/S(l,a);r=T(r,L(a,f));var c=T(i,L(l,-f));i=c;var d=S(c,c),h=d/u;u=d;a=T(c,L(a,h))}return r}function k(){v=new Array(o);h=new Array(o);for(var e=0;e<o;e++){v[e]=new Int32Array(o);h[e]={};h[e][e]=!0;for(var t=0;t<o;t++)v[e][t]=0}for(e=0;e<i.length;e++){var n=i[e],a=r[n.id1],u=r[n.id2];h[a][u]=!0;h[u][a]=!0;v[a][u]-=1;v[u][a]-=1;v[a][a]+=1;v[u][u]+=1}}function S(e,t){for(var n=0,r=0;r<e.length;r++)n+=e[r]*t[r];return n}function L(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]*t;return n}function T(e,t){for(var n=new Float64Array(e.length),r=0;r<e.length;r++)n[r]=e[r]+t[r];return n}function R(e,t){for(var r=new Float64Array(o),i=0,a=function(t){i=0;n(h[t],(function(n,r){i+=v[t][r]*e[r]}));r[t]=i},u=0;u<o;u++)a(u);r=L(r,t);i=0;for(u=0;u<o;u++)i+=e[u];var s=new Float64Array(o);for(u=0;u<o;u++)s[u]=o*e[u]-i;return T(r,s)}function Z(e,t){for(var n=0,r=0,i=0;i<e.length;i++){n+=e[i];r+=t[i]}n/=e.length;r/=e.length;for(i=0;i<e.length;i++){e[i]-=n;t[i]-=r}}function B(e,t,n,r){for(var i=0;i<n;i++){M(e,t);E();p=C(w,p,r);g=C(A,g,r);Z(p,g)}}function O(n,l){d=Object.keys(c);r={};p=new Float64Array(o);g=new Float64Array(o);m=new Float64Array(o);var h,v=0,y=0,b=ad(n.tightness);b=2-2*b/10+1;for(var w=0;w<d.length;w++){var A=d[w];v+=h=Math.max(1,c[A].size);y+=Math.max(1,c[A].w)*Math.max(1,c[A].h);r[A]=w;m[w]=h}var M=y/o,I=1+.015*(Math.sqrt(M)-2*x);s=42*Math.sqrt(o)*b*I;if(i.length/o<1){var E=.65,C=i.length/o;s*=E+C*(1-E)}var k=v/o;for(w=0;w<d.length;w++){g[w]=s*l.next();p[w]=s*l.next();m[w]/=k}e=10*o;t=o/40;f=1/((a=8)+(u=14-a)+2)}function G(e){function t(e){var t=p[r[e]],n=g[r[e]];c[e].x=s*t;c[e].y=s*n}e.forEach(t)}function Y(n,r,s,f,h,v,p,g){l=0;c=s.v;i=s.e;if((o=s.vcount)>1){O(h,v);k();B(n,r,a,e);B(n,r,u,t);G(d);M(n,r);Mh({v:s.v,e:[]},f).reduceOverlaps(h,g)((function(){return p(c,{},!1)}))}else p(c,{},!0)}return{lens:Y}}function Lv(e,t,r,i,o){var a=Yv(e,t,r);n(r,(function(e){if(void 0!==e.orderPos){e.children.sort((function(e,t){return r[e].orderPos-r[t].orderPos}));e.parents.sort((function(e,t){return r[e].orderPos-r[t].orderPos}))}}));var u=Gv(a,r,"ul",i,o),s=Gv(a,r,"ur",i,o),l=Gv(a,r,"dl",i,o),f=Gv(a,r,"dr",i,o),c=[u.extents,s.extents,l.extents,f.extents].sort((function(e,t){return e.max-e.min-(t.max-t.min)}))[0];function d(e,t){return e-t}for(var h=0;h<a.length;h++)for(var v=a[h].vertices,p=function(e){var t=v[e],n=r[t],o=[u.xs[t]-u.extents.min+c.min,s.xs[t]-s.extents.max+c.max,l.xs[t]-l.extents.min+c.min,f.xs[t]-f.extents.max+c.max].sort(d);n.x=(o[1]+o[2])/2;if(n.group){var a=n.group,h=n.x-n[i]/2;a.ids.forEach((function(e,t){r[e].x=h+a.positions[t]}))}},g=0;g<v.length;g++)p(g)}function Tv(e,t,n){var r=t;if(e.root!==e.id)return r;var i=function(e){return n[n[e.root].sink]},o=i(e).shift;if(void 0!==o)return o<1/0?r+o:r;var a=i(e).shiftData;o=1/0;for(var u=0;u<a.length;u++){var s=a[u].dist;n[a[u].vert].shift<1/0&&(s+=n[a[u].vert].shift);o=Math.min(o,s)}i(e).shift=o;return o<1/0?r+o:r}function Rv(e,t,n,r){if(e.group){var i=e.group.positions.slice(t)[0];return{before:r?i:e[n]-i,after:r?e[n]-i:i}}return"w"===n?{before:e.w/2,after:e.w/2}:r?{before:e.h/2-e.labeloff,after:e.h/2+e.labeloff}:{before:e.h/2+e.labeloff,after:e.h/2-e.labeloff}}function Zv(e,t,n,r,i,o,a){var u=e[t],s=e[t].filter((function(e){return od({id:e})}));s.length>0&&(u=s);for(var l=0,f=[],c=0;c<u.length;c++){var d=o[u[c]];f.push(l);l+=d.group?d.group.ids.length:1}if(l>0){for(var h=[Math.floor((l+1)/2)-1,Math.ceil((l+1)/2)-1],v=Math.floor((f.length+1)/2)-1;f[v+1]<=h[0];)v++;for(;f[v-1]>=h[0];)v--;var p=[{id:u[v],groupIdx:h[0]-f[v]}];f[v+1]<=h[1]&&v++;p.push({id:u[v],groupIdx:h[1]-f[v]});for(var g=0;g<2;g++){var m=i?p[g]:p[1-g],y=r[m.id],b=y.pos;if(n<b){y.align=e.id;y.sizeSplit=a(m.id,m.groupIdx);e.root=y.root;e.align=e.root;return b}}}return n}function Bv(e,t,n,r,i){for(var o=[],a={},u=r?0:e.length-1,s=r?1:-1,l=function(t){return r?t<e.length:t>=0},f=function(e){return n?0:e.length-1},c=n?1:-1,d=function(e,t){return n?e<t.length:e>=0},h=function(e,r){return Rv(t[e],r,i,n)},v=u;l(v);v+=s)for(var p=e[v].vertices,g=void 0,m=-1,y=0,b=f(p);d(b,p);b+=c){var x=p[b],w=t[x];o.push(x);a[x]={id:p[b],pos:y++,predecessor:g,align:x,root:x,sink:x,shiftData:[],sizeSplit:h(x,n?0:-1),parents:w.parents.filter((function(e){return!Dh(t[e])})),children:w.children.filter((function(e){return!Dh(t[e])}))};var A=r?"parents":"children";m=Zv(a[x],A,m,a,n,t,h);g=x}return{order:o,details:a}}function Ov(e,t,n,r){var i,o,a,u;if(void 0===n[e.id]){i=e;n[e.id]=0;do{if(void 0!==i.predecessor){Ov(a=t[(o=t[i.predecessor]).root],t,n,r);e.sink===e.id&&(e.sink=a.sink);u=i.sizeSplit.before+o.sizeSplit.after+r;e.sink!==a.sink?(t[a.sink].shiftData=t[a.sink].shiftData||[]).push({vert:e.sink,dist:n[e.id]-n[a.id]-u}):n[e.id]=Math.max(n[e.id],n[a.id]+u)}i=t[i.align]}while(i.id!==e.id)}}function Gv(e,t,r,i,o){for(var a="l"===r[1],u="u"===r[0],s={},l=1/0,f=-1/0,c=Bv(e,t,a,u,i),d=0;d<c.order.length;d++){(v=c.details[c.order[d]]).root===v.id&&Ov(v,c.details,s,o)}for(d=0;d<c.order.length;d++){var h=c.order[d],v=c.details[h];s[h]=Tv(v,s[v.root],c.details)}for(d=0;d<c.order.length;d++){h=c.order[d],v=c.details[h];l=Math.min(l,s[h]-v.sizeSplit.before);f=Math.max(f,s[h]+v.sizeSplit.after);void 0!==t[h].group&&(s[h]+=(v.sizeSplit.after-v.sizeSplit.before)/2)}if(!a){n(s,(function(e,t){s[t]*=-1}));return{xs:s,extents:{max:-l,min:-f}}}return{xs:s,extents:{max:f,min:l}}}function Yv(e,t,n){var r=[],i=[];e.forEach((function(e){for(var o=t[e],a=0;a<o.length;a++){r[a]||(r[a]={vertices:[],edges:[]});r[a].vertices=r[a].vertices.concat(o[a].vertices.filter((function(e){return!Dh(n[e])})));r[a].edges=r[a].edges.concat(o[a].edges.filter((function(e){return!Ph(e,n)})));i[a]=r[a].vertices.length}}));return r}function Fv(e,t,r,i,o,a,u){var s="equal"===u?Dv:Pv,l=0;e.forEach((function(e){s(t[e],r,o,a);var u=i[e].verts,f=dd(u);l-=f.x1;n(u,(function(e){e.x+=l}));l+=f.x2+a}))}function Dv(e,t,n,r){for(var i=function(i){var o=0,a=e[i].vertices;Qv(a,t,(function(e){if(!od(e)){var t=e[n]/2,i="h"===n?e.labeloff:0;o+=t-i;e.x=o;o+=t+i+r}}));var u=(o-r)/2;Qv(a,t,(function(e){e.x-=u}))},o=0;o<e.length;o++)i(o)}function Pv(e,t,n,r){for(var i=[],o=[],a=0,u=function(u){var s=e[u].vertices;i[u]=0;o[u]=0;Qv(s,t,(function(e){if(!od(e)){i[u]+=e[n];o[u]++}}));var l=i[u]+r*(o[u]-1);a=Math.max(a,l)},s=0;s<e.length;s++)u(s);var l=function(r){var u=e[r].vertices;if(o[r]>1){var s=(a-i[r])/(o[r]-1),l=0;Qv(u,t,(function(e){if(!od(e)){var t=e[n]/2,r="h"===n?e.labeloff:0;l+=t-r;e.x=l;l+=t+r+s}}))}else for(var f=0;f<u.length;f++){var c=t[u[f]];od(c)||(c.x=a/2)}};for(s=0;s<e.length;s++)l(s)}function zv(e,t,r,i,o,a){var u,s=Vv(e,t,r,i,o,a),l=function(e){e.y=u};n(e,(function(e){u=0;for(var n=0;n<e.length;n++){Qv(e[n].vertices,t,l);u+=s}}));return s}function Vv(e,t,n,r,i,o){
for(var a=0,u=Bh(e,t,r),s=[],l=0;l<n.length;l++){var f=n[l].level,c=n[l].arrowSize;s[f]=Math.max(s[f]||0,2*c)}for(var d=0;d<u.length;d++){var h=u[d].max/2,v=0;u[d+1]&&(v=u[d+1].max/2);var p=s[d]||0;a=Math.max(a,h+v+i+Math.max(i,p))}return a*o}function Xv(e,t,n,r,i,o,a,u,s,l){"auto"===a?Lv(e,t,n,r,i):Fv(e,t,n,o,r,i,a);return zv(t,n,u,s,i,l)}function Wv(e,t){var r={};function i(e,t,n,i){r[e]=r[e]||[];r[e][t]=r[e][t]||{vertices:[],edges:[]};for(var o=0;o<t;o++)r[e][o]=r[e][o]||{vertices:[],edges:[]};r[e][t][n]=r[e][t][n]||[];r[e][t][n].push(i)}n(e,(function(e,t){"level"in e&&i(e.c,e.level,"vertices",t)}));for(var o=0;o<t.length;o++){var a=t[o];if("level"in a)if(e[a.id2].level-e[a.id1].level==1)i(a.c,a.level,"edges",a);else if(e[a.id1].level-e[a.id2].level==1){var u={id:a.id,id1:a.id2,id2:a.id1,numLinks:a.numLinks,level:a.level};i(a.c,a.level,"edges",u)}}return r}function Uv(e,t){for(var n=0;n<e.length;n++){for(var r=e[n].vertices,i=0;i<r.length;i++){var o=r[i],a=t[o];a.childEdges=[];a.parentEdges=[];a.children=[];a.parents=[];a.barycenter=1/0;a.orderPos=i}e[n].edges.forEach((function(e){t[e.id1].childEdges.push(e);t[e.id1].children.push(e.id2);t[e.id2].parentEdges.push(e);t[e.id2].parents.push(e.id1)}))}}function Nv(e,t,n){var r=[],i=0,o=0,a=0,u=0;e.forEach((function(e){var s=t[e];r.push(i+s.w/2);i+=s.w+n;o=Math.max(o,s.h-2*s.labeloff);a=Math.max(a,s.h+2*s.labeloff);u+=s.lc||0}));return{w:i-=n,h:o+a,labeloff:(a-o)/2,lc:u,positions:r}}function jv(e,t,n){var r=[],i=0,o=0,a=0;e.forEach((function(e){var u=t[e];r.push(o+(u.h/2-u.labeloff));o+=u.h+n;i=Math.max(i,u.w);a+=u.lc||0}));return{w:i,h:o-=n,labeloff:0,lc:a,positions:r}}function Kv(e,t,n,r,i){var o=("w"===r?Nv:jv)(t,n,i);return{id:e,w:o.w,h:o.h,x:n[t[0]].x,y:n[t[0]].y,fixed:!1,labeloff:o.labeloff,lc:o.lc,level:n[t[0]].level,group:{ids:t,positions:o.positions}}}function Hv(e,t,n,r){for(var i=e.sort((function(e,t){return e[n]<t[n]?-1:e[n]>t[n]?1:0})),o=0;o<i.length;o++){var a=i[o][t];r[a]=r[a]||{str:"",list:[]};r[a].str=r[a].str+" _"+i[o][n];r[a].list.push(i[o][n])}}function _v(e,t,n,r,i){var o={},a=e.filter((function(e){var a;if(-1===r.indexOf(e[t]))return!0;if(o[e[n]]){o[e[n]].numLinks+=e.numLinks||0;o[e[n]].arrowSize=Math.max(o[e[n]].arrowSize,e.arrowSize||0);(a=o[e[n]].links).push.apply(a,e.links||[])}else{var u="id1"===n?{id1:e[n],id2:i}:{id1:i,id2:e[n]};u.id=e.id;u.c=e.c;u.level=e.level;u.numLinks=e.numLinks||0;u.links=e.links||[];o[e[n]]=u}return!1}));a.push.apply(a,H(o));return a}function Jv(e,t,r,i){var o,a=0,u=0;function s(n){var s=n.filter((function(e){return!od({id:e})}));if(s.length>1){for(var l=o[s[0]].list,f=1;f<s.length;f++){if(o[s[f]].list.length!==l.length)return;if(!o[s[f]].list.every((function(e,t){return e===l[t]})))return}var c="_group"+a+++"c"+t[s[0]].c;t[c]=Kv(c,s,t,r,i);e[u].vertices=e[u].vertices.filter((function(e){return-1===s.indexOf(e)}));e[u].vertices.push(c);u>0&&(e[u].edges=_v(e[u].edges,"id2","id1",s,c));u<e.length-1&&(e[u+1].edges=_v(e[u+1].edges,"id1","id2",s,c))}}for(var l=function(){o={};u>0&&Hv(e[u].edges,"id2","id1",o);u<e.length-1&&Hv(e[u+1].edges,"id1","id2",o);var t={};n(o,(function(e,n){(t[e.str]=t[e.str]||[]).push(n)}));n(t,s)};u<e.length;u++)l()}function Qv(e,t,n){for(var r=0;r<e.length;r++){var i=t[e[r]];i.group?i.group.ids.forEach((function(e){n(t[e])})):n(i)}}function qv(e,t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(r.barycenter===1/0)break;r.orderPos=n}}function $v(e,t,n,r){for(var i=!0,o=-1,a={},u=0;u<e.length;u++){var s=e[u];a[s]=u;if(!n&&t[s].barycenter===1/0){i=!1;break}for(var l=0,f=0,c=t[s][r],d=0;d<c.length;d++)if(t[c[d]].barycenter===1/0)i=!1;else{f++;var h=t[c[d]].orderPos;-1!==h&&(l+=h)}var v=!0;f>0?t[s].barycenter=l/f:t[s].barycenter===1/0?i=!1:0===u?t[s].barycenter=0:v=!1;if(v){if(o+1<u)for(var p=t[e[o]].barycenter,g=Math.min(p,t[s].barycenter),m=Math.abs(p-t[s].barycenter),y=u-o,b=1;b<y;b++)t[e[o+b]].barycenter=g+m*(b/y);o=u}}e.sort((function(e,n){return t[e].barycenter===t[n].barycenter?a[e]-a[n]:t[e].barycenter-t[n].barycenter}));qv(e,t);return i}function ep(e,t,n,r){e.sort((function(e,i){var o=t[e[n]].orderPos,a=t[e[r]].orderPos,u=t[i[n]].orderPos,s=t[i[r]].orderPos;return o<u||o===u&&a<s?-1:1}))}function tp(e,t,n){if(t<1||e.length<=t)return 0;var r=e[t].edges,i=e[t-1].vertices,o=e[t].vertices;return i.length>o.length?np(r,n,"id1","id2"):np(r,n,"id2","id1")}function np(e,t,n,r){if(e.length<2)return 0;ep(e,t,n,r);var i=e.map((function(e){return t[e[r]].orderPos}));i.sort((function(e,t){return e-t}));var o={};i.forEach((function(e,t){o[e]=t}));for(var a=e.map((function(e){var n=o[t[e[r]].orderPos];return{index:n,multiplier:void 0===n?0:e.numLinks}})),u=1;u<a.length;)u*=2;var s=new Int32Array(2*u-1);u-=1;for(var l=0,f=0;f<a.length;f++){var c=a[f].index+u;s[c]+=a[f].multiplier;for(;c>0;){c%2&&(l+=s[c+1]*a[f].multiplier);s[c=Math.floor((c-1)/2)]+=a[f].multiplier}}return l}function rp(e,t,n){var r=e.concat(t),i={};r.forEach((function(e){i[e[n]]=!0}));var o=Object.keys(i),a=o.length;return{verts:o,edges:r,common:e.length===a&&t.length===a}}function ip(e,t){return rp(e.childEdges||[],t.childEdges||[],"id2")}function op(e,t){return rp(e.parentEdges||[],t.parentEdges||[],"id1")}function ap(e,t,n){for(var r=1,i=e[t].vertices,o=0,a=0,u=0;u<i.length-1;u+=r){var s=i[u],l=i[u+1],f=!1,c=t>0?op(n[s],n[l]):{common:!0,edges:[]},d=t<e.length-1?ip(n[s],n[l]):{common:!0,edges:[]},h=c.common?[]:c.edges,v=d.common?[]:d.edges,p=np(h,n,"id1","id2")+np(v,n,"id2","id1"),g=n[l].orderPos;n[l].orderPos=n[s].orderPos;n[s].orderPos=g;var m=np(h,n,"id1","id2")+np(v,n,"id2","id1");if(p<=m){n[s].orderPos=n[l].orderPos;n[l].orderPos=g}else{f=!0;o+=p-m;i[u]=l;i[u+1]=s;if(1===r){a=Math.max(a,u);r=-1}if(0===u){u=a;r=1}}if(!f&&-1===r){u=a;r=1}}return o}function up(e,t){var n;do{n=0;for(var r=0;r<e.length;r++)n+=ap(e,r,t)}while(n>0)}function sp(e,t,n){for(var r,i,o=e,u=!1,s=!1,l=!0,f=0,c=o.length,d=0;d<o.length;d++)if(o[d].vertices.length>0){c=d;break}if(c===o.length-1)return o;o[c].vertices.sort((function(e,n){return t[n].childEdges.length-t[e].childEdges.length}));t[o[c].vertices[0]].barycenter=0;t[o[c].vertices[0]].orderPos=0;var h=1/0;do{r=h;if(s){h=0;i=a(o)}else h=1/0;for(d=c;d<o.length-1;d++){u=$v(o[d+1].vertices,t,!0,"parents");if(l){$v(o[d].vertices,t,!1,"children");u=$v(o[d+1].vertices,t,!1,"parents")}}s=u;for(d=o.length-1;d>c;d--){u=$v(o[d-1].vertices,t,d<f+2,"children");if(l){$v(o[d].vertices,t,!1,"parents");u=$v(o[d-1].vertices,t,!1,"children")}else h+=tp(o,d,t);u||(s=!1)}l=!s}while(f++<100&&(h===1/0||h<r));i&&(o=i).forEach((function(e){qv(e.vertices,t)}));h>0&&n<1e4&&up(o,t);return o}function lp(e,t,n){var r=[],i={},o=[];if(n.length>0){var a={};n.forEach((function(n){var o=t[n].c;if(!a[o]){r.push(o);a[o]=!0;i=re(i,e[o].verts)}}));if(r.length<e.length){o.push({verts:i,edges:[]});e.forEach((function(e){if(!a[e.c]){o.push(e);a[e.c]=!0}}))}}else r=e.map((function(e){return e.c}));return{orderedComponents:r,packingComponents:o}}function fp(e,t,n,r,i,o,a){void 0===r&&(r="down");for(var u={},s=0;s<e.length;s++){var l=e[s];l.links.sort((function(e,t){return(P(e.off)?e.off*e.sign:1/0)-(P(t.off)?t.off*t.sign:1/0)}));var f=0,c=0,d=0,h=!0,v=t[l.c][l.level].vertices,p=n[l.id1].orderPos,g=n[l.id2].orderPos,m=p<g?[p,g]:[g,p],y=p<g?1:-1;r.match(/right|up/)&&(y*=-1);for(var b=m[0]+1;b<m[1];b++){var x=n[v[b]];od(x)||(h=!1);for(var w=0;w<x.parentEdges.length;w++)f+=x.parentEdges[w].numLinks;for(w=0;w<x.childEdges.length;w++)c+=x.childEdges[w].numLinks;var A=(x[i]||x.size)/2;d=Math.max(d,A)}if(!h){if(c===f){f=n[v[m[0]]].parentEdges.length+n[v[m[1]]].parentEdges.length;c=n[v[m[0]]].childEdges.length+n[v[m[1]]].childEdges.length}var M=c<f?-y:y,I=d+20,E=40,C=a/2;I+=Math.abs(n[l.id1].x-n[l.id2].x)/o;(I=Math.min(I,C))+(l.links.length-1)*E>C&&(E=Math.max(10,(C-I)/(l.links.length-1)));for(b=0;b<l.links.length;b++){var k=l.links[b],S=I+b*E;u[k.id]={off:M*k.sign*S}}}}return u}function cp(e,t,r){var i=Yh(r);n(t,(function(t){for(var n=0;n<t.length;n++)Qv(t[n].vertices,e,i)}))}function dp(e,t){return null!==e&&"boolean"!=typeof e&&""!==e&&x(+e)&&+e>=0?+e:t}function hp(e,t,r,i,o){var a={top:[],orientation:"down",spacing:"auto",stretch:1},u=D(r,a),s=e.v,l=e.e,f=u.level,c=f?[]:F(u.top,s),d=50+ud(u.tightness),h=u.orientation.match(/right|left/)?"h":"w",v=u.orientation.match(/right|left/)?"w":"h",p=dp(r.stretch,a.stretch),g=hd(s,l),m=[];vv(s,l,t,g,!0,c,f,m);var y=Wv(s,l);n(y,(function(e,t){Jv(e,s,h,d);Uv(e,s);y[t]=sp(e,s,l.length)}));var b=lp(g,s,c),x=b.orderedComponents,w=b.packingComponents,A=qc(o.state,w,(function(e){return Object.keys(e.verts)})),M=o.pack(u,A),I=Xv(x,y,s,h,d,g,u.spacing,l,v,p),E=fp(m,y,s,u.orientation,v,d,I);u.orientation.match(/up|right|left/)&&cp(s,y,u.orientation);n(s,(function(e){e.group&&delete s[e.id]}));var C=function(e,t,n){void 0===n&&(n=!0);return i(s,E,n)};if(u.tidy&&!f&&w.length>0)M(C);else{for(var k=function(e){var t=w[e],r=dd(t.verts),i=(r.x1+r.x2)/2,o=(r.y1+r.y2)/2;n(t.verts,(function(e){e.x-=i;e.y-=o}))},S=1;S<w.length;S++)k(S);C()}}var vp=Math.pow(10,-3.8),pp=1.35,gp=Math.pow(Ou,pp);function mp(e,t,n,r){return{leaf:!0,nodes:{},point:null,x1:e,y1:t,x2:n,y2:r}}function yp(e,t){var n=e.x1,r=e.y1,i=e.x2,o=e.y2,a=.5*(n+i),u=.5*(r+o),s=t.x>=a,l=t.y>=u,f=(l?2:0)+(s?1:0);e.leaf=!1;s?n=a:i=a;l?r=u:o=u;e.nodes[f]||(e.nodes[f]=mp(n,r,i,o));bp(e.nodes[f],t)}function bp(e,t){if(e.leaf){var n=e.point;if(n){if(Math.abs(n.x-t.x)+Math.abs(n.y-t.y)<.01){yp(e,t);return}e.point=null;yp(e,n);yp(e,t);return}e.point=t}else yp(e,t)}function xp(e,t){if(!e(t))for(var n=t.nodes,r=0;r<4;r++)n[r]&&xp(e,n[r])}function wp(e){var t=0,n=0;e.charge=0;e.size=0;if(!e.leaf)for(var r=e.nodes,i=0;i<4;i++){var o=r[i];if(o){wp(o);e.charge+=o.charge;e.size+=o.size;t+=o.charge*o.cx;n+=o.charge*o.cy}}if(e.point){var a=Ap(e.point);e.pointCharge=a;e.charge+=a;e.size+=e.point.size;t+=a*e.point.x;n+=a*e.point.y}e.cx=e.charge?t/e.charge:0;e.cy=e.charge?n/e.charge:0}function Ap(e){return Ou*Math.pow(e.size,pp)/gp*(1+(e.lc?e.lc:1)/3)}function Mp(e,t){var r=ld(e),i=r.minx,o=r.miny,a=r.maxx,u=r.maxy,s=a-i,l=u-o;s>l?u=o+s:a=i+l;var f,c=.5;function d(e){if(e.point!==f){var t=e.cx-f.x,n=e.cy-f.y,r=1/se(t,n);if((e.x2-e.x1)*r<c){v(f,e.charge,r,t,n);return!0}e.point&&v(f,e.pointCharge,r,t,n)}return!e.charge}var h=1e5;function v(e,t,n,r,i){p(e,t,r,i,Math.min(n,h))}function p(e,n,r,i,o){if(!(o<vp)){var a=t*Ap(e)*n*o*o*o;e.dx-=r*a;e.dy-=i*a}}var g=mp(i,o,a,u);n(e,(function(e){bp(g,e)}));function m(){n(e,(function(e){f=e;xp(d,g)}))}wp(g);m()}function Ip(e){var t=ad(e.tightness);return Math.pow(2,.4*(t-5))}function Ep(e,t,n,r){Lp(e[t.id1],e[t.id2],n,r)}function Cp(e,t,n){return e.size+t.size+n*(1+((e.lc?e.lc:1)+(t.lc?t.lc:1))/6)}function kp(e,t,n,r){var i=t[e.id1],o=t[e.id2],a=i.x-o.x,u=i.y-o.y,s=Cp(i,o,n),l=se(a,u);if(l>.02){var f=r*((l-s)/l),c=a*f,d=u*f;i.dx-=c;i.dy-=d;o.dx+=c;o.dy+=d}}function Sp(e,t){if(!e.fixed){var n=se(e.dx,e.dy),r=e.dx/n*Math.min(n,t),i=e.dy/n*Math.min(n,t);e.x+=r;e.y+=i}}function Lp(e,t,n,r){var i,o,a;if(!e.fixed||!t.fixed){var u=2*r.next()*Math.PI;a=1.3*Cp(e,t,n)/2;if(e.fixed||t.fixed){i=e.fixed?e.x:t.x;o=e.fixed?e.y:t.y;a*=2}else{i=(e.x+t.x)/2;o=(e.y+t.y)/2}if(!e.fixed){e.x=i+a*Math.cos(u);e.y=o+a*Math.sin(u);u+=Math.PI}if(!t.fixed){t.x=i+a*Math.cos(u);t.y=o+a*Math.sin(u)}}}function Tp(e,t){var n=e.extents,r=n.c,i=Math.max(n.x2-n.x1,n.y2-n.y1),o=120*Math.sqrt(r),a=Math.max(i,o)/2,u=0;r>1&&(u=Math.min(Math.pow(r,2.5),100));var s=u*r*Math.log(r),l=1/Ip(t);return{repulsionFactor:40*(l>1?Math.pow(l,2):l),coeff:1,naturalDistance:20*l,iterations:u,chunk:20,temperature:a,estTime:s}}function Rp(e,t,n,r){var i={temperature:10,i:0},o={verts:e.v,edges:e.e},a=Tp(e,t);a.chunk=5;a.iterations=5;i.temperature=Math.pow(a.temperature,.72);Zp(i,o,a,n);r(e.v,{},!1)}function Zp(e,t,r,i){var o,a,u=Math.min(e.i+r.chunk,r.iterations);function s(e){e.dx=0;e.dy=0;o++}function l(e){Sp(e,a)}for(;e.i<u;){var f=t.verts,c=t.edges;o=0;n(f,s);sd(f,i,2);if(1===o){e.i=u;return}if(2===o){if(c[0])Ep(f,c[0],r.naturalDistance,i);else{var d=H(f);Lp(d[0],d[1],r.naturalDistance,i)}e.i=u;return}Mp(f,r.repulsionFactor);for(var h=0;h<c.length;h++)kp(c[h],f,r.naturalDistance,r.coeff);a=e.temperature*(1-e.i/r.iterations);n(f,l);e.i++}}function Bp(e,t,n,r,i,o,a,u){var s={i:0,temperature:r.temperature};function l(){return i+(o-i)*(s.i/r.iterations)}function f(){return s.i>=r.iterations}function c(){Zp(s,n,r,a)}function d(){c();if(f())u();else{var n=l();t.trigger("progress","layout",n);e.fire("progress",{task:"layout",progress:n});p(d,0)}}d()}function Op(e){var t=0,r=0,i=0,o=!1,a=0,u=0;n(e,(function(e){t+=e.x;r+=e.y;i+=1;o=o||e.fixed}));if(!(i<3||o)){t/=i;r/=i;n(e,(function(e){var n=Math.sqrt((e.x-t)*(e.x-t)+(e.y-r)*(e.y-r));if(n>u){u=n;a=Math.atan2(e.y-r,e.x-t)}}));a=-a;var s=Math.sin(a),l=Math.cos(a);n(e,(function(e){var n=t+(e.x-t)*l-(e.y-r)*s,i=r+(e.x-t)*s+(e.y-r)*l;e.x=n;e.y=i}))}}function Gp(e,t){var r=Y(e.fixed||[]),i=q(r),o=0,a=0;if(r.length){n(i,(function(e,n){if(n in t.v){o+=t.v[n].x;a+=t.v[n].y}}));o/=r.length;a/=r.length}n(t.v,(function(e,n){if(!i[t.v[n].id]){t.v[n].x=o;t.v[n].y=a}}))}function Yp(e,t,n,r,i,o,a){var u=a.pack(r);Gp(r,n);for(var s=n.v,l=n.vcount,f=n.e,c=hd(s,f),d=r.fixed||[],h=l/(l+c.length),v=0,g=r.tidy?h:1,m=0===d.length,y=[],b=0,x=Date.now(),w=0;w<c.length;w++){var A=Tp(c[w],r);b+=A.estTime;y.push(A)}for(var M=0,I=0;I<c.length;I++){y[I].start=M;var E=M+(g-v)*(y[I].estTime/b);y[I].stop=E;M=E}var C=0;function k(n){var r=n,o=c[r],a=y[r];Bp(e,t,o,a,a.start,a.stop,i,(function(){Op(o.verts);r++;C++;if(r<c.length){var e=Date.now();if(e-x>16||C>1e3){x=e;C=0;p((function(){k(r)}),0)}else k(r)}else S()}))}function S(){r.tidy?u((function(){return o(s,{},m)})):o(s,{},m)}c.length>0?k(0):o(s,{},m)}function Fp(e,t,n,r,i,o){e[t]=r?n[t]:ie(n[t],{x:i,y:o})}function Dp(e,t,r){var i={},o=[],a=0,u={include:!0,maxLength:r.privateGetMaxLabelLength()};n(e.rev,(function(s,l){for(var f={x:0,y:0,size:0},c=s.length,d=0;d<c;d++){var h=t[s[d]];f.x+=h.x;f.y+=h.y;f.size+=h.size}f.x/=c;f.y/=c;var v=document.createElement("canvas").getContext("2d"),p=ah(),g=H(t).filter((function(t){return e.rev[l].indexOf(t.id)>-1})).map((function(e){var t=r.privateGetItem(e.id);e.r=wd(t,v,{include:!1}).radius;e.radiusWithText=wd(t,v,u).radius;e.labelOffset=0;return e})),m=0,y=0;g.forEach((function(e){m+=e.r;y+=e.radiusWithText}));var b=(y-m)/g.length,x=.5,w=p.concentricLayout(g,{padding:Math.max(8,b*x)}),A={positions:ee(w)},M=Id(w,{x:0,y:0},v,0);i[l]={id:l,x:f.x,y:f.y,size:M,r:void 0,fixed:!1,lc:0,w:void 0,h:void 0,labeloff:0,labelOffset:0,radiusWithText:M,jit:A};a++;for(var I=s[0],E={},C=e.index[I],k=0;k<C.length;k++){var S=C[k];E[e.ids[S]]=!0}n(E,(function(e,t){l<t&&o.push({id1:l,id2:t})}))}));for(var s=0;s<o.length;s++){var l=o[s].id1,f=o[s].id2;i[l].lc++;i[f].lc++}n(t,(function(t,n){if(!e.ids[n]){i[n]={id:n,x:t.x,y:t.y,size:t.size,lc:0,fixed:t.fixed,labeloff:0,labelOffset:0,radiusWithText:t.size,r:t.size,w:t.w,h:t.h,jit:{radius:t.size,position:{x:0,y:0}}};a++}}));return{v:i,e:o,vcount:a,extents:dd(i)}}function Pp(e,t,n){e[n]||(e[n]=[]);e[n].push(t)}function zp(e,t){Pp(e,t.id1,t.id2);Pp(e,t.id2,t.id1)}function Vp(e){for(var t={},n=0;n<e.length;n++)zp(t,e[n]);return t}function Xp(e){var t={},r={};n(e,(function(e,n){e.sort();for(var i="",o=0;o<e.length;o++)i+=e[o];t[i]||(t[i]=[]);t[i].push(n);r[n]=i}));return{rev:t,ids:r,index:e}}function Wp(e){return Xp(Vp(e))}function Up(e,t,r,i,o,a,u,s){var l=u.pack(i),f=Wp(r.e),c=Dp(f,r.v,o),d=function(o){var a={};n(o,(function(e,t){if(f.rev[t])for(var n=f.rev[t],i=e.fixed,o=0;o<n.length;o++){var u=n[o],s=e.x,l=e.y;if(e.jit.positions){s+=e.jit.positions[u].x;l+=e.jit.positions[u].y}Fp(a,u,r.v,i,s,l)}else Fp(a,t,r.v,r.v[t].fixed,e.x,e.y)}));var u=dh(e,t,i,r.extents,s),c=0===l.fixConfig.nodeIds.length;i.tidy?l((function(){return u(a,{},c)})):u(a,{},c)},h=function(e,t){d(e);return{vertices:e,updatedEdges:t,extents:null}};Yp(e,t,c,ie({},i,{tidy:!1}),a,h,u)}var Np=new RegExp("^(standard|hierarchy|lens|sequential|radial|structural|tweak|"+Object.keys(vh).join("|")+")$"),jp=new RegExp("^(standard|lens|structural|"+vh.organic+")$"),Kp=new RegExp("^(standard|tweak|"+vh.organic+")$"),Hp=new RegExp("^(standard|structural|"+vh.organic+"|radial|hierarchy|sequential)$"),_p=Ah();function Jp(e,t,n){var r=he();function i(i,o,a,u,s,l,f){n.trigger("prechange","layout");t.fire("prechange",{type:"layout"});if(!Np.test(i))throw new Error("The layout name is not valid.");jp.test(i)||delete s.consistent;Kp.test(i)||delete s.fixed;Hp.test(i)&&(V(s.packing)?s.packing=s.tidy?"rectangle":"none":s.tidy="none"!==s.packing);var c=Mh(o,u,_p),d=f?ch(t,n,s,o.extents,l):dh(t,n,s,o.extents,l);n.trigger("progress","layout",0);t.fire("progress",{task:"layout",progress:0});r.setSeed(s.consistent?900736044081:null);switch(i){case"standard":Yp(t,n,o,s,r,d,c);break;case"hierarchy":kv(o,a,s,!1,d,c);break;case"lens":Sv().lens(t,n,o,u,s,r,d,f);break;case"sequential":hp(o,a,s,d,c);break;case"structural":Up(t,n,o,s,e,r,c,l);break;case"radial":kv(o,a,s,!0,d,c);break;case"tweak":Rp(o,s,r,d);break;case vh.organic:var h=c.organic(s,f),v=0===h.fixConfig.nodeIds.length;h((function(){return d(o.v,{},v)}))}}return{arrange:Rh,extractStructure:Zh(e),layout:i}}function Qp(e,t,n,r,i,o,u){var s=ah(),l=$p(t),f={},c={list:[],index:{},nulls:0,comboLinkAdj:{}},d={},h=null,v=[],p={},g=D(e,{arrange:"concentric",resize:!0,updateGlyph:!0});function m(){c={list:[],index:{},nulls:0,comboLinkAdj:{}};f={};d={};h=null;v=[]}function y(){return{itemsToMergeList:c.list,propertiesToSetMap:f,idsToRemoveMap:d,idsToSelectMap:h}}function b(){var e={nodes:{},links:{}};t.privateGetRawItems().concat(c.list).forEach((function(t){if(null!==t){var n=de(t.id),r=E(t.id);n||r||("node"===t.type?e.nodes[t.id]=I(t.id):e.links[t.id]=t)}}));return e}function w(e,n){var r,i=f[e];if(void 0!==i&&void 0!==(r=i[n]))return r;var o=X(e);if(null!==o&&void 0!==(r=o[n]))return r;var u=t.privateGetItem(e);return u?a(u[n]):void 0}function A(e,t){return w(e,t)}function M(e,t){return w(e,t)}function I(e){if(d[e])return null;var n=a(t.privateGetItem(e))||{},r=X(e);null!==r&&re(n,r);f[e]&&re(n,f[e]);return n}function E(e){return w(e,"parentId")}function C(e){return w(e,"_combo")}function k(e){return C(e)}function S(e,t){var n=w(e,"_combo");if(n){n.nodeIds&&n.nodeIds.forEach(t);n.linkIds&&n.linkIds.forEach(t)}}function L(e){var t=f[e];if(!t){t={id:e};f[e]=t}return t}function T(e,t,n){L(e)[t]=n}function Z(e,t,n){T(e,t,n)}function B(e){var t=L(e.id);ie(t,e)}function O(e,t){Z(e,"_offset",t)}function G(e,t,n){var r=k(e);r[t]=n;T(e,"_combo",r)}function Y(e,t){if(n&&n.api.isShown()){var r=I(e),i=n.internalUse.preMerge([r]);T(e,"hi",i[0].hi);ye(e,i[0].x-r.x,i[0].y-r.y)}else if(g.reposition&&t){var o=M(e,"_offset"),a=M(t,"x"),u=M(t,"y"),s=M(e,"x"),l=M(e,"y");ye(e,a-o.x-s,u-o.y-l)}}function F(e,t){var n=E(e)||null;if(t!==n){ce(e);T(e,"parentId",t);if("node"===w(e,"type"))if(t)M(e,"_offset")||O(e,{x:M(t,"x")-M(e,"x"),y:M(t,"y")-M(e,"y")});else{Y(e,n);O(e,void 0)}}}function P(e,t){e.forEach((function(e){F(e,t);d[e]&&ce(e)}))}function z(e){var t=c.index[e];if(void 0!==t){var n=c.list[t];c.list[t]=null;delete c.index[e];c.nulls++;var r=c.list.length;if(r>0&&c.nulls/r>.5){c.index={};for(var i=0,o=0;o<r;){if(null!==c.list[o]){c.list[i]=c.list[o];c.index[c.list[i].id]=i;i++}o++}c.list.length=i;c.nulls=0}if(null!==n&&"link"===n.type&&n._combo){var a=c.comboLinkAdj;delete a[n.id1][n.id2];delete a[n.id2][n.id1]}}}function X(e){var t=c.index[e];return void 0===t?null:c.list[t]}function W(e){if(void 0===c.index[e.id]){c.index[e.id]=c.list.push(e)-1;if("link"===e.type&&void 0!==e._combo){var t=c.comboLinkAdj,n=e.id1,r=e.id2;void 0===t[n]&&(t[n]={});void 0===t[r]&&(t[r]={});t[n][r]=e;t[r][n]=e}}else c.list[c.index[e.id]]=e}function U(e,t,n){if(n){var r=C(n);if(r){if(e&&r.nodeIds&&e.length>0){qp(r.nodeIds,e);e.forEach((function(e){p[e]=!0}))}if(t&&t.length>0){qp(r.linkIds,t);t.forEach((function(e){p[e]=!0}))}T(n,"_combo",r)}}n&&_(n)&&t.length&&$(n)}function N(e,t){U(e,[],t);P(e,t)}function j(e,t){U([],e,t);P(e,t)}function K(e){var t=e,n=[];do{n.unshift(t);t=E(t)}while(t);return n}function _(e){return!!C(e)&&"link"===w(e,"type")}function J(e){return!!C(e)&&"node"===w(e,"type")}function Q(){var e=[];H(f).forEach((function(t){t._combo&&J(t.id)&&e.push(t.id)}));return e}function q(e){for(var t,n,r,i=K(A(e,"id1")),o=K(A(e,"id2")),a=0,u=Math.min(i.length,o.length);a<u&&i[a]===o[a];)a++;if(a===i.length){t=o[a-1];n=o[a];r=t}else if(a===o.length){t=i[a-1];n=i[a];r=t}else{t=i[a];n=o[a];r=0===a?null:i[a-1]}return{id1:t,id2:n,parentId:r}}function $(e){if(!d[e]){for(var t=A(e,"id1"),n=C(e).linkIds,r=n.length,i=!1,o=!1,a=!0,u=0;u<r;u++){var s=!!A(n[u],"a1"),l=!!A(n[u],"a2"),f=t===q(n[u]).id1;o=o||(f?l:s);if((i=i||(f?s:l))&&o)break}for(u=0;u<r;u++)if(!w(n[u],"hi")){a=!1;break}B({id:e,a1:i,a2:o,hi:a})}}function te(t,n,i){var o=r(),u=a(i,!0);u.id=o;u.id1=t;u.id2=n;if(e&&e.comboLinkStyle){var s=e.comboLinkStyle;x(s.b1)&&(u.b1=s.b1);x(s.b2)&&(u.b2=s.b2);s.c&&(u.c=s.c);s.ls&&(u.ls=s.ls);x(s.w)&&(u.w=s.w)}u.off=0;u.parentId=void 0;u._combo={linkIds:[]};return u}function ne(e){var t=q(e.id),n=me(t.id1,t.id2);if(!n){var r=te(t.id1,t.id2,e);n=r.id;W(r);null!==t.parentId&&j([n],t.parentId)}return n}function oe(e){var t={},n=[];e.forEach((function(e){if(!d[e.id]){var r=E(e.id1),i=E(e.id2);if(r||i){var o=null;o=r===i||r===e.id2?r:i===e.id1?i:ne(e);e.parentId!==o&&(t[o]||(t[o]=[])).push(e.id)}else null!==e.parentId&&n.push(e.id)}}));var r=Object.keys(t);r.forEach((function(e){U([],t[e],e)}));U([],n,null);r.forEach((function(e){P(t[e],e)}));P(n,null)}function ue(e){if(!d[e.id]){var t=E(e.id1),n=E(e.id2),r=n===e.id1?n:t;j([e.id],r||null)}}function se(e,t){if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}}function ce(e){var t=E(e);if(t&&!d[t]){var n=C(t),r=n.nodeIds,i=n.linkIds;se(r,e);se(i,e);if(r&&r.length||i.length){T(t,"_combo",n);_(t)&&$(t)}else ve(t)}}function de(e){return!!d[e]}function he(){return Object.keys(d)}function ve(e){if(!d[e]){d[e]=!0;pe(t.privateNeighbourLinkIds([e]));ce(e);delete f[e];z(e)}}function pe(e){e.forEach(ve)}function ge(e){h=h||{};e.forEach((function(e){h[e]=!0}))}function me(e,n){var r=null,i=c.comboLinkAdj[e];void 0!==i&&void 0!==i[n]&&(r=i[n].id);if(null===r)for(var o=t.privateGetLinksBetween(e,n),a=o.length,u=0;u<a;u++){var s=o[u];s._combo&&!d[s.id]&&(r=s.id)}return r}function ye(e,t,n){var r=M(e,"x"),i=M(e,"y");Z(e,"x",r+t);Z(e,"y",i+n);var o=k(e);o&&o.nodeIds.forEach((function(e){ye(e,t,n)}))}function be(){for(var e={},t=0,n=v.length;t<n;t++){void 0===e[(r=v[t]).id]&&(e[r.id]={id:r.id,dx:0,dy:0,sumX:0,sumY:0});r.norm=le(M(r.id,"x")-M(r.to,"x"),M(r.id,"y")-M(r.to,"y"));e[r.id].sumX+=r.norm[0]*r.distance;e[r.id].sumY+=r.norm[1]*r.distance}for(t=0,n=v.length;t<n;t++){var r,i=(r=v[t]).norm,o=fe(i[0],i[1],e[r.id].sumX,e[r.id].sumY),a=Math.abs(o)*r.distance;e[r.id].dx+=i[0]*a;e[r.id].dy+=i[1]*a}return H(e)}function xe(e,r){var i=E(e),o=[];i?o=t.privateGetItem(C(i).nodeIds):n.api.isShown()||(o=t.privateGetRawItems().filter((function(t){var n=de(t.id),r=E(t.id);return!n&&!r&&e!==t.parentId})));o.filter((function(t){return"node"===t.type&&!t.hi&&t.id!==e})).forEach((function(t){v.push({id:t.id,to:e,distance:r})}))}function we(e){v.forEach((function(t){e[t.id]&&(t.distance=0)}))}function Ae(e,t,n){if(0!==t&&!w(e,"hi")){n&&xe(e,t);var r=E(e);if(r){var i=Le(r),o=M(r,"oc")||{},a=2*i;if(a!==o.w){var u=(a-o.w)/2;o.w=a;Z(r,"oc",o);var s=C(r);s&&s.open&&Ae(r,u,n)}}}}function Me(e,n,r,i){var o=b();l.layout(e.name,o.nodes,o.links,Cd(o.nodes,t.privateGetCanvas(),t.privateGetMaxLabelLength()),e,"toplevel",(function(e){we(e.vertices);Object.keys(e.vertices).forEach((function(t){var n=e.vertices[t],r=M(t,"x"),i=M(t,"y");ye(t,n.x-r,n.y-i)}));n(e.updatedEdges);i(e.extents)}))}function Ie(e,t,n,r,i){for(var o=[],a=C(e).nodeIds,u=a.length,s={include:!0,partial:i,maxLength:r,padExtents:!0},l=0;l<u;l++){var f=I(a[l]);if(!f.hi){var c=n&&n[f.id],d=wd(f,t,s);o.push({id:f.id,x:c?f.x+c.dx:f.x,y:c?f.y+c.dy:f.y,t:f.t,labelOffset:Md(f,r),r:d.radius,w:d.width,h:d.height})}}return o}function Ee(e,t,n,r){var i=Ie(e,t,null,r,!0);return ee(s.concentricLayout(i,{includeLabels:!0,padding:n}))}function Ce(e,t,n,r){var i,o=k(e),a=ee(o.nodeIds.map(I)),u=ee(o.linkIds.map(I).filter((function(t){return t.id1!==e&&t.id2!==e})));l.layout("lens",a,u,Cd(a,t,r),{consistent:!0},"all",(function(e){i=e}),!0);var s=Ie(e,t,null,r);s.forEach((function(e){e.x=i.vertices[e.id].x;e.y=i.vertices[e.id].y}));var f=Ed(s,t,n,!0,r);null!==f&&s.forEach((function(e){e.x-=f.x;e.y-=f.y}));return ee(s)}function ke(e,t,n,r,i){var o=M(e,"oc")||{},a=2*t;if(n||o.w<a){o.w=a;Z(e,"oc",o);var u=k(e);if(u&&!u.open){var s={include:!0,maxLength:i},l=I(e),f=wd(l,r,s,!0),c=wd(l,r,s,!1);u.e=c.radius/f.radius;T(e,"_combo",u)}}}function Se(e,t,n){for(var r=k(e).nodeIds,i=r.length,o=M(e,"x"),a=M(e,"y"),u=0;u<i;u++){var s=r[u];if(!w(s,"hi")){var l={id:s},f=M(s,"x"),c=M(s,"y");if(n){l._offset={x:o-f-n.dx,y:a-c-n.dy};B(l)}ye(s,o+t[s].x-f,a+t[s].y-c)}}}function Le(e,n,r){void 0===n&&(n=!1);var i=t.privateGetCanvas(),o=ee(be());return Id(ee(Ie(e,i,o,r)),{x:M(e,"x"),y:M(e,"y")},i,co,n,r)}function Te(e,n){var r,i=t.privateGetCanvas(),o=t.privateGetMaxLabelLength();if("none"===g.arrange)ke(e,r=Le(e,!0,o),!!g.resize,i,o);else{var a=void 0;r=Id(a="concentric"===g.arrange?Ee(e,i,co,o):Ce(e,i,co,o),{x:0,y:0},i,co,!0,o);we(a);ke(e,r,!!g.resize,i,o);Se(e,a,n)}return r}function Re(e){return Te(e)}function Ze(e){var n=t.privateGetCanvas(),r=t.privateGetMaxLabelLength();ke(e,Le(e,!0,r),!1,n,r)}function Be(e){var t=k(e);return t?t.nodeIds.reduce((function(e,t){return e+Be(t)}),0):w(e,"hi")?0:1}function Oe(e){var t=k(e);if(t&&void 0!==t.g){var n=!1,r=(w(e,"g")||[]).map((function(r){if(r.p===t.g){n=!0;return ie(r,{t:Be(e)})}return r}));if(n)T(e,"g",r);else{t.g=void 0;T(e,"_combo",t)}}}function Ge(){if(g.updateGlyph){var e={};[H(f),c.list].forEach((function(t){t.forEach((function(t){if(t){var n=t.id;if(t._combo&&"node"===w(n,"type")){K(n).forEach((function(t){if(!e[t]){Oe(t);e[t]=!0}}))}}}))}))}}function Ye(e){if(h){t.selection(Object.keys(h));o.trigger("selectionchange");var n=new Set;e.forEach((function(e){return n.add(e)}));u.selection().hasChanged(n)&&i.fire("selection-change")}else{var r=e.filter(t.privateItemIsShown);if(e.length!==r.length){t.selection(r);o.trigger("selectionchange");i.fire("selection-change")}}}function Fe(e){for(var n=K(e),r=0;r<n.length;r++){var i=n[r],o=C(i),a=t.privateGetItem(i),u=a&&a._combo;if(!(u&&u.open||o&&o.open))return i}return e}function De(e){for(var n=t.privateGetAncestryIds(e),r=0;r<n.length;r++){var i=t.privateGetItem(n[r])._combo;if(!i||!i.open)return n[r]}return e}function Pe(e,n){Object.keys(e).forEach((function(r){var i=e[r],o=a(t.privateGetItem(r)._combo);V(i.open)||(o.open=i.open);o.nodeIds=ze(o.nodeIds,i.removeNodeIds);o.nodeIds=Ve(o.nodeIds,i.addNodeIds);o.linkIds=ze(o.linkIds,i.removeLinkIds);o.linkIds=Ve(o.linkIds,i.addLinkIds);n.push({id:r,_combo:o})}))}function ze(e,t){var n=e;t.length&&(n=n.filter((function(e){return-1===t.indexOf(e)})));return n}function Ve(e,t){var n=e;t.length&&(n=n.concat(t));return n}function Xe(){var e=[],n={},r=[],i={},o={};function a(e){o[e]||(o[e]={addNodeIds:[],removeNodeIds:[],addLinkIds:[],removeLinkIds:[]})}function u(e,t,n){a(t);var r=(n?"add":"remove")+("node"===e.type?"NodeIds":"LinkIds");o[t][r].push(e.id)}function s(e){if(!0!==d[e])return!1;i[e]=!0;var n=t.privateGetItem(e);if(n)if("link"===n.type){s(n.id1);s(n.id2)}else n.parentId&&s(n.parentId);return!0}H(f).forEach((function(i){var u=i.id,l=t.privateGetItem(u);if("x"in i&&l){var c=Fe(u);r.push({id:u,x:M(c,"x"),y:M(c,"y")})}if("parentId"in i&&l&&l.parentId!==i.parentId){var h={id:u},v="node"===l.type;h.parentId=null;if(v){var p=De(u),g=t.privateGetItem(p);h.x=g.x;h.y=g.y;"x"in i||r.push({id:u,x:l.x,y:l.y})}else if(i.parentId)if(J(i.parentId)){var m=t.privateGetItem(i.parentId);if(m&&(!m._combo.open||!t.privateAllParentsOpen(i.parentId))&&l.parentId){delete h.parentId;s(l.parentId)}}else if(_(i.parentId)){var y=X(i.parentId),b=t.privateGetItem(i.parentId),x=y||b;if(x)if(t.privateGetItem(x.id1)&&t.privateGetItem(x.id2)){var A=f[x.id1]&&"parentId"in f[x.id1],I=f[x.id2]&&"parentId"in f[x.id2],E=A||t.privateAllParentsOpen(x.id1),C=I||t.privateAllParentsOpen(x.id2);if(E&&C){h.parentId=i.parentId;y&&(n[i.parentId]=!0)}else if(l.parentId&&d[l.parentId]){if(!w(u,"hi")){h.hi=!0;T(u,"hi",!1)}}else delete h.parentId}else s(l.parentId)&&delete h.parentId;else d[l.parentId]&&(h.parentId=i.parentId)}e.push(h)}if("_combo"in i&&J(u)&&l&&l._combo.open!==i._combo.open){r.push({id:u,_combo:{e:i._combo.e}});a(u);o[u].open=!0}if(J(u)&&l&&"oc"in i){var k=l;k.oc&&k.oc.w!==i.oc.w&&r.push({id:u,oc:{w:i.oc.w}})}}));e.forEach((function(e){var n=t.privateGetItem(e.id);if("parentId"in e){var r=n.parentId,o=e.parentId,a=r&&d[r]&&!i[r];r&&!a&&u(n,r,!1);o&&(X(o)||u(n,o,!0))}}));Object.keys(d).forEach((function(e){if(!i[e]){var n=t.privateGetItem(e);n&&n.parentId&&u(n,n.parentId,!1)}}));Pe(o,e);return{propertiesToSetBeforeAnimation:e,itemsToMergeBeforeAnimationMap:n,propertiesToAnimate:r,idsToRemoveAfterAnimationMap:i}}function We(e,n){var r=!!g.animate&&Xe();r&&Object.keys(r.idsToRemoveAfterAnimationMap).forEach((function(e){delete d[e]}));t.privateRemoveItem(Object.keys(d));if(r){var i=[];Object.keys(r.itemsToMergeBeforeAnimationMap).forEach((function(e){i.push(X(e));z(e)}));t.privateMerge(i);t.privateSetNonImageProperties(r.propertiesToSetBeforeAnimation);t.privateSetAllDirty();R(n);t.privateAnimateProperties(r.propertiesToAnimate,g,(function(){t.privateRemoveItem(Object.keys(r.idsToRemoveAfterAnimationMap));R(e)}),!1,!0)}else R(e)}function Ue(e,n){g.updateGlyph&&Ge();var r=t.selection(),i=Object.keys(p);be().forEach((function(e){ye(e.id,e.dx,e.dy)}));t.privateAddItemsToTransfer(i);We((function(){t.privateMerge(c.list.filter((function(e){return null!==e})));g.animate||R(n);t.privateSetNonImageProperties(H(f),!0);t.privateRemoveItemsFromTransfer(i);p={};Ye(r);m();R(e)}),n)}function Ne(){return{
itemsToMerge:c.list.filter((function(e){return null!==e})),propertiesToSet:H(f)}}return{adjustForNewComboSize:Ae,adjustTopLevelLayout:Me,applyUpdates:Ue,forEachChild:S,getChangingComboNodeIds:Q,getComboProperty:C,getExtentsOfChildren:Le,getIdsToRemove:he,getItem:I,getNodeComboProperty:k,getNodeProperty:M,getParentId:E,getProperty:w,layoutCombo:Re,layoutComboWithOffset:Te,mergeItem:W,preMergeDetails:Ne,privateState:y,removeItems:pe,removingItem:de,selectItems:ge,setComboMinimumSize:Ze,setNodeComboSubProperty:G,setNodeProperty:Z,setProperty:T,transferComboLinkToCorrectParent:ue,transferNodesToCombo:N,transferRawLinksToCorrectParents:oe,updateComboLinkProperties:$,updateComboNodeGlyphs:Ge}}function qp(e,t){if(1===t.length)-1===e.indexOf(t[0])&&e.push(t[0]);else{for(var n={},r=0;r<e.length;r++)n[e[r]]=!0;for(var i=0;i<t.length;i++)n[t[i]]||e.push(t[i])}}function $p(e){var t={on:function(){},fire:function(){},privateOn:function(){},privateFire:function(){},privateOff:function(){},off:function(){}},n=Jp(e,t,{bind:function(){},trigger:function(){return!1},getErrors:function(){return[]},unbind:function(){},suppress:function(){}});function r(r,i,o,a,u){var s=null;function l(){null===s&&(s=rh(t)).privateSetProperties(i,o);return s}var f=e.privateGetCanvas(),c=e.privateGetGenerator();return{getGraph:l,struct:n.extractStructure(c,f,i,o,l,a,r,u)}}function i(e,t,i,o,a,u,s,l){var f=r(e,t,i,a.fixed||[],u);n.layout(e,f.struct,f.getGraph,o,a,s,l)}return{layout:i}}function eg(e,t,n,r,i,o){var u=0;function s(t){var n=wd(t,e.privateGetCanvas(),{include:!1}).radius;t._combo&&t._combo.open&&(t.oc&&x(t.oc.bw)?n-=t.oc.bw:n-=uu.bw);return Math.max(n,0)}function l(){var t=0,r=W({animate:!1});n.privateOn("drag-start",(function(n){var r=n.type,i=n.id;if("resize"===r&&i){var o=e.privateGetItem(i);"node"===o.type&&o._combo&&o._combo.open&&(t=s(o))}}));return function(n){var i=e.privateGetItem(n);if("node"===i.type&&i._combo&&i._combo.open){var o=r.getExtentsOfChildren(n,!0,void 0),a=s(i);if(a<o){var u=r.getNodeProperty(n,"oc")||{};a=o;u.w=2*o;r.setNodeProperty(n,"oc",u)}var l=a-t;r.adjustForNewComboSize(n,l,!0);r.applyUpdates()}}}function f(t){var n;do{n=t+ ++u}while(e.privateGetItem(n));return n}function c(){return f(vo)}function d(e){var t=e;["id","id1","id2","parentId"].forEach((function(e){e in t&&null!==t[e]&&void 0!==t[e]&&(t[e]+="")}))}function h(e){var t={};e.forEach((function(e){t[e]=!0}));return t}function v(e,t){return V(t.label)?e.map((function(e){return e.t})).filter((function(e){return!V(e)&&""!==e})).join("\n"):t.label}function p(e){var t=0,n=0;e.forEach((function(e){t+=e.x||0;n+=e.y||0}));return{x:t/e.length,y:n/e.length}}function g(e){return!(!e||"number"!=typeof e.lat||"number"!=typeof e.lng)}function m(e,t){if("first"!==e.position){var n=0,r=0,i=0;t.forEach((function(e){if(g(e.pos)){r+=e.pos.lat;i+=e.pos.lng;n++}}));if(n>0)return{lat:r/n,lng:i/n}}else for(var o=0,a=t.length;o<a;o++){var u=t[o];if(g(u.pos))return u.pos}}function y(){return{nodeIds:[],linkIds:[],open:!1,e:1,g:void 0}}function b(){return{linkIds:[]}}function w(){return{p:"ne",c:"rgb(255, 0, 0)",t:"0"}}function M(e,t,n){e._combo=y();n?e.oc=n:e.oc||(e.oc={});e.oc=D(e.oc,i().openCombos);x(e.oc.w)||(e.oc.w=0);void 0===e.x&&(e.x=0);void 0===e.y&&(e.y=0);e.g=e.g||[];if(null!==t){var r=qn(qn({},w()),t||{});e.g.unshift(r);e._combo.g=r.p}}function I(n,r){var o=n.style,u=o||a(r[0],"d"),s="node",l=f(ho),c=v(r,n);void 0===n.glyph&&i&&(n.glyph=i().comboGlyph);if(void 0!==n.glyph&&null!==n.glyph&&!E(n.glyph))throw new Error("[combo().combine] glyph must be an object");var d,h=o&&!V(o.hi)?o.hi:r.every((function(e){return!!e.hi})),y=o&&!V(o.bg)?o.bg:r.every((function(e){return!!e.bg})),b=o&&g(o.pos)?o.pos:m(n,r);if(t&&t.api.isShown()&&g(b)){var x=t.api.viewCoordinates(b.lat,b.lng);d=e.worldCoordinates(x.x,x.y)}else d="first"===n.position?r[0]:p(r);var w=qn(qn({},u),{type:s,id:l,t:c,hi:h,bg:y,pos:b,x:d.x,y:d.y});M(w,n.glyph,n.openStyle);n.open&&(w._combo.open=!0);E(n.d)&&(w.d=n.d);return w}var C=hu({strings:{label:!0}});function k(i,o,u){var s=Y(i),l=t&&t.api.isShown(),f=D(o,{animate:!0,select:!0,time:250,arrange:"lens",resize:!0,easing:"cubic"}),c=W(f),d=[],h=[],v={};s.forEach((function(t){var n,r={},i=[],o=a(t,"d");if(o&&o.ids){C.ensureObject(o,!1);n=e.privateGetItem(o.ids)}l&&o.open&&delete o.open;if(!n)throw new Error("[combo().combine] function must be passed valid combo definitions");n.forEach((function(e){if(!e)throw new Error("[combo().combine] function must be passed valid ids");if("node"===e.type){if(e.parentId)throw new Error("[combo().combine] nodes cannot be combined if they are already in a combo");if(v[e.id])throw new Error("[combo().combine] nodes should only be in one combo");v[e.id]=!0;r[e.id]=!0;i.push(e)}}));if(!Object.keys(v).length)throw new Error("[combo().combine] function must be passed at least one node id");var u=I(o,i);c.mergeItem(u);N(c,ee(i),u.id,[],[]);var s={dx:0|(o.dx||0),dy:0|(o.dy||0)};c.layoutComboWithOffset(u.id,s);d.push(u);h.push(u.id)}));f.select&&c.selectItems(h);n.fire("prechange",{type:"combine"});r.trigger("prechange","combine");c.applyUpdates((function(){e.applyRevealedLinkOffsets(d);e.privateSetAllItemsInComboDirty(h);R(u,h)}))}function S(t,n,r){var i=D(n,{animate:!0,time:250,full:!1,select:!0,reposition:!0}),o=Y(t).filter((function(e){return O(e,"node")}));if(0!==o.length){var a=[];o.forEach((function(t){var n=e.privateGetItem(t),r=i.full?ne(L(n).nodes):n._combo.nodeIds;a=a.concat(r)}));K(a,null,i,"uncombine",r)}else R(r)}function L(t,n,r){void 0===n&&(n=null);void 0===r&&(r=!1);var i=t._combo,o=n||{nodes:[],links:[]},a=i.nodeIds,u=a?e.privateGetItem(a):[];function s(e){if(e._combo){L(e,o,r);r&&("node"===e.type?o.nodes.push(e):o.links.push(e))}else"node"===e.type?o.nodes.push(e):o.links.push(e)}e.privateGetItem(i.linkIds).forEach(s);u.forEach(s);return o}function T(t){var n=null,r=e.privateGetItem(t);r&&r._combo&&(n=L(r,n,!1));return a(n,!0)}function Z(e,t){var n=Y(e),r=D(t,{type:"all"});if(!r.type.match(/^(node|link|all)$/))throw new TypeError("[combo().isCombo] opts type property should be either 'node', 'link' or 'all'");return n.some((function(e){return B(e,r.type)}))}function B(t,n){var r=e.privateGetItem(t);return!(!r||"all"!==n&&n!==r.type)&&!!r._combo}function O(t,n){var r=e.privateGetItem(t);return B(t,n)&&!r.parentId}function G(t,n){var r=D(n,{parent:"top"});if(!Array.isArray(t)&&!x(t)&&"string"!=typeof t)throw new Error("[combo().find] Incorrect argument passed");var i={top:function(t){var n=e.privateTopParentId(t);return{parentComboId:n,isCombo:O(n,"all")}},first:function(t){var n=e.privateGetItem(t),r=n?n.parentId:null;return{parentComboId:r,isCombo:!!r&&B(r,"all")}}},o=i[r.parent]?i[r.parent]:i.top,a=!Array.isArray(t),u=Y(t).map((function(e){var t=o(e);return V(t.parentComboId)||!t.isCombo||t.parentComboId===e?null:t.parentComboId}));return a?u[0]:u}function F(t){return e.privateGetAncestryIds(t).length}function P(e,t,n){(t||e.getChangingComboNodeIds()).sort((function(e,t){return F(t)-F(e)})).forEach((function(t){var r=e.getNodeComboProperty(t),i=(e.getNodeProperty(t,"oc")||{}).w,o=e.layoutCombo(t),a=r.open?o-i/2:0;(!n||n.resize||a>0)&&e.adjustForNewComboSize(t,a,!!n.adapt)}))}function X(t,n){var r={};if(void 0===t)throw new Error("[combo().transfer] function must be passed a valid transfer destination");var i=t?h(e.privateGetAncestryIds(t)):{};e.privateGetItem(n).forEach((function(e){if(!e)throw new Error("[combo().transfer] function must be passed valid ids");if(i[e.id])throw new Error("[combo().transfer] cannot transfer a combo inside itself");"node"===e.type&&(r[e.id]=e)}));return r}function W(a){return Qp(D(a,{comboLinkStyle:i().comboLinks}),e,t,c,n,r,o)}function U(t,n){var r={},i={};e.privateGetItem(e.privateNeighbourLinkIds(n)).forEach((function(t){var n=t;if(n._combo){i[n.id]=n;e.privateGetItem(n._combo.linkIds).forEach((function(e){r[e.id]=e}))}else r[n.id]=n}));H(i).forEach(t.transferComboLinkToCorrectParent);t.transferRawLinksToCorrectParents(H(r))}function N(e,t,n,r,i){var o=Object.keys(t),a={};e.transferNodesToCombo(o,n);var u={};H(t).forEach((function(e){u[e.id]=e;e._combo&&L(e,null,!0).nodes.forEach((function(e){u[e.id]=e}));e.hi||r.push(e.id);e.parentId&&(a[e.parentId]=!1)}));e.getIdsToRemove().forEach((function(t){var n=e.getProperty(t,"parentId");n&&(a[n]=!1)}));U(e,Object.keys(u));r.length>0&&!e.getProperty(n,"hi")&&(r.length=0);Object.keys(a).sort((function(e,t){return F(e)-F(t)})).forEach((function(t){if(!e.removingItem(t)){var n=!1;e.forEachChild(t,(function(t){e.getProperty(t,"hi")||a[t]&&!1!==a[t]||(n=!0)}));if(!n){a[t]=!0;i.push(t)}}}))}function j(e,t,n,r){K(e,t,n,"transfer",r)}function K(t,i,o,a,u){var s=D(o,{animate:!0,time:250,select:!1,arrange:"lens",resize:!0,easing:"cubic",reposition:!1,adapt:!0}),l=null;if(i&&(!(l=e.privateGetItem(i))||"node"!==l.type||!l._combo))throw new Error("[combo().transfer] comboId must be the id of a combo node or null");var f=W(s),c=X(i,Y(t)),d=Object.keys(c),h=[],v=[];s.select&&f.selectItems(d);N(f,c,i,h,v);P(f,null,s);var p=[];if(l){var g=f.getNodeComboProperty(l.id);g&&!g.open&&p.push(l)}n.fire("prechange",{type:a});r.trigger("prechange",a);f.applyUpdates((function(){h.length>0&&e.show(h,!0);v.length>0&&e.hide(v);e.applyRevealedLinkOffsets(p);R(u)}),(function(){s.animate&&e.applyRevealedLinkOffsets(p)}))}function _(t){var n=Y(t),r=e.privateGetItem(n).filter((function(e){return null!==e})),i=W({animate:!1});function o(t){var n=t._combo;e.privateGetItem(n.linkIds).forEach((function(t){var n=t;r.push(n);n._combo&&e.privateGetItem(n._combo.linkIds).forEach((function(e){r.push(e)}))}));n.nodeIds&&e.privateGetItem(n.nodeIds).forEach((function(e){var t=e;r.push(t);t._combo&&o(t)}))}r.forEach((function(e){e._combo&&o(e)}));var a=ee(r);e.privateNeighbourLinkIds(Object.keys(a)).forEach((function(t){r.push(e.privateGetItem(t))}));i.removeItems(r.map((function(e){return e.id})));i.applyUpdates()}function J(t,n){var r=Y(n);(r=r.filter((function(t){d(t);var n=e.privateGetItem(t.id);if(n&&t.type&&t.type!==n.type)return!1;var r=n,i=t;r&&r.oc&&(i.oc=ie(r.oc,i.oc));if("node"===t.type)return!0;if("link"===t.type){if(!t.id1||!t.id2){if(n)throw new Error("You must specify both id1 and id2 for a link");return!1}if(n&&"link"===n.type&&(n.id1!==t.id1||n.id2!==t.id2))throw new Error("You cannot change the ends of an existing link. Remove the existing item first");return t.id1!==t.id2||e.options().selfLinks}throw new Error("The type of the item should be specified")}))).forEach(t.mergeItem);var o,a=i?i().comboGlyph:null,u=0,s=[],l={};try{o=me(t.preMergeDetails().itemsToMerge,(function(e){return[t.getParentId(e.id)]}),(function(e){return e.id}))}catch(e){throw new Error("A node's parentId can't refer to a child")}o.forEach((function(n){var r=e.privateGetItem(n.id);if(r&&z(n,"parentId")&&r.parentId!==n.parentId)throw new Error("You can't change the parentId of an existing item");if("link"!==n.type&&!(void 0===n.parentId||r&&n.parentId===r.parentId)){if(n.id===n.parentId)throw new Error("A node can't be the parent of itself");if(null!==n.parentId){var i=t.getItem(n.parentId);if(!i||!i.id){t.setProperty(n.id,"parentId",null);return}if("link"===i.type)throw new Error("The parentId of a node can't be a link");if(!i._combo){M(i,a,void 0);t.mergeItem(i);s.push(i.id)}void 0===n.x&&t.setNodeProperty(n.id,"x",i.x);void 0===n.y&&t.setNodeProperty(n.id,"y",i.y);n.parentId=i.id;t.setNodeProperty(n.id,"_offset",{x:0,y:0});(l[n.parentId]||(l[n.parentId]=[])).push(n.id);u++}}}));Object.keys(l).forEach((function(e){t.transferNodesToCombo(l[e],e)}));t.transferRawLinksToCorrectParents(o.filter((function(n){if("link"===n.type){e.privateGetItem(n.id)||void 0===n.parentId||(n.parentId=null);var r=e.privateGetItem(n.id);if(r){var i=r.parentId;i&&"link"===t.getProperty(i,"type")&&t.updateComboLinkProperties(i)}else if(0!==n.id2.indexOf("dummyEnd"))return!0}return!1})));s.forEach(t.layoutCombo);u>0&&t.updateComboNodeGlyphs()}function Q(e,t){var n=W(D(t,{arrange:"none",resize:!0}));J(n,e);return n.preMergeDetails()}function $(t){var n=[];t.forEach((function(t){var r=e.privateGetItem(t.id),i=t.count;if(r.g){var o=!1,a=r.g.map((function(e){if(e.p===r._combo.g){o=!0;return ie({},e,{t:i})}return e}));o&&n.push({id:r.id,g:a})}}));n.length&&e.privateSetNonImageProperties(n)}function te(e,t,n,r){return e.filter((function(e){return n[e.id]||!r[e.id]&&!e[t]}))}function oe(t,n,r,i,o){Object.keys(r).forEach((function(r){var a,u,s,l=e.privateGetItem(r),f=L(l),c=te(f.links,n,i,o);if(l._combo.nodeIds){s="nodes";a=(u=te(f.nodes,n,i,o)).length>0}else{s="links";a=c.length>0}if(s){if(a&&"hi"===n){var d={id:r,links:c};u&&(d.nodes=u);t.combos[s].push(d)}a!==!l[n]&&(a?i[r]=!0:o[r]=!0)}}));return t}function ue(t,n,r,i,o){e.privateGetItem(t).forEach((function(t){if(t){var a=t[i]===o;if(t._combo){var u=L(t,null,!0);u.nodes.forEach((function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}}));u.links.forEach((function(e){if(!!e[i]===o){a=!0;n[e.id]=!0}}));a&&(r[t.id]=!0)}for(var s=e.privateGetParentItems(t.id),l=s.length-1;l>=0;l--){var f=s[l];if("node"===t.type&&a&&"hi"===i||!!f[i]===o){r[f.id]=!0;a=!0}}}}))}function se(t,n,r){e.privateGetRawItems().forEach((function(e){if(we(e.id)&&(!e.bg||t[e.id])){delete t[e.id];delete n[e.id];e.bg||(r[e.id]=!0)}}))}function le(e){return"node"===e.type?"nodes":"links"}function fe(t,n,r){var i={toShow:[],toHide:[],shown:{nodes:[],links:[]},hidden:{nodes:[],links:[]},combos:{nodes:[],links:[]}},o={},a=q(t),u=q(n),s=t,l=n;if(r&&r.all){s=r.all.shown.nodes.concat(r.all.shown.links);l=r.all.hidden.nodes.concat(r.all.hidden.links)}ue(s,a,o,"hi",!0);ue(l,u,o,"hi",!1);i=oe(i,"hi",o,a,u);e.privateGetItem(Object.keys(a)).forEach((function(e){if(null!==e){i.toShow.push(e.id);i.shown[le(e)].push(e.id)}}));e.privateGetItem(Object.keys(u)).forEach((function(e){if(null!==e){i.toHide.push(e.id);i.hidden[le(e)].push(e.id)}}));return i}function ce(t,n,r,i){var o={toShow:[],toHide:[],foreground:{nodes:[],links:[]},background:{nodes:[],links:[]}},a={},u=q(t),s=q(n),l=t,f=n;if(r&&r.all){l=r.all.foreground.nodes.concat(r.all.foreground.links);f=r.all.background.nodes.concat(r.all.background.links)}ue(l,u,a,"bg",!0);ue(f,s,a,"bg",!1);i||se(a,u,s);o=oe(o,"bg",a,u,s);e.privateGetItem(Object.keys(u)).forEach((function(e){if(null!==e){o.toShow.push(e.id);o.foreground[le(e)].push(e.id)}}));e.privateGetItem(Object.keys(s)).forEach((function(e){if(null!==e){o.toHide.push(e.id);o.background[le(e)].push(e.id)}}));return o}function de(){var t=e.privateGetRawItems(),n={};t.filter((function(e){return e._combo})).forEach((function(t){var r=t._combo;n[t.id]=a(t,"d");n[t.id]._combo=a(r);"node"===t.type&&(n[t.id]._offsets=a(r.nodeIds.map((function(t){return e.privateGetItem(t)._offset})),!0))}));n.nodes=[];n.links=[];return n}function he(e,t){var n=e.combos||{},r=e.items||[],i={},o=[],a={};r.forEach((function(e){var t=e.id;if(n[t])throw new Error('Item "'+t+'" specified twice');if(void 0!==e.parentId&&null!==e.parentId){var r=n[e.parentId];if(r){var i=r._combo.nodeIds||[],o=r._combo.linkIds;i.indexOf(t)<0&&o.indexOf(t)<0&&(a[t]=e)}else a[t]=e}}));Object.keys(n).forEach((function(e){var t=n[e];if(t._combo&&("node"===t.type||"link"===t.type)){var a=t._offsets;delete t._offsets;if("node"===t.type){t._combo.nodeIds.forEach((function(e,n){i[e]={parentId:t.id,_offset:a[n]}}));if(!("g"in t._combo)){t._combo.g=void 0;if(t.g&&t.g.length){var u=t.g[0];u.t&&A(u.t)&&(t._combo.g=u.p)}}if(!(t.oc&&"w"in t.oc)){o.push(e);t.oc=t.oc||{};t.oc.w=0}}t._combo.linkIds.forEach((function(e){i[e]={parentId:t.id}}));var s="node"===t.type?y():b();re(s,t._combo);t._combo=s;r.push(t)}}));e.items=r.filter((function(e){if(a[e.id]||"link"===e.type&&(a[e.id1]||a[e.id2])){a[e.id]=e;return!1}i[e.id]&&re(e,i[e.id]);return!0}));R(t,{comboIdsToLayout:o,itemsToMerge:a})}function ve(e,t){function n(e){return 0===e.indexOf(vo)}var r={},i=[];e.combos.nodes.forEach((function(t){var n=t.nodes.map((function(n){var r=re({parentId:t.id,_offset:{x:n.x||0,y:n.y||0}},n);e.items.push(r);return n.id})),o=y();o.nodeIds=n;r[t.id]={type:"node",_combo:o,oc:{w:0}};i.push(t.id)}));e.items.forEach((function(e){if("node"===e.type&&r[e.id]){re(e,r[e.id]);e._combo.g=void 0;if(e.g&&e.g.length>0){var t=e.g[0];t.t&&A(t.t)&&(e._combo.g=t.p)}}"link"===e.type&&n(e.id)&&re(e,{_combo:{linkIds:[]}})}));R(t,{comboIdsToLayout:i,itemsToMerge:{}})}function pe(e,t,n){var r=W({animate:!1});t&&t.comboIdsToLayout.forEach((function(e){r.layoutCombo(e)}));var i=e.combos;i&&i.links&&i.links.length?J(r,i.links):t&&J(r,H(t.itemsToMerge));r.applyUpdates(n)}function ge(e,t){u=0;if(e){var n=e.combos;n&&(n.links&&n.links.length||n.nodes&&n.nodes.length)?ve(e,t):he(e,t)}else R(t)}function ye(e){var t=W({animate:!1});e.forEach((function(e){t.setComboMinimumSize(e)}));t.applyUpdates()}function be(e,t,n){Ie(e,!0,t,n)}function xe(e,t,n){Ie(e,!1,t,n)}function we(t){var n=e.privateGetItem(t);return!!(n&&n._combo&&"node"===n.type&&n._combo.open)}function Ae(e,t,i){var o=D(t,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});o.arrange=o.name;if(o.resize||"none"!==o.name){var a=Y(e).filter((function(e){return B(e,"node")})),u=W(o);P(u,a,o);n.fire("prechange",{type:"arrange combo"});r.trigger("prechange","arrange combo");u.applyUpdates(i)}else R(i)}function Me(e,t,i,o,a){var u=D(t.arrange,{animate:!0,time:300,name:"lens",resize:!0,easing:"cubic",adapt:!0});u.arrange=u.name;var s=W(u);if(u.resize||"none"!==u.name){var l=Y(e).filter((function(e){return B(e,"node")}));P(s,l,u)}n.fire("prechange",{type:"arrange combo"});r.trigger("prechange","arrange combo");s.adjustTopLevelLayout(t.layout,i,r,(function(e){o(e);s.applyUpdates(a)}))}function Ie(i,o,a,u){if(!t||!t.api.isShown()){var s=Y(i),l=D(a,{animate:!0,time:300,easing:"cubic",adapt:!0,updateGlyph:!1}),f=e.privateGetMaxLabelLength(),c=o?"open":"close",d=W(l),h=Ce(s,o);if(h.length){h.sort((function(e,t){return F(e.id)-F(t.id)})).forEach((function(e){var t=ke(e,o,f);d.setNodeComboSubProperty(e.id,"open",o);d.setNodeComboSubProperty(e.id,"e",o?1:t.sizeRatio);d.adjustForNewComboSize(e.id,t.sizeDiff,l.adapt)}));n.fire("prechange",{type:c});r.trigger("prechange",c);d.applyUpdates((function(){l.animate&&o||e.applyRevealedLinkOffsets(h);e.privateSetAllItemsInComboDirty(s);R(u)}),(function(){l.animate&&o&&e.applyRevealedLinkOffsets(h)}))}else R(u)}}function Ee(t){var n=e.privateGetItem(t);if(n)if("node"===n.type&&n._combo)Ie(t,!n._combo.open);else if(n.parentId){var r=e.privateGetItem(n.parentId);r&&"node"===r.type&&r._combo&&Ie(r.id,!1)}}function Ce(t,n){return e.privateGetItem(t).filter((function(e){return e&&"node"===e.type&&e._combo&&e._combo.open===!n}))}function ke(t,n,r){var i=e.privateGetCanvas(),o={include:!1,maxLength:r},a=wd(t,i,o,!0).radius,u=wd(t,i,o,!1).radius;return{sizeDiff:n?a-u:u-a,sizeRatio:0===a?1:u/a}}function Se(e,t){e.combos=t.combos;e.shown={nodes:t.shown.nodes,links:t.shown.links};e.hidden={nodes:t.hidden.nodes,links:t.hidden.links}}function Le(e,t){e.foreground={nodes:t.foreground.nodes,links:t.foreground.links};e.background={nodes:t.background.nodes,links:t.background.links}}var Te={api:{combine:k,combineNodes:k,uncombine:S,info:T,isCombo:Z,find:G,transfer:j,open:be,close:xe,isOpen:we,arrange:Ae,reveal:function(t){return e.privateReveal(t)}},internalUse:{hide:function(e,t){return Te.internalUse.filter([],e,null,t).toHide},show:function(e){return Te.internalUse.filter(e,[],null,{updateGlyph:!0}).toShow},filter:function(e,t,n,r){var i=fe(e,t,n);r.updateGlyph&&$(i.combos.nodes.map((function(e){return{id:e.id,count:e.nodes.length}})));n&&Se(n,i);return i},foreground:function(e,t,n,r){var i=ce(e,t,n,!!r.foregroundOpenCombos);Le(n,i);return i},preMerge:Q,preDelete:_,serialize:de,preLoadUp:ge,postLoadUp:pe,dblclick:Ee,ensureMinimumOpenComboSize:ye,arrangeAndLayout:Me,afterComboResize:l()}};return Te}var tg=null,ng="t",rg="bu",ig=/^do([0-9]|[1-9]\d+)$/,og=/^a(1|2)$/,ag=/^(?:n|s|w|e|ne|nw|se|sw|\d|[1-9]\d|[1-2]\d\d|3[0-5]\d|(\d|[1-9]\d|[1-2]\d\d|3[0-5]\d)-(\d+))$/,ug=/^ha([0-9])$/,sg=/^([0-9]|[1-9]\d+)-t(1|2)$/,lg=/^t(1|2)$/,fg=/^(n|s|w|e|ne|nw|se|sw)-resize$/;function cg(e){return"node"===e.type&&!(e.u||e.c||e.fi)}function dg(e){return"link"===e.type||cg(e)}function hg(e,t){if(t===ng)return{subId:t,type:"label"};if(t===rg)return{subId:t,type:"bubble"};var n="node"===e.type&&e.donut&&ig.exec(t);if(n){return{subId:t,index:f=parseInt(n[1],10),type:"donut"}}if("link"===e.type&&(e.a1||e.a2)&&og.test(t))return{subId:t,type:"arrowhead"};if(e.g&&(n=ag.exec(t))){for(var r=n[1],i=n[2],o=parseInt(t,10),a=null!=r?parseInt(r,10):o,u=null!=i?parseInt(i,10):tg,s=void 0,l=e.g.length,f=0;f<l;f++){var c=e.g&&e.g[f];if(c&&dg(e)&&o===f)return{subId:t,index:l-1-f,type:"glyph"};if(c&&(u===tg||c.r===u)&&(c.p===t||c.p===a))return{subId:t,index:f,type:"glyph"}}return{subId:t,index:s,type:"glyph"}}if("node"===e.type&&ug.exec(t))return{subId:t,type:"halo"};if(n="link"===e.type&&!(!e.t1&&!e.t2)&&sg.exec(t)){var d=e,h=n[1],v=n[2],p=parseInt(h,10);if(1===(g=parseInt(v,10))&&d.t1&&"object"==typeof d.t1&&d.t1.g){return{subId:t,linkEnd:"t1",index:f=(l=d.t1.g.length)-1-p,type:"glyph"}}if(2===g&&d.t2&&"object"==typeof d.t2&&d.t2.g){return{subId:t,linkEnd:"t2",index:f=(l=d.t2.g.length)-1-p,type:"glyph"}}}if(n="link"===e.type&&!(!e.t1&&!e.t2)&&lg.exec(t)){var g;v=n[1];if(1===(g=parseInt(v,10)))return{subId:t,linkEnd:"t1",type:"label"};if(2===g)return{subId:t,linkEnd:"t2",type:"label"}}return"node"===e.type&&fg.test(t)?{subId:t,type:"resize"}:{subId:void 0,type:void 0}}function vg(e,t){var n=t.events,r=t.legacyEvents,i=t.controller,o=i.getActiveDragger,a=i.stopDrag,u=i.getFakeDragger,s=i.setFakeDragger,l=Hg(e,t);n.fire("context-menu",l);var f=u();f&&e.validDownEvent&&!o()&&2!==e.button&&a(!1,f);s(null);r.trigger("contextmenu",l.id,e.x,e.y,l.subItem.subId||null);return l.defaultPrevented}function pg(e,t){var n=e.id,r=e.button,i=e.pointerType,o=t.events,a=t.model,u=t.controller,s=t.legacyEvents,l=t.overlays,f=Hg(e,t);o.fire("pointer-down",f);var c=f.id,d=f.subItem;("mouse"===i?s.trigger("mousedown",c,e.x,e.y,r,d.subId||null):s.trigger("touchdown",c,e.x,e.y,d.subId||null))||f.defaultPrevented;var h=null;if(0===r&&!u.lock()){h=a.createDragger(t,u.getCanvasContext(),n,e,f.subItem,{},u.inMapMode());n&&!h&&(h=l.createDragger(n,e))}if(u.lock()){u.stopDrag(!1,h);h=null}"mouse"===e.pointerType&&2!==r&&s.trigger("click",c,e.x,e.y,e.button,d.subId||null);u.setFakeDragger(h);s.suppress(!1)}function gg(e,t,n){var r=t.selection,i=n.modifierKeys,o=i.consistentCtrl,a=i.shift,u=null===e,s=e&&r().has(e);(u&&r().getSelections().length>1||!s||o)&&r().set(e,o,a)}function mg(e,t){var n=t.events,r=Hg(e,t);n.fire("pointer-up",r)}var yg={"Arrow-ne.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAARVBMVEUAAAAAruoAruoAruoArukArOsAre8AruoArusAr+0Ap+IArusAruoAruoAr+oAruoAr+oArusArusAreoAruoAruoArurGDVJ2AAAAFnRSTlMA7PlILTQSzUApCPry5LWHbmZYV56dONEurAAAAHFJREFUKM+90DkOgDAMRFGzZQOyQu5/VCRiVwzp4LdPsqyhj3MpG6vedBprreOu/RFiNg6pZKijhToaqaOBgK6MJ8BlY/TAhsppbNt9eYc2zG0NbPyzwtbUQmM1yEQLMtGETHIPA81sMKXFsLJhtfRjF/wgC8yO94CNAAAAAElFTkSuQmCC","Arrow-nw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAPFBMVEUAAAAAruoAresArusAruoAqvEArusAresArusAp+IArekAruoAr+oAruoAr+oAruoAruoAr+oAresArurF+043AAAAE3RSTlMA7jL5SBJYQSwI8+TOzLWeh29nYHqaQgAAAHNJREFUKM+9z8kKwDAIRdHXIVOnDP7/v7Yk2QRU6KK9Sw+I4peMd7aEYRSczSle574Q0bJiyFGPMVjFkBVDUgxRMVwdt5nBk3oTo3vdufHafp8nTk2/hVXfjFdXTVBbTdDymKgBUBRv1St6GIgqG+ANPuwGG+MKJZ7NkmMAAAAASUVORK5CYII=","Arrow-se.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAP1BMVEUAAAAAr+oAruoAruoAruoAruoAsOkAr+sAreoAr+sAruoAp+IAr+sAruoAruoAruoAruoAruoAreoA//8Arur2XPH+AAAAFHRSTlMAL/nsSOsSaldAKgjx48/MtJ2GARaOxv8AAAB2SURBVCjPvcs5EoQwEENRYYxXGDbd/6yzdYCrmiaCH+qVcGehGPYaunMjT7UMNLS71r7RaqiPx2/fqHcJiooxQ1ExFmj6Nwao+jO3Q9Pxa5wARaUZio6Ci4LeCa6GcTOM0TAmw5gVc9O8rFtMuTZWP0sJOx7oDS3DCuS8EfUUAAAAAElFTkSuQmCC","Arrow-sw.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAAQlBMVEUAAAAArusAruoArukAruoAruoArusAsvEAruoArusArusAr+0AruoAruoAr+oAruoAruoAr+oArusAn98As+YAruriSELzAAAAFXRSTlMA+Ugt7usyEc1XQCny5LWeh25mCArMFThRAAAAc0lEQVQoz73JSQ6EMAwEQAdmyMYO/f+vIpClFiLxDepa8qXW16/7BV8/gPs8/LNxrajNOFmb+kl0ujxK0OVRhi6PPM7l3blreTcDzu2LJwGKR6Nez6NJ0zWFnGHsAmMjjE0wdk9xmacxDI5b4HOK6ybvOgBebguIlLvi1QAAAABJRU5ErkJggg==","Arrow.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAAflBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////9wcHCRkpX9/f3S09TU1NWztLaSkpKGhoaPj492dnb39/empqahoaGJiYmDg4NycnLt7e3j4+Pc3NzExMS6urqysrOXl5eLi4t8fHz7+/vx8fHg4OCrq6vo6OjGxsZuZdNVAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAPxJREFUSMft1rlSw0AQhGEZMMe21rJ1opV1IWzD+78gVaNIimaagnKgP9vgizqYjbb+ptdHbfuF28X61vCQaCrj5zX0TtMhfrgv6Fl49CSsBxaiY2FIKJgC+ZmEmBoSIi1IiNOnGb5DqjwJMbAQHQtDwkGZ0wI/MCdzUlDmpKDMSUGZUw0zLBpYiI6FIaGgzKmDJ8zlwFRVVVneem+AUri4OT0Ms+ytcGozgam3wbRxHaTWBMfCuSIXWBrgeJNXKTAv9PDqpBbSt/nM+VpgZoauh/Rlhhdx49kM3Yi6b5hTfm39nX8e/gcOR03xCr7F6l6iRfsnbbtoa+u3/QB6AlluQsKWJgAAAABJRU5ErkJggg==","Hand.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAABACAMAAAB4KUSAAAAArlBMVEUAAACVlZWRkpWSkpaQkpWRk5WQkpWSkpWQkpaPj4////+RkpVwcHD9/f3S09TU1NWztLbKysqzs7Px8fHv7+/u7u7p6emWlpZzc3PS0tKDg4P5+fnCwsKioqJ3d3f19fXm5ubc3NzY2Ni5ubm2trapqambm5uRkZGLi4v8/Pzz8/Pr6+vi4uLGxsa8vLyvr6+Ojo6AgIB4eHh0dHTo6Oiurq6lpqd9fX2Hh4d7e3sYjczTAAAACnRSTlMAGLS4bEXLqI8QHTDIvAAAAWNJREFUSMft1dduwjAYhmE66HA+QzMgk+zF3tDe/43VQqlQzIGdVEgc5JV+Owd5pESy5F7Xffp4ka1fc0+KfDwcDGU6KW88pESmgfLcQdbhmB8PLaBtAbDshtDwEh+lVsJPPKMBtHcAHJe4DoCdLQ3HezimNWFPE8t0sB/LwgzKlAwvcEimCjJZaGLJ1nU1SxSBJFSgslWrRgVQhC0h/HELWC7CDcwWMCJkAYs2h+wrR8DdYLhKhkVzSBMLrOZQBUqzgn8TGxJwi5SS+AJriWAAuGxLG0Md0NlGi6aQOjhd3rM5OBdAYle/Rzm4gC84chn8OblNxUYA3W9sprdwjUwASbiHdgtNeCJIPCDmHf1BJIQ0x3nGQR0IhJDMtshpHcZwiBiSCPDqcIVcBpIU1nJkXIvOWElBOgHXNhDBSqa7mjPn0rcVnenX3Ee/kR8Xal8yKRz8VKR779Xqv8r21Ovq+m+/Ii1ihjYVGpMAAAAASUVORK5CYII=","Nav-Control-Head.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAABoCAMAAAAqwkWTAAABDlBMVEUAAACRkpWWlpqRk5WRkpWRkpWRkpWRkpWRkpWOjpSRkpWRkpWRkZORkpWRkpWRkpWRk5WRkZeRkpWRkpWSkpWRkpWRkZaRkZaRkpWRkpWRkpWQkZWRkpWRkpSRkpX///8ArurQ0dORkpX8/v8Jsev7+/y/6/rY2NqfoKLq6usiue3f4OHg9f1TyfH4/f7Hx8nT1NWurrHp+f2UlZfw8fFNxvHz8/T29vfm5ufi4+S8vb6qq62Wl5qW3vfu7u+3t7nl9/2s5fiT3faJ2vVizfIpu+2am57y+/4RtOzE7fpr0fPc3N2xsbSnqKqD2PUZt+y36fmN2/bCwsSkpad+1vRGxfCk4/hy0/Q8we/Kysxfm/hGAAAAH3RSTlMA+QdRsCLmzbkMj+wZ8dWdeBRpWklCNCzcwXI8h35gX/9DngAABnpJREFUaN61mmlD2kAQhjfcyOl91oE3pAnFChTKXdFK8a7Wq/r//0g1tZiwTDZYeb7y4WF2J7Ozk4gpCC9tZGLr0bVEKrIWXQ/NbW/Oi/cmsLwV1SCTCC2svp9lfiFmS6xqJ3/WLu41mvViq2Q+9i96eCKSWQq8RyzBkAbUuuW2QTINs2M9u+ZW/jeYDwmg1y8ZxFPPdwFEg/+j2dKAqmmQir2yBaQX37iC8WdNv0i+0M0bYO1NUQUjqHXq5J9SFwiFp9WEQ0Cf0fAqC9qH6dZvUYNVoqkxyjVEpwgqkAHKbArsnpzs8mnRRSroe9miGLaJ4+Ayl7u84rOiDMz5W77NFKpN4viVs/nssVNDxOJCzZKGa93TY/ONNzUuEFWX220NeVJ4bL4Ti1HFmiolFlAzlR61qY+ItymIWkntUZv0DtaSgmdZwxmxHL461KY+onxGrKRQ8e1R71MswBXrCMpKj3/TBeYYUQh9X55CwZepMcTkGrEBy/Dj+bS/88mXqYRUeNIGaTX+7Ll3eoicpgPeVEZU3qZA2uNB/XLs8rhMx0d86nWRlURZVInlwO1xm66IZa+mjS9e2Gvh6N7tcZsOiKeMkJRx18SzU3B63KbCPvEY1ljmLdsZx3M78kimQ+/THWuufIih4t3kfH9Kh8HRWIp8fkqFb+RNF4vO1JYCklU7E7LraEdXNixIu3YoT7PiwrFLqxgaNCvOEB2J5lCmmaFbWPlXFBKo0+woj6p4EF2aIXUkAlIqzITuSzrEtVqTZkn+pQ4tTSqn+v4uvYGjLyTTQILLOf3Xca7we5LKqBdbreKeMbkk3j2VqY8kYcG+UUfRGvd8zj1zJ/n3zvIvmEWDO7XkotTBxnNLgp4ueSYeAA0z76BSHC8/A65bNhGyk7vKeHKn5KSYH6M0ZvrE9eVNpOyj9ZrxuEWlvMTYNfpHjjMNkRQigwrjyTn3tZWfwJkrpt85ztTFshDraDOegWuYMJGWK7c/caYOFoRIoDHZ83XXebvPT6bpSm/O9Ig5EUeP88iJIFMiP6YzhEQYltpDZp7D8GNqY12swlJ7mnmWIvkwFREVm7gYPXCMx145fu140/2okcSaWB49rwesh1q8yCTG5Gz5GoiIIM7pL19ZD5V4UYU8TN9HpUFzHBIPTDftWyRvwc+RKCE2R+f46WvI46W+PcXS0c+c9I/riIgV3IyqvGxS79GZh+fuNevSzufoY4Ez1XlRi/f8+DL6o4iKJIakNOm8qOHDQyXEhNBgqE0lNhd0Hx6qICNEGkVSmppsYfDjoWtkhQjBpMmmE3VIpiugQ8ZD5wgKsYUyTTZdOi4qhqneoROnR26DttEnxnToXLyKcuHuOI8BBIRdvhnTwNUDVRQeumQ81P57c0mgzphuyYZZvUqD3Dy4PPJ9IoQKTTQVdsb7R9OhaenSNILxUBVL9tBRnjWdXD57DuSOvN42bUtp1BRLbdCD5DFqmj26C2OoS8364eB2h5sdGDoxnJye3ss/lv5dLtNo0yzpIPtvftahGWL0kBQ2SfQMmh0mYq9zE5Nmx/nr7GRxlrflOlKjcXEgMsN06GDLOb+v0oxo1LR5IRwhFWk2XGPOPSE+J092bgeH0njr6vT0QBVQT0s6RfEISuTBQeH5fDohJ7sDu9PxHhP0x6fsQc+J3U5BPt13Xzrb316eNiJx4SaGsmLSaZskT66w6zlSXRTymHiPOAavHYvLY7PvNdiKCYksbgz+hYHT5PYc66ynBS0sZGJ8bT26dJlsj/rlRNPCtphAMsKXvBNnv+fyfGYD0s+RYd6HoVckCbnfu5I8zAaluXdiWQzrapON2lNBalVwZGA1edNUnjNoy4InhAuDN03hadcQFB4E1nGhjkntKfWwIDyJr8NS7ZPaYwIbQkEghKEi95SePLRFoSaDnsmb1B6jA21J+OED0DFYk8pTvEFkRfhjOYGbPc5k390HrKdSQ2xe+CW5jhr3LciX04ev7Lm6VwWyYho+MF+3KL9tWdsU0xGOAedTdSy6yX2to/4CCect39HkLSAWFm8hvhEBuqZBahqPQ2B9SbyVwEIE6HXauncwlSqAmGJzVKrFGACrY9aZjWk9VmtAKrMi/ptkNo1nWb/sfvPRbFeuqz0AWigYEO9DeCGUgM3Quqie96vdG6sHm/RcMC7eldXtrVBawyupaCYbTIrZEEiGV5aDi0ubq+F5MRV/AMrHP3wtA6vJAAAAAElFTkSuQmCC",
"Nav-Control-Short-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAACACAMAAACMX59YAAABU1BMVEUAAACOjpiRkpWRkpWSkpWRkpWRkpWQkJWRkpWRkpWRkpWRkpWRkpWRkpWQkpWRk5SRkZWQkZWRk5WTk5WOjo6RkpWRkpWRkpWRkpWRkpWRkpWQkJWRkpaRkZaRkpWRkpWRkpWRkpWRkpWRk5WRkpWRkpWRkpWRkZWOjpSSk5aRkpWRkpWRk5WRkpWRk5WRkpWRkZWRkZWQkpT///+RkpUAruoiue2Q3Pas5fjFxceVlpj6+vqkpacRs+yhoqT9/v78/Pzx8fLk5OWur7Gen6H8/f7q6+u+v8D39/je3+DW19jOzs+7vL6nqKqcnaCXmJvR0dLIycq4ubu2triwsbOrq66am51+1vVo0PPo6OnCw8Wys7XS8fux5/nt7e4qvO4LsuvLzM3w+/7o+P3Y8/zH7vu56fma3/f09PROx/Ezv+4Zt+wEsOvg4OHa29yX3vY9we9ZHrf1AAAAM3RSTlMABfp2HfA8IWdV6+Cij09JQjArGArm2dLFYFo0JRP057CpmG7Xy5WADvb2vLZ8cKeJgoGIgHZSAAADoElEQVRo3u2Y2VfaQBSHQyCCCIgiitRq1bZ23+anLSFlF1BZBBG3Vu2+L///U0NJThNT7kx8as/J9wTk3C+ZO3NnbpD+aXyBYDDou2xwLHpjETry3Ep6xnX41bUl6LRyuQp0lGjA3d39i4DWKWWZTvZoZx+QH7l4ikAKKB8xC6ddYHZaNH5qCZUtdoEjDbcnBeMV9OrMQbYBWcgQDGNvk/2NDG6PCeTvBk6MeAc1TFzlCh4jl7XEvH5t+ZIvI8KdgDsoWUIOvq4fWr4WVVzhCKLYswS8WNd5b0vDNTp+RkGV/eHZQPDU8kNdRZAUpLHPKAHr4j4piGCXFmwhRQomUKUFWVWmauIW1DwtYBqmCME0NDbk6dmGzpeB4Png09mBYT5BjBCMYd+8tQPjQRqYFxEcOgWfRARTaLLffHAKDoZX9jBOCBLoG6v+4MtznfNB5Png08ahUWFNkBWp4CM9C/k2yIK8h21acIRZicKPLi3IYIWuZqh1SrBZQVwiuYcOJdg2RkCthPbHC/vBS0sl5DAvcbhm21EO9QVk2SGPMcc9KYOKraLfvrXVsnxF4jIOYyodlFT4JQH8MJ/BzpaKm5IkaGhk2QUKGZjxfNKLaG3bT5fvOch+SZjpFJDrnDKD4o4GzI5JbpifA9DqHWcyxycVABMPXHc68UgSBuFrMSKcIBDz64wvSP8zMwtXpgKXbRSvhpYnMGwUb066l0wvywDUSlNrQSe8dstVeCIC4GS7mGc6hepgISmrLp5iMgz1uGirxB6QEu5WQ0Cv6CjGCpKCreYq8Io5qZcRpk5m/o5S2MOSwCiCinl/p6GMu3zBXXTZKOoVhPgD6NfZSL5D4fWqc9hlBGWs8Q6WVoESlLBEr6cVZBhJDnFun0fSQZQ+nft5WlDCDbIIUGY0Wdyhq6DGhrz7uWHjs3lI95GgDiUzh2/O1y/ywszigojg/bqDHyKCVXMIb746BO+GV1rkEGLosSEvP2/YOPtgJlH2kd12hdFUcZ186VNQpAU7iHBapF1asI80p5qbjKKIxRlS4EviGyVoYEWieQBtk0ihKgc5At8sOmwUhSai/MYCKLHRb98CJ9wTtKujptBsNGkeov23ROYzwLgkgi8CZAqOCSxDTkuC3Jehbdn3kZ02ki4avbHrgPbq1Ex+qdYGlhOSC3yrSQD9cqNW6zZVAKm4+7/ClsMwuB4lsk+xMBkKhebjCcnDw8PDw8PDw8PDw+My/AIFurvICRtjawAAAABJRU5ErkJggg==","Nav-Control-Zoom.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAEgCAMAAAAzNIUCAAABQVBMVEUAAACQkpWRkZaTk5aRkpWRkpWSkpWRkpWQkJWRkpWRkpWTk5WRkpWRkpWIiJmQkJaSkpaRkpWQkpSRkpWRkpWRkpWSkpSRkpWRkpWRkpWRkpWSkpaRk5WRkZGRkpWRkpWRk5WQkZWRk5WRk5aRk5SRkZX///+RkpWxsrTHx8kArurQ0dP9/f4iue36+vr29/fY2drd3t/4+Pjx8fLo6OmUlZj8/PyQ3Pbl5ues5fj09PSrrK7r6+zi4+Tb3N3U1NbNzc+cnZ8Rs+y3t7mgoaTu7u/k5OXa29zW1tjCw8S7vL6lpajf4OHS09WZmpyXmJvv7/Ds7e3KyszExcawsLOjpKaB1/WoqKuen6EqvO6/wMLX8vxoz/NPyPEKsuvw+/626Pl31PRq0PMZt+zO7/uj4veb3/eX3vaP2/aO2/ZkzvKuoX/yAAAAJnRSTlMAmGYM/fBd+iHZdRX26QUvt6KIgFVMHODIj0M8KgfFr2w00Kc6nNlHBgsAAAT9SURBVHja7ZxpV9pAFIbTyiII7mvVql3mRTMGAsRSwYWCoqC4r612X///D+hwIKfR6A04nlNp5/kky33IZO5cvORMtAdNd6eg+67BQ2OjEQiCzx4FOloO7xqIQpAvFk8h8I91tvbp4QhQ2c8YTGCkV7NAsL+Foxh+ChymmYO1AhDqaTa+J4pTk10jU0HkSXPxM34cxpkLo4zgUDPxnVEUOLuJA0ReeMdPjiLG2c2cY6TLUzCAI8MR8/694wE/RJ/nBESw7gg5vpz75Hi4a/lmPARjKDgC3s4JPjiemMUUHd/hR4794XVN8MrxRNzy0SkZQJZRAlbAACnog04LtvCUFIwgRwsMKzhJnQKfxWkBOwK1JCZwxOq8OpsXfK4J3swLzo4b5hiofH6BrP3RLhoHUkaAEIzbgnduwYUteEwtZFTqb/vmFhzb8zhIFTJUG1n/8fMbwWUt8rL21/y7hforJxjXCPxYpGeB74BckL1I0II0QhpFGAVaMItHdDnyWXFKwE/hURh7sU8JEvYIiEzYcZzGL9fqgVEUaeTBlH0W7IS6cKyOTTzr9izKfujOmvTW8cBEcEbzZNCHBLuRjIWw1gRhQL8p3rQcU0gbfCgnr4cvHMAZTxOIIL/CmZPlIoJhrWkmRoHi/p4dnVqtAKFxrRUCfgD5w82Dg83YKQTPJ7XWeIRKHg2qsRNRRloWzLKUuSoo7YpKeDeBjRLICbghJ0it6ImkhICv6Lq+JSEwdEFCZggJIcjICIyl5TRv8zxQAiV4EAJ7McktZ+mCIl3SpIuqZFlv9zxQAiW4H0EqF5cSrIvlnJIQLOiCZVlB6S8OQbCWXmz3PFACJVA90wPpmZJmYl31TEqgBKpnEgK+LQSmzBDWtvUNuZ5pIc7bPA+UQAnuqWfak+uZMu3fMy0JwZqMgKueSQn+EYFsyyO+nUuG7HJelxDEZQsK3xCCtMw5iJuJjGp5lEAJ7qXlMXMyAl5refZkC4op2zMtyZyDnOi5DNXyKIES3INgcc1gkv3CdlxCkNQFW7ICU2YIpuxlIr6Xjrd7HiiBEtyPgMsJdld0c0GmZ6r9pppp856ptKEuEymBEtyHwFg39/73nimty14mSi6qnkkJlOCf6JmkKxJbFoJdGQHPravLRH9fwJN3T+WD5c1sHoBVjO1nWxf0YQeCnWrVQo2+yZbCO/p9wMnsUrw2ilTpPA+MDLYQ3xMCCs4ts7x0BDzvaDZ+KIJKhl2F6zt4Ntxc/GAQZYO52K1gpCnDk2B9Bl0kswg1MYrhKDbZzSQrmPIW9CLGbmOxioDnABx7NN1sIOo1iKdYZQQnmKbjZ1A1KIGJEVowhnNGwU8xTgpCSDOSTfRT8V3Y4bTAY9f4E2QZTRx+SvAY5cZYj8/mr3D2s2GokvuVw3YW/phz8bX+ShGdpOCg/rYLt+CXvW99ghBM27N47BZ8r7+SxzC1ku2FwD/NX+NjfXoWLN8kVYpQZDQ5esdztx+LtEBHn8diXqEFh3jseQMEihSCXV63YMjQS+G5RjNAHkLK8vV4CDqi2HbFue9jQaaClbtNsI9ol+bJS+R3b6uIviHNm+5e5HM3pwDCzX2z9sJyZ0OyDN+A1hzdL4Hs1dLGN/KIBLSmCUSBWMn4s+n7CBid0Fqga8wPWCfl/dXV2UIRQKjlf1E6pkeDaOCfIs4+5Xgx3d/fPxCY0BQ0vwHPu0gIqkZhFgAAAABJRU5ErkJggg==","Slider.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAYBAMAAAB+X3LOAAAAIVBMVEUAAACRk5aRkZSSk5OWlpaSkpL5+v+RkpW7vMC1tbmhoqXGrO6IAAAABnRSTlMAaFgoEQ5LYgUfAAAANElEQVQoz2PADpgFMYADAwNjOQYwAIl2oAGwaEUaGlg+3EXLZ6KBcgNcYcashAECGAYDAADj/n4pps+kzwAAAABJRU5ErkJggg==","TBFit.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh4eHh2dnZ9fX14eHh4eHh4eHh4eHh4eHh4eHhwcHB4eHhwcHB4eHh4eHhycnJ4eHh3d3dxcXF4eHh3d3d3d3d3d3dubm5xcXF5eXl4eHhxcXE+JRc1AAAAHHRSTlMA9qd7GAewklkjEvLn28fArJqNbWZkUi9QOjlR6dZl8gAAAVBJREFUSMfFVtuWgyAMXC4V1LZar90t/P9vbozIulVq56l58sBMyCSQ+PURO422Vaq14+kddGFr4YKJ2hYH8FwGdOTI/JV3M6MulWwaWV1mikmeMpTTftbrZUH32XRgOezjFbsL6MgxE0XtpUbSRpbvyMpoQ24TNuFV+mi5syjuKXF3sXE2kBPCp+xB2/+UF2V0kYyqXGfXkN7XFSXlZpUIEpAsaIS4P4ic6AdmVpkqhBM6VOP2DLyFCmgCLSpsVKCv/pngrzqqsGGtdq7nj5+z3xL8+Zs/eufqEAaVhb103u8QyDo+nTIzhzfSfebwfYrgWQjd9nGRUHH4aQILqRYRLSWMw08bC6Hkt0vZm84fWtc4p2ACHBIsGk4rXDj0asCXD77e6ANCnihD0CYAtxm0kQGt8hFbJd6M8XZ/PFAcmUJHFjoUwbELDnbw1+ET9gtaEjv2MjNk4gAAAABJRU5ErkJggg==","TBNext.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAWlBMVEUAAAB4eHh4eHh1dXV4eHh5eXl3d3d4eHh0dHR4eHh7e3t0dHR4eHh4eHhxcXF4eHhxcXF4eHhycnJvb294eHh3d3dwcHB3d3d1dXV4eHh3d3d5eXl4eHhxcXGK2btVAAAAHHRSTlMA9pEkpgZ7sGxZGBOq8u/b2sC8lWRSRC8PfFBRuUo9rwAAAWBJREFUSMfFVll2gzAMxAvGZklKA4Ek9v2vWVEQslna6vUj8zXBM44lC4nsLcgHZ42xbsj/oh5dLfwCUbvxF7lCNXnUD/JKzqprq6XU7XW2yOpM3zfTetGV+KDsiukPm/5Y//jeDtXokZPFHKVGw0KhDsIqYEHvE6Zpoy3M5Dh4KJ7ZCZ5it1kPm5B+hxcsJ5FXzbqFzRA2TUgTZ1dCvAsN94wYASKXUSIgAIWyS8pI4ulnHdlD+KhihpBRpkbhRUmG8JkToxsEEVaiowhABrgRS6JwdKIuMQQbMUTnfT2zXHhfpoZwJ7aeCTIzn3CAes42houK2AKo9gFDaLcGSFDEZrQYhKWEkQESRGwtT4t1J/eGcCO23oRhG9hHYgfNTiv74rilwS4+dnlzXyDmKyoUtwmw2wy3kTFa5YtaZdqMH+dzQPPb/R7meKB4gOGOrH8PRYLS27GrFXOwMz8d3oEvPJs941PvdQ4AAAAASUVORK5CYII=","TBPause.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAS1BMVEUAAAB4eHh4eHh4eHh4eHh4eHh4eHh3d3d4eHh7e3t5eXmBgYF4eHh4eHh4eHh3d3d4eHh3d3d5eXl1dXV4eHh4eHh4eHhxcXF4eHj1iuhDAAAAF3RSTlMA+ad78rBZUSMYkgjArI1tZC8UD9valLlU9lYAAAEtSURBVEjHxJXbkoQgDERJuCiOd9fd/v8v3R01W9SMgnmaPFnQB+gQovlIPKYwWDuE6XFHvYSOcITrwlKQ10xAGsR1Rj43u3xtue+5XXekma/0lXvO+zHKQBw9AXDVud5uy4lamG1Te5YaBuDrE1seAL8n7Km311vzyaCrcubsyxCAF312ev5f4mcLk37LAdLsNoA3OcB4oEkSQaA6B4hEggW/Bsx3kqnlj44lIBJIKjGIgytAXITjswPGMjAC3VEUBMQyEAG3F8gErKYMmC9gEgvtHaAVEwPAdwAGBrn2/g7QA1YNqI+kNq1Oq/ritKWhLj51eWsfkPqJapuAus3oG5m+Veqbsb7dl38ovxODVyiUV1mISlEEUimKwCpFCqtdzIqdBbliJ7npQH8AADUuN1z9SxsaAAAAAElFTkSuQmCC","TBPlay.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh4eHiBgYF4eHh0dHR4eHh4eHh4eHh3d3d4eHh3d3d4eHh3d3dxcXFxcXFxcXFxcXFxcXFwcHBwcHBwcHBycnJzc3N0dHRxcXF4eHhzyzi7AAAAHnRSTlMA9ad7F69ZIwiPEJPbwG1kUlAv7+HQu6OMdFxGMR+YuEezAAABRUlEQVRIx8VW2baDIAyUXaQu9e6b/v9f3rGWggJtc/rQPHlgBpghJFZPiXrUnRCdHut70I1WbD4HU7q5ATfcoz2Hmytw6VbUoeXW8vawUqws4Qd2OkZ/AchenYaGPF4sc07uN10oImcNx4QyGVkKEzw1bMGL8tY8M8iOJXFHliw2YBHgiwxMb5TLsMT7b+FULLbDQe/5c5o+/jIMKLeREeAbT0B8pgkByGxih1wVEaaXr8RGFznVsOiA0xqv3/u0AchvrIMCEHy8/SQqdPjsEwJia1h/WbaGpzJH2Bom4cyqbEQ+VznCzjBk++gltCVCbFjrRXQwrEwIhsH8zl+7LROCYRbpQyaQj0QWTbaVfHHU1CAnHzm9qQ+I9kQBoRYBepmhFzJ6qaQXY3q5v91QZoR4uGV5gCU1RXrbTRs71w3x1+EZ8Q9bFUNUrCre7AAAAABJRU5ErkJggg==","TBPlayExtend.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAYFBMVEUAAAB4eHh4eHh4eHh6enp4eHh4eHh3d3d4eHh8fHx1dXVycnJ4eHh5eXl4eHh4eHh4eHh4eHh4eHh4eHh4eHhxcXFxcXFycnJvb292dnZ4eHhvb29vb29ycnJxcXF4eHh7Kc98AAAAHnRSTlMA9qd7F7CSUSMHbRD1WPLbwKyNZFrv2ryVMC8nRUR/XsosAAABT0lEQVRIx8VWV3bEIAxcinsvKXayzP1vGROw2WQBW1+rLz+YwdJISNxeYsXSlEKUzVJcQVfzwGCtHubqBJ5zhj/GeB6By9Sgup6PI+87Q0llCJ+1ej+ZDoCcEgagzfx44TtOppoifNJwAEnuCSsBwJ8F03gR/jX3LNZZMLj66bAMgAcf3JZtwJ/SOdA+ypECifdo9W0/EiB9EAJgud7e7B/h7euAwEnINd1PUO/V7oRTqmJgMkRQH4UJcwPtlTjrCIIE9XlEMdvVAZgiBGWkmoDBFgUDZIxgpJJAbbxbgO4WI1ipOmD9XWyAPkqwUvVAY7J5CKb8ZqXiQLmnfYwSrFQjIMgEskvkoMmyXkzc3SWOXhr04qOXN/0CnV9RBzlvAndPEyC0GXIjo7dKejOmt/vzgYLNBHVkUYciceyeD/baDfamuvR0WM3TYS1ur7AfgEVDcxHQFLwAAAAASUVORK5CYII=","TBPrev.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAXVBMVEUAAAB4eHh4eHh4eHiBgYF3d3d4eHh4eHh3d3d4eHh6enpvb294eHhxcXF4eHhxcXF4eHh4eHhvb293d3dxcXF4eHhycnJ3d3dzc3N6enp4eHhycnJxcXF4eHhxcXFnXdd7AAAAHXRSTlMA9qeRCHuwWVEjFhDy79vZwKyVbWtkRC8mGXy8u51RKiIAAAFZSURBVEjHxVbbVoQwDLQt5S6CiMjq9P8/07JQkh6KGl92nmbptKczGxKeHoJsLkZrx2LO/qJuikFhhxqK5hd5pRUiKF39IK/Npup6bYzuu22Lqa/0Zbuu59MSHixTrgC0ZVp/Sx1Xm3WLTUWj/UJeJWzlfkGfA9P8oBh23ZF4qMpLc+p0WAkgrU8v1218xBuxI5CWx2G8X/bz3Z2Yd25YEN4Ay+fj2REjCUiio+3Ni3PE2CX0oVBQdMHs0zlH7LDpRaESi8jBq/PgjFwUOx2AiWJxKxgLmIBhv4MCForlDsYCFkBtBTIDHQvoDsYOdMAcLPQU0AbGDvTBxAhoCmgDsag8x1B3JgQUQCwqB/uvDfxKX0FGLL6S3LQ8VvkfJy8NefFReVNUxKLylr5AgleUJOImIG8z8kYmb5XUjG/Xc0DL2/0ZNj1Q4GGlI0s6FIVjVzjYhZ8Oj8A3c5hAJhDkPcoAAAAASUVORK5CYII=","TBZoomIn.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACWUlEQVRYw+VYwU7CQBAtN2960BA8gnf8FMSDiEfxiDEx7CyLB3+ARMBfgJoICX4Bfod8BSZyKAccZltoS9ttS0tM7CZNWbpvdmffvJ2ppv2T6/mgcQ4Vdg8CBN4rjfPng4SgH47YDYxgDktX+4EhVOFwJ3B+xt7A2IK2N4O98bNY4M0T6MLCBvUFEzaANrTxPsFfNiO80zyJCM/KMDOHz2HMbkXO/YbI8RqM166bsXJ49Aw8WXODrsgGvSqyvGc5kbW0TCi+oAsk/JjnQ+1UHlciR/TV3MpY8CHnY41qWSYUo8wXf1gpKilYCYkrJxaw2Etz9qVYpL4wR5f9ifkdPIeHpWx+/5vkmPmQFnlPW+vvRZUB5B9tN+94Ri2FlRHEHKUBrVEglIVHdKMorGz3AnVJaQD98Ep+0LckjcJlHhxWYQyILEW34ZJBVEzpf21XA+jsD8KqOhc2Iv7cJmKgRgaGDnmQorUtaXEMiJwMVpts4GlFgqw8fEIZQH9MCa+46ahQxyQpA/yTGHm12eJ72oGBF1jY5liBThOubzoEdbQTM9AmPLE/A+m7KO1NTp2myQYaO90KtNSlYg9il7pcp37gJHxkGo3C/g99SltmqaYtlFOnmXjtljoivDp1JC/2zTT2KUryu074+8pRKBv9aOk7MidC+u5Mxg3eUxUgyHur0BIR1mwvofgHr3mVUHCHohCrhDJJyzuOInCKKq+vikDQ8WlqLwLh5fE4ZhmLkIoyFnTPqA1/wSGW20NJQVch/s6vdyzEHdwq8iuorz4lQB2fiol9Svjz1y+we1CD3hl6FwAAAABJRU5ErkJggg==","TBZoomOut.png":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAQAAAD9CzEMAAACSklEQVRYw+VYwU7CQBCFGzc9SAgehTt+CuJB1CN4hJgYdpaFgz9AIuIv1JoICXwBfod8BSZwKAccpi20FGi33RITt0nTbrpvdmffvJ1pIvFP2nOqcQllVgcBAu/lxuVzShH04ym7hwHMYbl1zaAPd3ASCZzn2QcYHmjnZbAPng8F3kzDKywcUN8wZu/QgQ7ex/jmMMK7zbQkPCvB1Bo+hyGriOz2FyLLqzBcu27KSsHRk9C25wavInPoU5HhPduJrJVIBuILusCEH/KLQDt1gSsxR2j+3Era8AHnY49q2SZ8RlkfzlhRlhSsiMQ1J3ZgsdfW7IuhSH1ljS7tJ+aP7xwONosc0z2kRd7T1kr43ss/2m7e3Rm1FFZGMObsa40coSx2RDeKwsp2L6p2wRv5QfdIGoXL/HBYBWkiQ9FtbMkgKqbpfwWNjwjrzr2wAfGnosRAlQz0XfJgipZX0kI5KWsGq0M28LQiQVZ1/sGE8AqbjjJ1jFUZ4F/EyJvNFtdpB95dvFrKXa4V6DTh2qZDUEdHmYEO4YnjGYjfRXFvcuw0VRto7NwTaLFLxRHELna5jv3AUXxkGo3c8Q99SlumsaYtlFPHmXhFSx0RfhZk/UnQrDS2LZP8rhN+zXcUyoYml74jcyTSd3cybvCeXwGCvLcLLSGxZmcJxUe8uquEggcUhVAllEVa3nUVgRNUeX1VBIKOTxNnEQgvT2chy1iE9CljQd8ZtRLBc4Lldt+k4FYh/slvIxbiLm4V+A3UVr8SoIZPBWW/Ev58+wWZNt3EgwcumAAAAABJRU5ErkJggg==","openhand.png":"data:image/png;base64,AAACAAEAICACAAgACAAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8="},bg={nw:["x1","y1"],n:["y1"],ne:["x2","y1"],e:["x2"],se:["x2","y2"],s:["y2"],sw:["x1","y2"],w:["x1"]};function xg(e){if(e.subId&&"resize"===e.type){var t=e.subId.split("-")[0];return bg[t]}return[]}function wg(e){return e.subId&&"resize"===e.type?e.subId:null}function Ag(e,t,n){var r,i,o=e.events,a=e.legacyEvents,u=e.view,s=e.model,l=s.getByID,f=s.setDirty,c=e.controller.combo,d=n.id,h=n.dragging,v=h.startX,p=h.startY,g=h.started,m=n.modifierKeys,y=n,b=N(d),x=l(b),w="circle"===x.sh,A=c.api.isOpen(b),M=null!=(r=A?x.oc.w:x.w)?r:0,I=null!=(i=A?x.oc.w:x.h)?i:0,E=M/2,C=I/2,k={x:x.x,y:x.y,w:M,h:I,x1:x.x-E,y1:x.y-C,x2:x.x+E,y2:x.y+C,ratioH:x.h/x.w,ratioW:x.w/x.h},S=m.shift,L=m.consistentCtrl||A;if(a.trigger("dragstart","resize",b,v,p,null))return null;var T=function(e){var t=k.x-E,n=e;x.x=(t+n)/2;return n-t},R=function(e){var t=e,n=k.x+E;x.x=(t+n)/2;return n-t},Z=function(e){var t=e,n=k.y+C;x.y=(t+n)/2;return n-t},B=function(e){var t=k.y-C,n=e;x.y=(t+n)/2;return n-t},O=function(e){var t=e[0],n="1"===e[1];return{position:k[t+(n?"2":"1")],direction:n?-1:1}},G=function(e,t,n){var r,i=n[0],o=n[1],a=function(e,t){return L?2*Math.abs(e-t):"1"===o?"x"===i?R(e):Z(e):"x"===i?T(e):B(e)};if("x"===i){r=a(e,k.x);if(!A)if(w){x.w=r;x.h=x.w}else{x.w=r;S&&(x.h=r*k.ratioH)}}else{r=a(t,k.y);if(!A)if(w){x.w=r;x.h=x.w}else{x.h=r;S&&(x.w=r*k.ratioW)}}A&&(x.oc.w=r);f(b)};return{type:"resize",rebuild:{all:!0},scrollable:!0,setLastProps:function(e){y=e},getLastProps:function(){return y},getCursor:function(){return"move"},dragMove:function(e){var n=e.x,r=e.y,i=e.modifierKeys,o=i.consistentCtrl,a=i.shift;if(g){var s=u.viewToWorldX(n),l=u.viewToWorldY(r);S=a;L=o||A;t.forEach((function(e){G(s,l,e)}));if(S&&!L){var f=x.w/2,c=x.h/2;if(2===t.length){var d=O(t[1]),h=d.position,v=d.direction;"x"===t[1][0]?x.x=h+f*v:x.y=h+c*v}var p=O(t[0]),m=p.position,y=p.direction;"x"===t[0][0]?x.x=m+f*y:x.y=m+c*y}x.w=Math.abs(x.w);x.h=Math.abs(x.h)}},endDrag:function(e){var t,n;u.cancelScroll();x=l(b);var r=y.x,i=y.y,s={x:x.x,y:x.y,w:x.w,h:x.h,oc:{w:(n=null===(t=x.oc)||void 0===t?void 0:t.w,null!=n?n:0)}};if(A)x.oc.w=k.w;else{x.w=k.w;x.h=k.h}x.x=k.x;x.y=k.y;if(a.trigger("dragend","resize",b,r,i)||e)f(b);else{a.trigger("prechange","resize");if(g){o.fire("prechange",{type:"resize"});if(A)x.oc.w=s.oc.w;else{x.w=s.w;x.h=s.h}x.x=s.x;x.y=s.y;c.internalUse.afterComboResize(b)}}a.trigger("dragcomplete","resize",b,r,i)}}}function Mg(e,t){var n=t.drag&&!t.drag.links,r=t.linkStyle&&("horizontal"===t.linkStyle.path||"vertical"===t.linkStyle.path);return!(!e||!n&&!r||"link"!==e.type)}function Ig(e,t,n,r,i,o){var a,u;if(0!==i)return null;var s=e.controller,l=e.overlays,f="node"===(null===(a=n)||void 0===a?void 0:a.type)&&n,c="link"===(null===(u=n)||void 0===u?void 0:u.type)&&n,d=s.options(),h=d.handMode;return o&&h?null===t||n?"map":l.chooseDefaultDragger(t):n&&"resize"===r.type?"resize":c&&!Mg(c,d)?c.id1===c.id2?null:"link":h&&(null===t||c)?"pan":f?"node":null===t||c?"marquee":l.chooseDefaultDragger(t)}function Eg(e,t){var n=wg(t);return n||(e?'url("'+yg["openhand.png"]+'"), pointer':"auto")}function Cg(e,t){var n=t.controller,r=n.stopDrag,i=n.setPointerMoved;e.down||r(!1);i(e)}function kg(e,t){var n=t.controller,r=n.options,i=n.getActiveDragger,o=n.updateCursor,a=n.deferHover,u=t.model.getByID,s=t.overlays,l=t.events,f=i();if(f&&"node"===f.type&&f.getDragIds&&e.lastDownId&&f.getDragIds().indexOf(N(e.lastDownId))>-1){var c=qn(qn({},e),{id:e.lastDownId});l.fire("pointer-move",Hg(c,t))}else{var d=Hg(e,t);l.fire("pointer-move",d);var h=d.id,v=null;if(h){var p=u(h);if(p){var g=Mg(p,r());v="node"!==p.type&&g?g?"pointer":v:Eg(d.id,d.subItem)}else v=s.getCursor(h)}if(!f){o(v);a(d)}}}function Sg(e,t){var n=e.id,r=e.button,i=e.isPrimary,o=e.x,a=e.y,u=t.events,s=t.legacyEvents,l=t.model,f=t.overlays,c=t.controller,d=c.getActiveDragger,h=c.getFakeDragger,v=c.setFakeDragger,p=c.stopDrag;if(!d()||!e.dragging.started){var g=Hg(e,t);u.fire("click",g);if(!g.defaultPrevented&&i){!(g.id?l.getByID(g.id):null)&&g.id||gg(g.id,l,g);n&&0===r&&f.doclick(n,o,a)}var m=h();m&&e.validDownEvent&&!d()&&2!==e.button&&p(!1,m);v(null);"mouse"!==e.pointerType&&s.trigger("click",g.id,e.x,e.y,e.button,g.subItem.subId||null)}}function Lg(e,t){var n,r=t.controller,i=r.getActiveDragger,o=r.combo,a=r.zoomIn,u=t.model,s=t.events,l=t.legacyEvents;if(!i()||!e.dragging.started){var f=e.x,c=e.y,d=e.button,h=Hg(e,t),v=h.id,p=h.subItem,g=0===d,m=g&&l.trigger("dblclick",v,f,c,null!=(n=p.subId)?n:null);s.fire("double-click",h);!(h.defaultPrevented||m)&&g&&(null===v?a(!0):u.getByID(v)&&o.internalUse.dblclick(v))}}function Tg(e,t,n){var r=t.x,i=t.y;if(!t.dragging.started)return{dx:0,dy:0};var o=e?e.viewToWorldX(r):r,a=e?e.viewToWorldY(i):i;return{dx:o-n.x,dy:a-n.y}}function Rg(e,t,n){var r=e.getByID(t);if(r){r._disableHitTesting=n;e.setDirty(t)}}function Zg(e,t){var n=e.topParentId,r=e.getByID,i=[];t.forEach((function(e){var t,o=r(e);"node"===(null===(t=o)||void 0===t?void 0:t.type)&&o.parentId&&i.push(n(o.parentId))}));return i}function Bg(e){return Array.isArray(e)?q(e):E(e)&&Array.isArray(e.add)?q(e.add):{}}function Og(e,t,n){var r=t.id,i=t.dragging,o=i.startX,a=i.startY,u=e.model,s=e.legacyEvents,l=e.events,f=e.view,c=t,d=N(r),h="node",v=!1,p="move",g=!0,m=!1,y=new Set,b=!d||u.selection().has(d),x=s.trigger("dragstart",p,d,o,a,j(r));if(x){if(!0===x)return null;var w=Bg(x);Object.keys(w).forEach((function(e){return y.add(e)}))}else n.alsoDrag&&n.alsoDrag.forEach((function(e){return y.add(e)}));if(n.dragCombos&&(b||d)){var A=b?u.selection().getSelections():[d];Zg(u,A).forEach((function(e){y.add(e)}))}function M(e){return e.map((function(e){var t=u.getByID(e);return{id:t.id,x:t.x,y:t.y}}))}b&&u.selection().forEach((function(e){var t;"node"===(null===(t=u.getByID(e))||void 0===t?void 0:t.type)&&y.add(e)}));if(d){var I=u.getByID(d);m=I&&!(!I.w||!I.h)}if(d)if(m){var E=y;(y=new Set).add(d);E.forEach((function(e){return y.add(e)}))}else y.add(d);var C=[],k=[];y.forEach((function(e){var t=u.getAncestryIds(e,!0);(t=t.slice(0,t.length-1)).some((function(e){return y.has(e)}))||C.push(e);k.push(e)}));var S=new Map,L=[];C.forEach((function(e){u.findAllComboChildren(L,e)}));C.forEach((function(e){var t=u.getByID(e);S.set(t,{x:t.x,y:t.y})}));var T={x:f.viewToWorldX(t.dragging.startX),y:f.viewToWorldY(t.dragging.startY)};function R(){u.moveAllNodesTo(S,0,0)}var Z=!1,B=t.id;k.forEach(u.setDirty);function O(e){L.forEach((function(t){Rg(u,t,e)}));C.forEach((function(t){Rg(u,t,e)}))}return{type:h,rebuild:{positions:!0},scrollable:!0,setLastProps:function(e){c=e},getLastProps:function(){return c},direction:n,getDragIds:function(){return k},getCursor:function(){return"move"},dragMove:function(e){if(!v){if(!Z){O(!0);Z=!0;l.privateFire("redraw",{all:!0})}c=e;var t=Tg(f,e,T);if(n){n.horizontalMovement||(t.dx=0);n.verticalMovement||(t.dy=0)}u.moveAllNodesTo(S,t.dx,t.dy);g&&!m&&d&&u.setDirty(d);u.drawInTransientLayer(C)}},afterDraw:function(t){var n=c.x,r=c.y;g=!1;var i=t(n,r);c.id=i;return B=tm(h,C,c,B,l,s,e)},getLegacyDragStartRequest:function(){if(x&&"object"==typeof x)return x},endDrag:function(e){v=!0;var t=c.x,n=c.y,i=c.dragging.started;f.cancelScroll();if(s.trigger("dragend",p,N(r),t,n)||e)R();else if(i){var o=M(C);R();s.trigger("prechange","move");l.fire("prechange",{type:"move"});u.setProperties(o,!1,{all:!0},!1)}O(!1);y.forEach(u.setDirty);s.trigger("dragcomplete",p,N(r),t,n)}}}function Gg(e,t){var r=e.legacyEvents,i=e.events,o=e.view,a=e.model,u=e.controller,s=t.dragging,l=s.startX,f=s.startY,c="marquee",d="area",h=u.options(),v=t,p=!1;if(r.trigger("dragstart",d,null,l,f,null))return null;var g=new Set;a.selection().forEach((function(e){g.add(e)}));var m={id:null,p:hn.rect,x1:l,y1:f,x2:l,y2:f,bc:Xt.midgrey,bw:1,fc:Xt.blue,fi:!1},y={x1:0,y1:0,x2:0,y2:0};m.wbc=ln(m.bc);m.wfc=ln(m.fc);function b(e,t){m.x1=Math.min(l,e);m.y1=Math.min(f,t);m.x2=Math.max(l,e);m.y2=Math.max(f,t);y.x1=o.viewToWorldX(m.x1);y.y1=o.viewToWorldY(m.y1);y.x2=o.viewToWorldX(m.x2);y.y2=o.viewToWorldY(m.y2)}function x(e,t){var n=!1;function r(r){if(!t&&!e.has(r)){a.selection().remove(r,!0);n=!0}}function o(e){if(!a.selection().has(e)){a.selection().add(e,!0);n=!0}}a.selection().forEach(r);e.forEach(o);if(n){i.privateFire("redraw",{all:!0});i.fire("selection-change")}}function w(e,t,r){b(e,t);var i=h.marqueeLinkSelection,o=new Set,u=a.getShownNodes(),s=a.getShownLinks();n(u,(function(e,t){Sn(y,e.x,e.y)&&o.add(t)}));"off"!==i&&n(s,(function(e,t){if("centre"===i)Sn(y,e._x,e._y)&&o.add(t);else if("ends"===i){var n=u[e.id1],r=u[e.id2];Sn(y,n.x,n.y)&&Sn(y,r.x,r.y)&&o.add(t)}}));x(o,r)}return{type:c,rebuild:{drawOnly:!0},scrollable:!0,setLastProps:function(e){v=e},getLastProps:function(){return v},getCursor:function(){return"crosshair"},generate:function(e){var t=e.getLayer(),n=e.getLayerPath();e.setLayerPath(null);e.setLayer(oo.HANDLES);e.copyPrimitive(m);e.setLayerPath(n);e.setLayer(t)},dragMove:function(e){v=e;if(!p){var t=e.modifierKeys,n=t.consistentCtrl,r=t.shift,i=n||r;w(e.x,e.y,i)}},endDrag:function(e){p=!0;o.cancelScroll();var t=v.x,n=v.y;if(r.trigger("dragend",d,null,t,n)||e){var u=a.selection().hasChanged(g);a.selection().clear(!0);g.forEach((function(e){a.selection().add(e,!0)}));u&&i.fire("selection-change")}else r.trigger("selectionchange");r.trigger("dragcomplete",d,null,t,n)}}}function Yg(e,t,n){var r,i,o=e.events,a=e.legacyEvents,u=e.view,s=t.dragging,l=s.startX,f=s.startY,c="pan",d="hand",h=!1,v={horizontalMovement:!0,verticalMovement:!0},p=u.offsetX(),g=u.offsetY(),m=0,y=0,b=t,x=u.zoom(),w=a.trigger("dragstart",d,null,l,f,null);if(w){if(!E(w)){n();return null}var A=w;v.horizontalMovement=null!=(r=A.x)?r:v.horizontalMovement;v.verticalMovement=null!=(i=A.y)?i:v.verticalMovement}function M(e,t){m=e-l;y=t-f;if(v){v.horizontalMovement||(m=0);v.verticalMovement||(y=0)}}function I(){var e=u.zoom();if(e!==x){p=u.offsetX();g=u.offsetY();l=b.x;f=b.y;x=e}}function C(e,t){u.offsetX(p+e);u.offsetY(g+t);o.fire("view-change");a.trigger("viewchange")}return{type:c,rebuild:{drawOnly:!0},direction:v,dragMove:function(e){if(!h){if(t.dragging.started){I();M(e.x,e.y);u.offsetX(p+m);u.offsetY(g+y);o.fire("view-change");a.trigger("viewchange")}b=e}},setLastProps:function(e){b=e},getLastProps:function(){return b},getCursor:function(){return"move"},endDrag:function(e){h=!0;var t=b.x,n=b.y,r=b.dragging.started;a.trigger("dragend",d,null,t,n)||e?Math.abs(m)+Math.abs(y)>0&&C(0,0):r||a.trigger("selectionchange");a.trigger("dragcomplete",d,null,t,n)}}}function Fg(e,t){var n=e,r=t.view;return{type:null,rebuild:{drawOnly:!0},direction:{horizontalMovement:!0,verticalMovement:!0},dragMove:function(e){n=e},getCursor:function(){return"pointer"},setLastProps:function(e){n=e},getLastProps:function(){return n},endDrag:function(){r.cancelScroll()},getDragIds:function(){return[]},scrollable:!1}}function Dg(e,t,n,r){var i=null,o=n.model;"node"===t.type?i=Og(n,r,t):"marquee"===e?i=Gg(n,r):"pan"===e&&(i=Yg(n,r,o.selection().clear));return i}function Pg(e,t){var n,r,i,o,a,u,s=t.events,l=t.model,f=t.overlays,c=t.controller,d=t.legacyEvents,h=e.id,v=e.button,p=N(h);if(!(p&&l.isTransferring(p)||e.pointers.length>1)){var g,m=c.getFakeDragger(),y=zg();if("create-link"!==(null===(n=c.getActiveDragger())||void 0===n?void 0:n.type)){var b=Hg(e,t,{dragIds:null,setDragOptions:function(e){"marquee"!==e.type&&"node"!==e.type&&"pan"!==e.type||(g=e.type);y=D(e,y)},type:null});b.type=Ig(t,h,l.getByID(p),b.subItem,v,c.inMapMode());d.suppress(!0);var x=l.createDragger(t,c.getCanvasContext(),h,e,b.subItem,y,c.inMapMode());b.dragIds=(null===(r=x)||void 0===r?void 0:r.getDragIds)?$n(x.getDragIds()):[];d.suppress(!1);s.fire("drag-start",b);if("create-link"!==(null===(i=c.getActiveDragger())||void 0===i?void 0:i.type)){var w=b.x,A=b.y,M=b.defaultPrevented,I=null;d.suppress(!0);if(g)I=Dg(g,y,t,e);else if(!M&&m){var E=m.getLegacyDragStartRequest&&m.getLegacyDragStartRequest();E&&(y={alsoDrag:Object.keys(Bg(E)),dragCombos:(o=E.combos,null==o||o),horizontalMovement:(a=E.x,null==a||a),verticalMovement:(u=E.y,null==u||u)});I=l.createDragger(t,c.getCanvasContext(),h,e,b.subItem,y,c.inMapMode())}h&&!I&&(I=f.createDragger(h,e));I||(I=Fg(e,t));c.setActiveDragger(I);c.updateCursor(I.getCursor(w,A));d.suppress(!1);em(e,t)}}}}function zg(){return{dragCombos:!0,alsoDrag:[],horizontalMovement:!0,verticalMovement:!0}}function Vg(e,t){var n=t.controller,r=n.stopDrag,i=(0,n.getActiveDragger)();i&&i.setLastProps(e);r(!1)}function Xg(e,t){var n=t.events,r=t.view,i=t.controller,o=t.legacyEvents,a=e.x,u=e.y,s=e.deltaY,l=e.isNormalised,f=Jg(e);if(r){var c=o.trigger("mousewheel",-s,a,u);n.fire("wheel",f);if(f.defaultPrevented||c)i.isMapMode()&&e.wheelEvent.stopImmediatePropagation();else if(!i.isMapMode()){e.wheelEvent.preventDefault();if(Math.abs(s)){var d=r.wheelToPosition(-s,a,u,l);l&&i.pushAnimation(d)}i.render({drawOnly:!0})}}}function Wg(e,t){var n=t.events,r=t.controller,i=t.model,o=t.legacyEvents,a=e.keyCode,u=e.modifierKeys,s=_g(e);n.fire("key-down",s);var l=o.trigger("keydown",s.keyCode,u.ctrl,u.shift);if(s.defaultPrevented||l)e.keyboardEvent.preventDefault();else if(65===a&&u.consistentCtrl){i.selectAll();r.render()}else if(27!==a){if(i.hasSelection()){var f=0,c=0,d=20;switch(a){case 37:f=-d;break;case 38:c=-d;break;case 39:f=d;break;case 40:c=d}if(0!==f||0!==c){o.trigger("prechange","move");n.fire("prechange",{type:"move"});i.moveSelection(f,c);r.render();return}if(46===a){if(!o.trigger("delete")){o.trigger("prechange","delete");n.fire("prechange",{type:"delete"});var h=i.selectionPlusDummyNodes();r.removeItem(h)}r.render();return}113===a&&o.trigger("edit",i.doSelection())}}else r.stopDrag(!0)}function Ug(e,t){var n=t.events,r=_g(e);n.fire("key-up",r)}function Ng(e,t){var n=t.controller.stopDrag,r=t.view.zoom;n(!1);return r()}function jg(e,t,n){var r=t.view,i=r.zoomToPosition,o=r.panBy,a=t.controller.render;if(t.view&&e.gesture){var u=e.gesture,s=u.scale,l=u.dx,f=u.dy,c=u.centreX,d=u.centreY;2===e.pointers.length&&i(s*n,c,d);o(l,f,!1);a({drawOnly:!0})}}function Kg(e,t){}function Hg(e,t,n){void 0===n&&(n={});var r=e.id,i=e.button,o=e.pointerType,a=e.modifierKeys,u=e.pointerId,s=e.x,l=e.y,f=!1,c=t.model,d=N(r),h=j(r),v={};if(c){var p=d&&c.getByID(d);!p&&r||p&&h&&(v=hg(p,h)||{})}return qn({id:d,subItem:v,button:i,pointerType:o,pointerId:u,x:s,y:l,modifierKeys:a,get defaultPrevented(){return f},preventDefault:function(){f=!0}},n)}function _g(e){var t=e.keyCode,n=e.modifierKeys,r=!1;return{keyCode:t,modifierKeys:n,get defaultPrevented(){return r},preventDefault:function(){r=!0}}}function Jg(e){var t=e.x,n=e.y,r=e.deltaX,i=e.deltaY,o=e.deltaMode,a=e.modifierKeys,u=!1;return{deltaX:r,deltaY:i,x:t,y:n,deltaMode:o,modifierKeys:a,get defaultPrevented(){return u},preventDefault:function(){u=!0}}}function Qg(e,t){var n=t.controller.lock;function r(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return!n()&&e.apply(void 0,t)}}var i,o=!0;e.on("pointerdown",r((function(e){o=!0;pg(e,t)})));e.on("contextmenu",r((function(e){o=vg(e,t)})));e.on("pointerup",r((function(e){mg(e,t)})));e.on("pointermove",r((function(e){Cg(e,t)})));e.on("pointercancel",(function(){t.controller.stopDrag(!1)}));e.on("click",r((function(e){o&&Sg(e,t)})));e.on("doubleclick",r((function(e){Lg(e,t)})));e.on("dragstart",r((function(e){Pg(e,t)})));e.on("dragmove",r((function(e){em(e,t)})));e.on("dragend",r((function(e){Vg(e,t)})));e.on("wheel",r((function(e){Xg(e,t)})));e.on("keydown",r((function(e){Wg(e,t)})));e.on("keyup",r((function(e){Ug(e,t)})));e.on("gesturestart",r((function(e){i=Ng(e,t)})));e.on("gesturechange",r((function(e){jg(e,t,i)})));e.on("gestureend",r((function(e){Kg(e,t)})))}function qg(e){var t=e.drag&&!e.drag.panAtBoundary,n=!e.dragPan;return!(t||n)}function $g(e,t,n,r){var i=n.controller,o=n.view,a=i.options();if(t.scrollable&&qg(a)){var u=o.maybeScroll(e,t,r);if(u){i.pushAnimation(u);return!0}}return!1}function em(e,t){var n=t.events,r=t.controller,i=r.getActiveDragger();if(i&&e.isPrimary){var o=e.x,a=e.y,u=i.getDragIds?i.getDragIds():[],s=function(s){var l,f=r.getActiveDragger();if(f){f.dragMove(s);e.id=null!=(l=e.lastDownId)?l:null;var c=Hg(e,t,{dragIds:$n(u),type:i.type});n.fire("drag-move",c);r.updateCursor(f.getCursor(o,a))}};$g(e,i,t,s)||s(e)}}var tm=function(e,t,n,r,i,o,a){var u=n.id,s=n.x,l=n.y,f=N(u);if(t[0]===f)return r;if(f!==r){var c=Hg(n,a,{dragIds:$n(t),type:e}),d=c.subItem;o.trigger("dragover",f,s,l,d.subId||null);i.fire("drag-over",c)}return f};function nm(e,t,n,r){var i=e.model,o=e.events,u=e.legacyEvents,s=e.controller,l=e.view,f=i.getByID,c=i.moveNode,d=i.moveAllNodesTo,h=i.removeItem,v=n.dragging,p=v.startX,g=v.startY,m=n,y=!1,b=!1;if(u.trigger("dragstart","dummy",r,p,g,null))return null;var x,w=t.id2,A={x:l.viewToWorldX(p),y:l.viewToWorldY(g)},M=new Map,I=f(w),E=I.x,C=I.y;M.set(I,{x:I.x,y:I.y});function k(){return t.id1}function S(){c(w,E,C)}var L=[r];return{type:"create-link",rebuild:{all:!0},scrollable:!0,getDragIds:function(){return L},getCursor:function(){return"move"},dragMove:function(e){if(!y){if(!b){Rg(i,w,!0);Rg(i,t.id,!0);o.privateFire("redraw",{all:!0});b=!0}var n=Tg(l,e,A);m=e;d(M,n.dx,n.dy)}},afterDraw:function(t){var n=t(m.x,m.y);m.id=n;x=tm("create-link",L,m,x,o,u,e);return n},getLastProps:function(){return m},setLastProps:function(e){m=e},endDrag:function(e){y=!0;var n=m.x,r=m.y,i=N(m.id);l.cancelScroll();var c=u.trigger("dragend","dummy",i,n,r)||e;S();u.trigger("prechange","move");if(!c&&f(i)&&i!==k()){o.fire("prechange",{type:"move"});var d=a(t);d.id2=i;delete d.off;h([w,t.id]);s.merge([d])}else i=null;u.trigger("dragcomplete","dummy",i,n,r)}}}function rm(e,t,n,r){var i=e.legacyEvents,o=n.dragging,a=o.startX,u=o.startY,s="hand",l="map",f=N(t),c=n;i.trigger("dragstart",s,f,a,u,j(t));return{type:l,rebuild:void 0,direction:{},dragMove:function(e){c=e},getCursor:function(){return"move"},setLastProps:function(e){c=e},getLastProps:function(){return c},endDrag:function(){var e=c.x,t=c.y;i.trigger("dragend",s,f,e,t);i.trigger("dragcomplete",s,f,e,t)}}}function im(e,t,r,i,o,a){var u=e.legacyEvents,s=e.events,l=e.model,f=e.view,c=o.dragging,d=c.startX,h=c.startY,v=!1,p=o;if(u.trigger("dragstart","offset",a,d,h,j(a)))return null;function g(e,t,n,r,i,o){return((n-e)*(t-o)-(e-i)*(r-t))/Math.sqrt((n-e)*(n-e)+(r-t)*(r-t))}var m={},y={},b={};function x(e){var t=l.getByID(e);if(t&&"link"===t.type){m[e]=t.off||0;y[e]=t.off||0;b[e]=!0}}l.selection().has(i.id)?l.selection().forEach(x):x(i.id);var w=Object.keys(y);function A(e,n,r){var o=e===i,a=o?f.viewToWorldX(n):n,u=o?f.viewToWorldY(r):r,s=t(1,e),l=t(2,e),c=g(s.x,s.y,l.x,l.y,a,u);b[e.id]&&Math.abs(c-m[e.id])>8&&(b[e.id]=!1);if(!b[e.id]){
Math.abs(o?c:c+m[e.id])<12&&(c=o?0:-m[e.id]);y[e.id]=o?c:c+m[e.id]}}return{type:"link",rebuild:{all:!0},scrollable:!0,setLastProps:function(e){p=e},getLastProps:function(){return p},getDragIds:function(){return w},getCursor:function(){return"move"},dragMove:function(e){if(!v){p=e;var r=e.x,o=e.y,a=f.viewToWorldX(r)-f.viewToWorldX(d),u=f.viewToWorldY(o)-f.viewToWorldY(h);n(y,(function(e,n){var s=l.getByID(n);if(s)if(s===i)A(s,r,o);else{var f=t(1,s),c=t(2,s),d=(f.x+c.x)/2,h=(f.y+c.y)/2;A(s,d+a,h+u)}l.setLinkOffset(n,y[n])}))}},endDrag:function(e){var t=p.x,r=p.y;v=!0;f.cancelScroll();var i=u.trigger("dragend","offset",a,t,r)||e;if(l.getByID(a))if(i)n(y,(function(e,t){l.setLinkOffset(t,m[t])}));else if(p.dragging.started){var o=[];n(m,(function(e,t){var n=l.getByID(t);o.push({id:t,off:n.off});l.setLinkOffset(t,e)}));u.trigger("prechange","offset");s.fire("prechange",{type:"offset"});o.forEach((function(e){var t=e.id,n=e.off;l.setLinkOffset(t,n)}))}u.trigger("dragcomplete","offset",a,t,r)}}}var om={w:!0,x:!0,y:!0,bw:!0,b1:!0,b2:!0},am={b1:!0,b2:!0,bw:!0,e:!0,fs:!0,h:!0,off:!0,w:!0,x:!0,y:!0},um={bs:!0,ff:!0,id1:!0,id2:!0,id:!0,ls:!0,sh:!0,t:!0,u:!0},sm={b:!0,c2:!0,c:!0,fbc:!0,fc:!0},lm={p:!0};function fm(e,t,r,i,o){var u,l,f,c=new Set,d=new Set,h=new Set,v=new Set,p={hi:!0,bg:!0,ci:!0,du:!0,fb:!0,a1:!0,a2:!0,re:!0,tc:!0,a:!0},g={gh:!0},m={pos:!0},y={x:!0,y:!0,off:!0,lat:!0,lng:!0},b={ls:{solid:!0,dashed:!0,dotted:!0},bs:{solid:!0,dashed:!0}},w=["ha0","ha1","ha2","ha3","ha4","ha5","ha6","ha7","ha8","ha9"],A={},M={},I=[];function E(){return{allDirty:!1,allLinksMoved:!1,allLinksDirty:!1,anyLinkDirty:!1,dirty:new Map}}var C,k=E(),S=1,L=null,T=Jp(e,t,r);function R(){it();k.dirty.clear();L=null;A={};M={};k=E();T=null}function Z(e){var t=k.dirty;t.delete(e);t.set(e,2);M[e]&&(k.anyLinkDirty=!0)}function B(){X();u=null;f=null}function O(e){n(M,(function(t){ge(t,e)}));n(A,(function(t){ge(t,e)}))}var G,F=hu({numbers:am,numOrString:lm,negatives:y,strings:um,stringValues:b,colours:sm,booleans:p,reserved:g,mapPos:m,halos:w},Z,B,O);function z(){L||(L=rh(t,r)).privateSetProperties(A,M);return L}function V(e,t){var n=1===e?t.id1:t.id2,r=c.has(t.id)?Ue(n):A[n];return{x:r.x,y:r.y}}function X(){k.allDirty=!0;t.privateFire("redraw",{all:!0})}function W(e,t){Z(t)}function U(e){k.allDirty=!1;k.allLinksMoved=!1;k.allLinksDirty=!1;k.anyLinkDirty=!1;k.dirty.clear();e.forEach(W)}function j(e,t){void 0===t&&(t=!1);var n=k.dirty,r=n.get(e);if(!r||t&&1===r){t&&n.delete(e);n.set(e,1)}}function K(){return!!(k.allDirty||k.allLinksMoved||k.allLinksDirty)||!!k.dirty.size}function _(e,t,n){te(e,(function(e){e.x+=t;e.y+=n;j(e.id)}))}function J(e,t,n){e.forEach((function(e,r){q(r.id,e.x+t,e.y+n)}))}function q(e,t,n){var r=A[e];if(r){var i=t-r.x,o=n-r.y;if(r._combo)te([e],(function(e){e.x+=i;e.y+=o;j(e.id)}));else{r.x+=i;r.y+=o;j(r.id)}}}function te(e,t){for(var n={},r=e.slice(0);r.length>0;){var i=r.shift(),o=A[i];if(o&&!n[i]){n[i]=!0;t(o);if(o._combo)for(var a=o._combo.nodeIds,u=0,s=a.length;u<s;u++)n[a[u]]||r.push(a[u])}}}function ne(e,t){var n=A[t]||M[t];if(n._combo){"node"===n.type&&n._combo.nodeIds.forEach((function(t){A[t]._combo&&ne(e,t);e.push(t)}));n._combo.linkIds.forEach((function(t){e.push(t)}))}}function oe(e,t){var n=M[e];if(n){n.off=t;Z(e)}}function ue(e){if(e){A={};M={};At(!0);yn();F.typeCheck(e,M);var t=F.filterNodesAndLinks(e.items,A,M,{selfLinks:C});M=t.links;A=t.nodes;vn(Y(e.reveal).map((function(e){return""+e})),!1);F.ensureHiddenItemConsistency(A,M);L=null;se();en();X()}et()}function se(){I=null}function le(e){Object.keys(e).forEach((function(t){I.push(e[t])}))}function fe(){if(!I){I=[];le(M);le(A)}return I}function ce(e,t){switch(e){case"e":return 1;case"fs":return i.fontSize;case"off":case"b1":case"b2":return 0;case"x":case"y":return 0;case"w":case"h":return 1;case"bw":return 4;case"donut":var n=re({v:[]},F.donutDefaults);if(t){t.b&&(n.b=un(t.b,0));t.c&&Array.isArray(t.c)&&t.c.forEach((function(e,t){n.c[t]=un(e,0)}))}return n;case"ha0":case"ha1":case"ha2":case"ha3":case"ha4":case"ha5":case"ha6":case"ha7":case"ha8":case"ha9":return{c:t&&t.c?un(t.c,0):"rgba(0, 0, 0, 0)",r:0,w:0};case"fi":return{c:"black",t:""};case"oc":return uu;case"c":case"b":return Xt.midgrey;case"fc":return Xt.black;case"fbc":return Xt.textback;default:return}}function de(e){return!e.hi&&!(A[e.id1].hi||A[e.id2].hi)}function he(e){return z().privateNeighbourLinks(e)}function ve(e,t){for(var n=z().privateGetLinkIdsBetween(e,t),r=[],i=n.length,o=0;o<i;o++)r.push(M[n[o]]);return r}function pe(e){return!(A[e.id1].bg||A[e.id2].bg)}function ge(e,t){e[t]&&bt(e.id)}function me(e){return e&&!!e.parentId}function ye(e,t,n){for(var r="x"===t||"y"===t?j:Z,i=0;i<e.length;i++){var o=e[i],a=A[o],u=M[o];if(a){a[t]=n;r(o)}else if(u){u[t]=n;Z(o)}}}function be(e,t){var n=!1;A[e]&&(n=we(A[e],t));M[e]&&(n=we(M[e],t));return n}function xe(e){return Rt(e)&&!be(e,"gh")}function we(e,t){return!!e[t]}function Ae(e){ke(e,"gh",!0)}function Me(e){Le(e,"gh")}function Ie(e,t){ke(e,"hi",t);it()}function Ee(){return Se("hi")}function Ce(e){Le(e,"hi");it()}function ke(e,t,r){var i,o=Y(e);ye(o,t,!1);F.ensureConsistency(t,A,M);if(r){var a={},u={};for(i=0;i<o.length;i++)a[o[i]]=!0;n(M,(function(e){if(we(e,t)&&!we(A[e.id1],t)&&!we(A[e.id2],t)&&(a[e.id1]||a[e.id2])){e[t]=!1;var n=e.parentId;n&&M[n]&&(u[n]=!0)}}));F.applyPropertyRuleToComboLinks(u,t,M)}}function Se(e){var t=[];n(A,(function(n,r){n[e]&&t.push(r)}));n(M,(function(n,r){n[e]&&t.push(r)}));return t}function Le(e,t){ye(Y(e),t,!0);F.ensureConsistency(t,A,M)}function Te(e,t){e.type.match(/^(node|all)$/)&&n(A,t);e.type.match(/^(link|all)$/)&&n(M,t)}function Re(e){var t=a(e);F.ensureObject(t,!1,M);var n=null;"node"===t.type&&(n=A);if("link"===t.type){n=M;if(!F.hasValidEnds(t,{},A,C))return;(A[t.id1].hi||A[t.id2].hi)&&(t.hi=!0)}F.setZeroXY(t);if(t.id&&null!==n){var r=n[t.id];n[t.id]=t;if(r){r._combo&&(n[t.id]._combo=r._combo);r.parentId&&(n[t.id].parentId=r.parentId);r._offset&&(n[t.id]._offset=r._offset)}t.hi?F.ensureHiddenItemConsistency(A,M):B();it();se();Z(t.id)}et()}function Ze(){return"LinkChart"}function Be(e,t){C=!!e.selfLinks;i.setOptions(e,t)}function Oe(e){G=e}function Ge(e){G&&Z(G);if(e){Z(e);i.setSpecialOptions("showFullLabel",e)}else i.setSpecialOptions("showFullLabel",null)}function Ye(){var e=[];fe().forEach((function(t){t._combo||e.push(a(t,"d"))}));return e}function Fe(){return{type:Ze(),items:Ye()}}function De(e,t,r,i,o){var u,s,l,f,c,d=function(){s=N(e[u].id);f=[];if(s)if(t){c=new RegExp(s,"im");n(A,(function(e,t){c.test(t)&&f.push(e)}));n(M,(function(e,t){c.test(t)&&f.push(e)}))}else{A[s]&&f.push(A[s]);M[s]&&f.push(M[s])}var d=a(e[u]),h=function(){var e=!0,t=f[l],a=d;if(!i&&"node"===t.type&&(void 0!==a.x||void 0!==a.y)){var u=void 0===a.x?t.x:a.x,s=void 0===a.y?t.y:a.y;q(t.id,u,s)}n(d,(function(n,i){if("id"!==i&&"type"!==i){e&&"x"!==i&&"y"!==i&&(e=!1);switch(i){case"id1":case"id2":if(n!==t[i])throw Error("You cannot change the ends of an existing link");break;case"parentId":case"hi":if("parentId"===i&&o&&n!=t[i])throw Error("You cannot manually change the parentId of an item");r.all=!0;r.hi=!0;t[i]=n;break;case"oc":var a=t;if(a.oc){r.all=!0;a.oc=ie(a.oc,d.oc)}break;default:fu[i]&&(t._noHalos=!1);om[i]?r.positions=!0:r.all=!0;t[i]=n}}}));e?j(t.id):Z(t.id)};for(l=0;l<f.length;l++)h()};for(u=0;u<e.length;u++)d()}function Pe(){var e={};function t(t){var n=t.parentId;if(n){var r=A[n]||M[n];if(!r)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item is not present in the model.");if(!r._combo)throw new Error("The "+t.type+" '"+t.id+"' has parentId = '"+n+"' but the parent item has no _combo property.");e[n]=e[n]||{};e[n][t.id]=!0}}function r(t){if(t._combo){var r={};(t._combo.nodeIds||[]).concat(t._combo.linkIds).forEach((function(n){r[n]=!0;var i=A[n]||M[n];if(!i)throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item is not present in the model.");if(!e[t.id][n])throw new Error("The combo "+t.type+" '"+t.id+"' has a child item '"+n+"' in its _combo property, but this item's parentId property is "+(i.parentId?"set to '"+i.parentId+"'":"undefined."))}));n(e[t.id],(function(e,n){if(!r[n]){var i=A[n]||M[n];throw new Error("The "+i.type+" '"+i.id+"' has parentId set to '"+t.id+"' but is not included in the parent's _combo property.")}}))}}n(A,t);n(M,t);n(A,r);n(M,r)}function ze(e,t,n){var r,i,o;for(r=0;r<e.length;r++){i=(o=e[r]).id;var a=void 0!==o.x,u=void 0!==o.y;if(!a&&!u||n)o._combo&&x(o._combo.e)&&_([i],0,0);else{q(i,a?o.x:A[i].x,u?o.y:A[i].y)}re(A[i]||M[i],e[r]);t?Z(i):j(i)}}function Ve(e,t,n,r,i){void 0===i&&(i=!1);var o=Y(a(e));F.ensureTypesInArray(o,!1,M);De(o,t,n,r,i);n.hi&&F.ensureHiddenItemConsistency(A,M);(n.graphCache||n.hi)&&it();et()}function Xe(e){var t={};n(e,(function(e,n){var r=M[n];r&&void 0===r.off&&(t[n]=r)}));return t}function We(e){var t=a(e);F.ensureTypesInArray(t,!1,M);var r={carefulWithXandY:!0,selfLinks:C},i=F.filterNodesAndLinks(t,A,M,r);n(i.nodes,(function(e,t){A[t]=re(A[t],e);A[t]._noHalos=!1;Z(t)}));n(i.links,(function(e,t){M[t]=re(M[t],e);M[t]._noHalos=!1;Z(t)}));F.ensureHiddenItemConsistency(A,M);it();se();Wt(Xe(i.links));et()}function Ue(e){var t=A[e]||M[e];if(t&&!t.hi){if("link"===t.type&&pn(e)&&Qe(e))return t;var n=He(e);n.push(t);var r=null;n.every((function(n){if(null===n)return!1;if(n.hi){r=null;return!1}if(n.id===e){r=t;return!1}if(n._combo){r=n;return n._combo.open}return!1}));return r}return null}function Ne(e){return a(_e(e),"d")}function je(e){for(var t=Y(e),n=[],r=0;r<t.length;r++){var i=_e(t[r]);i=i||null;n.push(i)}return n}function Ke(e,t){var n=e,r=[],i=0;do{t&&1===i&&n.indexOf("_combolink")>-1||r.unshift(n);var o=_e(n);n=o&&o.parentId;i++}while(n);return r}function He(e){var t=Ke(e,!1);t.pop();return je(t)}function _e(e){var t=N(e);return A[t]||M[t]||null}function Je(e,t){return!_e(e).parentId||He(e).every((function(e){return e._combo.open&&(!t||!e.hi)}))}function Qe(e){var t=M[e];if(t&&!t.hi){if(t.parentId){if(qe(t.parentId)){var n=Ue(t.id1);if(t.id1===t.id2&&n)return!0;var r=Ue(t.id2);return!(!n||!r||n.id===r.id)}return!1}return!0}return!1}function qe(e){return!_e(e).parentId||He(e).every((function(e){return!e.hi}))}function $e(e){for(var t=e,n=_e(t),r=n&&n.parentId;r;)(t=r)===(r=(n=_e(t))?n.parentId:null)&&(r=null);return t}function et(){var e=new Set;nt(A,e);nt(M,e);o.forEach((function(t){t.isAsset||e.has(t.src)||o.delete(t.src)}))}function tt(e,t){e.forEach((function(e){e&&"string"!=typeof e&&e.g&&e.g.forEach((function(e){rt(e,t)}))}))}function nt(e,t){n(e,(function(e){rt(e,t);tt([e,e.t1,e.t2],t);e.bu&&rt(e.bu.g,t)}))}function rt(e,t){if(e){var n=e.u;if(n){t.add(n);o.has(n)||o.get(n)}}}function it(){L&&L.clearCache()}function ot(){u={};l=0;for(var e=Object.keys(A),t=0,n=e.length;t<n;t++){var r=e[t],i=A[r];if(!i.hi&&Je(r,!0)){u[r]=i;l++}}}function at(){f={};for(var e=Object.keys(M),t=0,n=e.length;t<n;t++){var r=e[t],i=M[r],o=!i.hi;o&&(o=pn(r)?Qe(r):Je(r,!0))&&(f[r]=i)}}function ut(){lt();return u}function st(){lt();return f}function lt(){if(!u){ot();at()}}function ft(){if(!k.allDirty){var e=k.dirty.size;if(e>100)if(e>=l){k.allLinksMoved=!k.anyLinkDirty;k.allLinksDirty=k.anyLinkDirty}else ct();else z().internalMarkLinks(k.dirty)}}function ct(){null!==f&&n(f,(function(e,t){k.dirty.has(t)||(k.dirty.has(e.id1)||k.dirty.has(e.id2))&&k.dirty.set(t,1)}))}function dt(e,t,n,r,o){void 0===r&&(r=!1);void 0===o&&(o=!1);var a,s=n.getUnzoom(),l=s!==S;l&&X();if(K()){lt();ft();U((a=i.generate(u,f,k,e,t,n,wt,c,Tt,Ct,r,o)).stillDirty);S=s}i.generateHandles(e,t,n,h);return i.animated()||a&&a.rebuildAll||l}function ht(e){return i.contains(e,A).filter((function(e){return!me(A[e])}))}function vt(){return i.animated()}function pt(){return i.getAlwaysRedraw()}function gt(t){var n=e.privateGetItem(t);n&&(n._combo||n.parentId)&&e.privateSetAllItemsInComboDirty([e.privateGetTopItemId(n.id)])}function mt(e,n,r){var i=N(e),o=!e&&0===h.size,a=1===h.size&&h.has(e);if(!o){if(!n&&!r){if(a)return;At(!!i)}h.has(i)?n&&bt(i):yt(i);t.privateFire("redraw",{all:!0})}}function yt(e,n){void 0===n&&(n=!1);var i=N(e);if(i&&!h.has(i)&&xe(i)){gt(i);h.add(i);Z(i);if(!n){r.trigger("selectionchange");t.fire("selection-change")}}}function bt(e,n){var i=N(e);if(h.delete(i)){gt(i);Z(i);if(!n){r.trigger("selectionchange");t.fire("selection-change")}}}function xt(){return 0!==h.size}function wt(e){return!!h.size&&h.has(e)}function At(e){void 0===e&&(e=!1);var n=h.size;h.forEach((function(e){Z(e);gt(e)}));h.clear();if(!e){r.trigger("selectionchange");n>0&&t.fire("selection-change")}}function Mt(e){n(e,(function(e,t){yt(t,!0)}))}function It(e){e.forEach((function(e){d.add(e)}))}function Et(e){e.forEach((function(e){d.delete(e)}))}function Ct(e){return!!d.size&&d.has(e)}function kt(){v.forEach((function(e){Z(e);gt(e)}));v.clear()}function St(e){if(e&&e.length>0){e.forEach((function(e){v.has(e)||Z(e)}));var t=$(e);v.forEach((function(e){t.has(e)||Z(e)}));v=t}}function Lt(e){e.forEach((function(e){v.delete(e)&&Z(e)}))}function Tt(e){return v.has(e)}function Rt(e){lt();return!(!u[e]&&!f[e])}function Zt(){var e=h.size;Mt(A);Mt(M);t.privateFire("redraw",{all:!0});r.trigger("selectionchange");e!==h.size&&t.fire("selection-change")}function Bt(){var e=[];h.forEach((function(t){e.push(t)}));return e}function Ot(e){if(e){At(!0);for(var n=0;n<e.length;n++)yt(e[n],!0);t.privateFire("redraw",{all:!0})}return Bt()}function Gt(){return h}function Yt(e,t){var r=[];if(h.size){n(A,(function(e,t){wt(t)&&!me(e)&&r.push(t)}));n(M,(function(e,t){if(wt(t)){A[e.id1].du&&r.push(e.id1);A[e.id2].du&&r.push(e.id2)}}))}for(var i=0;i<r.length;i++){var o=A[r[i]];q(r[i],o.x+e,o.y+t)}}function Ft(e){var t,r=Y(e);if(r.length>0){for(var i={},o={},a=0;a<r.length;a++){t=r[a];M[t]&&(i[t]=M[t]);A[t]&&(o[t]=!0)}n(M,(function(e,t){(o[e.id1]||o[e.id2])&&(i[t]=e)}));n(i,(function(e,t){bt(t,!0);mn(t);Z(t);delete M[t]}));n(o,(function(e,t){bt(t,!0);Z(t);delete A[t]}));it();se();Wt(i);B()}}function Dt(){for(var e=Ot(),t=0;t<e.length;t++){var n=M[e[t]];if(n){A[n.id1].du&&e.push(n.id1);A[n.id2].du&&e.push(n.id2)}}return e}function Pt(e){var n=rh(t,r);n.privateSetProperties(A,e);return n}function zt(e){var t=D(e,{all:!1,self:!0,combos:"all"});return z().connections(t)}function Vt(e,t){var n=[],r={};if(Q(e)){var i=Pt(e).findAdjacency;n=zt();for(var o=0;o<n.length;o++){var a=M[n[o][0]];i({all:!0,combos:"all"},a.id1,a.id2)&&(r[o]=!0)}}t(n,r)}function Wt(e){t.privateFire("redraw",{all:!0});Vt(e,qt);xn(H(e),!1,void 0,!1)}function Ut(e,t){var n;Vt(e,(function(e,r){n=$t(e,r,t)}));return n}function Nt(e,t){var n=[];function r(e,t){n.push({id:e.id,off:t})}xn(H(e),t,r,!1);return n}function jt(e){for(var t={},n=0;n<e.length;n++){var r=e[n],i=M[r];i&&(t[r]=i)}return t}function Kt(e){Wt(jt(e))}function Ht(e,t){var n=jt(e),r=Ut(n,t),i=Nt(n,t);if(i.length>0){var o=ee(i);r=r.filter((function(e){return void 0===o[e.id]})).concat(i)}for(var a=[],u=0;u<r.length;u++){var s=r[u];M[s.id].off!==s.off&&a.push(s)}return a}function _t(){t.privateFire("redraw",{all:!0});qt(zt({self:!1,combos:"toplevel"}))}function Jt(e,t,r,i,o){var a=i||function(e){return e};function u(e){var t=1e6,n=P(e.off)?e.off:t,r=a(e);r.id1>r.id2&&(n=l(-n));return n}function s(e,t){return u(M[e])-u(M[t])}function l(e){return 0===e?0:e}n(t||e,(function(t,n){var i=e[+n];r||(i=i.filter((function(e){return!M[e].gh})));if(i.length>0){i.sort(s);for(var u=a(M[i[0]]),f=u.id1===u.id2,c=i.length,d=f?20:40,h=f?0:-.5*d*(c-1),v=0;v<c;v++){var p=M[i[v]],g=a(p),m=h+v*d;m=g.id1<=g.id2?m:-m;o(p,l(m))}}}))}function Qt(e,t){e.off=t;Z(e.id)}function qt(e,t){Jt(e,t,!0,null,Qt)}function $t(e,t,n){var r=[];function i(e,t){r.push({id:e.id,off:t})}Jt(e,t,n,null,i);return r}function en(){for(var e=zt(),t={},n=0;n<e.length;n++){var r=!1,i=e[n];if(i.length>1){for(var o=0;o<i.length;o++){var a=M[i[o]];a&&(r=r||P(a.off))}r||(t[n]=!0)}}qt(e,t)}function tn(e,t,n){var r=N(t);return nm(e,M[r],n,r)}function nn(e,t,n,r,i,o,a){var u,s,l=N(n),f=_e(l),c="node"===(null===(u=f)||void 0===u?void 0:u.type)?f:null,d="link"===(null===(s=f)||void 0===s?void 0:s.type)?f:null,h=Ig(e,n,f,i,r.button,!!a);if("map"===h)return rm(e,n,r,At);if(c&&"resize"===h){return Ag(e,xg(i),r)}if(d){if("create-link"===h)return nm(e,d,r,l);if("link"===h)return im(e,V,t,d,r,l)}An.clearExtraItemsInTransientLayer();if("pan"===h)return Yg(e,r,At);if("node"===h){lt();return Og(e,r,o)}return"marquee"===h?Gg(e,r):null}function rn(e,t,n){var r=_e(e);if(!r||r.hi)return null;var i=r._edit,o=n.getAnchorPosition(e,0);if(!i||i.hib)return null;var a=i.x1+o.x,u=i.y1+o.y,s=i.x2+o.x,l=i.y2+o.y;return{x1:t.x(a),y1:t.y(u),x2:t.x(s),y2:t.y(l),fs:t.worldToViewDistance(i.fs)}}function on(e,t,n){return T.extractStructure(i,e,A,M,z,t.fixed,n)}function an(e){e.straighten&&_t()}function sn(t,n,r,i,o){var a=Cd(A,r,e.privateGetMaxLabelLength());T.layout(t,n,z,a,i,o)}function ln(n,i,o,a,u,s){var l=Cd(A,a,e.privateGetMaxLabelLength());T.arrange(n,t,r,i,o,u,l,s)}function fn(e){n(A,(function(t,n){e[n]&&q(n,e[n].x,e[n].y)}))}function cn(e){n(M,(function(t,n){e[n]&&An.setLinkOffset(n,e[n].off)}))}function dn(e,t,r){var i=t,o=[];n(A,(function(t,n){e[n]&&o.push({id:n,from:{x:t.x,y:t.y},to:{x:e[n].x,y:e[n].y}})}));var a=o.length;return ur((function(e){i-=e;for(var n=r(Math.max(0,(t-i)/t)),u=0;u<a;u++){var s=o[u],l=s.from,f=s.to,c=l.x+n*(f.x-l.x),d=l.y+n*(f.y-l.y);q(s.id,c,d)}return i>0}),{positions:!0})}function hn(e){var t=M[e];return t&&!t._combo}function vn(e,t){var n={};e.forEach((function(e){hn(e)&&(n[e]=!c.has(e))}));c.forEach((function(e){void 0===n[e]&&mn(e)}));var r=[];e.forEach((function(e){if(n[e]){var t=_e(e);if(null!==t){c.add(e);r.push(t);Z(e)}}}));t&&xn(r,void 0,void 0,!0);B()}function pn(e){return!!c.size&&c.has(e)}function gn(){var e=[];c.forEach((function(t){e.push(t)}));return e}function mn(e){Z(e);c.delete(e);wt(e)&&!Je(e,!1)&&bt(e,!0)}function yn(){c.forEach((function(e){Z(e);wt(e)&&!Je(e,!1)&&bt(e,!0)}));c.clear()}function bn(e,t,n){e.forEach((function(e){var r=Ue(e.id1),i=Ue(e.id2);if(null!==r&&null!==i&&r!==i){var o=r.id>i.id?r.id+i.id:i.id+r.id;void 0===t[o]&&(t[o]=[]);t[o].push(e.id);n[e.id]={id1:r.id,id2:i.id}}}))}function xn(e,t,n,r){var i,o=void 0===n?Qt:n,a={},u={};bn(An.getRevealedLinks().map(_e).filter((function(e){return!e.hi})),a,u);function s(e){return void 0!==u[e.id]?u[e.id]:e}function l(e,t){if(u[e]){var n=void 0,r=u[e],i=Ke(r.id1,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0;i=Ke(r.id2,!1);for(n=0;n<i.length;n++)if(t[i[n]])return!0}return!1}if(e){var f=[],c={};e.forEach((function(e){if("node"===e.type){var t=Ue(e.id);t&&(c[t.id]=!0)}else f.push(e)}));var d={};bn(f,d,{});i={};var h=!1;Object.keys(a).forEach((function(e,t){if(void 0!==d[e]||l(a[e][0],c)){i[t]=!0;h=!0}}));if(!h)return}if(r){var v=o;o=function(e,t){_e(e.id1).parentId!==_e(e.id2).parentId&&v(e,t)}}Jt(H(a),i,!!t,s,o)}var wn=function(){return{add:yt,remove:bt,clear:At,set:mt,getSelections:Bt,forEach:h.forEach.bind(h),has:h.has.bind(h),hasChanged:function(e){return!(0===e.size&&0===h.size)&&!s(e,h)}}},An={addItemsToTransfer:It,allParentsOpen:Je,allParentsVisible:qe,animated:vt,applyRevealedLinkOffsets:xn,applyUpdatedOffsets:cn,applyVertices:fn,arrange:ln,bothEndsForeground:pe,bothEndsShown:de,clearExtraItemsInTransientLayer:kt,contains:ht,createDragger:nn,defaultValueFor:ce,destroy:R,doSelection:Ot,drawInTransientLayer:St,each:Te,ensureObject:F.ensureObject,ensureTypesInArray:F.ensureTypesInArray,extractStructure:on,firstVisibleItemInAncestry:Ue,generate:dt,findAllComboChildren:ne,getAlwaysRedraw:pt,getAncestryIds:Ke,getByID:_e,getItem:Ne,getParentItems:He,getRawItems:fe,getRevealedLinks:gn,getShownNodes:ut,getShownLinks:st,ghost:Me,graph:z,hasSelection:xt,hidden:Ee,hide:Ce,isItemShown:Rt,isRevealedLink:pn,isSelected:wt,isTransferring:Ct,labelPosition:rn,layout:sn,load:ue,makeNodePositionAnimator:dn,merge:We,moveAllNodesBy:_,moveAllNodesTo:J,moveNode:q,moveSelection:Yt,neighbourLinkIds:he,privateGetLinksBetween:ve,privateSelection:Gt,removeFromTransientLayer:Lt,removeItem:Ft,removeItemsFromTransfer:Et,resetAllConnectionOffsets:_t,resetConnectionOffsets:Wt,resurrect:Ae,reveal:vn,selectAll:Zt,selection:wn,selectionPlusDummyNodes:Dt,serialize:Fe,setAllDirty:X,setDirty:Z,setItem:Re,setLastHoverId:Oe,setLinkOffset:oe,setOptions:Be,setProperties:Ve,setSelection:mt,show:Ie,showFullLabelOnHover:Ge,showHideBendLinks:Kt,showHideGetLinksToBend:Ht,createNewLinkEndDragger:tn,topParentId:$e,type:Ze,unsafeApplyChanges:ze,updateLinkStyles:an,validateCombos:Pe};return An}var cm={backColour:!0,selectionColour:!0,selectionFontColour:!0,controlColour:!0};function dm(e,r,i,o,u,s,l,f){var c,d,h,v=null,g=null,m=null,y=null,b=f,w=null,A=!1,M={arrows:"normal",backColour:void 0,backgroundAlpha:.2,bands:$(),controlColour:Xt.midgrey,defaultStyles:void 0,drag:_(),dragPan:!0,fontFamily:"sans-serif",gradient:void 0,handMode:!1,hover:150,iconFontFamily:"sans-serif",imageAlignment:{},labelOffset:0,linkEnds:{spacing:"tight",avoidLabels:!0},_linkSelection:!0,linkStyle:ne(),logo:void 0,marqueeLinkSelection:"centre",maxItemZoom:void 0,minZoom:.05,navigation:H(),overview:J(),_rendering:ie(),selectedLink:void 0,selectedNode:void 0,selectionColour:void 0,selectionFontColour:void 0,selfLinks:!1,_showShadowCanvas:!1,zoom:{adaptiveStyling:!0},truncateLabels:void 0,watermark:{fb:!0},gestures:!0};d=s.resetControlColour(M.controlColour);var I={arrows:!0,fontFamily:!0,iconFontFamily:!0,imageAlignment:!0,labelOffset:!0,linkStyle:!0,linkEnds:!0,maxItemZoom:!0,selectedLink:!0,selectedNode:!0,selectionColour:!0,selectionFontColour:!0,truncateLabels:!0,_rendering:!0},C={controlColour:!0,navigation:!0,logo:!0,overview:!0,watermark:!0,fontFamily:!0},k=fo();e.__w=k;var L=1,T=function(){var e,t={},n={};if(M.defaultStyles){M.defaultStyles.comboLinks&&(t=M.defaultStyles.comboLinks);M.defaultStyles.openCombos&&(n=M.defaultStyles.openCombos);e=M.defaultStyles.comboGlyph}return{comboLinks:t,openCombos:n,comboGlyph:e}},Z=eg(e,u,r,i,T,b);function B(e,t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(e.charCodeAt(r)+t[r]);return n}function O(e){h=e}function G(e){if(void 0!==e&&e!==mt){mt=e;e&&$e(bt())}return mt}function F(){return m}function P(e){m=e}function z(e){v=e}function W(e){g=e}function U(e){w=Di(e,m,v,l);k.setShadowColourMap(w.getShadowColourMap());b.setAllDirty()}function N(t){y=t;m&&m.webgl&&l.shutdownAndReset();b=y.model;Z=eg(e,u,r,i,T,b);b.setOptions(M,!le())}function j(){o.setup(d);var e=M.watermark;e&&o.addTextWatermark(e.u?e.u:void 0,e.t,e.fs||80,e.fc||Xt.lightgrey,e.fb,e.fbc,e.a,e.ff?e.ff:M.fontFamily);M.navigation&&M.navigation.shown&&o.addNavigation(vn,v,M.navigation);M.overview&&o.addOverview(vn,b,v,Fe,M.overview);M.logo&&M.logo.u&&o.addLogo(M.logo);16509358<mb&&o.remove(B(rt,it),B(rt,ot),B(rt,at));o.addBanding(M);je({drawOnly:!0})}function K(){return{p:"ne",u:void 0,x:0,y:0}}function H(){return{shown:!0,p:"nw",x:0,y:0}}function _(){return{links:!1,panAtBoundary:!0}}function J(){return{icon:!0,p:"se",shown:!1,size:100}}function $(){return{bands:[],bottom:!1,top:!0}}function ee(){return{fb:!1,fc:"lightgrey",x:0,w:100}}function te(){return{maxLength:30,showOnHover:!0}}function ne(){return{glyphs:"horizontal",transition:.75,inline:!1,path:"direct"}}function ie(){return{showTextAtlas:!1,showFontIconAtlas:!1,showImageAtlas:!1,canvasSkipItemsOutOfView:!0,disableFloatTexture:!1}}function oe(e){function t(e,t){if(x(e[t])){e[t]=Math.min(50,e[t]);e[t]=Math.max(-50,e[t])}else e[t]=0}var n=e;Object.keys(n).forEach((function(e){var r=n[e];t(r=D({dx:r.dx,dy:r.dy,e:r.e},{dx:0,dy:0,e:1}),"dx");t(r,"dy");(!x(r.e)||r.e<=0)&&(r.e=1);var i=e;x(parseInt(e,10))&&(i=String.fromCharCode(parseInt(e,10)));n[i]=r}));return n}function ue(e,t,r){void 0===r&&(r=!le());if(e){var i=!1,o=!1,l=!1,f=a(e),c=E;n(f,(function(e,t){var r;if(!S(M[t],e)){if(cm[t]&&!V(e)&&!_t(e))return;var a=null===(r=M[t])||void 0===r?void 0:r.path;M[t]=e;/fontfamily/i.test(t)&&(M[t]=zn(e));if("logo"===t){if("string"==typeof e){M[t]=K();M[t].u=e}e||(M[t]=K())}if("navigation"===t)if(e)c(e)?M[t]=D(e,H()):M[t]=H();else{M[t]=H();M[t].shown=!1}if("overview"===t)if(e)if(c(e)){(p=qn({},e)).backColour=_t(p.backColour)?p.backColour:void 0;p.borderColour=_t(p.borderColour)?p.borderColour:void 0;if(null!==p.size&&x(p.size)&&p.size>=0){var f=1,h=Math.min(v.width(),v.height())-f;p.size=Math.max(0,Math.min(h,p.size))}else p.size=void 0;M[t]=D(p,J())}else M[t]=J();else{M[t]=J();M[t].icon=!1}if("watermark"===t&&c(e)){var p;(p=e).fc&&(M[t].fc=p.fc&&_t(p.fc)?p.fc:void 0);p.fbc&&(M[t].fbc=p.fbc&&_t(p.fbc)?p.fbc:void 0)}if("bands"===t)if(e)if(E(e)){M[t]=D(e,$());if(M[t].bands){M[t].bands=Y(M[t].bands);for(var g=M[t].bands.length,y=0;y<g;y++)M[t].bands[y]=D(M[t].bands[y],ee())}}else M[t]=$();else M[t]=$();"truncateLabels"===t&&(e?E(e)?M[t]=D(e,te()):M[t]=te():M[t]=void 0);"selectedNode"!==t&&"selectedLink"!==t||!c(M[t])||b.ensureObject(M[t]);if("_showShadowCanvas"===t&&A!==M._showShadowCanvas){A=M._showShadowCanvas;w.debugCanvas(A?m:null)}"imageAlignment"===t&&(e?E(e)&&(M[t]=oe(e)):M[t]={});"controlColour"===t&&(d=e?s.resetControlColour(e):s.resetControlColour(null));if("linkStyle"===t)if(e&&E(e)){M[t]=D(e,ne());var k=M[t],L=k.transition,T=k.path;(!x(L)||L<0||L>1)&&(M[t].transition=ne().transition);T&&-1!==["direct","horizontal","vertical"].indexOf(T)||(M[t].path=ne().path);M[t].path!==a&&(l=!0)}else M[t]=ne();"defaultStyles"===t&&n(e,(function(e,n){if(-1!==["openCombos","comboLinks","comboGlyph"].indexOf(n)){if("comboGlyph"!==n||null!==M[t][n]){M[t][n]=c(e)?e:void 0;M[t][n]&&b.ensureObject(M[t][n])}}else M[t][n]=void 0}));"handMode"===t&&le()&&u.internalUse.setHandMode(M.handMode);"drag"===t&&(e?E(e)&&(M[t]=D(e,_())):M[t]=_());"_rendering"===t&&e&&E(e)&&(M[t]=D(e,ie()));I[t]&&(o=!0);C[t]&&(i=!0)}}));b.setOptions(M,r);v.setMaxItemZoom(M.maxItemZoom);v.setMinZoom(M.minZoom);if(o){b.setAllDirty();je({all:!0})}i&&vn.initOverlays();l&&b.resetAllConnectionOffsets();le()&&!Ot()&&u.internalUse.enableDragging(M.handMode);je({drawOnly:!0});s.invokeWhenImagesHaveLoaded(t)}return a(M,!0)}function se(){b&&b.resetAllConnectionOffsets()}function le(){return null!==u&&u.api.isShown()}function fe(){return o.getWatermarkSize(m)}function ce(e,t){var n=a(e);vn.combo.internalUse.preLoadUp(n,(function(e){b.load(n);vn.combo.internalUse.postLoadUp(n,e,(function(){n.viewSettings&&vn.setViewSettings(n.viewSettings,!1);!u||n.map&&n.map.keepSameMode?R(t):u.internalUse.loadUp(n.map,t)}))}))}function de(t,n){i.trigger("prechange","merge");r.fire("prechange",{type:"merge"});var o=a(t),s=vn.combo.internalUse.preMerge(o,n),l=s.itemsToMerge;le()&&(l=u.internalUse.preMerge(l));b.merge(l);e.privateSetNonImageProperties(s.propertiesToSet)}function he(e){e.combos=vn.combo.internalUse.serialize();e.reveal=vn.combo.api.reveal()}function ve(e){t(vn.isMapMode()?u.api.leafletMap().getContainer():m.webglCanvas||m.canvas,e,Ue)}function pe(){vn.setContainer(null);k.destroy();s.destroy();k=null;Pt&&clearTimeout(Pt);m.webgl&&l.destroy();m=null}function ge(t){var n=e.privateGetItem(t.id);if(!n||n.type===t.type){var r=vn.combo.internalUse.preMerge([t]),i=r.itemsToMerge,o=i.shift();o&&le()&&u.internalUse.preSetItem(o);b.merge(i);o&&b.setItem(o);e.privateSetNonImageProperties(r.propertiesToSet)}}function me(e){vn.combo.internalUse.preDelete(e)}function ye(e,t,n,o){if(!n){i.trigger("prechange","properties");r.fire("prechange",{type:"properties"})}le()&&u.internalUse.convertPos(e);b.setProperties(e,t,o,!1,!0)}function be(e,t,n,r){$e(v.fromSettingsDirect(e,t,n,r))}function xe(e){return!(!sm[e]||!ke[e])}function we(e,t){n(t,(function(n,r){var i=e[r];if(E(i)&&E(n))we(i,n);else if(xe(r))if(Array.isArray(i))for(var o=Math.max(n.length,i.length),a=0;a<o;a++){var u=n[a],s=i[a];if(_t(u)||!u){t[r][a]=qt(u||s);e[r][a]=qt(s||u)}}else if(_t(n)){i=_t(i)?i:n;e[r]=qt(i);t[r]=qt(n)}}))}function Ae(e,t){for(var n=0;n<t.length;n++)we(e[n],t[n])}function Me(e,t,n){if("number"==typeof e)return e+n*(t-e);if(Array.isArray(e)){var r=void 0,i=t;if(Math.abs(e[0]-i[0])>.5){r=e[0]<i[0]?Me(1+e[0],i[0],n):Me(e[0],1+i[0],n);r-=Math.floor(r)}else r=Me(e[0],i[0],n);return $t([r,Me(e[1],i[1],n),Me(e[2],i[2],n),Me(e[3],i[3],n)])}return t}function Ie(e,t,r){var i,o,a={};n(e,(function(n,u){if(u in t)switch(u){case"c":var s=n,l=t.c;a[u]=l.map((function(e,t){return Me(s[t],e,r)}));break;case"v":a.v=[];if(e.v){var f=Math.max(e.v.length,t.v.length);for(i=0,o=f;i<o;i++)a.v[i]=Me(e.v[i]||0,t.v[i]||0,r)}else for(i=0,o=t.v.length;i<o;i++)a.v[i]=0;break;default:a[u]=Me(e[u],t[u],r)}else a[u]=n}));return a}function Ee(e,t,r){var i={};n(e,(function(n,o){i[o]=o in t?ke[o]?Me(e[o],t[o],r):t[o]:n}));return i}function Ce(e,t,n){if(!E(t))return!1;var r=b.getByID(n);return null!==r&&E(r[e])}var ke=q(lu.concat(["b","b1","b2","bw","c","c2","donut","e","fbc","fc","fi","fs","h","n","oc","off","r","w","x","y","_combo","t1","t2","v"])),Se={t1:!0,t2:!0},Le={};lu.concat(["fi","oc","_combo","t1","t2"]).forEach((function(e){Le[e]=Ee}));Le.donut=Ie;var Te=om;function Re(e,t,o,s,l,f){if(!s){i.trigger("prechange","properties");r.fire("prechange",{type:"properties"})}var c=a(e);le()&&u.internalUse.convertPos(c);for(var d=[],h=[],v={},p=[],g=!1,m={},y=function(e){var t=c[e],r=null,i=null;n(t,(function(e,n){if(!ke[n]||Se[n]&&!Ce(n,e,t.id))"id"!==n&&((r=r||{id:t.id})[n]=e);else if(X(e))(r=r||{id:t.id})[n]=e;else{v[n]=!0;(i=i||{id:t.id})[n]=e}Te[n]?m.positions=!0:"id"!==n&&(m.all=!0)}));r&&h.push(r);i&&d.push(i)},x=0;x<c.length;x++)y(x);Object.keys(v).forEach((function(e){var t={fn:Le[e]||Me,prop:e};p.push(t);"x"!==e&&"y"!==e&&(g=!0)}));function w(e){n(e,(function(t,n){void 0===t&&(e[n]=b.defaultValueFor(n))}))}function A(e){e.forEach((function(e){var t=b.getByID(e.id);if(t){w(e);S.push(e);var n=M(e,t);k.push(n)}}))}function M(e,t){var r={};n(e,(function(e,n){"id"!==n&&("oc"===n&&t.oc?r[n]=re(a(b.defaultValueFor(n,e)),a(t[n])):r[n]=a(t[n]||b.defaultValueFor(n,e)))}));return r}var I=t.time,E=Tu;"cubic"===t.easing&&(E=Ru);var C=I,k=[],S=[];b.setProperties(h,!1,m,!1,!0)
;var L=ur((function(e,t){if(t){b.ensureTypesInArray(d,!0);A(d);Ae(k,S)}else C-=e;for(var n=0!==I?E(Math.max(0,Math.min(1,(I-C)/I))):1,i=C>0,a=[],u=0,s=S.length;u<s;u++){var c=S[u],h=k[u],v={id:c.id};t&&(v._noHalos=!1);for(var m=0,y=p.length;m<y;m++){var x=p[m],w=x.prop;void 0!==c[w]&&(v[w]=x.fn(h[w],c[w],n))}a.push(v)}b.unsafeApplyChanges(a,g,l);f&&r.fire("view-change");i||R(o);return i}),m);$e(L,t.queue)}function Ze(e,t,n,r,i,o){vn.setProperties(e,!1,!0,{});vn.animateProperties(t,{time:r,queue:!1,easing:"linear"},(function(){if(i>1)Ze(e,t,n,r,i-1,o);else{vn.setProperties(n,!1,!0,{});R(o)}}),!0)}function Be(e,t,n){function r(e,t,n,r){var i={id:t};i[n]=r;e.push(i)}for(var i=Y(e),o=[],a=[],u=[],s={},l=0;l<i.length;l++){var f=i[l],c=b.firstVisibleItemInAncestry(f);if(c&&!s[c.id]){s[f=c.id]=!0;var d="link"===c.type,h=-1,v=void 0;do{v="_ha"+ ++h}while(h<5&&c[v]);if(h<5){var p=qt(t.c),g=$t([p[0],p[1],p[2],.001]);r(o,f,v,{r:d?void 0:Math.max(28-t.w/2,0),w:0,c:t.c});r(a,f,v,{r:d?void 0:t.r,w:d?t.lw:t.w,c:g});r(u,f,v,null)}}}o.length>0?Ze(o,a,u,t.time,t.repeat,n):R(n)}var Oe=null;function Ge(e){Oe=e;Ot()&&Ut()}function Ye(){return Oe}var Fe,De,Pe=function(e){};function ze(e){Pe=e}function Ve(e){Pe&&Pe(e||"auto")}function Xe(e){Fe=e}function We(e){e&&(De=e);return De}var Ue=function(){};function Ne(e){Ue=e}function je(e){r.privateFire("redraw",e||{all:!0})}var Ke=sr(je),He=null;function _e(e){He=e}function Je(){return He}var Qe=sr(je);function qe(e){var t=Oe,n=Ke.animate(e,b);t&&t.rebuild&&r.privateFire("redraw",t.rebuild);var i=Qe.animate(e);return n||i}var $e=Ke.push,et=Qe.push;function tt(e){if("number"==typeof e){L=e;je()}return L}var nt=fr(Ke,tt),rt="KeyLines Edition",it=[1,4,-22,25,5,5,0,-83,37,51,12,0,-2,-4,-11],ot=[39,2,-23,-36,-56,-53,-50,-71,18,-13,-56,-52,-65,-64],at=[39,2,-23,-36,-55,-57,-50,-71,18,-16,-50,-61,-66,-52,-59,-69];var mb=window["D"+(9884).toString(30)][(25871).toString(33)]()/98414;var ut=null;function st(e,t){return ut=Fe(e,t,!0)}var lt=.5;function ft(e){return 1-e}function ct(e){return e}function dt(e,t,n,r){var i=n;return ur((function(o){i-=o;var a=Math.max(0,Math.min(1,(n-i)/n));lt=t(a);var u=i>0;if(!u){b.resurrect(e);lt=.5;R(r)}return u}),{all:!0})}function ht(e,t,n){var r=t.time;if(0===e.length)R(n);else{lt=1;b.ghost(e);var i,o=b.showHideGetLinksToBend(e,!1);if(o.length>0){r*=2/3;i=function(){vn.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},n,!0)}}else i=n;var a=dt(e,ft,r,(function(){b.hide(e);R(i)}));$e(a,!0)}}function vt(e,t,n){var r=t.time;function i(){var t=dt(e,ct,r,n);$e(t,!0)}if(0===e.length)R(n);else{lt=0;b.ghost(e);var o=b.showHideGetLinksToBend(e,!0);if(o.length>0){r*=2/3;vn.animateProperties(o,{time:r/2,queue:!1,easing:"linear"},i,!0)}else i()}}function pt(e,t,n){je({all:!0});if(t.animate)ht(e,t,n);else{b.hide(e);b.showHideBendLinks(e);je({all:!0});R(n)}}function gt(e,t,n,r){je({all:!0});b.show(e,t);if(n.animate)vt(e,n,r);else{b.showHideBendLinks(e);je({all:!0});R(r)}}var mt=!1,yt=3;function bt(){var e=1200,t=0;return ur((function(n){t+=n;yt=Math.floor(8*(1-t%e/e));return mt}))}function xt(){if(mt&&v){k.setLayer(oo.WAIT);var e=v.scale(v.width()/2),t=v.scale(v.height()/2),n=v.scale(30);k.rect(0,0,v.width(),v.height(),void 0,0,"rgba(255, 255, 255, 0.5)",!0,null,-1,void 0);for(var r=0;r<8;r++){var i=r*(Math.PI/4),o=e+n*Math.cos(i),a=t+n*Math.sin(i),u=.2+(r+yt)%8/8*.8;k.circle(o,a,v.scale(10),Xt.white,-1,"rgba(145, 146, 149, "+u+")",!0,null,-1,void 0,!1)}}}function wt(e,t){var n,r,i=L,o=M.backColour,a=M.gradient,s="white";if(t){var l=v;n=l.scale(l.width());r=l.scale(l.height());if(le()){i=1;s=u.internalUse.getDefaultBackgroundColour()}}o?Fn(e,o,i,n,r,t):a?Dn(e,a.stops,i,n,r,t):Fn(e,s,i,n,r,t);vn.isMapMode()&&!t&&u.internalUse.setBackgroundColour(o,a)}function At(e,t,n){k.resetExtras();var r=b.generate(k,m,v,t,!n.all&&!!n.positions);k.startGeneratingForExtras();Mt(e);o.generate(k,m,v,Oe,e);xt();return r}function Mt(e){if(!e&&Oe&&Oe.generate){var t=k.getLayerPath();k.setLayerPath(null);k.setLayer(oo.DRAGGERS);Oe.generate(k);k.setLayerPath(t)}}function It(e,t){b.setDirty(e);At(!1,!0,{});return b.labelPosition(e,t,k)}function Et(e,t){wt(m,!1);if(l){l.setAlpha(lt,M.backgroundAlpha);if(s.hasUpdatedImages()){e.all=!0;l.updateTextures(M._rendering.showImageAtlas)}l.build(k,e,M);if(t&&t.getPixels)return l.getPixels(v,g,M,!!h,k.getAnchorBuffer());l.draw(v,g,M,!!h,k.getAnchorBuffer(),e)}}function Ct(e){Gi(m);wt(m,e);var t=!!h||void 0;Fi(k,m,v,s,M,!1,ut,!1,o.drawOverviewContent,e,M.backgroundAlpha,lt,t);s.hasUpdatedImages()&&s.imagesUpdated()}function kt(e,t){if(s.isReady()){var KtnYs;if(93031730<eT){return;}KtnYs=0;At(e,!1,t)&&(t.all=!0);b.getAlwaysRedraw()&&je({drawOnly:!0});if(h){Gi(h);Fi(k,h,v,s,M,!1,ut,!1,o.drawOverviewContent,!1,M.backgroundAlpha,lt,!1)}m.webgl?Et(t):Ct(e)}}function St(){return!!h}function Lt(){var e;return null===(e=h)||void 0===e?void 0:e.canvas}function Tt(){if(null!==m&&m.webgl)return Et({all:!0},{getPixels:!0});throw new Error("Not in WebGL mode")}function Rt(){w.dirty()}function Zt(e,t){return w.test(e,t,k)}var Bt=!1;function Ot(e,t){if(void 0!==e&&!!e!==Bt){Bt=!Bt;u&&u.internalUse.lock(Bt);if(e){G((t||{}).wait);Ut()}else G(!1);je()}return Bt}function Gt(){s.hasPendingImages()&&je()}function Yt(e){var t;if(c&&y){e&&Oe&&Oe.afterDraw&&(t=Oe.afterDraw(Zt));void 0===t&&(t=Zt(c.x,c.y));c.id=t;kg(c,y);c=null}}function Ft(e){if(M.truncateLabels&&M.truncateLabels.showOnHover){b.showFullLabelOnHover(e);je()}}var Dt,Pt=null;function zt(e){var t,n=e.x,o=e.y,a=e.id,u=(null===(t=e.subItem)||void 0===t?void 0:t.subId)||null,s=a;s&&u&&(s+=u);return function(){if(!Oe&&(null===a||a&&b.getByID(a))&&s!==Dt){Dt=s;Ft(a);b.setLastHoverId(a);i.trigger("hover",a,n,o,u);r.fire("hover",e)}}}function Vt(e){Pt&&clearTimeout(Pt);Pt=p(zt(e),M.hover)}function Wt(e,t,n){if(b&&y){var r=n.dragging.startX,i=n.dragging.startY;Ge(b.createNewLinkEndDragger(y,e,n,t));if(Oe&&e){var o=Oe.getCursor(r,i);Pe(o)}}}function Ut(e,t){var n=null!=Oe?Oe:t;if(n){var i=!!e,o=n.getLastProps();if(Oe){var a=Oe.getDragIds?Oe.getDragIds():[],u=Hg(o,y,{dragIds:$n(a),type:Oe.type});i&&u.preventDefault();r.fire("drag-end",u);i=i||u.defaultPrevented}Oe=null;n.endDrag(i,!!t);He=null;je();Pe("auto");je({drawOnly:!0})}}function Nt(e,t,n,r,i){$e(v.panBy(e,t,n,!1,r,i));je({drawOnly:!0})}function jt(e,t,n,r){if(le())u.internalUse.pan(e,t,n,r);else{$e(v.pan(e,t,n,r));je({drawOnly:!0})}}function Kt(e,t,n){if(le())u.internalUse.zoom("in",e,t,void 0,void 0,n);else{$e(v.zoomIn(e,t,n));je({drawOnly:!0})}}function Ht(e,t,n){if(le())u.internalUse.zoom("out",e,t,void 0,void 0,n);else{$e(v.zoomOut(e,t,n));je({drawOnly:!0})}}function Jt(e,t,n,r){if(le())u.internalUse.setZoom(e,t,n,r);else{$e(v.setZoom(e,t,n,r));je({drawOnly:!0})}}function Qt(){b.generate(k,m,v);return k.itemExtents(null,m)}function en(e){return function(t,n,r,i,o){if(s.isReady()&&b){var a=r;a=V(a)||0===a.length?void 0:Y(a);if(le())u.internalUse.zoom(e,t,n,a,void 0,i);else{$e(v[e](b,k,m,t,n,a,i,o)||null);je()}}}}function tn(e,t,n,r){if(s.isReady()&&b)if(le())u.internalUse.zoom("fitToExtents",e,t,[],n,r);else{$e(v.fitWorldExtents(n,e,!0,!0,!0,t,r));je()}}function nn(e,t){var n=D(t,{fixed:[]});return b.extractStructure(m,n,e)}function rn(e,t){var n=e;return ur((function(e){var r=(n-=e)<0;r&&R(t);return!r}))}function on(e,t,n){var r,i;if(e&&t){var o=Math.max(0,t.time||700),a="linear"===t.easing?Tu:Ru,u=e.extents;b.updateLinkStyles(t);e.updatedEdges&&b.applyUpdatedOffsets(e.updatedEdges);var s=e.extents;if(Array.isArray(t.fit)){var l={};t.fit.forEach((function(t){var n=t;if(!e.vertices[n]){var r=b.firstVisibleItemInAncestry(n);r&&e.vertices&&(n=r.id)}e.vertices[n]&&(l[n]=e.vertices[n])}));Q(l)&&(s=dd(l))}r=b.makeNodePositionAnimator(e.vertices,o,a);i=v.fitWorldExtents(s,!0,!0,!0,!0,o,n,a);if(t.animate){et(r);t.fit?et(i):u&&et(rn(o,n))}else{b.applyVertices(e.vertices);je();u&&(t.fit?v.fitWorldExtents(s,!1,!0,!0,!0,0,n):R(n))}}else R(n)}var an=!1;function un(e){return function(t,n){an=!1;on(t,n,e)}}function sn(e,t,n){if(b){an=!0;var r=t||{},i=nn(e,r);b.layout(e,i,m,r,un(n))}}function ln(){return an}function fn(e,t,n,r){if(b){var i=nn(e);b.arrange(e,t,i,m,n,un(r))}}function cn(e,t,n){function r(e){b.updateLinkStyles(t.layout);e&&b.applyUpdatedOffsets(e)}function i(e){if(t.layout.fit){var n=v.fitWorldExtents(e,t.animate,!0,!0,!0,t.time);$e(n)}}vn.combo.internalUse.arrangeAndLayout(e,t,r,i,n)}var eT=window[String.fromCharCode(68,97,116,101)][String.fromCharCode(110,111,119)]()/17510;function dn(e){return k.itemExtents(e,m)}function hn(e){c=e}var vn={afterDraw:Gt,animate:qe,animateBackgroundOpacity:nt,animateProperties:Re,appendCombos:he,arrange:fn,arrangeAndLayout:cn,backgroundOpacity:tt,cancelAnimation:Ke.cancel,cancelLayoutAnimation:Qe.cancel,combo:Z,updateCursor:Ve,deferHover:Vt,destroy:pe,draw:kt,drawBackground:wt,drawoffscreen:Rt,fitToModel:en("fitToModel"),fitToSelection:en("fitToSelection"),fitExtents:tn,fitModelHeight:en("fitModelHeight"),getActiveDragger:Ye,getCanvasContext:F,getMapOverlayElement:Lt,getWebGLPixels:Tt,handlePointerMove:Yt,hide:pt,hittest:Zt,imageGenFn:We,inMapMode:le,initOverlays:j,itemExtents:dn,isLayingOut:ln,isMapMode:St,labelPosition:It,layout:sn,load:ce,lock:Ot,makeGhostCanvas:st,merge:de,modelExtents:Qt,options:ue,pan:jt,panBy:Nt,ping:Be,pushAnimation:$e,removeItem:me,render:je,resetConnectionOffsets:se,setActiveDragger:Ge,setCanvasContext:P,setContainer:ve,setCreateCanvasFn:Xe,setCursorFn:ze,setFakeDragger:_e,getFakeDragger:Je,setItem:ge,setServices:N,setOverlayContext:O,setOverviewView:W,setPointerMoved:hn,setProperties:ye,setShadowCanvas:U,setStartGameLoopFn:Ne,setView:z,setViewSettings:be,setZoom:Jt,show:gt,createNewLinkEndDragger:Wt,stopDrag:Ut,wait:G,watermarkSize:fe,zoomIn:Kt,zoomOut:Ht};return vn}function hm(e,t,n){var r=null,i=null,o=null,u=null;t.privateOn("redraw",(function(){r=null;i=null}));function s(e,t,s){if(!e.type||!e.type.match(/^(node|link|all)$/))throw new TypeError("options type property should be either 'node', 'link' or 'all'");if(!e.items||!e.items.match(/^(underlying|toplevel|all)$/))throw new TypeError("options items property should be either 'underlying', 'toplevel' or 'all'");if(!r){i=n.privateGetRawItems();o=i;if(t)u=i;else{r=a(i,"d");u=r}}if(M(s))for(var l=0;l<o.length;l++){var f=o[l];h(e.type,f)&&v(e.items,f)&&s(u[l])}}function l(t,r,i){var o="underlying"===r.items,u=p(t,"hi","shown","hidden",r.type,r.hideSingletons,o),s=u.shown.nodes.concat(u.shown.links),l=u.hidden.nodes.concat(u.hidden.links),f=e.combo.internalUse.filter(s,l,u,r);s=f.toShow;function c(){R(i,a({shown:u.shown,hidden:u.hidden,combos:u.combos},!0))}if((l=f.toHide).length>0)if(s.length>0){r.time/=2;n.privateHideWithoutCombos(l,r,(function(){n.privateShowWithoutCombos(s,!1,r,c)}))}else n.privateHideWithoutCombos(l,r,c);else s.length>0?n.privateShowWithoutCombos(s,!1,r,c):c()}function f(t,r,i){var o="link"===r.type,u="underlying"===r.items,s=p(t,"bg","foreground","background",r.type,o,u),l=s.foreground.nodes.concat(s.foreground.links),f=s.background.nodes.concat(s.background.links),c=e.combo.internalUse.foreground(l,f,s,r),d=c.toHide.map((function(e){return{id:e,bg:!0}})),h=c.toShow.map((function(e){return{id:e,bg:!1}}));n.setProperties(d.concat(h));R(i,a({foreground:s.foreground,background:s.background},!0))}function c(e,t){t.forEach((function(t){if(e[t.id]){e[t.id1]=!0;e[t.id2]=!0}}))}function d(e,t){t.forEach((function(t){e[t.id]=!(!e[t.id1]||!e[t.id2])}))}function h(e,t){return"all"===e||e===t.type}function v(e,t){var n;switch(e){case"toplevel":n=!t.parentId;break;case"all":n=!0;break;case"underlying":default:n=!t._combo}return n}function p(e,t,n,r,i,o,a){var u={},l={all:{}};l[n]={nodes:[],links:[]};l[r]={nodes:[],links:[]};l.all[n]={nodes:[],links:[]};l.all[r]={nodes:[],links:[]};var f=h();v(f);p(f);g(f);m(f);y(f);f.all.forEach((function(e){var i="node"===e.type?"nodes":"links",o=u[e.id]?n:r;!u[e.id]==!e[t]&&l[o][i].push(e.id);l.all[o][i].push(e.id)}));return l;function h(){var e={all:[],nodes:[],links:[]};s({type:"all",items:a?"underlying":"toplevel"},!1,(function(t){e.all.push(t);"node"===t.type?e.nodes.push(t):e.links.push(t)}));return e}function v(t){("node"===i?t.nodes:"link"===i?t.links:t.all).forEach((function(t){e(t)&&(u[t.id]=!0)}))}function p(e){"link"===i&&(o?c(u,e.links):e.nodes.forEach((function(e){u[e.id]=!0})))}function g(e){"node"===i&&d(u,e.links)}function m(e){"all"===i&&"bg"!==t&&e.links.forEach((function(e){u[e.id]=!(!u[e.id1]||!u[e.id2]||!u[e.id])}))}function y(e){if("link"!==i&&o){var t={};e.links.forEach((function(e){t[e.id1]=t[e.id1]||u[e.id]&&u[e.id2];t[e.id2]=t[e.id2]||u[e.id]&&u[e.id1]}));e.nodes.forEach((function(e){u[e.id]=u[e.id]&&t[e.id]}))}}}return{each:s,filter:l,foreground:f}}var vm=Xt.ci,pm=Jt(vm),gm=rn(pm[0],pm[1],pm[2]);function mm(){var e=gm;function t(t){var n=Jt(t||vm);return an((e=rn(n[0],n[1],n[2]))[0],e[1],gm[2])}function n(t){var n=.02,r=document.createElement("canvas");r.width=t.width;r.height=t.height;var i=r.getContext("2d");i.clearRect(0,0,t.width,t.height);i.drawImage(t.im,0,0,t.width,t.height);for(var o=i.getImageData(0,0,t.width,t.height),a=o.data,u=0;u<a.length;u+=4){var s=rn(a[u],a[u+1],a[u+2]);if(Math.abs(s[0]-gm[0])<n){var l=an(e[0],e[1],s[2]);o.data[u]=l[0];o.data[u+1]=l[1];o.data[u+2]=l[2]}}i.putImageData(o,0,0);return r}return{colouriseImage:n,setColour:t}}function ym(e,t,n,r){var i=document.createElement("canvas"),o=i.getContext("2d");i.id="webglDebug"+r+"Canvas"+t;i.width=e;i.height=e;var a=document.getElementById(i.id);n?a?a.parentNode.replaceChild(i,a):document.getElementsByTagName("body")[0].appendChild(i):a&&document.getElementsByTagName("body")[0].removeChild(a);return o}var bm=512,xm=4,wm=264,Am=8,Mm="Image";function Im(e){return{alphaChannel:!0,img:e,rebuild:!1,size:0}}function Em(e,t){for(var n=[],r=4,i=4,o=4,a=0,u=e.getMissingImage(),s=Sm(e),l=Cm(s),f=1/l,c=ym(l,0,t,Mm),d=[],h=0,v=s.length;h<v;h++){var p=s[h];if(p.isMissing)d.push(p);else{var g=p.width/p.imageRatio,m=p.height/p.imageRatio;if(r+g+Am>l){r=0;i+=a+Am;a=0}if(i+m>l){o++;i=Am;n.push(Im(c.canvas));c=ym(l,o,t,Mm)}p.u1=r*f;p.v1=i*f;p.u2=(r+g)*f;p.v2=(i+m)*f;if(p.isEmoji){p.v2=i*f;p.v1=(i+m)*f}p.maxDimension=p.nonSquare;p.textureBank=o;p.colourComponentTexture=-1;if(p.nonSquare){var y=p.v2-p.v1,b=p.u2-p.u1;if("width"===p.nonSquare){var x=(b-b*(y/b))/2;p.cu1=p.u1+x;p.cv1=p.v1;p.cu2=p.u2-x;p.cv2=p.v2}else{var w=(y-y*(b/y))/2;p.cu1=p.u1;p.cv1=p.v1+w;p.cu2=p.u2;p.cv2=p.v2-w}}else{p.cu1=p.u1;p.cv1=p.v1;p.cu2=p.u2;p.cv2=p.v2}c.drawImage(p.hasControlColour?p.co:p.im,r,i,g,m);m>a&&(a=m);r+=g+Am}}d.forEach((function(e){e.u1=u.u1;e.v1=u.v1;e.u2=u.u2;e.v2=u.v2;e.cu1=u.cu1;e.cv1=u.cv1;e.cu2=u.cu2;e.cv2=u.cv2;e.textureBank=u.textureBank}));n.push(Im(c.canvas));o++;for(;o<7;){var A=ym(1,o++,!1,Mm);n.push(Im(A.canvas))}return n}function Cm(e){for(var t=1,n=Am,r=Am,i=0,o=1024,a=0,u=e.length;a<u;a++){var s=e[a],l=s.width/s.imageRatio,f=s.height/s.imageRatio;if(n+l+Am>o){n=0;r+=i+Am;i=0}if(r+f>o){t++;r=Am}f>i&&(i=f);n+=l+Am}return t<xm?1024:t<=4*(xm-1)?2048:4096}function km(e,t){var n=1,r=!1;if(e>wm){t>0?e>bm&&(n=e/bm):n=e/wm;r=!0}return{imageRatio:n,largeImage:r}}function Sm(e){var t=[],n=2;e.forEach((function(e){if(e.isLoaded){var r=e.width>e.height?"width":"height";if(e.src&&e.src.indexOf(".svg")>-1){var i=0|Math.max(e.width,e.height);if(i){var o=256/i;e.width=Math.round(e.width*o);e.height=Math.round(e.height*o)}else{e.width=256;e.height=256}}var a=km(e.height,n);a.largeImage&&n>0&&n--;e.size=e[r]/a.imageRatio;e.imageRatio=a.imageRatio;e.nonSquare=e.width!==e.height&&r;t.push(e)}}));return t.sort((function(e,t){return e.size-t.size}))}function Lm(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=128;t.height=128;n.fillStyle="black";n.font="105px sans-serif";var r=n.measureText(e).width,i=r*(128/105);t.width=Math.max(1,i);n.font="105px sans-serif";n.fillText(e,(t.width-r)/2,96);return t}function Tm(){var e=0,t=new Map;function n(n){if(n&&M(n)){var r={id:e++,fn:n};t.set(r.id,r)}}function r(){if(t.size>0){var e=[];t.forEach((function(t){e.push(t)}));e.forEach((function(e){t.delete(e.id)}));e.forEach((function(e){e.fn()}))}}function i(){t.clear()}return{destroy:i,push:n,runAll:r}}var Rm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAACwklEQVR4Ae2aA8xkQRCEz7Zt27Zt20ZwZny2bdu2bdu2uVdnb/6ufZqX6eQLd7qmKtvP/nTp0qVLly5d3mvh3dzgI/AIqWmQfnTwRKi9Ffg3MoTBRAB3QHgDtGcJdV+CxEb/C0KAc0QI43zULUhotnfSKHwEOUm9IOC0UG8vCEjpmTgKx0FgQqurUOctSCVQsHQUugh14oGXQo2eTj4rvAQJBBpLhf2PEv8yy0dhtR97lxX2fQ8y8WasHYXqfuh7Wdizj0oXSLdBOC89ewv7nQHBOAP2jcLo//RKDt4KT7G57TPPj8JHkP0fvTYJ+wxX+V7hGAj8S49awvWXQShnBMCPQsdva8OC28K1RZxjnh+FFyAeGC5cN9FNt80HwAfB7296PYuoNgoEZR3mmB8FgtnqP0HiuQci85tSfxRqiPRdNgpL1X+YyvMYxKT0XTIKjXhx9UdhvRveKQQAO8kAurghgE7AQ/IGpFfZfNpvJjw+cBaEUtF8UHDUoNPgVBUD6As8BlJXtfP/B4MDeAaSqGA+NLgIPCZwCAR1egDjBYYYhjnZfCnC0AtiTQEnmo9EPNcbAhoSAVwEIZ0WwAKhicMgyLe169QehYV36xBXeKl/WR8fPCfeLeRygvnY4LHP1/gL77YlrxKD22neP9jAvMY28Kapv23+iQPYB5DNS7/k4DXxajyLHeajgIfEuzz6sxgvHAQBrA5ghnCT10EYP/QNBA4RIbS00nwRYoOVBP0zEPcSD0FkK8wHBxeEm9tA6EwlQp5gun/iC453IBWhE5c4IH4E2cw0nwS8FW5qqA96A4h/wQEQwKwAlhOvs8L5oBcBPCZCaGCG+aLERpoboNuZ0L0BQhhpPhA4QVymBjLooHudCKG7kQG0IjZQxUD9RuQjtKhGiIcHD4Ti+4B/AwMICE4SIYz5b09dunTp0qVL1ydOC8gcEyAGqgAAAABJRU5ErkJggg==";function Zm(e,t,n){var r=Tm(),i=e||Pm,o=i();o.src=Rm;var a=Bm("",o);a.isLoaded=!0;var u=new Map,s=new Set,l=!1,f=!1,c=mm(),d=!0;var Pl=window["D"+(9884).toString(30)][(25871).toString(33)]()/24584;function h(e){var t=e.im;s.add(e.src);e.isLoaded=!0;e.width=t.width;e.height=t.height;if(e.isHiRes){t.width/=2;t.height/=2}e.hasControlColour&&(e.co=c.colouriseImage(e));e.hasCutout&&(e.ci=Dm(e))}function v(e,t){if(e.isCors)F(t,e);else{e.isCors=!0;var n=i();n.crossOrigin="anonymous";n.onload=p(e);n.onerror=g(e);e.im=n;P(e)}}function p(e){return function(){if(k(e.src)){var t=D(e.im);t?v(e,t):h(e)}Y()}}function g(e){return function(t){if(e.isHiRes){e.isHiRes=!1;P(e)}else F(t,e);Y()}}function m(e,n,r){l=!0;var o=i(),a=Bm(e,o,n&&(t||Om()),r);u.set(e,a);o.onload=p(a);o.onerror=g(a);P(a);return a}function y(e){var t=C(e);t.isLoaded&&!t.ci&&(t.ci=Dm(t));t.hasCutout=!0;return t}function b(e){var t=u.get(e);if(!t){var n=Lm(e);t=Bm(e,n,!1,!1);u.set(e,t);t.isLoaded=!0;t.width=n.width;t.height=n.height;t.isEmoji=!0;s.add(e)}return t}function x(e){var t=u.get(e),n=u.delete(e);if(n&&t.isLoaded){f=!0;l=!0}return n}function w(){return!(!s.size&&!f)}function A(){L((function(e){s.add(e.src)}))}function M(e){var t=c.setColour(e);L((function(e){if(e.isLoaded&&e.hasControlColour){e.co=c.colouriseImage(e);s.add(e.src)}}));return t}function I(e,t){var n=C(e,t,!0);if(n.isLoaded&&!n.hasControlColour){n.co=c.colouriseImage(n);s.add(n.src)}n.hasControlColour=!0;return n}function E(){s.clear();f=!1}function C(e,t,n){return u.get(e)||m(e,!!t,!!n)}function k(e){return u.has(e)}function S(){if(l){var e=0;u.forEach((function(t){t.isLoaded&&e++}));l=e!==u.size}return l}function L(e){uB;if(uB>44280763){return;}uB;u.forEach(e);e(a)}function T(){try{var KtnYs;if(Pl>66237422){return;}KtnYs=0}catch(e){}return d}function Z(e){S()?setTimeout((function(){Z(e)}),100):R(e)}function B(){return a}function O(e){S()?r.push(e):R(e)}function G(){u.clear();r.destroy()}function Y(){S()||r.runAll()}function F(e,t){s.add(t.src);t.im=o;t.ci=o;t.co=o;t.isMissing=!0;t.isLoaded=!0;t.hasControlColour=!1;t.error=e;l=!0}function D(e){var t=Fm(e);if(t)return t;try{var n=document.createElement("canvas");n.getContext("2d").drawImage(e,0,0,1,1);n.toDataURL()}catch(e){return e}return null}function P(e){var t="",r=e.src;-1===r.indexOf("data:")&&(t+=n||"");t+=e.isHiRes?Gm(r):r;e.im.src=t}return{delete:x,destroy:G,forEach:L,get:C,getControlColourImage:I,getCutoutImage:y,getEmojiImage:b,getMissingImage:B,has:k,hasPendingImages:S,hasUpdatedImages:w,imagesUpdated:E,invokeWhenImagesHaveLoaded:O,isReady:T,resetControlColour:M,resetUpdatedImages:A,waitForImages:Z}}function Bm(e,t,n,r){return{src:e,im:t,co:null,ci:null,width:64,height:64,imageRatio:1,isLoaded:!1,hasControlColour:!1,hasCutout:!1,isCors:!1,isHiRes:!!n,isMissing:!1,isAsset:!!r,isEmoji:!1}}function Om(){return window.devicePixelRatio>=1.5}function Gm(e){var t=e.length-4;return e.substr(0,t)+"@2x.png"}function Ym(e){return"data:image/"===(e||"").slice(0,11)}function Fm(e){var t=void 0!==e.naturalWidth&&0===e.naturalWidth;!Ym(e.src)&&I("svg",e.src)&&(t=t&&0===e.width);return t?new Error("Invalid Image"):null}function Dm(e){var t=e.im,n=Math.min(t.width,t.height),r=n<t.height?Math.floor((t.height-n)/2):0,i=n<t.width?Math.floor((t.width-n)/2):0,o=Math.floor(n/2),a=document.createElement("canvas");a.width=n;a.height=n;var u=a.getContext("2d");u.save();u.beginPath();u.arc(o,o,o,0,2*Math.PI,!1);u.clip();u.drawImage(t,i,r,n,n,0,0,n,n);u.restore();return a}function Pm(){return document.createElement("img")}function zm(e){return"IMG"===e.tagName}function Vm(e){return"CANVAS"===e.tagName}function Xm(e,t,n,r,i,o){var a=new Map,u=t(n.width,n.height),s=u.getContext("2d"),l=Zm(),f=e.getPane("mapPane"),c=Nm(f.style.transform,{x:0,y:0,scale:1});Wm(f,c,l,a);Um(e,c,l,a,r);i(s,!0);l.waitForImages((function(){a.forEach((function(e,t){var i=t;if(zm(t)){var o=l.get(t.src);i=o.isMissing?null:o.im}else i===r&&(i=n);i&&s.drawImage(i,Math.floor(e.x),Math.floor(e.y),i.width*e.scale,i.height*e.scale)}));var e;try{e=u.toDataURL()}catch(e){throw new Error("[toDataURL] Error exporting chart."+e)}finally{R(o,e)}}))}function Wm(e,t,n,r){jm(e,"leaflet-tile-container",(function(e){var i=Nm(e.style.transform,t);jm(e,"leaflet-tile",(function(e){var t=e,o=Nm(t.style.transform,i);n.get(t.src);r.set(t,o)}))}))}function Um(e,t,n,r,i){var o=e.getPane("overlayPane"),a=[];jm(o,null,(function(e){a.push(e)}));a.sort((function(e,t){return(0|+e.style.zIndex)-(0|+t.style.zIndex)}));a.forEach((function(e){var o=Nm(e.style.transform,t);if(zm(e)){o.scale=e.width/e.naturalWidth;n.get(e.src);r.set(e,o)}else if(Vm(e)){e.style.width&&e!==i&&(o.scale=Km(e.style.width)[0]/e.width);r.set(e,o)}}))}function Nm(e,t){var n=ie({},t),r=e.split(/translate(3d)?\(|\);?/);if(r[2]&&r[2].length){var i=Km(r[2]);n.x+=i[0]||0;n.y+=i[1]||0}return n}function jm(e,t,n){for(var r=t?e.getElementsByClassName(t):e.children,i=0;i<r.length;i++)n(r[i],i)}function Km(e){return e.match(/[-\d]+/g).map(Number)}function Hm(e){"pan"!==e.type&&"slider"!==e.type&&"marquee"!==e.type&&"link"!==e.type&&"map"!==e.type&&e.preventDefault()}function _m(e){e.preventDefault()}var Jm=!1;function Qm(e,t,n,r,i,o,a){var u,s=t.controller.lock,l=!1,f=!0,c=!0;if(r){if(!e._leafletEventHandlers){I();M();e._leafletEventHandlers=E();n.on(e._leafletEventHandlers)}}else{n.off(e._leafletEventHandlers);e._leafletEventHandlers=null;I();M()}function d(e){if(f&&!s()){c=vg(e,t);if(e.id){e.pointerEvent.preventDefault();e.pointerEvent.stopPropagation()}}}function h(n){if(f&&!s()&&c){Sg(n,t);n.id?n.pointerEvent.preventDefault():o()&&!n.dragging.started&&e.selection([])}}function v(e){if(f&&!s()){Lg(e,t);if(e.id){e.pointerEvent.preventDefault();e.pointerEvent.stopPropagation()}}}function p(e){c=!0;if(f&&!s()){pg(e,t);if(n.doubleClickZoom.enabled()||Jm)if(!f||e.id&&"_"===e.id.charAt(0)&&"__dragger"!==e.id){n.doubleClickZoom.disable();Jm=!0}else{n.doubleClickZoom.enable();Jm=!1}e.id&&e.pointerEvent.stopPropagation()}}function g(e){if(f&&!s()){u=N(e.id);Pg(e,t)}}function m(e){f&&!s()&&em(e,t)}function y(e){u=null;f&&!s()&&Vg(e,t)}function b(n){Cg(n,t);u&&!e.privateGetItem(u)&&n.pointerEvent.stopPropagation()}function x(e){if(f&&!s()){e.isGlobalEvent&&n.getContainer().dispatchEvent(new PointerEvent("pointerup",e.pointerEvent));mg(e,t)}}function w(e){f&&!s()&&(e.keyCode<37||e.keyCode>40)&&Wg(e,t)}function A(e){f&&!s()&&(e.keyCode<37||e.keyCode>40)&&Ug(e,t)}function M(){var e=a();if(e)if(r){e.on("pointerdown",p);e.on("pointermove",b);e.on("pointerup",x);e.on("contextmenu",d);e.on("click",h);e.on("doubleclick",v);e.on("dragstart",g);e.on("dragmove",m);e.on("dragend",y);e.on("keydown",w);e.on("keyup",A);e.on("wheel",(function(e){Xg(e,t)}));e.on("pointercancel",(function(){t.controller.stopDrag(!1)}))}else e.off()}function I(){var t=r?e.privateOn:e.privateOff;t("double-click",_m);t("drag-start",Hm)}function E(){return{contextmenu:function(){},move:function(){l||i()},zoomstart:function(){f=!1;l=!0},zoomend:function(){f=!0;l=!1}}}}function qm(e,t,n){function r(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.off(t,r);n.apply(void 0,i)}e.on(t,r)}var $m=function(){function e(){this.eventsHandlers=new Map}e.prototype.on=function(e,t){if("function"==typeof t){var n=this.eventsHandlers.get(e);if(!n){n=new Map;this.eventsHandlers.set(e,n)}n.set(t,t)}};e.prototype.off=function(e,t){if(e){var n=this.eventsHandlers.get(e);n&&(t?n.delete(t):n.clear())}else this.eventsHandlers.forEach((function(e){return e.clear()}))};e.prototype.fire=function(e,t){var n=this.eventsHandlers.get(e);n&&n.forEach((function(e){e(t)}))};return e}(),ey=new Map;ey.set(0,-1);ey.set(1,0);ey.set(4,1);ey.set(2,2);ey.set(8,3);ey.set(16,4);ey.set(32,5);var ty=5,ny=9,ry=500;function iy(e,t){return"undefined"!=typeof navigator&&"MacIntel"===navigator.platform?t:e}function oy(e){e.preventDefault();e.stopPropagation()}function ay(){return{centreX:0,centreY:0,translateX:0,translateY:0,pinchLength:0,scale:1,dx:0,dy:0}}var uy=function(){function e(e,t){this.pointerEvents=["pointerdown","pointerup","pointermove","pointercancel","pointerout","pointerleave","pointerenter"];this.elementEventHandlers=new Map;this.globalEventHandlers=new Map;this.lastClickId=void 0;this.gestureStarted=!1;this.activePointers=new Map;this.element=e;this.hitTest=t;this.events=new $m;this.gestureState=ay();this.setup()}e.prototype.onKeyEvent=function(e){var t=e.keyCode,n=e.altKey,r=e.metaKey,i=e.shiftKey,o=e.ctrlKey;this.events.fire(e.type,{keyboardEvent:e,keyCode:t,modifierKeys:{alt:n,meta:r,shift:i,ctrl:o,consistentCtrl:iy(o,r)}})};e.prototype.addEventListener=function(e,t,n){this.element.addEventListener(e,t,n);this.elementEventHandlers.set(e,t)};e.prototype.addGlobalEventListener=function(e,t,n){document.addEventListener(e,t,n);this.globalEventHandlers.set(e,t)};e.prototype.setup=function(){var e=this,t=this.element;t.style.touchAction="none";t.style.webkitTapHighlightColor="rgba(0,0,0,0)";this.pointerEvents.forEach((function(t){e.addEventListener(t,e.onPointerEvent.bind(e))}));this.addEventListener("contextmenu",oy);this.addEventListener("click",oy);this.addEventListener("dblclick",oy);this.addEventListener("keydown",this.onKeyEvent.bind(this));this.addEventListener("keyup",this.onKeyEvent.bind(this));this.addEventListener("MSHoldVisual",oy);this.addGlobalEventListener("pointerup",this.onGlobalPointerEvent.bind(this));this.addGlobalEventListener("pointermove",this.onGlobalPointerEvent.bind(this));this.addEventListener("wheel",this.onWheelEvent.bind(this),{passive:!1})};e.prototype.onGlobalPointerEvent=function(e){var t=e,n=t.pointerId,r=t.type,i=this.activePointers.size,o=this.activePointers.get(n);if(o){var a=o.pointerEvent===e,u=!o.down&&("pointermove"===r||"pointerup"===r);if(a||u)return;sy(o,t,this.element,!0);var s=this.removePointerIfNeeded(o);s||this.startDraggingIfNeeded(o);var l=this.calculateGesture(this.activePointers,i),f=this.getTouches(),c=qn(qn({},o),{gesture:l,pointers:f});this.events.fire(r,c);if(l&&this.activePointers.size>=2&&i!==this.activePointers.size){i>=2&&this.events.fire("gestureend",c);this.events.fire("gesturestart",c);this.gestureStarted=!0}else l&&this.activePointers.size>=2&&this.events.fire("gesturechange",c);s&&o.dragging.started&&this.handleDragEnd(c,i)}};e.prototype.onPointerEvent=function(e){var t=e.pointerId,n=e.type,r=this.activePointers.size;"pointerdown"!==n&&e.preventDefault();var i=this.activePointers.get(t),o="pointerdown"===n;i&&!o?sy(i,e,this.element,!1):i=ly(e,this.element,!1);this.addPointerIfNeeded(i);i.id=this.hitTest(i);i.validDownEvent&&o&&(i.lastDownId=i.id);var a=this.removePointerIfNeeded(i);a||this.startDraggingIfNeeded(i);var u=this.calculateGesture(this.activePointers,r),s=qn(qn({},i),{pointers:this.getTouches(),gesture:u});u&&this.handleGestures(u,s,r);this.firePointerEvent(s);a&&i.dragging.started&&this.handleDragEnd(s,r)};e.prototype.handleDragEnd=function(e,t){this.events.fire("dragend",e);this.activePointers.size<2&&t>1&&this.events.fire("gestureend",e)};e.prototype.firePointerEvent=function(e){"pointerdown"===e.pointerEvent.type?this.doPointerDown(e):"pointerup"===e.pointerEvent.type?this.doPointerUp(e):this.events.fire(e.pointerEvent.type,e)};e.prototype.handleGestures=function(e,t,n){var r=this.activePointers.size;if(e&&r>=2&&n!==r){n>1&&this.events.fire("gestureend",t);this.events.fire("gesturestart",t);this.gestureStarted=!0}else e&&r>1&&this.events.fire("gesturechange",t)};e.prototype.onWheelEvent=function(e){var t,n=e.deltaX,r=e.deltaY,i=e.deltaMode,o=e.metaKey,a=e.altKey,u=e.shiftKey,s=e.ctrlKey,l=e.offsetX,f=e.offsetY,c=e.button,d=Math.abs(r);this.normaliseWheelDelta=0;if(d>0){(100===d||120===d||i>0)&&(this.normaliseWheelDelta=60);var h=r>0?1:-1;t=this.normaliseWheelDelta>0?this.normaliseWheelDelta*h:Math.min(100,d)*h}else t=0;if(Math.abs(t)>0||Math.abs(n)>0){var v={button:c,deltaX:n,deltaY:t,deltaMode:i,modifierKeys:{alt:a,meta:o,shift:u,ctrl:s,consistentCtrl:iy(s,o)},isNormalised:this.normaliseWheelDelta>0,x:l,y:f,wheelEvent:e};this.events.fire("wheel",v)}};e.prototype.addPointerIfNeeded=function(e){var t=e.pointerEvent.type,n=e.pointerType,r=e.pointerId,i=this.activePointers;"touch"===n?i.forEach((function(e,t){"touch"!==e.pointerType&&i.delete(t)})):i.forEach((function(e,t){e.pointerId!==r&&i.delete(t)}));"pointerdown"!==t&&"pointerenter"!==t||i.set(r,e)};e.prototype.removePointerIfNeeded=function(e){var t=e.pointerId,n=e.pointerEvent.type;return("pointerup"===n||"pointercancel"===n)&&this.activePointers.delete(t)};e.prototype.startDraggingIfNeeded=function(e){var t=e.validDownEvent,n=e.dragging,r=e.x,i=e.y,o=n.startX,a=n.startY;if(t)if(n.started)this.events.fire("dragmove",qn(qn({},e),{pointers:this.getTouches()}));else{var u="mouse"===e.pointerType?ty:ny;n.started=se(r-o,i-a)>u;if(n.started){clearTimeout(this.contextMenuTimer);this.events.fire("dragstart",qn(qn({},e),{pointers:this.getTouches(),
id:e.lastDownId||null}))}}};e.prototype.getTouches=function(){var e=[];this.activePointers.forEach((function(t){return e.push({id:t.pointerId,x:t.x,y:t.y,pointerType:t.pointerType})}));return e};e.prototype.calculateGesture=function(e,t){var n;if(e.size>1){var r=void 0;if(t!==e.size){this.gestureState=ay();this.extractGestureState(this.gestureState);r=this.gestureState}else{r=ay();this.extractGestureState(r)}var i=this.gestureState,o=r.centreX,a=r.centreY,u=Math.round(o-i.centreX-i.translateX),s=Math.round(a-i.centreY-i.translateY);i.translateX+=u;i.translateY+=s;n={dx:u,dy:s,centreX:o,centreY:a,scale:r.pinchLength/i.pinchLength,translateX:i.translateX,translateY:i.translateY,pinchLength:r.pinchLength};i.scale=n.scale}return n};e.prototype.extractGestureState=function(e){var t=[];this.activePointers.forEach((function(e){t.push(e)}));if(t.length>1){var n=t[0],r=t[1];e.centreX=(n.x+r.x)/2;e.centreY=(n.y+r.y)/2;e.pinchLength=Math.max(1,ue(n.x,n.y,r.x,r.y))}};e.prototype.on=function(e,t){this.events.on(e,t)};e.prototype.off=function(e,t){this.events.off(e,t)};e.prototype.destroy=function(){var e=this;this.elementEventHandlers.forEach((function(t,n){e.element.removeEventListener(n,t)}));this.globalEventHandlers.forEach((function(e,t){document.removeEventListener(t,e)}))};e.prototype.fireContextMenuOnLongTouch=function(e){var t=this;clearTimeout(this.contextMenuTimer);this.contextMenuTimer=setTimeout((function(){t.events.fire("contextmenu",e)}),1e3)};e.prototype.fireContextMenuForMouse=function(e){var t=e.button,n=e.modifierKeys.ctrl,r="MacIntel"===navigator.platform&&n&&0===t;(2===t||r)&&this.events.fire("contextmenu",e)};e.prototype.doPointerDown=function(e){var t=e.validDownEvent,n=e.pointerType,r=e.button,i=e.timestamp;if(t){this.events.fire("pointerdown",e);"mouse"===n?this.fireContextMenuForMouse(e):this.fireContextMenuOnLongTouch(e);this.prepareForDoubleClick(i,r)}};e.prototype.prepareForDoubleClick=function(e,t){var n=this.doubleClickState;if(!n||e-n.firstEventTime>ry||n.button!==t){this.doubleClickState={firstEventTime:e,lastEventTime:e,button:t};this.lastClickId=void 0}else n.lastEventTime=e};e.prototype.doPointerUp=function(e){var t=e.id,n=this.doubleClickState;clearTimeout(this.contextMenuTimer);this.events.fire("pointerup",e);if(e.lastDownId!==t||this.gestureStarted){this.doubleClickState=void 0;this.lastClickId=void 0}else{this.events.fire("click",e);if(n){var r=n.lastEventTime,i=n.firstEventTime;if(i&&this.lastClickId===t){r-i<ry&&this.events.fire("doubleclick",e);this.doubleClickState=void 0;this.lastClickId=void 0}else void 0!==this.lastClickId&&(n.firstEventTime=n.lastEventTime)}this.lastClickId=t}0===this.activePointers.size&&(this.gestureStarted=!1)};return e}();function sy(e,t,n,r){var i,o=t.metaKey,a=t.shiftKey,u=t.ctrlKey,s=t.type,l=t.buttons,f=t.altKey,c=fy(n,t),d=c.x,h=c.y;e.isGlobalEvent=r;e.pointerEvent=t;var v="pointerdown"===s;if("pointerup"!==s){e.button=null!=(i=ey.get(l))?i:-1;e.down=e.button>-1;e.validDownEvent=(e.validDownEvent||v)&&e.down}else e.down=!1;e.modifierKeys={alt:f,meta:o,shift:a,ctrl:u,consistentCtrl:iy(u,o)};e.x=d;e.y=h;e.timestamp=t.timeStamp;var p=e.dragging;if(e.validDownEvent&&void 0===p.startX){p.startX=d;p.startY=h}}function ly(e,t,n){var r,i=e.isPrimary,o=e.metaKey,a=e.shiftKey,u=e.ctrlKey,s=e.pointerType,l=e.pointerId,f=e.type,c=e.buttons,d=e.altKey,h=e.timeStamp,v=fy(t,e),p=v.x,g=v.y,m=null!=(r=ey.get(c))?r:-1,y="pointerdown"===f;return{button:m,id:null,pointerEvent:e,down:m>-1,dragging:{started:!1,startX:p,startY:g},isPrimary:i,modifierKeys:{alt:d,meta:o,shift:a,ctrl:u,consistentCtrl:iy(u,o)},pointerType:s,pointerId:l,timestamp:h,x:p,y:g,isGlobalEvent:n,pointers:[],validDownEvent:y}}function fy(e,t){var n=e.getBoundingClientRect();return{x:Math.round(t.clientX-n.left),y:Math.round(t.clientY-n.top)}}function cy(e,t,r,i,o,u){var s,l,f,c,d,h,v,p,g,m,y,b,w,A,M,I,E,C=!1,k=!1,S=.75,Z=1.25,B=4,O=15,G={},F={watermark:!1,overview:!1,gestures:!1,handMode:!0},D=a(u),P=["doubleClickZoom","dragging","keyboard","scrollWheelZoom","touchZoom"],V=!1;N()&&(L.Map.prototype._panInsideMaxBounds=function(){if(!this._enforcingBounds){var e=void 0;E&&(e={animate:!1});this.panInsideBounds(this.options.maxBounds,e)}});function X(){return c}function W(){if(!v){v=e.privateCanvasApi.privateGetElement();A=oe(v)}}function U(){var e="1.3.4",t="1.3.4",n=L.version.split("-")[0].split("+")[0];if(be(n,e)<0)throw new Error("Cannot use an older version of Leaflet than "+e);if(!V&&be(n,t)>0){console.warn("You are using an unsupported version of Leaflet - please use "+t+" instead.");V=!0}}function N(){return"object"==typeof L&&L&&"Map"in L&&"version"in L}function j(){if(s){var t=e.lock()||!I;p.style.touchAction=t?"none":""}}function K(e){if(e!==I){I=e;j()}}function _(){return I}function J(e){s=e;i.setLeafletMap(s)}function Q(t){s&&Qm(e,d,s,t,ee,_,X)}function q(e){if(s){var t=e?"disable":"enable",n=e||!_()?"disable":"enable";P.forEach((function(e){"dragging"===e?s.dragging[n]():s[e][t]()}));Q(!e);j()}}function $(){var e=s.containerPointToLayerPoint([0,0]),t=new L.Point(Math.round(e.x),Math.round(e.y));L.DomUtil.setPosition(v,t);M.offsetX(-t.x);M.offsetY(-t.y)}function ee(){$();Ze({drawOnly:!0})}function te(t){e.setProperties(fe(),!1,t)}function ne(){return new(L.Layer.extend({initialize:function(e,t){L.Util.setOptions(this,t)},setOptions:function(e){L.Util.setOptions(this,e);return this.redraw()},redraw:function(){this._forceRedraw();return this},onAdd:function(){this.getPane().appendChild(v);s.on("zoomend",this._onZoomEnd,this);s.on("moveend",this._onMoveEnd,this);s.options.zoomAnimation&&s.on("zoomanim",this._animateZoom,this);s.on("zoom",this._zoom,this);c=new uy(p,(function(e){return"pointer-move"===e.pointerEvent.type?null:l.hittest(e.x,e.y)}));Q(!0);var e=s.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(v,e)},onRemove:function(){s.off("zoomend",this._onZoomEnd,this);s.off("moveend",this._onMoveEnd,this);c.destroy();Q(!1);s.options.zoomAnimation&&s.off("zoomanim",this._animateZoom,this);s.on("zoom",this._zoom,this)},addTo:function(){s.addLayer(this);return this},_onZoomEnd:function(){$();this._forceRedraw({all:!0})},_onMoveEnd:function(){r.trigger("viewchange");t.fire("view-change");this._forceRedraw()},_forceRedraw:function(e){s&&te((function(){Ze(e)}))},_animateZoom:function(e){var t=s.getZoomScale(e.zoom),n=s._getCenterOffset(e.center)._multiplyBy(-t).subtract(s._getMapPanePos());L.DomUtil.setTransform(v,n,t)},_zoom:function(e){e.pinch&&te()}}))}function oe(e){if(!e)return-1;for(var t=0,n=e;n=n.previousSibling;)++t;return t}function ue(){return o.anyOpenCombos()?u.time*(2/3):u.time}function se(){var e=i.getZoom();e=Math.min(O,Math.max(B,e));return S+(Z-S)*(e-B)/(O-B)}function le(t){if(u.animate){var n=ue(),r={time:u.time*(1/3),adapt:!1},i=e.viewOptions();e.combo().close(o.getOpenCombos(),r,(function(){var r=se();i.zoom===r?e.animateProperties(fe(),{time:n},t):e.viewOptions({zoom:r},{animate:!1},(function(){var o=fe();e.viewOptions(i,{animate:!1},(function(){var i=2;function a(){0==--i&&R(t)}var u={animate:!0,time:n};e.viewOptions({zoom:r},u,a);e.animateProperties(o,u,a)}))}))}))}else e.combo().close(o.getOpenCombos(),{animate:!1},(function(){e.viewOptions({zoom:se()},{animate:!1},(function(){te(t)}))}))}function fe(){var t=[];e.privateEach({type:"node",items:"toplevel"},(function(e){if(ye(e)){var n=qn(qn({},ze(e)),{id:e.id});t.push(n)}}));return t}function ce(n){if(e.privateIsLayingOut())R(n);else{if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot enter map mode while the chart is not on the page.");U();W();if(s||k)R(n);else{I=!0;k=!0;var i=e.lock();e.lock(!0);r.trigger("map","showstart");t.fire("map",{type:"showstart"});Be();Oe();o.recordState();var a=o.getHiddenOnMapIds();e.hide(a,{time:u.time,animate:u.animate},(function(){ve(null,(function(){le((function(){ke(u.animate,(function(){de(i,n)}))}))}))}))}}}function de(n,i){C=!0;k=!1;r.trigger("map","showend");t.fire("map",{type:"showend"});n||e.lock(!1);if(h){Re(h[0],h[1]);e.zoom("fit");h=null}T(i)}function he(e,t){return L.Browser.ie3d?"translate("+Math.round(e)+"px,"+Math.round(t)+"px)":"translate3d("+Math.round(e)+"px,"+Math.round(t)+"px, 0px)"}function ve(e,t){v=pe();function n(e,t){e._leaflet_pos=t;e.style.transform=he(t.x,t.y)}L.Draggable.include({_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e);n(this._element,this._newPos);this.fire("drag",e)}});var r=ie({boxZoom:!1,zoomAnimationThreshold:20,zoomControl:!1,preferCanvas:!0},u.leaflet);J(new L.Map(p,r));xe();q(!0);e?i.centerView(e):i.fitMapToBounds(null,!1);ge(t)}function pe(){b=v.style.position;w=v.style.top;v.style.position="absolute";v.style.zIndex="1000";v.classList.add("leaflet-zoom-animated");v.style.transformOrigin="50% 50%";(p=document.createElement("div")).style.width=v.clientWidth+"px";p.style.height=v.clientHeight+"px";p.style.position="relative";p.style.top=v.style.top;p.style.left=v.style.left;(y=v.parentNode).insertBefore(p,v);v.style.pointerEvents="none";return v}function ge(e){var t,n={};function r(){ne().addTo(s);R(e)}if("string"==typeof u.tiles)t=u.tiles;else if(u.tiles){t=u.tiles&&u.tiles.url||D.tiles.url;n=L.Util.extend(n,u.tiles)}if(t){qm(f=new L.TileLayer(t,n),"loading",r);s.addLayer(f)}else r()}function me(e){if(s){s.removeLayer(f);ge(e)}else R(e)}function xe(){g=document.createElement("canvas");l.setOverlayContext(g.getContext("2d"));var e=s.getSize();g.width=e.x;g.height=e.y;g.style.margin="0";g.style.pointerEvents="none";tr(g,g.getContext("2d"),!1,!1);var t=L.Control.extend({options:{position:"topleft"},onAdd:function(){return g}});m=new t;s.addControl(m)}function we(n,i){o.clearState();k=!1;n.lockChart||e.lock(!1);if(n.triggerEvent){r.trigger("map","hideend");t.fire("map",{type:"hideend"})}T(i)}function Ae(n){if(s&&!k){if(null===e.privateCanvasApi.privateGetContainer())throw new Error("Cannot exit map mode while the chart is not on the page.");var a=e.lock(),l=ue();k=!0;e.lock(!0);r.trigger("map","hidestart");t.fire("map",{type:"hidestart"});i.fitMapToBounds(null,u.animate,d)}else R(n);function f(){var t=o.getHiddenOnMapIds();e.show(t,!1,{animate:t.length>0,time:u.time},(function(){we({lockChart:a,triggerEvent:!0},n)}))}function c(t,n,r,i){e.viewOptions(t,{animate:!1},(function(){e.hide(o.getHiddenOnMapIds(),{animate:!1},(function(){e.setProperties(n,!1,(function(){e.viewOptions(r,{animate:!0,time:l});e.animateProperties(i,{time:l},(function(){e.combo().open(o.getOpenCombos(),{time:u.time*(1/3),adapt:!1},f)}))}))}))}))}function d(){var t,r;Ie({restorePositions:!0,animate:u.animate},(function(){if(u.animate){t=e.viewOptions();r=Te()}Ee((function(){var i=Te();Ge();e.show(o.getHiddenOnMapIds(),!1,{animate:!1},(function(){e.zoom("fit",{animate:!1},(function(){if(u.animate){var s=e.viewOptions();e.combo().close(o.getOpenCombos(),{animate:!1,adapt:!1},(function(){c(t,r,s,i)}))}else we({lockChart:a,triggerEvent:!0},n)}))}))}))}))}}function Me(e){v.style.top=p.offsetTop+"px";var t=A>0?y.childNodes[A+1]:y.firstChild;y.insertBefore(v,t);v.style.transform="";v.style.transformOrigin="";e&&te();Ze({positions:!0})}function Ie(e,t){l.setOverlayContext(null);Me(e.restorePositions);s.removeControl(m);Se(e.animate,(function(){p.parentNode&&p.parentNode.removeChild(p);v.style.pointerEvents="auto";v.style.position=b;v.style.top=w;s.remove();J(null);R(t)}))}function Ee(t){C=!1;e.combo().open(o.getOpenCombos(),{animate:!1,adapt:!1},(function(){var n=o.getPositions();if("restore"===u.transition&&n){var r=H(n).filter((function(t){return!e.combo().find(t.id)}));e.setProperties(r,!1,t)}else{var i=e.privateValidateLayoutOptions({animate:!1});e.allowDraw(!1);l.layout("standard",i,(function(){e.allowDraw(!0);R(t)}))}}))}function Ce(t,n,r){if(t)e.privateAnimateBackgroundOpacity(n,{time:u.time},r);else{e.privateSetBackgroundOpacity(n);R(r)}}function ke(e,t){Ce(e,0,t)}function Se(e,t){Ce(e,1,t)}function Le(t){e.privateEach({type:"node",items:"toplevel"},(function(e){e.hi||t({id:e.id,x:e.x,y:e.y})}))}function Te(){var e=[];Le((function(t){e.push(t)}));return e}function Re(e,t){if(C){p.style.height=t+"px";p.style.width=e+"px";var n=g.getContext("2d");g.width=e;g.height=t;tr(g,n,!1,!1);E=!0;s.invalidateSize(!1);E=!1}else h=[e,t]}function Ze(e){var n=null!=e?e:{positions:!0};t.privateFire("forceRedraw",n)}function Be(){var t=e.options();G={};n(F,(function(e,n){G[n]=t[n]}))}function Oe(e){var t;"direct"!==(null===(t=l.options(e?G:F,void 0,!!e).linkStyle)||void 0===t?void 0:t.path)&&l.resetConnectionOffsets()}function Ge(){Oe(!0);G={}}function Ye(t,n){var r=e.lock();W();C=!0;Be();ve(t,(function(){Oe();$();te((function(){ke(!1,(function(){r||q(!1);R(n)}))}))}))}function Fe(t){var n=e.lock();W();C=!1;Ie({restorePositions:!1,animate:!1},(function(){Ge();we({lockChart:n,triggerEvent:!1},t)}))}function De(){return!!s}function Pe(e){s.dragging.enabled()!==e&&(e?s.dragging.enable():s.dragging.disable())}function ze(e){var t=s.latLngToContainerPoint([e.pos.lat,e.pos.lng]);return M.worldCoordinates(t.x,t.y)}function Ve(t){var n,r,i,a=Y(t);for(r=0;r<a.length;r++)if(z(n=a[r],"pos"))if(n.pos&&x(n.pos.lat)&&x(n.pos.lng)){o.setHiddenOnMap(n.id,!1);i=ze({pos:re(e.getItem(n.id).pos,n.pos)});n.x=i.x;n.y=i.y}else{o.setHiddenOnMap(n.id,!0);n.hi=!0}}return{changeTilesLayer:me,convertPos:Ve,enableDragging:Pe,getLeafletMap:function(){return s},getMapContainer:function(){return p},showMap:ce,hideMap:Ae,isLeafletLoaded:N,isMapLoaded:De,isShown:function(){return C},isTransitioning:function(){return k},latLngToWorldCoordinates:ze,lockEvents:q,restoreMapMode:Ye,restoreNetworkMode:Fe,setDependencies:function(e){l=(d=e).controller},setHandMode:K,setSize:Re,setView:function(e){M=e},updateNodePositions:te}}function dy(e){var t,n,r;function i(){u();e.privateEach({type:"node",items:"all"},(function(e){var t=e.id;e._combo&&e._combo.open&&n.push(t);e.parentId||l(e)}));e.privateEach({type:"link",items:"toplevel"},(function(e){e.hi||!t[e.id1]&&!t[e.id2]||(t[e.id]=!0)}))}function o(e){t=a(e.hiddenOnMap)||{};n=a(e.openCombos)||[];r=a(e.positions)||{}}function u(){t={};n=[];r={}}function s(){return{hiddenOnMap:a(t),openCombos:a(n),positions:a(r)}}function l(e){var n=e.id;delete r[n];delete t[n];ye(e)?r[n]={id:n,x:e.x||0,y:e.y||0}:e.hi||(t[n]=!0)}function f(n){if("link"===n.type&&!n.hi){var r=e.getItem(n.id1),i=e.getItem(n.id2);r&&i&&ye(r)&&ye(i)||(t[n.id]=!0)}}u();return{anyOpenCombos:function(){return n&&n.length>0},clearState:u,getPositions:function(){return r},getOpenCombos:function(){return n},getHiddenOnMapIds:function(){return Object.keys(t)},isHiddenOnMap:function(e){return t[e]},setHiddenOnMap:function(e,n){t[e]=n},deserialize:o,serialize:s,recordLinkState:f,recordNodeState:l,recordState:i}}function hy(e,t){var n=null;function r(e){n=e}function i(e,t,r,i){b(i);n.setZoom(e,{animate:t})}function o(){return n.getZoom()}function a(e){if(e.length){var t=L.latLngBounds(e),n=t.getNorth(),r=t.getSouth(),i=t.getWest(),o=t.getEast();if(n===r&&i===o){var a=.01;t=L.latLngBounds([[n-a,i-a],[n+a,i+a]])}return t}}function u(){var t=[];e.privateEach({type:"node",items:"toplevel"},(function(e){ye(e)&&!e.hi&&t.push(L.latLng(e.pos.lat,e.pos.lng))}));return t}function s(e,t){if(o()!==t)return!0;var r=n._limitCenter(e,t,n.options.maxBounds),i=n._getCenterOffset(r).floor();return!(!i.x&&!i.y)}function l(e){var r=L.point([2*(t.padding||0),2*(t.padding||0)]),i=n.getBoundsZoom(e,!1,r);if(o()!==i)return!0;var a=n.project(e.getSouthWest(),i),u=n.project(e.getNorthEast(),i);return s(n.unproject(a.add(u).divideBy(2),i),i)}function f(e,r,i){var f=a(e||u());if(f)if(void 0===o()||l(f)){b(i);n.fitBounds(f,{animate:!!r,padding:[t.padding||0,t.padding||0]})}else R(i);else{var c=L.latLng(0,0),d=2;if(s(c,d)){b(i);n.setView(c,d,{animate:!!r})}else R(i)}}function c(t,r,i){var o=e.viewCoordinates(t.x1,t.y1),a=e.viewCoordinates(t.x2,t.y2);return f([n.containerPointToLatLng([o.x,o.y]),n.containerPointToLatLng([a.x,a.y])],!!r,i)}function d(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];V(r)||!ye(r)||r.hi||t.push(L.latLng(r.pos.lat,r.pos.lng))}return t}function h(t,n,r){var i=d(e.getItem(t));i.length?f(i,!!n,r):R(r)}function v(){return n.getMaxZoom()}function p(){return n.getMinZoom()}function g(){return Math.min(1,(v()-p())/10)}function m(t,r,i,a,s,l){var d={animate:!!r,duration:x(i)?i/1e3:.25};switch(t){case"in":b(l);n.zoomIn(g(),d);break;case"out":b(l);n.zoomOut(g(),d);break;case"fitToExtents":c(s,r,l);break;case"fit":case"fitToModel":a?h(a,r,l):f(u(),!!r,l);break;case"selection":case"fitToSelection":h(e.selection(),r,l);break;case"height":case"fitModelHeight":var p=-1/0,m=-1/0,y=1/0,w=1/0,A=function(e){var t=e;if(null!==t&&ye(t)&&!t.hi){if(t.pos.lat>p){p=t.pos.lat;m=t.pos.lng}if(t.pos.lat<y){y=t.pos.lat;w=t.pos.lng}}};a?e.privateGetItem(a).forEach(A):e.privateEach({type:"node",items:"toplevel"},A);isFinite(p)&&isFinite(m)&&isFinite(y)&&isFinite(w)?f([[p,m],[y,w]],!!r,l):M(l)&&R(l)}return o()/v()}function y(e,t){n.panBy(e,t)}function b(e){M(e)&&qm(n,"moveend",(function(t){e()}))}function w(t,r,i,o){var u=null,s=100,l={animate:!!r,duration:x(i)?i/1e3:.25};b(o);if("selection"===t){var f=[],c=e.getItem(e.selection());if(c.length){for(var d=void 0,h=0;h<c.length;h++)if("node"===(d=c[h]).type){var v=d;ye(v)&&!v.hi&&f.push(L.latLng(v.pos.lat,v.pos.lng))}n.panInsideBounds(a(f),l)}}else{switch(t){case"up":u=[0,-s];break;case"down":u=[0,s];break;case"left":u=[-s,0];break;case"right":u=[s,0]}u&&n.panBy(u,l)}}function A(e){n.setView([e.lat,e.lng],e.zoom,{reset:!0})}return{fitMapToBounds:f,getMaxZoom:v,getMinZoom:p,getZoom:o,pan:w,panBy:y,setLeafletMap:r,centerView:A,setZoom:i,zoom:m}}function vy(e,t,r){var i={animate:!0,time:800,tiles:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}.png",attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://www.openstreetmap.org/copyright">ODbL</a>.',subdomains:"abcd",minZoom:0,maxZoom:20},transition:"restore",padding:5},o="#ddd",u=hy(e,i),s=dy(e),l=cy(e,t,r,u,s,i),f=l.isLeafletLoaded();function c(){throw new Error("Leaflet was not found. Make sure you include leaflet.js and leaflet.css in your web page.")}function d(e){return f?e:c}function h(){return o}function v(e,t){var n=l.getMapContainer();e?n.style.background=e:t?Pn(n,t.stops,1):n.style.background=o}function p(e,t){var n=l.getLeafletMap().latLngToContainerPoint([e,t]);return{x:n.x,y:n.y}}function g(e,t){var n=l.getLeafletMap().containerPointToLatLng([e,t]);return{lat:n.lat,lng:n.lng}}function m(e,t){if(e){n(e,(function(e,t){switch(t){case"padding":case"time":x(e)&&(i[t]=e);break;default:i[t]=e}}));"tiles"in e&&l?l.changeTilesLayer(t):R(t)}return a(i)}function y(){if(!f)return null;var e=l.getLeafletMap(),t={show:l.isShown()};if(t.show){var n=e.getCenter();t.lat=n.lat;t.lng=n.lng;t.zoom=e.getZoom();t.bounds=e.getBounds().toBBoxString();var r=s.serialize();t.hiddenOnMap=r.hiddenOnMap;t.openCombos=r.openCombos;t.restoreXY=r.positions}return t}function b(e,t,n,r,i){return Xm(l.getLeafletMap(),e,t,n,r,i)}function w(e,t){s.deserialize({hiddenOnMap:e.hiddenOnMap,openCombos:e.openCombos,positions:e.restoreXY});if(l.isShown()){u.centerView(e);l.updateNodePositions(t)}else l.restoreMapMode(e,t)}function A(e){l.isShown()?l.restoreNetworkMode(e):R(e)}function M(e,t){if(f){var n=e||{};n.show?w(n,t):A(t)}else R(t)}function I(e){if("node"===e.type){s.recordNodeState(e);if(ye(e)){var t=l.latLngToWorldCoordinates(e);e.x=t.x;e.y=t.y}else e.hi||(e.hi=!0)}}function E(t){for(var n=[],r=0;r<t.length;r++){var i=t[r];if("node"===i.type){var o=e.getItem(i.id);if(o){var a=s.getPositions(),u={};s.isHiddenOnMap(i.id)?u.hi=!1:"hi"in o&&(u.hi=o.hi);if(a[i.id]){u.x=a[i.id].x;u.y=a[i.id].y}o.pos&&(u.pos=o.pos);i=re(u,i)}I(i)}"link"===i.type&&s.recordLinkState(i);n.push(i)}return n}return{api:{show:d(l.showMap),hide:d(l.hideMap),viewCoordinates:d(p),mapCoordinates:d(g),isShown:function(){return l&&l.isShown()},leafletMap:l.getLeafletMap,options:d(m)},internalUse:{convertPos:l.convertPos,enableDragging:l.enableDragging,getDefaultBackgroundColour:h,getMapContainer:l.getMapContainer,getMaxZoom:u.getMaxZoom,getMinZoom:u.getMinZoom,getZoom:u.getZoom,isMapLoaded:l.isMapLoaded,isTransitioning:l.isTransitioning,loadUp:M,lock:l.lockEvents,pan:u.pan,panBy:u.panBy,preMerge:E,preSetItem:I,serialize:y,setBackgroundColour:v,setDependencies:l.setDependencies,setHandMode:l.setHandMode,setSize:l.setSize,setView:l.setView,setZoom:u.setZoom,toDataURL:b,zoom:u.zoom}}}function py(e,t,n,r,i,o){var a=0,u=0,s=0,l=0,f=0,c=n||0,d=r||0,h=i||1;function v(e){e&&(h=e);return h}function p(e){return h*e}function g(){return{width:c,height:d,zoom:s,offsetX:l,offsetY:f}}function m(e,t,n,r){return Ie(s,J(e.zoom),e.offsetX-l,e.offsetY-f,t,n,r)}function y(n,r,i){if(r){var o=py(e,t,n.width,n.height);o.setZoom(n.zoom,!1);o.offsetX=n.offsetX;o.offsetY=n.offsetY;return le({x1:o.viewToWorldX(0),y1:o.viewToWorldY(0),x2:o.viewToWorldX(o.width()),y2:o.viewToWorldY(o.height())},null,!1,!1,!1,!1,0)}Q(n.zoom,!1);l=n.offsetX;f=n.offsetY;if(i){l=c/2-(M(n.width/2)-a)*s;f=d/2-(I(n.height/2)-u)*s}return null}function b(e){e&&(c=e);return c}function x(e){e&&(d=e);return d}function w(e){return((e-a)*s+l)*h}function A(e){return((e-u)*s+f)*h}function M(e){return(e/h-l)/s+a}function I(e){return(e/h-f)/s+u}function E(e){return-1===e?-1:e*s*h}function C(e){return-1===e?-1:E(e)+7}function k(e){return e/(s*h)}function S(e){return e&&e*s*h}var L=1.4,T=4,Z=.05,B=Z,O=.001,G=1,Y=200,F=1/0,D=100;function z(){return!(!o||!o.internalUse.isMapLoaded())}function V(){return T}function X(){return B}function W(e){B=Math.min(G,Math.max(O,e||Z));s<B&&Ie(s,B,l,f,!1)}function U(e){F=e||1/0}function N(){return F}function j(e,t,n){return ve(H(),h*c/2,h*d/2,e,t,n)}function K(e,t,n){return ve(_(),h*c/2,h*d/2,e,t,n)}function H(){return J(s*L)}function _(){return J(s/L)}function J(e){return Math.min(T,Math.max(e,B))}function Q(e,t,n,r){return ve(J(e),h*c/2,h*d/2,t,n,r)}function q(){return s>F?F/s:1}var ee,te,ne,re,ie=1e3/60*4;function oe(e,t,n,r){return ve(J(s*(1+e/300)),t,n,r,ie)}function ue(e){return e?{x1:w(e.x1),y1:A(e.y1),x2:w(e.x2),y2:A(e.y2)}:null}function se(e,t,n,r,i,o,a,u){if(!e){R(a);return null}return le(ue(e),null,t,n,r,i,o,!1,a,void 0,u)}function le(e,t,n,r,i,o,v,p,g,m,y){var b;if((e.y2-e.y1)/(e.x2-e.x1)>d/c){b=s*(d-(o?d/8:0))/(e.y2-e.y1)}else{b=s*(c-(o?c/8:0))/(e.x2-e.x1)}b*=h;r&&(b=J(b));i&&b>1&&(b=1);m&&(b=s);var x=(e.x1+e.x2)/2,w=(e.y1+e.y2)/2,A=t?(t.x1+t.x2)/2:M(x),E=t?(t.y1+t.y2)/2:I(w);return Ie(s,b,c/2-(A-a)*b-l,d/2-(E-u)*b-f,n,v,g,p,y)}function fe(e,t,n,r,i,o,a,u,s){t.generate(n,r,Te,!0,!1);var l=n.itemExtents(e,r);if(l){var f=ue(l);if(s){var c=void 0;c=e?f.x1+(f.x2-f.x1)/2:b()/2;f.x1=c;f.x2=c}return le(f,l,i,!0,!0,!0,o,!1,a,u)}R(a);return null}function ce(e,t,n,r,i,o,a,u){return fe(e.privateSelection(),e,t,n,r,i,a,u)}function de(e,t,n,r,i,o,a,u){return o?fe($(o),e,t,n,r,i,a,u):fe(null,e,t,n,r,i,a)}function he(e,t,n,r,i,o,a,u){return o?fe($(o),e,t,n,r,i,a,u,!0):fe(null,e,t,n,r,i,a,!1,!0)}function ve(e,t,n,r,i,o){var c=J(e),d=M(t),v=I(n);return Ie(s,c,t/h-(d-a)*c-l,n/h-(v-u)*c-f,r,i,o)}function pe(e){a=421;u=298;if(e)Ie(s,1,421-l,298-f,!0);else{l=421;f=298;s=1}}function ge(){return s}function me(){return z()?o.internalUse.getZoom():s}function ye(){var e=c/2;return-(1-xe()/e)+(e-a)/e*s}function be(){var e=d/2;return 1-we()/e-(e-u)/e*s}function xe(e){P(e)&&(l=e);return l}function we(e){P(e)&&(f=e);return f}function Ae(e,t,n,r){var i=0,o=0;switch(e){case"up":o=1;break;case"down":o=-1;break;case"left":i=1;break;case"right":i=-1}return Me(i*=D,o*=D,t,!1,n,r)}function Me(e,t,n,r,i,o){return Ie(s,s,e,t,n,i,o,r)}function Ie(n,r,i,o,a,u,c,d,h){var v=i||0,p=o||0;if(a)return Ee(n,r,v,p,u,c,h);l+=v;f+=p;s=r;if(t&&!d){t.trigger("viewchange");e.fire("view-change")}R(c);return null}function Ee(n,r,i,o,a,u,c){void 0===c&&(c=Zu);var d=a||Y,h=d,v=l,p=f;return ur((function(a){h-=a;var g=c(Math.max(0,Math.min(1,(d-h)/d)));l=v+g*i;f=p+g*o;s=J(n+g*(r-n));var m=h>0;e.fire("view-change");if(!m){t.trigger("viewchange");R(u)}return m}),{drawOnly:!0})}function Ce(n){var r=z(),i=r?-3:.1;return ur((function(a){var u=0===te&&0===ne;if(r)o.internalUse.panBy([te*i,ne*i],{animate:!1});else{l+=a*i*te;f+=a*i*ne}ee=!u;n&&n(re);if(!u){t.trigger("viewchange");e.fire("view-change")}return!u}),{positions:!0})}function ke(){te=0;ne=0}function Se(e,t,n){var r=e.x,i=e.y,o=p(50);te=0;ne=0;re=e;r<o&&(te=1);r>p(c)-o&&(te=-1);i<o&&(ne=1);i>p(d)-o&&(ne=-1);if(t.direction){t.direction.horizontalMovement||(te=0);t.direction.verticalMovement||(ne=0)}if((0!==te||0!==ne)&&!ee){ee=!0;return Ce(n)}return null}function Le(e,t){var n=Te.scale(e),r=Te.scale(t);return{x:Te.viewToWorldX(n),y:Te.viewToWorldY(r)}}pe();var Te={cancelScroll:ke,fitExtents:le,fitModelHeight:he,fitToModel:de,fitToSelection:ce,fitWorldExtents:se,fromOldSettings:y,fromSettingsDirect:m,getMaxItemZoom:N,getMaxZoom:V,getMinZoom:X,getUnzoom:q,getZoomScale:ge,height:x,maybeScroll:Se,offsetX:xe,offsetXtoWebglPanX:ye,offsetY:we,offsetYtoWebglPanY:be,pan:Ae,panBy:Me,reset:pe,scale:p,scaleFactor:v,setMaxItemZoom:U,setMinZoom:W,settings:g,setZoom:Q,sw:C,viewToWorldDistance:k,viewToWorldX:M,viewToWorldY:I,w:E,wheelToPosition:oe,width:b,worldToViewDistance:S,worldToViewX:w,worldToViewY:A,x:w,y:A,worldCoordinates:Le,zoom:me,zoomIn:j,zoomOut:K,zoomToPosition:ve};return Te}function gy(e,t,n,r){var i,o={},a={},u=[],s={},l=21,f=12;function c(){return null!==n&&n.api.isShown()}function d(){return null!==n&&n.internalUse.isMapLoaded()}var h,v,p,m,y,b,x=Xt.white,w=Xt.lightgrey;function A(e){C();h=Ut(e[0],e[1],e[2],1)}function M(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e&&s[e]&&s[e].apply(s,$n([e,t,n],r))}function I(e,t){return e in o?o[e](t):null}function E(e){return i[e]||null}function C(){o={};i={};a={};u=[];s={}}function k(e){return e&&e in a?a[e]:"auto"}function S(e,t,n,r,i){e.setLayerPath(null);for(var o=0;o<u.length;o++)u[o].generate(e,t,n,r,i)}function L(e){for(var t=0;t<u.length;t++){var n=u[t];if(n.watermarkSize)return n.watermarkSize(e)}return null}function T(e){var t=15,n="_logo",i=e.u,o=r.get(i,Om(),!0),a={generate:function(r,a,u){r.setLayer(oo.OVERLAYS);var s=o.im.width,l=o.im.height,f=e.p||"ne",c=("w"===f.charAt(1)?t:u.width()-(s+t))+(e.x||0),d=("n"===f.charAt(0)?t:u.height()-(l+t))+(e.y||0);r.image(u.scale(c),u.scale(d),u.scale(c+s),u.scale(d+l),i,n,-1,null,0,!0)}};u.push(a)}function R(e,t,n,i,o,a,s,l){var f;e&&(f=r.get(e,!1,!0));var c={watermarkSize:function(e){var r,i;if(f){var a=f.im;r=a.width;i=a.height}else if(t){r=Hn(e,t,n,o,l).width;i=n}return r?{width:r+10,height:i+10}:null},generate:function(r,u,c){var d,h;r.setLayer(oo.UNDERLAYS);if(f){var v=f.im;d=c.scale((c.width()-v.width)/2);h=c.scale((c.height()-v.height)/2);r.image(d,h,d+c.scale(v.width),h+c.scale(v.height),e,null,-1,null,0,!1)}else if(t){var p=c.scale(n),g=Hn(u,t,n,o,l).width;d=c.scale((c.width()-g)/2);h=c.scale((c.height()+n)/2);var m=-3.5,y=Math.floor(p/8);"top"===s&&(h=p+y);"bottom"===s&&(h=c.scale(c.height())+1);a&&r.rect(d-m,h-p-y,d+g+m+y,h,a,-1,a,!0,null,-1);r.text(d,h,t,i,p,!!o,null,-1,l,!1,g,!1,!1,d+m,h-p,d+g+m,h)}}};u.push(c)}function Z(e,t,n,r,i,o,a){e.rect(t.scale(n),t.scale(r),t.scale(i),t.scale(o),Xt.transparent,-1,Xt.transparent,!0,a,-1)}function B(e,h,v){var p=yg["Nav-Control-Head.png"],g=yg["Nav-Control-Zoom.png"],m=yg["Nav-Control-Short-Zoom.png"],y=yg["Slider.png"],b=yg["Hand.png"],x=yg["Arrow.png"];r.getControlColourImage(p,!1);var w=r.getControlColourImage(g,!1),A=r.getControlColourImage(m,!1);r.get(y,!1,!0);r.get(b,!1,!0);r.get(x,!1,!0);var M=7,I=17,E=62,C=D()?145:247,k=v.p||"nw",S=("w"===k.charAt(1)?M:h.width()-(M+E))+(v.x||0),L=("n"===k.charAt(0)?I:h.height()-(I+C))+(v.y||0),T=S+21,R=L+118,B=L+215;s._zoomIn=function(){e.zoomIn(!0)};s._zoomOut=function(){e.zoomOut(!0)};s._panLeft=function(){e.pan("left",!0)};s._panRight=function(){e.pan("right",!0)};s._panUp=function(){e.pan("up",!0)};s._panDown=function(){e.pan("down",!0)};s._fitToWindow=function(){e.fitToModel(!0)};s._toggleMode=function(){var t=e.options();t.handMode=!t.handMode;e.options(t)};function O(){return!!e.options().handMode}s._scale=function(e,t,n){G(n,!0)};function G(t,n){var r=F(t-f/2);e.setZoom(r,n)}a._zoomIn="pointer";a._zoomOut="pointer";a._panLeft="pointer";a._panRight="pointer";a._panUp="pointer";a._panDown="pointer";a._fitToWindow="pointer";a._toggleMode="pointer";a._scale="pointer";a._slider='grab, url("'+yg["openhand.png"]+'"), pointer';o._slider=function(r){var o="slider";i._slider="slider";var a=r,u=c()?h.zoom():h.settings();if(D())return null;if(t.trigger("dragstart","slider"))return null;c()&&n.internalUse.enableDragging(!1);return{type:o,rebuild:{drawOnly:!0},getCursor:function(){return"move"},setLastProps:function(e){a=e},getLastProps:function(){return a},dragMove:function(e){a=e;e.dragging.started&&G(e.y,!1)},endDrag:function(r){(t.trigger("dragend","slider")||r)&&(c()&&"number"==typeof u?e.setZoom(u,!1):"number"!=typeof u&&h.fromSettingsDirect(u,!1));c()&&n.internalUse.enableDragging(!!e.options().handMode);t.trigger("dragcomplete","slider")}}};function Y(e){var t,r,i;if(d()){t=n.internalUse.getMinZoom();r=Math.max(n.internalUse.getMaxZoom(),t+1);i=e}else{t=Math.log(h.getMinZoom());r=Math.log(h.getMaxZoom());i=Math.log(e)}var o=(i-t)/(r-t);return Math.floor(R+(1-o)*(B-R))}function F(e){var t,r=1-(e-R)/(B-R);if(c()){var i=n.internalUse;t=(i.getMaxZoom()-i.getMinZoom())*r+i.getMinZoom()}else t=Math.exp(r*(Math.log(h.getMaxZoom())-Math.log(h.getMinZoom()))+Math.log(h.getMinZoom()));return t}function D(){return h.height()<300}var P={generate:function(e,t,n,r,i){if(!i){e.setLayer(oo.OVERLAYS);e.image(n.scale(S+5),n.scale(L+6),n.scale(S+57),n.scale(L+58),p,null,-1,"co",0,!0);var o=16,a=100
;D()?e.image(n.scale(S+o),n.scale(L+a),n.scale(S+o+A.im.width/2),n.scale(L+a+A.im.height/2),m,null,-1,"co",0,!0):e.image(n.scale(S+o),n.scale(L+a),n.scale(S+o+w.im.width/2),n.scale(L+a+w.im.height/2),g,null,-1,"co",0,!0);var u=S+19,s=L+64,c=n.scale(u),d=n.scale(s),h=n.scale(u+28),v=n.scale(s+32),M=O()?b:x;e.image(c,d,h,v,M,null,-1,null,0,!0);e.setLayer(oo.OVERLAYSSHADOW);e.image(c,d,h,v,M,"_toggleMode",-1,null,0,!1);var I=5,E=23,C=39,k=57,R=105,B=D()?124:222,G=18,F=3,P=68,z=22;Z(e,n,S+E,L+R,S+C,L+R+G,"_zoomIn");Z(e,n,S+E,L+B,S+C,L+B+G,"_zoomOut");Z(e,n,S+I,L+E,S+E,L+C,"_panLeft");Z(e,n,S+C,L+E,S+k,L+C,"_panRight");Z(e,n,S+E,L+I,S+C,L+E,"_panUp");Z(e,n,S+E,L+C,S+C,L+k,"_panDown");Z(e,n,S+E,L+E,S+C,L+C,"_fitToWindow");D()||Z(e,n,S+E,L+R+G,S+C,L+B,"_scale");Z(e,n,S+E-F,L+P,S+C+F,L+P+z,"_toggleMode");if(!D()){var V=Y(n.zoom()),X=n.scale(T),W=n.scale(V),U=n.scale(T+l),N=n.scale(V+f),j=4;e.image(X-j,W-j,U+j,N+j,y,"_slider",-1,null,0,!1);e.setLayer(oo.OVERLAYS);e.image(X,W,U,N,y,null,-1,null,0,!0)}}}};u.push(P)}var O={ne:"sw",nw:"se",se:"nw",sw:"ne"};function G(n,l,f,c,d){var A=d.p&&O[d.p]?d.p:"se",M=yg["Arrow-"+O[A]+".png"],I=yg["Arrow-"+A+".png"];d.size=d.size||100;v=d.size;m=!!d.shown;y="n"===A.charAt(0);b="w"===A.charAt(1);var E=(p=c(v,v)).getContext("2d"),C=!1,k=!1,S=Date.now(),L=py(e,t,v,v);s._overviewIcon=function(){d.shown=!d.shown;m=d.shown;t.trigger("overview",m?"open":"close");e.privateFire("redraw",{drawOnly:!0})};a._overviewIcon="pointer";function T(e){var t={x1:f.viewToWorldX(f.scale(-e)),x2:f.viewToWorldX(f.scale(f.width()+e)),y1:f.viewToWorldY(f.scale(-e)),y2:f.viewToWorldY(f.scale(f.height()+e))};return{x1:L.worldToViewX(t.x1),x2:L.worldToViewX(t.x2),y1:L.worldToViewY(t.y1),y2:L.worldToViewY(t.y2)}}var R,Z,B=null,G=!1,Y=0,F=0,D=0,P=0,z=2;a._overviewBox='url("'+yg["openhand.png"]+'"), pointer';function V(){D+=R.x;P+=R.y;e.privateFire("redraw")}function X(){Z=g(V,50)}function W(){if(Z){clearInterval(Z);Z=null}}o._overviewBox=function(e){var r="overview";i._overviewBox="overview";if(t.trigger("dragstart",r))return null;var o=e;G=e.dragging.started;var a=2;Y=0;F=0;D=0;P=0;var u=-B.x1+a,s=v-B.x2-a,l=-B.y1+a,c=v-B.y2-a;return{type:r,rebuild:{drawOnly:!0},setLastProps:function(e){o=e},getLastProps:function(){return o},getCursor:function(){return"move"},dragMove:function(e){o=e;if(e.dragging.started){W();Y=e.x-e.dragging.startX;F=e.y-e.dragging.startY;R={x:0,y:0};var t=!1;if(Y<u){Y=u;R.x=z;t=!0}if(Y>s){Y=s;R.x=-z;t=!0}if(F<l){F=l;R.y=z;t=!0}if(F>c){F=c;R.y=-z;t=!0}t&&X()}},endDrag:function(e){G=!1;W();if(!(t.trigger("dragend","overview")||e)){var r=-(Y-D)*(f.zoom()/L.zoom()),i=-(F-P)*(f.zoom()/L.zoom());n.panBy(r,i,!0)}t.trigger("dragcomplete","overview")}}};function U(e){var t=Math.max(e.width(),e.height())/2;L.reset(!1);var n=T(t);L.fitExtents(n,null,!1,!1,void 0,void 0,void 0,!0);var r=e.getMaxItemZoom();r!==1/0&&L.setMaxItemZoom(r/8);G&&L.panBy(D,P,!1,!0)}function N(e,t){return{x1:e.scale(b?-1:e.width()-t),y1:e.scale(y?-1:e.height()-t),x2:e.scale(b?t:e.width()+1),y2:e.scale(y?t:e.height()+1)}}var j={generate:function(t,i,o,a,u){if(!u){var s=Math.max(1,o.scale(1));if(m){var f=N(o,v),c=d.borderColour||w,p=d.backColour||x;t.setLayer(oo.OVERLAYSSHADOW);t.rect(f.x1,f.y1,f.x2,f.y2,p,-1,p,!0,"_overviewBorder1",-1);t.rect(f.x1,f.y1,f.x2,f.y2,c,s,p,!1,"_overviewBorder2",-1);t.setLayer(oo.OVERVIEW);t.rect(f.x1,f.y1,f.x2,f.y2,c,s,p,!1,null,-1);if(l){var g=Date.now();if(C&&!G&&g<S+1e3&&k)e.privateFire("redraw");else{S=Date.now();C=!0;if(i.webgl){U(o);n.setOverviewView(L)}else{E.clearRect(0,0,v,v);var A=un(p,1/Qt(p));E.fillStyle=A;E.fillRect(0,0,v,v);n.drawBackground(E);U(o);Fi(t,E,L,r,n.options(),!1,null,!0,null,!1,0,0,void 0)}k=Date.now()-S>30}B||(B=T(0));var R=G?Y:0,Z=G?F:0,O=G?"_overviewBoxDragging":"_overviewBox",D=o.scale(b?B.x1+R:o.width()-v+B.x1+R),P=o.scale(y?B.y1+Z:o.height()-v+B.y1+Z),z=o.scale(b?B.x2+R:o.width()-v+B.x2+R),V=o.scale(y?B.y2+Z:o.height()-v+B.y2+Z),X=Math.max(1,o.scale(2)),W=d.borderColour||h||w,j=un(W,.5);t.setLayer(oo.OVERVIEWSHADOW);t.rect(D,P,z,V,W,X,j,!G,O,-1);t.setLayer(oo.OVERVIEW);t.rect(D,P,z,V,W,X,j,!G,O,-1)}}var K=m?I:M,H=r.get(K,!1,!0).im;if(d.icon){var _=H.width/2,J=N(o,_);t.setLayer(oo.OVERVIEW);t.rect(J.x1,J.y1,J.x2,J.y2,w,s,Xt.white,!0,"_overviewIconRect",-1);t.image(o.scale(b?0:o.width()-_),o.scale(y?0:o.height()-_),o.scale(b?_:o.width()),o.scale(y?_:o.height()),K,"_overviewIcon",-1,"co",0,!0);r.getControlColourImage(K);t.setLayer(oo.OVERVIEWSHADOW);var Q=2*_;t.rect(o.scale(b?-1:o.width()-Q),o.scale(y?-1:o.height()-Q),o.scale(b?Q:o.width()+1),o.scale(y?Q:o.height()+1),w,-1,x,!0,"_overviewIcon",-1)}}}};u.push(j)}function Y(e,t,n){var r=42,i={generate:function(i,o,a){i.setLayer(oo.OVERLAYS);var u=Hn(o,e,r).width,s=a.scale((a.width()-u)/2),l=a.scale((a.height()+r)/2);i.text(s+2,l+2,e,n,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s+2,l+2-a.scale(r),s+2+u,l+2);i.text(s,l,e,t,a.scale(r),!0,null,-1,void 0,!1,u,!1,!1,s,l-a.scale(r),s+u,l)}};u.push(i)}function F(e,t){if(m&&p){var n=t.scale(v);e.drawImage(p,0,0,n,n,t.scale(b?0:t.width()-v),t.scale(y?0:t.height()-v),n,n)}}function D(e){var t=6,n=3,r=3,i=6,o={generate:function(o,a,u){var s=re({top:!0},e.bands);if(s&&s.bands){var l=void 0,f=void 0,c=void 0,d=void 0,h=void 0,v=void 0,p=void 0;o.setLayer(oo.BANDS);var g=1/0;for(l=0;l<s.bands.length;l++)if((h=s.bands[l]).t){f=u.worldToViewDistance(h.w/2);c=h.ff||e.fontFamily;v=.75*(d=h.fs||20);(p=Hn(a,h.t,d,h.fb,c).width/2)+v>f&&(d=Math.floor(d*f/(p+v)));d<g&&(g=d)}g!==1/0&&(v=.75*g);for(l=0;l<s.bands.length;l++){h=s.bands[l];var m=u.x(h.x),y=u.x(h.x-h.w/2),b=u.x(h.x+h.w/2),x=u.scale(-1),w=u.scale(u.height()+1);f=u.worldToViewDistance(h.w/2);var A=h.c||"#f7f7f7";o.rect(y,x,b,w,"white",-1,A,!0,"",-1);if(h.t&&g>3){o.setLayer(oo.BANDLABELS);c=h.ff||e.fontFamily;p=Hn(a,h.t,g,h.fb,c).width/2;var M=h.fc||Xt.lightgrey,I=u.scale(g),E=(b-y)/2-p;if(s.top){var C=t+I;o.rect(y,x,b,C+n,"white",-1,A,!0,"",-1,void 0);o.text(m-p,C,h.t,M,I,h.fb,"",-1,c,!1,2*p,!1,!1,y+E,x+2*n,b+E,C+2*n,void 0,void 0,void 0)}if(s.bottom){var k=u.height()-r,S=k-(I+i);o.rect(y,S,b,w,"white",-1,A,!0,"",-1,void 0);o.text(m-p,k,h.t,M,I,h.fb,"",-1,c,!1,2*p,!1,!1,y+E,S+2*n,b+E,S+2*n+d,void 0,void 0,void 0)}o.setLayer(oo.BANDS)}}}}};u.push(o)}return{addBanding:D,addLogo:T,addNavigation:B,addOverview:G,addTextWatermark:R,chooseDefaultDragger:E,createDragger:I,doclick:M,drawOverviewContent:F,generate:S,getCursor:k,getWatermarkSize:L,remove:Y,reset:C,setup:A}}function my(){var e=new $m,t=new $m;return{on:function(e,n){t.on(e,n)},off:function(e,n){t.off(e,n)},privateOn:function(t,n){e.on(t,n)},privateOff:function(t,n){e.off(t,n)},fire:function(n,r){e.fire(n,r);t.fire("all",{name:n,event:r});t.fire(n,r)},privateFire:function(t,n){e.fire(t,n)}}}function yy(){throw new Error("Chart has been destroyed")}function by(e,t,r,i,o){var u=my(),s=hr(),l=r.privateGetElement(),f=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]};function c(e,t){var n=w.hittest(e,t);if(n){var r=j(n),i=le(n);return{id:N(n),subItem:r?hg(i,r):{}}}}var d,h={animateProperties:Xe,arrange:It,bind:s.bind,clear:ee,combo:K,contains:st,createLink:Tt,destroy:De,each:qe,expand:Lt,filter:$e,foreground:tt,getItem:He,getItemInfoAt:c,graph:F,hide:nt,labelPosition:ut,layout:xt,load:J,lock:pt,map:P,merge:te,off:u.off,on:u.on,options:ht,pan:mt,ping:Ke,removeItem:Je,selection:Ct,serialize:lt,setContainer:Pe,setItem:_e,setProperties:ze,show:ot,toDataURL:_,unbind:s.unbind,viewCoordinates:ct,viewOptions:dt,worldCoordinates:ft,zoom:gt},v=qn(qn({_leafletEventHandlers:null,applyRevealedLinkOffsets:me,cancelAnimation:bt,privateCanvasApi:r,chartType:q,displayOptions:ht,getExtents:S,getLastError:yt,ggwp:U,hidden:it,interactionOptions:ht,privateAddItemsToTransfer:Se,privateAllParentsOpen:Ee,privateAnimateBackgroundOpacity:Ne,privateAnimateProperties:We,privateBothEndsForeground:Ae,privateBothEndsShown:we,privateEach:xe,privateFirstVisibleItemInAncestry:Ie,privateGetAncestryIds:Ce,privateGetCanvas:he,privateGetGenerator:ve,privateGetItem:le,privateGetLinksBetween:Oe,privateGetMapContainer:O,privateGetMaxLabelLength:vt,privateGetParentItems:Me,privateGetRawItems:de,privateGetTopItemId:ce,privateGraph:Be,privateHideWithoutCombos:rt,privateInit:L,privateIsLayingOut:f,privateItemIsShown:fe,privateMapSetSize:B,privateMerge:be,privateNeighbourLinkIds:Re,privateRedrawItem:pe,privateRemoveItem:Ze,privateRemoveItemsFromTransfer:Le,privateReveal:se,privateSetAllDirty:ke,privateSetAllItemsInComboDirty:ge,privateSetBackgroundOpacity:je,privateSetNonImageProperties:Te,privateSetRemoveComponentReference:Ye,privateSetSize:T,privateShowWithoutCombos:at,privateTopParentId:ye,privateUseAutoSizing:Z,privateValidateLayoutOptions:Mt,validateCombos:Ge,viewCoordinates:ct,viewOptions:dt,worldCoordinates:ft,zoom:gt,allowDraw:f,redraw:f,update:f,privateOn:u.privateOn,privateOff:u.privateOff,privateFire:u.privateFire},h),s),p=qn({},h),g=Gu(v,o),m=fm(v,u,s,g,t),y=vy(v,u,s),b=gy(u,s,y,t),w=dm(v,u,s,b,y,t,i,m),A=hm(w,u,v),I={model:m,controller:w,overlays:b,view:py(u,s,100,100,1,y),events:u,legacyEvents:s};w.setServices(I);y.internalUse.setDependencies(I);var E,C=new uy(l,(function(e){return"pointermove"===e.pointerEvent.type?null:w.hittest(e.x,e.y)}));Qg(C,I);var k=function(){};function S(e){return w.itemExtents($(e))}function L(e,t,n,r,i,o,a){E=r;w.setCursorFn(i);w.setCreateCanvasFn(r);w.imageGenFn(o);w.setStartGameLoopFn(a);T(e,t,n,!1)}function T(e,t,n,r){var i=E(t,n,!1);w.makeGhostCanvas(t,n);var o=d;d=py(u,s,t,n,1,y);I.view=d;w.setView(d);w.setCanvasContext(e);w.setShadowCanvas(i.getContext("2d"));bn();if(o){d.setMinZoom(o.getMinZoom());d.setMaxItemZoom(o.getMaxItemZoom());d.fromOldSettings(o.settings(),!1,r)}y.internalUse.setView(d);w.initOverlays()}function Z(){return!v.map().isShown()}function B(e,t){y.internalUse.setSize(e,t)}function O(){return y.internalUse.getMapContainer()}v.privateIsLayingOut=w.isLayingOut;function F(){return m.graph()}function P(){return y.api}function z(){return y&&y.api.isShown()}function X(){return y&&y.internalUse.isTransitioning()}function U(){return w.getWebGLPixels()}function K(){return w.combo.api}function H(e){return D(!0===e?{animate:!0}:e,{animate:!1,time:1e3})}function _(e,n,r,i){var o,a,u;if(!i)throw new Error("[toDataURL] callback is required");if(w.isMapMode()){o=d.width();a=d.height()}else{o=Math.floor(e);a=Math.floor(n)}var s=d.settings();o=o>0?o:s.width;a=a>0?a:s.height;var l=D(r,{fit:"exact",watermark:!0,gradient:!0,logo:!0});z()&&(l.fit="exact");if("oneToOne"===l.fit){(u=w.modelExtents())||(u={x1:0,y1:0,x2:100,y2:100});var f=10;u.x1-=f;u.y1-=f;u.x2+=f;u.y2+=f;var c=w.watermarkSize();if(c&&l.watermark){var h=(c.width-(u.x2-u.x1))/2;if(h>0){u.x1-=h;u.x2+=h}var p=(c.height-(u.y2-u.y1))/2;if(p>0){u.y1-=p;u.y2+=p}}o=u.x2-u.x1;a=u.y2-u.y1;l.noScale=!0}function g(e){o=Math.floor(o/e);a=Math.floor(a/e)}var b=o*a/16e6;if(b>1){g(Math.sqrt(b))}var x=8e3,A=o/x;A>1&&g(A);var M=a/x;M>1&&g(M);var I=E(o,a,!0),C=l.noScale?1:o/d.width(),k=my(),S=hr(),L=py(k,S,Math.floor(o/C),Math.floor(a/C),C,y),T=gy(k,S,null,t),Z=dm(v,k,S,T,null,t,null,m),B={model:m,controller:Z,view:L,events:k,legacyEvents:S,overlays:T};Z.setCreateCanvasFn(E);Z.setServices(B);Z.setView(L);Z.setCanvasContext(I.getContext("2d"));Z.setShadowCanvas(null);Z.imageGenFn(w.imageGenFn());O();function O(){var e=w.options();e.overview={shown:!1};l.watermark||(e.watermark=void 0);l.gradient||(e.gradient=void 0);l.logo||(e.logo=void 0);Z.options(e);Z.backgroundOpacity(w.backgroundOpacity());var n=Z.makeGhostCanvas(o,a),r=[];if(!l.selection){r=m.doSelection();m.doSelection([])}switch(l.fit){case"chart":Z.fitToModel(!1);break;case"view":L.fromOldSettings(d.settings(),!0,!1);break;case"exact":L.fromOldSettings(d.settings(),!1,!1);break;case"oneToOne":L.fitWorldExtents(u,!1,!1,!1,!1,0)}L.scaleFactor(C);Z.initOverlays();Z.draw(!0,{all:!0});t.waitForImages((function(){Z.draw(!0,{all:!0});var e;try{e=I.toDataURL()}catch(e){throw new Error("[toDataURL] There is a problem exporting the chart."+e)}finally{if("rtl"===I.dir){var t=document.getElementsByTagName("body")[0];t.removeChild(I);t.removeChild(n)}}l.selection||m.doSelection(r);m.setAllDirty();if(z()){var o=void 0,a=w.getCanvasContext();o=a.webglCanvas?a.webglCanvas:a.canvas;y.internalUse.toDataURL(E,I,o,w.drawBackground,i)}else R(i,e)}))}}function J(e,n){switch(e&&e.type){case"LinkChart":if(y&&y.internalUse.isTransitioning())throw new Error("Cannot load chart during map show or hide operation");m=fm(v,u,s,g,t);I.model=m;w.setServices(I);w.load(e,(function(){w.initOverlays();t.invokeWhenImagesHaveLoaded(n)}));break;default:throw new Error("Unknown chart type passed to load")}}function q(){return m.type()}function ee(){s.trigger("prechange","delete");u.fire("prechange",{type:"delete"});w.load({type:"LinkChart",items:[],map:{keepSameMode:!0}},(function(){w.render()}))}function te(e,n){ie(e,{updateGlyph:!0});w.render();t.invokeWhenImagesHaveLoaded(n)}function ie(e,t){if(V(e))throw new Error("Null or undefined object passed to merge");var n=G(e);w.merge(n,t)}function oe(e,t){var n=m.getByID(e);return!n||!t&&n.parentId?null:n}function ue(e,t){return m?Array.isArray(e)?e.map((function(e){return oe(e,t)})):oe(e,t):null}function se(e){var t=e;if(t){t=Y(t);var n=v.privateGetItem(t).filter((function(e){return e&&"link"===e.type&&!e._combo}));m.reveal(ne(n),!0);u.privateFire("redraw",{all:!0})}return m.getRevealedLinks()}function le(e){return ue(e,!0)}function fe(e){return!!m&&m.isItemShown(e)}function ce(e){return m.topParentId(e)}function de(){return m?m.getRawItems():[]}function he(){return w.getCanvasContext()}function ve(){return g}function pe(e){m&&m.setDirty(e)}function ge(e){v.privateGetItem(e).forEach((function(e){if(e){v.privateRedrawItem(e.id);if(e._combo){v.privateSetAllItemsInComboDirty(e._combo.linkIds);e._combo.nodeIds&&v.privateSetAllItemsInComboDirty(e._combo.nodeIds)}}}))}function me(e){m&&m.applyRevealedLinkOffsets(e)}function ye(e){return m?m.topParentId(e):e}function be(e){var t=e;y&&y.api.isShown()&&(t=y.internalUse.preMerge(t));m.merge(t);w.render()}function xe(e,t){var n=D(e,{type:"all",items:"underlying"});return A.each(n,!0,t)}function we(e){return m.bothEndsShown(e)}function Ae(e){return m.bothEndsForeground(e)}function Me(e){return m.getParentItems(e)}function Ie(e){return m?m.firstVisibleItemInAncestry(e):null}function Ee(e,t){void 0===t&&(t=!1);return null!==m&&m.allParentsOpen(e,t)}function Ce(e){return m.getAncestryIds(e,!1)}function ke(){w.render();m.setAllDirty()}function Se(e){m.addItemsToTransfer(e)}function Le(e){m.removeItemsFromTransfer(e)}function Te(e,t){void 0===t&&(t=!1);var n={};m.setProperties(e,!1,n,t);w.render(n)}function Re(e){return m.neighbourLinkIds(e)}function Ze(e){m.removeItem(e);w.render()}function Be(){return m.graph()}function Oe(e,t){return m.privateGetLinksBetween(e,t)}function Ge(){m.validateCombos()}function Ye(e){k=e}function Fe(e){Object.keys(e).forEach((function(t){e[t]=yy}))}function De(){v.setContainer(null);if(w.isMapMode()){y.api.leafletMap().remove();w.setOverlayContext(null)}C.destroy();w.destroy();k();fn();_n();bn();o.destroy();m.destroy();Fe(p.map());Fe(p.combo());Fe(m.graph());Fe(p);m.graph=yy;w=null;d=null;g=null;m=null;b=null;s=null;u=null;w=null;A=null;v=null}function Pe(e){var t=or(e);r.privateSetContainer(t);w.setContainer(t)}function ze(e,n,r){void 0===n&&(n=!1);if(e){var i={};w.setProperties(e,n,!1,i);w.render(i)}t.invokeWhenImagesHaveLoaded(r)}function Ve(e,t,n,r,i,o){var a=D(t,{time:1e3,easing:"linear",queue:!0});(a.time<0||!x(a.time))&&(a.time=0);var u=Y(e);w.animateProperties(u,a,n,r,i,o)}function Xe(e,t,n){Ve(e,t,n)}function We(e,t,n,r,i){Ve(e,t,n,!0,r,i)}function Ue(e){return"number"==typeof e?Math.min(Math.max(0,e),1):e?1:0}function Ne(e,t,n){var r=D(t,{time:500});w.animateBackgroundOpacity(Ue(e),r.time,n)}function je(e){w.backgroundOpacity(Ue(e))}function Ke(e,t,n){var r=D(t,{c:"#909090",w:20,r:80,time:800,repeat:1,lw:40});w.ping(e,r,n)}function He(e){return Array.isArray(e)?e.map(m.getItem):m?m.getItem(e):null}function _e(e,n){if(e){s.trigger("prechange","properties");u.fire("prechange",{type:"properties"});w.setItem(e);w.render();t.invokeWhenImagesHaveLoaded(n)}}function Je(e){s.trigger("prechange","delete");u.fire("prechange",{type:"delete"});w.removeItem(e);w.render()}function Qe(e){e&&"boolean"==typeof e.combos&&!e.items&&(e.items=e.combos?"underlying":"toplevel")}function qe(e,t){var n=D(e,{type:"all",items:"underlying"});return A.each(n,!1,t)}function $e(e,t,n){var r=et(t);A.filter(e,r,n)}function et(e){Qe(e);var t=D(e,{type:"all",items:"underlying",animate:!0,time:1e3,updateGlyph:!0});return D(t,{hideSingletons:"link"===t.type})}function tt(e,t,n){Qe(t);var r=D(t,{type:"node",items:"underlying",foregroundOpenCombos:!0});A.foreground(e,r,n)}function nt(e,t,n){if(V(e)||""===e)R(n);else{s.trigger("prechange","hide");u.fire("prechange",{type:"hide"});var r=Y(e),i=H(t);i=D(i,{updateGlyph:!0});var o=w.combo.internalUse.hide(r,i);w.hide(o,i,n)}}function rt(e,t,n){s.trigger("prechange","hide");u.fire("prechange",{type:"hide"});var r=Y(e),i=H(t);w.hide(r,i,n)}function it(){return m.hidden()}function ot(e,t,n,r){if(V(e)||""===e)R(r);else{s.trigger("prechange","show");u.fire("prechange",{type:"show"});var i=Y(e),o=H(n);o=D(o,{updateGlyph:!0});var a=w.combo.internalUse.show(i);w.show(a,!!t,o,r);var l=[];a.forEach((function(e){var t=v.privateGetItem(e);if("node"===t.type){t._combo&&l.push(t.id);t.parentId&&l.push(t.parentId)}return!1}));w.combo.internalUse.ensureMinimumOpenComboSize(l)}}function at(e,t,n,r){s.trigger("prechange","show");u.fire("prechange",{type:"show"});var i=Y(e),o=H(n);w.show(i,t,o,r)}function ut(e){return m?w.labelPosition(e,d):null}function st(e){return m?m.contains(e):[]}function lt(){var e=m.serialize();w.appendCombos(e);var t=y.internalUse.serialize();t&&(e.map=t);e.viewSettings=d.settings();return e}function ft(e,t){var n=d.worldCoordinates(e,t),r=n.x,i=n.y;return{x:Math.floor(r),y:Math.floor(i)}}function ct(e,t){return{x:d.worldToViewX(e),y:d.worldToViewY(t)}}function dt(e,t,n){if(!e)return d.settings();var r=H(t),i=D(e,{offsetX:0,offsetY:0,zoom:1});w.setViewSettings(i,r.animate,r.time,(function(){w.render({drawOnly:!0});R(n)}))}function ht(e,t){return w.options(e,t)}function vt(){return du(ht().truncateLabels)}function pt(e,t){return w.lock(e,t)}function gt(e,t,n){var r=H(t);switch(e){case"in":w.zoomIn(r.animate,r.time,n);break;case"out":w.zoomOut(r.animate,r.time,n);break;case"one":w.setZoom(1,r.animate,r.time,n);break;case"fit":r.extents?w.fitExtents(r.animate,r.time,r.extents,n):w.fitToModel(r.animate,r.time,r.ids,n);break;case"selection":w.fitToSelection(r.animate,r.time,void 0,n);break;case"height":w.fitModelHeight(r.animate,r.time,r.ids,n)}}function mt(e,t,n){var r=H(t);"selection"!==e||z()?w.pan(e,r.animate,r.time,n):w.fitToSelection(r.animate,r.time,void 0,n,!0)}function yt(){return s.getErrors()}function bt(){w.cancelAnimation()}function xt(e,t,n){if(z()||X())R(n);else{var r=Mt(t);w.layout(e||"standard",r,n)}}function wt(){var e=v.viewOptions();return e.height>0?e.width/e.height:1}function At(e){return V(e.tightness)?5:+e.tightness}function Mt(e){var t=e||{};t.tightness=At(t);return D(t,{fit:!0,animate:!0,expanding:!1,spiralOverride:!1,tidy:!0,ratio:wt(),tightness:5,straighten:!0})}function It(e,t,n,r){var i=Et(n);w.arrange(e||"grid",t,i,r)}function Et(e){var t=e||{};t.tightness=At(t);return D(t,{fit:!1,animate:!0,tidy:!1,ratio:wt(),tightness:5})}function Ct(e){var t=V(e)?e:Y(e),n=m?m.doSelection(t):[];t&&w.render();return n}function kt(e){return!0!==e.hi}function St(e,t,r,i,o){var u=o.layout.fix,s=!o.filter||o.filter.updateGlyph,l=a(e);function f(e,t){v.privateEach({type:"link",items:"toplevel"},(function(n){if(!e[n.id1]||!e[n.id2]){var r=e[n.id1]||e[n.id2],i=e[n.id1]?n.id2:n.id1;if(r&&i){t[i]||(t[i]={x:0,y:0,_counter:0,id:i});t[i].x+=r.x;t[i].y+=r.y;t[i]._counter++}}}));var r=0;n(t,(function(t){if(!e[t.id]){t.x/=t._counter;t.y/=t._counter;e[t.id]=t;r++}}));return r}function c(e,t){if(!z()){for(var r,i={},o=[];0!==r;)r=f(t,i);e.forEach((function(e){var t=e;if("node"===t.type&&!i[t.id]){t.x=w[t.id].x;t.y=w[t.id].y}}));n(i,(function(e){o.push(e)}));v.setProperties(o)}}function d(){var e=[],t=[],n={};m.each({type:"all"},(function(r){"node"===r.type?e.push(r):"link"===r.type&&t.push(r);n[r.id]=r}));return{nodes:e,links:t,allItems:n}}function h(e){if("adaptive"!==u)return null;var t=Jc(e.nodes.filter(kt),e.links.filter(kt));return{parts:vf.connectedComponents(t.staticGraph),labels:t.vertexMap}}function p(e){var t={dict:{},touched:{}},n="adjacent"===u||"nonadjacent"===u||"adaptive"===u;l.forEach((function(r){var i=r;t.dict[i.id]=i;if(n&&"link"===i.type){var o=v.privateTopParentId(i.id);if(!e[o]){var a=v.privateTopParentId(i.id1);a&&e[a]&&(t.touched[a]=!0);var u=v.privateTopParentId(i.id2);u&&e[u]&&(t.touched[u]=!0)}}}));return t}function g(){var e=0;v.privateEach({items:"toplevel"},(function(){e++}));return e}function y(e,t){switch(u){case"all":return e;case"adjacent":return Object.keys(t);case"adaptive":case"nonadjacent":return e.filter((function(e){return!t[e]}));case"none":default:return[]}}function b(){var e={open:[],closed:[]};l.forEach((function(t){var n=t;"node"===n.type&&n.parentId&&(v.combo().isOpen(n.parentId)?e.open.push(n.parentId):e.closed.push(n.parentId))}));return e}function x(e){for(var t=[],n={},r=0;r<e.length;r++){var i=e[r];if(!V(i)&&!n[i.id]){n[i.id]=!0;w[i.id]={x:i.x,y:i.y};delete i.x;delete i.y;t.push(i)}}return t}var w={};l=x(l);var A=b(),M=d(),I=h(M),E=g();ie(l,{updateGlyph:s});var C=h(d()),k=p(M.allItems),S=k.dict;I&&C&&jc.adaptiveExpand.findAdaptiveGroups(I,C).forEach((function(e){k.touched[e]=!0}));var L=y(M.nodes.map((function(e){return e.id})),k.touched);t(S,(function(){c(l,M.allItems);r(M.allItems,(function(){i(A,g()!==E,L)}))}))}function Lt(e,t,n){var r=t;function i(e){function t(t,n){function r(e){var n=e;return t[n.id]?x.filter.filterFn(n):!n.hi}if(x.filter&&Q(t)){var i=a(x.filter);i.animate=e;return v.filter(r,i,n)}return n()}return t}function o(e,t,n){x.arrange.animate=t;v.combo().arrange(e,x.arrange,n)}function l(e){x.layout.fixed=e;v.layout(x.layout.name,x.layout,n)}function f(e,t){x.layout.fixed=t;w.arrangeAndLayout(e,x,n)}function c(e,t,r){var i=!1;if(x.animate)for(var a=0;a<e.open.length;a++)if(v.privateItemIsShown(e.open[a])){i=!0;break}var u=e.open.concat(e.closed);t?i?f(u,r):o(u,!1,(function(){l(r)})):o(u,i,n)}function d(e,t){var n;if(e.filter&&M(e.filter.filterFn)){var r=e.filter.filterFn;(n=et(e.filter)).time=Math.floor(t.time/5);n.filterFn=r;return n}}function h(e){e.arrange.animate=e.animate;e.arrange.time=e.time;e.arrange.easing=e.layout.easing;e.filter&&(e.arrange.updateGlyph=e.filter.updateGlyph);return D(e.arrange,{name:"lens",resize:!0,updateGlyph:!0})}var p=["adaptive","nonadjacent","adjacent","none","all"],g=["adaptive","rectangle","circle","none"];function m(e){return p.indexOf(e)>=0?e:p[0]}function y(e){return g.indexOf(e)>=0?e:g[0]}function b(e){e.layout.animate=e.animate;e.layout.time=e.time;var t=e;e.layout=D(e.layout,{fit:t.fit,straighten:t.straighten,tidy:t.tidy,tightness:t.tightness});var n=D(e.layout,{absoluteFixed:!1,consistent:!0,easing:"cubic",expanding:!0,fit:!1,fix:"adaptive",name:"standard",packing:"adaptive",pinToFirstFixed:!1,tidy:!0});n.fix=m(n.fix);"adaptive"!==n.fix&&(n.absoluteFixed=!0);V(e.layout.packing)?!1===n.tidy&&(n.packing="none"):n.packing=y(n.packing);return Mt(n)}var x=D(r=r||{},{animate:!0,time:1e3,layout:{},arrange:{}});x.filter=d(r,x);x.filter&&(x.time-=x.filter.time);x.layout=b(x);x.arrange=h(x);s.trigger("prechange","expand");u.fire("prechange",{type:"expand"});St(Y(G(e)),i(!1),i(x.animate),c,x)}function Tt(e,t,n,r){var i=v.getItem(e);if(v.getItem(t))throw new Error("LinkId ("+t+") already exists and must be unique");if(e&&i&&"node"===i.type&&t){var o=N(t),a=D(n,{style:{}});u.privateOn("drag-end",g);var s="dummyEnd"+Math.floor(1e7*Math.random()),l={type:"node",du:!0,id:s,x:i.x,y:i.y},f=d.worldToViewX(i.x),c=d.worldToViewY(i.y),h=re(a.style,{id:o,id1:e,id2:s,type:"link"});v.merge([l,h],(function(){}));var p={x:f,y:c,dragging:{startX:f,startY:c,started:!0}};w.createNewLinkEndDragger(o,s+W()+"id2",p)}function g(e){var t=e.type,n=e.id;if("create-link"===t){v.removeItem(s);u.privateOff("drag-end",g);R(r,n===o?null:n)}}}function Rt(e,t,n){if(e){w.draw(t,n);w.drawoffscreen();Zt(n)}w.handlePointerMove(e);e&&w.afterDraw()}function Zt(e){e.all=!1;e.colours=!1;e.textures=!1;e.positions=!1;e.shadow=!1}var Bt=ar(Rt,w.animate,w.getCanvasContext);re(v,Bt);u.privateOn("redraw",Bt.redraw);return{public:p,internal:{api:v}}}
var xy="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIGZsb2F0IGFfcmFkaXVzO2F0dHJpYnV0ZSBmbG9hdCBhX3N0YXJ0QW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfZW5kQW5nbGU7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXI7YXR0cmlidXRlIHZlYzQgYV9jb2xvdXIyO2F0dHJpYnV0ZSB2ZWMzIGFfaGl0VGVzdENvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9saW5lVHlwZTthdHRyaWJ1dGUgdmVjMyBhX2NvcmU7dW5pZm9ybSBmbG9hdCB1X2hpdFRlc3Q7dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWM0IHZfbGluZURhdGE7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2Zsb2F0IGE9My4xNDE1OTI2NTM1OTtpbnQgYj0yO2ludCBjPTM7aW50IGQ9NDtpbnQgZT01O2Zsb2F0IGY9MTUuMDtjb25zdCBmbG9hdCBnPTQuMDtjb25zdCBmbG9hdCBoPWctMC41O2Zsb2F0IGk9MC4wMDAxO2ludCBqKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgayhmbG9hdCBsLGZsb2F0IG0sZmxvYXQgbil7ZmxvYXQgbz1tYXgobi1sLDAuMCk7ZmxvYXQgcD1tYXgoaSxtLWwpO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCxrKDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSxrKDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LGsoMC4wMSwwLjA4LHVfem9vbSkpO312ZWMyIHIodmVjMiBzLGZsb2F0IHQsZmxvYXQgdSxmbG9hdCB2LGZsb2F0IHcpe3JldHVybiB2ZWMyKHMueCsodCpjb3ModSt2KncpKSxzLnkrKHQqc2luKHUrdip3KSkpO31mbG9hdCB4KGZsb2F0IHksZmxvYXQgeil7ZmxvYXQgQT15LzIuMDtmbG9hdCBCPWZsb29yKCgoeitBKS8oeStBKSkrMC41KTtpZigoQip5KT56KXtCPTEuMDt9cmV0dXJuIEI7fXZlYzIgQyh2ZWMyIEQsdmVjMiBFLHZlYzIgRixpbnQgRyl7dmVjMiBIO3ZlYzIgSTtpZihHPT0wKXtIPUQ7ST0oRStGKS8yLjA7fWVsc2UgaWYoRz09MSl7SD1FO0k9KEQrRikvMi4wO31lbHNlIGlmKEc9PTIpe0g9RjtJPShFK0QpLzIuMDt9dmVjMiBKPW5vcm1hbGl6ZShILUkpO0grPUovdV96b29tO3JldHVybiBIO312b2lkIG1haW4oKXt2ZWM0IEs9YV9jb2xvdXIvMjU1LjA7dmVjNCBMPWFfY29sb3VyMi8yNTUuMDtmbG9hdCBNPTEuMC91X3pvb207aW50IE49aihhX2xpbmVUeXBlKTtib29sIE89Tj09Yjtib29sIFA9Tj09Yztib29sIFE9Tj09ZDtib29sIFI9Tj49ZTt2ZWMyIEg7aWYoUil7aW50IEc9aihhX2xpbmVUeXBlKS1lO3ZlYzIgRD1hX3Bvc2l0aW9uO3ZlYzIgRT12ZWMyKGFfcmFkaXVzLGFfc3RhcnRBbmdsZSk7dmVjMiBGPXZlYzIoYV9lbmRBbmdsZSxhX3dpZHRoKTtmbG9hdCBTPWRpc3RhbmNlKEUsRik7ZmxvYXQgVD1TL3Vfem9vbTtmbG9hdCBVPTEuMC9UO0g9QyhELEUsRixHKTt2X2JhcnljZW50cmljPXZlYzQoYV9jb3JlLnh5eixVKTt2X2NvcmU9dmVjNCgxLjApO3ZfbGluZURhdGE9dmVjNCgwLjAsMC4wLDAuMCxhX2xpbmVUeXBlKTt9ZWxzZXt2ZWMyIHM9YV9wb3NpdGlvbjtmbG9hdCB0PWFfcmFkaXVzO2Zsb2F0IFY9YV9zdGFydEFuZ2xlO2Zsb2F0IFc9YV9lbmRBbmdsZTtmbG9hdCBYO2Zsb2F0IFk7ZmxvYXQgTT0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtNPTcuMC91X3pvb207fWJvb2wgWj1qKHNpZ24oYV9jb3JlLnIpKT09MTtmbG9hdCB3PWFicyhhX2NvcmUuciktMS4wO2Zsb2F0IHY9KGFfZW5kQW5nbGUtYV9zdGFydEFuZ2xlKS9nO2Zsb2F0IGJhPTEuMC91X3Jlc29sdXRpb24uejtpZihQKXtiYT1tYXgoYmEsc3RlcCgyLjUsYV9saW5lVHlwZSkqMi4wKTt9ZmxvYXQgYmI9bWF4KGFfd2lkdGgqdV96b29tLGJhKS91X3pvb207ZmxvYXQgYmM9bWF4KHEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsYV93aWR0aCp1X3pvb20pKTtpZih1X2FkYXB0aXZlU3R5bGluZyl7Sy5hKj1iYztMLmEqPWJjO31mbG9hdCBiZD1iYitNO2Zsb2F0IGJlPWJkLzIuMDtmbG9hdCBiZj1iYi8yLjA7aWYodzxnKXtZPTEuMDt9ZWxzZXtZPS0xLjA7fWZsb2F0IGJnPWFfcmFkaXVzKihXLVYpO3ZlYzIgYmg9cihzLG1heCh0K2JmLDAuMCksYV9zdGFydEFuZ2xlLHYsdysoWS8yLjApKTtmbG9hdCBiaT12LzIuMDtmbG9hdCBiaj1sZW5ndGgoYmgtcyk7ZmxvYXQgYms9YmovY29zKGJpKTtmbG9hdCBibD1zbW9vdGhzdGVwKDQwMDAuMCwyMDAwMC4wLHQpKjMuMDtpZihaKXtYPWJrK00rYmw7fWVsc2V7YmwqPTIuMDtYPXQtYmUtYmw7fXZfbGluZURhdGE9dmVjNCgwLjAsYmIsYmcsLWFfbGluZVR5cGUpO1g9bWF4KFgsMC4wKTtmbG9hdCBibT0oMS4wL2JnKS91X3pvb207ZmxvYXQgYm49YmcqdV96b29tO2Zsb2F0IGJvPShXLVYpL2JuO2Zsb2F0IGJwPVY7ZmxvYXQgYnE9Ym87YnAtPSgxLjAtc3RlcCgwLjUsdykpKmJxO2JwKz1zdGVwKGgsdykqYnE7SD1yKHMsWCxicCx2LHcpO2lmKFApe2Zsb2F0IGJyPWJuLzQuMDtmbG9hdCBicz1iZy8oYmIqMi4wKTtmbG9hdCBidD1taW4oYnIsYnMpO3ZfY29yZT12ZWM0KGJwLGNlaWwoYnQpLGJtLGFfcmFkaXVzKTt2X2Rhc2hpbmc9dmVjMyhiYixiYiwwLjUpO31lbHNlIGlmKE8pe2Zsb2F0IHk9bWF4KDIuMC91X3pvb20sYmIqMi4wKTtmbG9hdCBidT14KHksYmcpO2Zsb2F0IEE9KGJnLXkqYnUpLyhidS0xLjApO2Zsb2F0IGJ2PUEqYnUvKGJnK0EpO3ZfY29yZT12ZWM0KGJwLGJ1LWJ2LGJtLGFfcmFkaXVzKTtmbG9hdCBidz0oeS8oeStBKSkvMi4wO3ZfZGFzaGluZz12ZWMzKHksQSxidyk7fWVsc2UgaWYoUSl7ZmxvYXQgYng9YV9jb3JlLnk7ZmxvYXQgYnk9ZipieDtmbG9hdCBiej1tYXgoMzAuMCxiYiozLjApO2Zsb2F0IGJBPWJ6O2J5PW1pbihiQSoxNi4wLGFicyhieSkpKnNpZ24oYngpO2Zsb2F0IGJCPTEwMDAuMCpiQS9ieTtmbG9hdCBiQz1tb2QodV90aW1lL2JCLDEuMCk7ZmxvYXQgYkQ9YnovYV9yYWRpdXM7ZmxvYXQgYkU9YkQqKDIuMC8zLjApO2Zsb2F0IGJGPWJDKmJEO3ZfY29yZT12ZWM0KGJwLHcvZyxibSxhX3JhZGl1cyk7dl9kYXNoaW5nPXZlYzMoYkQsMC4wLGJGKTt9ZWxzZXt2X2NvcmU9dmVjNChicCx3L2csYm0sYV9yYWRpdXMpO312X3Bvc2l0aW9uPXZlYzQoSCxzKTt9dmVjMiBiRz1IL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGJIPWJHKjIuMDt2ZWMyIGJJPWJILTEuMDt2X2NvbG91cj1LO3ZfY29sb3VyMj1MO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChiSSp2ZWMyKDEsLTEpLDAsMSk7fQ==",wy="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcDA7YXR0cmlidXRlIHZlYzIgYV9wMTthdHRyaWJ1dGUgdmVjMiBhX3AyO2F0dHJpYnV0ZSB2ZWMyIGFfcDM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfZmxvd1ZlbG9jaXR5O2F0dHJpYnV0ZSB2ZWM0IGFfY29sb3VyO2F0dHJpYnV0ZSB2ZWM0IGFfY29sb3VyMjthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfbGluZVR5cGU7YXR0cmlidXRlIHZlYzQgYV9jb3JlO3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV90aW1lO3VuaWZvcm0gYm9vbCB1X2FkYXB0aXZlU3R5bGluZzt2YXJ5aW5nIHZlYzQgdl9jb2xvdXI7dmFyeWluZyB2ZWM0IHZfY29sb3VyMjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWM0IHZfYmFyeWNlbnRyaWM7dmFyeWluZyB2ZWM0IHZfcG9zaXRpb247dmFyeWluZyB2ZWMzIHZfZGFzaGluZztpbnQgYT0yO2ludCBiPTM7aW50IGM9NDtpbnQgZD01O2NvbnN0IGludCBlPTUwO2Zsb2F0IGY9MC4wMDAxO2Zsb2F0IGc9MTUuMDtpbnQgaChmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fWZsb2F0IGkoZmxvYXQgaixmbG9hdCBrLGZsb2F0IGwpe2Zsb2F0IG09bWF4KGwtaiwwLjApO2Zsb2F0IG49bWF4KGYsay1qKTtyZXR1cm4gbWluKDEuMCxtL24pO31mbG9hdCBvKCl7aWYodV96b29tPjAuMTUpe3JldHVybiBtaXgoMC43NSwxLjAsaSgwLjE1LDAuMix1X3pvb20pKTt9aWYodV96b29tPjAuMDgpe3JldHVybiBtaXgoMC40LDAuNzUsaSgwLjA4LDAuMTUsdV96b29tKSk7fXJldHVybiBtaXgoMC4yLDAuNCxpKDAuMDEsMC4wOCx1X3pvb20pKTt9dmVjMiBwKGZsb2F0IHEpe2Zsb2F0IHI9MS4wLXE7cmV0dXJuIChwb3cociwzLjApKmFfcDApKygzLjAqcG93KHIsMi4wKSpxKmFfcDEpKygzLjAqcipwb3cocSwyLjApKmFfcDIpKyhwb3cocSwzLjApKmFfcDMpO312ZWMyIHMoZmxvYXQgcSl7dmVjMiB0PSgtMy4wKnBvdygoMS4wLXEpLDIuMCkqYV9wMCkrKDMuMCooMS4wLSgzLjAqcSkpKigxLjAtcSkqYV9wMSkrKDMuMCpxKigyLjAtKDMuMCpxKSkqYV9wMikrKDMuMCpwb3cocSwyLjApKmFfcDMpO3ZlYzIgdT1ub3JtYWxpemUodCk7cmV0dXJuIHZlYzIoLXUueSx1LngpO31mbG9hdCB2KGZsb2F0IHcsZmxvYXQgeCl7ZmxvYXQgeT13LzIuMDtmbG9hdCB6PWZsb29yKCgoeCt5KS8odyt5KSkrMC41KTtpZigoeip3KT54KXt6PTEuMDt9cmV0dXJuIHo7fXZlYzIgQSh2ZWMyIEIsdmVjMiBDLHZlYzIgRCxpbnQgRSl7dmVjMiBGO3ZlYzIgRztpZihFPT0wKXtGPUI7Rz0oQytEKS8yLjA7fWVsc2UgaWYoRT09MSl7Rj1DO0c9KEIrRCkvMi4wO31lbHNlIGlmKEU9PTIpe0Y9RDtHPShDK0IpLzIuMDt9dmVjMiBIPW5vcm1hbGl6ZShGLUcpO0YrPUgvdV96b29tO3JldHVybiBGO312b2lkIG1haW4oKXt2ZWM0IEk9YV9jb2xvdXIvMjU1LjA7dmVjNCBKPWFfY29sb3VyMi8yNTUuMDtmbG9hdCBLPTEuMC91X3pvb207aW50IEw9aChhX2xpbmVUeXBlKTtib29sIE09TD09YTtib29sIE49TD09Yjtib29sIE89TD09Yztib29sIFA9TD09ZDt2ZWMyIEY7aWYoUCl7aW50IEU9aChhX2NvcmUudyk7dmVjMiBCPWFfcDA7dmVjMiBDPWFfcDE7dmVjMiBEPWFfcDI7ZmxvYXQgUT1kaXN0YW5jZShDLEQpO2Zsb2F0IFI9US91X3pvb207ZmxvYXQgUz0xLjAvUjtGPUEoQixDLEQsRSk7dl9iYXJ5Y2VudHJpYz12ZWM0KGFfY29yZS54eXosUyk7dl9jb3JlPXZlYzQoMS4wKTt2X2xpbmVEYXRhPXZlYzQoMC4wLDAuMCwwLjAsYV9saW5lVHlwZSk7fWVsc2V7dmVjMiBUPWFfcDA7dmVjMiBVPWFfcDE7dmVjMiBWPWFfcDI7dmVjMiBXPWFfcDM7ZmxvYXQgSz0xLjAvdV96b29tO2lmKHVfaGl0VGVzdD09MS4wKXtLPTcuMC91X3pvb207fWZsb2F0IFg9Zmxvb3IoYV9jb3JlLngqMC41KTtmbG9hdCBZPTEuMC0oMi4wKihtb2QoYV9jb3JlLngsMi4wKSkpO2Zsb2F0IFo9YWJzKGFfY29yZS55KTtpbnQgYmE9aChaKTtib29sIGJiPXNpZ24oYV9jb3JlLnkpPT0tMS4wO2Zsb2F0IGJjPSgoKGFfY29yZS56KzEyOC4wKSoyNTYuMCkrYV9jb3JlLncrMTI4LjApLzY1NTM1LjA7ZmxvYXQgYmQ9MS4wL3VfcmVzb2x1dGlvbi56O2lmKE4pe2JkPW1heChiZCxzdGVwKDIuNSxhX2xpbmVUeXBlKSoyLjApO31mbG9hdCBiZT1tYXgoYV93aWR0aCp1X3pvb20sYmQpL3Vfem9vbTtmbG9hdCBiZj1tYXgobygpLHNtb290aHN0ZXAoMC4wLDEuMCxhX3dpZHRoKnVfem9vbSkpO2lmKHVfYWRhcHRpdmVTdHlsaW5nKXtJLmEqPWJmO0ouYSo9YmY7fWZsb2F0IGJnPWJlK0s7ZmxvYXQgYmg9YmcvMi4wO2Zsb2F0IGJpPWJlLzIuMDtmbG9hdCBiaj0wLjA7ZmxvYXQgYms9MC4wO3ZlYzIgYmw9dmVjMigwLjApO3ZlYzIgYm09VDtpZighYmImJlg9PTAuMCl7Rj1UO2JsPXMoMC4wKTtGKz12ZWMyKC1ibC55LGJsLngpL3Vfem9vbTt9Zm9yKGludCBibj0xO2JuPD1lO2JuKyspe2lmKGJuPmJhKXticmVhazt9ZmxvYXQgdD1mbG9hdChibikvWjt2ZWMyIGJvPXAodCk7YmorPWRpc3RhbmNlKGJtLGJvKTtpZihibj09aW50KFgpKXtGPWJvO2JsPXModCk7Yms9Ymo7fWJtPWJvO31pZihiYiYmaW50KFgpPT1iYSl7Ris9dmVjMihibC55LC1ibC54KS91X3pvb207fWZsb2F0IGJwPWJqL2JjO2lmKGJiKXtiaz0oKCgxLjAtYmMpKmJwKStiayk7fWJrLz1icDt2ZWMyIGJxPWJsKihiZy8yLjApKlk7Rj1GK2JxO2lmKGludChZKT09MSl7dl9saW5lRGF0YT12ZWM0KC1iZyxiZSxicCxhX2xpbmVUeXBlKTt9ZWxzZXt2X2xpbmVEYXRhPXZlYzQoYmcsYmUsYnAsYV9saW5lVHlwZSk7fWZsb2F0IGJyPSgxLjAvYnApL3Vfem9vbTtmbG9hdCBicz1icCp1X3pvb207aWYoTil7ZmxvYXQgYnQ9YnMvNC4wO2Zsb2F0IGJ1PWJwLyhiZSoyLjApO2Zsb2F0IGJ2PW1pbihidCxidSk7dl9jb3JlPXZlYzQoYmssY2VpbChidiksYnIsMC4wKTt2X2Rhc2hpbmc9dmVjMyhiZSxiZSwwLjUpO31lbHNlIGlmKE0pe2Zsb2F0IHc9bWF4KDIuMC91X3pvb20sYmUqMi4wKTtmbG9hdCBidz12KHcsYnApO2Zsb2F0IHk9KGJwLXcqYncpLyhidy0xLjApO2Zsb2F0IGJ4PXkqYncvKGJwK3kpO3ZfY29yZT12ZWM0KGJrLGJ3LWJ4LGJyLDApO2Zsb2F0IGJ5PSh3Lyh3K3kpKS8yLjA7dl9kYXNoaW5nPXZlYzModyx5LGJ5KTt9ZWxzZSBpZihPKXtmbG9hdCBiej1hX2Zsb3dWZWxvY2l0eTtmbG9hdCBiQT1nKmJ6O2Zsb2F0IGJCPW1heCgzMC4wLGJlKjMuMCk7ZmxvYXQgYkM9YkI7YkE9bWluKGJDKjE2LjAsYWJzKGJBKSkqc2lnbihieik7ZmxvYXQgYkQ9MTAwMC4wKmJDL2JBO2Zsb2F0IGJFPW1vZCh1X3RpbWUvYkQsMS4wKTtmbG9hdCBiRj1iRSpiQjt2X2NvcmU9dmVjNChiayxYL1osYnIsMC4wKTt2X2Rhc2hpbmc9dmVjMyhiQiwwLjAsYkYpO31lbHNle3ZfY29yZT12ZWM0KGJrLFgvWixiciwwLjApO319dmVjMiBiRz1GL3VfcmVzb2x1dGlvbi54eTt2ZWMyIGJIPWJHKjIuMDt2ZWMyIGJJPWJILTEuMDt2X2NvbG91cj1JO3ZfY29sb3VyMj1KO3ZfaGl0VGVzdENvbG91cj1hX2hpdFRlc3RDb2xvdXI7Z2xfUG9zaXRpb249dV90cmFuc2Zvcm0qdmVjNChiSSp2ZWMyKDEsLTEpLDAsMSk7fQ==",Ay="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV9ncmFkaWVudFN0YXJ0RnJhY3Rpb247dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjI7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb3JlO3ZhcnlpbmcgdmVjNCB2X2xpbmVEYXRhO3ZhcnlpbmcgdmVjNCB2X2JhcnljZW50cmljO3ZhcnlpbmcgdmVjNCB2X3Bvc2l0aW9uO3ZhcnlpbmcgdmVjMyB2X2Rhc2hpbmc7aW50IGE9MjtpbnQgYj0zO2ludCBjPTQ7aW50IGQ9NTtmbG9hdCBlPTMuMTQxNTkyNjUzNTk7ZmxvYXQgZj0wLjcwNzEwNjc4MTE4NjU0NzU3O2Zsb2F0IGcoZmxvYXQgaCxmbG9hdCBpKXtmbG9hdCBqPWxlbmd0aCh2ZWMyKGRGZHgoaSksZEZkeShpKSkpKmY7cmV0dXJuIHNtb290aHN0ZXAoaC1qLGgraixpKTt9ZmxvYXQgaz0wLjAwMDE7ZmxvYXQgbChmbG9hdCBtLGZsb2F0IG4sZmxvYXQgaSl7ZmxvYXQgbz1tYXgoaS1tLDAuMCk7ZmxvYXQgcD1tYXgoayxuLW0pO3JldHVybiBtaW4oMS4wLG8vcCk7fWZsb2F0IHEodmVjMyByKXt2ZWMzIHM9ZndpZHRoKHIpO3ZlYzMgdD1zbW9vdGhzdGVwKHZlYzMoMC4wKSxzKjIuMCxyKTtyZXR1cm4gbWluKG1pbih0LngsdC55KSx0LnopO31pbnQgdShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fXZlYzQgdihmbG9hdCB3KXtmbG9hdCB4PWwodV9ncmFkaWVudFN0YXJ0RnJhY3Rpb24sMS4wLXVfZ3JhZGllbnRTdGFydEZyYWN0aW9uLHcpO3ZlYzMgeT1taXgodl9jb2xvdXIucmdiLHZfY29sb3VyMi5yZ2IseCk7ZmxvYXQgej1taXgodl9jb2xvdXIuYSx2X2NvbG91cjIuYSx4KTtyZXR1cm4gdmVjNCh5Knoseik7fXZlYzQgQSh2ZWM0IHksZmxvYXQgQixmbG9hdCBDKXtmbG9hdCBoPShDLzIuMCkqdV96b29tO2Zsb2F0IEQ9YWJzKEIpKnVfem9vbTt5Kj0xLjAtc21vb3Roc3RlcChoLWYsaCtmLEQpO3JldHVybiB5O31mbG9hdCBFKGZsb2F0IEQsZmxvYXQgRixmbG9hdCBHKXtyZXR1cm4gKEQvRikqRzt9dmVjNCBIKGJvb2wgSSxib29sIEosYm9vbCBLLGJvb2wgTCl7ZmxvYXQgQj12X2xpbmVEYXRhLngvMi4wO2Zsb2F0IEM9dl9saW5lRGF0YS55O2Zsb2F0IE09dl9jb3JlLng7dmVjNCBOPXYoTSk7ZmxvYXQgTz12X2NvcmUuejtmbG9hdCBQPXZfbGluZURhdGEuejtpZihMKXtmbG9hdCBRPXZfZGFzaGluZy54O2Zsb2F0IFI9USooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBUPU0qUDtmbG9hdCBVPW1vZChULShQLzIuMCktKFEvMi4wKSxRKTtmbG9hdCBWPW1vZChTLVUsUSk7ZmxvYXQgVz1kaXN0YW5jZShWLFEvMi4wKTtOKj0xLjAtZyhSLzIuMCxXKTtOPUEoTixCLEMpO04qPWcoTyx2X2NvcmUueCk7Tio9MS4wLWcoMS4wLU8sdl9jb3JlLngpO31lbHNlIGlmKEkpe2Zsb2F0IFg9dl9jb3JlLnk7ZmxvYXQgWT1DLzIuMDtmbG9hdCBaPXZfZGFzaGluZy54O2Zsb2F0IGJhPXZfZGFzaGluZy56O2Zsb2F0IGJiPU0qWDt2ZWMyIGJjPXZlYzIoTSpQLEIpO2Zsb2F0IGJkPWZyYWN0KGJiKS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJmPWJiLWJkK2JlO3ZlYzIgYmc9dmVjMigoYmYvWCkqUCwwLjApO2Zsb2F0IGJoPVk7aWYoSil7YmMueT0wLjA7Ymg9Wi8yLjA7Tj1BKE4sQixDKTt9ZmxvYXQgVz1kaXN0YW5jZShiYyxiZyk7Tio9MS4wLWcoYmgsVyk7fWVsc2V7Tj1BKE4sQixDKTtOKj1nKE8sdl9jb3JlLngpO04qPTEuMC1nKDEuMC1PLHZfY29yZS54KTt9cmV0dXJuIE47fXZlYzQgYmkoYm9vbCBJLGJvb2wgSixib29sIEssYm9vbCBMKXtmbG9hdCBDPXZfbGluZURhdGEueTtmbG9hdCBPPXZfY29yZS56O2Zsb2F0IFA9dl9saW5lRGF0YS56O2Zsb2F0IFk9Qy8yLjA7ZmxvYXQgYmo9dl9jb3JlLmE7ZmxvYXQgYms9UC9iajt2ZWMyIEQ9dl9wb3NpdGlvbi54eTt2ZWMyIGJsPXZfcG9zaXRpb24uenc7ZmxvYXQgYm09ZGlzdGFuY2UoRCxibCk7ZmxvYXQgYm49YXRhbihELnktYmwueSxELngtYmwueCk7aWYoYm48dl9jb3JlLngpe2JuKz0yLjAqZTt9ZmxvYXQgYm89dl9jb3JlLng7ZmxvYXQgYnA9KGJuLWJvKS8oYmspO3ZlYzQgTj12KGJwKTtpZihMKXtmbG9hdCBicT12X2Rhc2hpbmcueDtmbG9hdCBicj1icSooMi4wLzMuMCk7ZmxvYXQgUz12X2Rhc2hpbmcuejtmbG9hdCBicz1icCpiaztmbG9hdCBidD1tb2QoYnMtKGJrLzIuMCktKGJxLzIuMCksYnEpO2Zsb2F0IGJ1PW1vZChTLWJ0LGJxKTtmbG9hdCBXPWRpc3RhbmNlKGJ1LGJxLzIuMCk7ZmxvYXQgYnY9dl9jb3JlLnk7Tio9MS4wLWcoYnIvMi4wLFcpO04qPWcoYmosYm0rWSk7Tio9MS4wLWcoYmorWSxibSk7Tio9ZyhPLGJ2KTtOKj0xLjAtZygxLjAtTyxidik7fWVsc2UgaWYoSSl7ZmxvYXQgWj12X2Rhc2hpbmcueDtmbG9hdCBiYT12X2Rhc2hpbmcuejtmbG9hdCBYPXZfY29yZS55O2Zsb2F0IGJ3PWJwKlg7dmVjMiBieD1EO2Zsb2F0IGJkPWZyYWN0KGJ3KS1iYTtmbG9hdCBiZT1mbG9vcihiZCswLjUpO2Zsb2F0IGJnPWJ3LWJkK2JlO2Zsb2F0IGJ5PUUoYmcsWCxiaykrYm87aWYoSyl7dmVjMiBiZz12ZWMyKGJsLngrKGJqKmNvcyhieSkpLGJsLnkrKGJqKnNpbihieSkpKTtmbG9hdCBXPWRpc3RhbmNlKGJ4LGJnKTtmbG9hdCBiej1ZO04qPTEuMC1nKGJ6LFcpO31lbHNle2Zsb2F0IGJBPWRpc3RhbmNlKGJuLGJ5KTtmbG9hdCBiej1FKFovMi4wLFAsYmspO04qPTEuMC1nKGJ6LGJBKTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO319ZWxzZXtmbG9hdCBidj12X2NvcmUueTtOKj1nKGJqLGJtK1kpO04qPTEuMC1nKGJqK1ksYm0pO04qPWcoTyxidik7Tio9MS4wLWcoMS4wLU8sYnYpO31yZXR1cm4gTjt9dm9pZCBtYWluKCl7aW50IGJCPWludCh1X3NoYWRvd1R5cGUpO2Zsb2F0IGJDPWFicyh2X2xpbmVEYXRhLncpO2ludCBiRD11KGJDKTtib29sIGJFPXNpZ24odl9saW5lRGF0YS53KTwwLjA7Ym9vbCBJPWJDPjEuNTtib29sIEo9YkQ9PWE7Ym9vbCBLPWJEPT1iO2Jvb2wgTD1iRD09Yztib29sIGJGPWJEPj1kO2Jvb2wgYkc9YkI9PS0xO2Jvb2wgYkg9YkI9PTE7aWYodV9oaXRUZXN0PjAuNSl7aWYoYkcpe2Rpc2NhcmQ7fWVsc2V7ZmxvYXQgYkk9bGVuZ3RoKHN0ZXAoMS4wLHZfaGl0VGVzdENvbG91cikpO2dsX0ZyYWdDb2xvcj12ZWM0KHZfaGl0VGVzdENvbG91ci8yNTUuMCxiSSk7fX1lbHNlIGlmKGJIKXtkaXNjYXJkO31lbHNle3ZlYzQgTjtpZihiRil7Tj12ZWM0KHZfY29sb3VyLnJnYip2X2NvbG91ci5hLHZfY29sb3VyLmEpO04qPWcodl9iYXJ5Y2VudHJpYy5hLHEodl9iYXJ5Y2VudHJpYy5yZ2IpKTt9ZWxzZXtpZihiRSl7Tj1iaShJLEosSyxMKTt9ZWxzZXtOPUgoSSxKLEssTCk7fX1nbF9GcmFnQ29sb3I9Tjt9fQ==",My="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24xO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24yO2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb24zO2F0dHJpYnV0ZSB2ZWM0IGFfdmVydGV4SW5mbzthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjI7YXR0cmlidXRlIHZlYzMgYV9oaXRUZXN0Q29sb3VyO2F0dHJpYnV0ZSBmbG9hdCBhX2luZGV4O3VuaWZvcm0gZmxvYXQgdV9oaXRUZXN0O3VuaWZvcm0gdmVjMyB1X3Jlc29sdXRpb247dW5pZm9ybSBtYXQ0IHVfdHJhbnNmb3JtO3VuaWZvcm0gZmxvYXQgdV96b29tO3VuaWZvcm0gZmxvYXQgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBmbG9hdCB1X3RpbWU7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzQgdl9jb2xvdXIyO3ZhcnlpbmcgdmVjNCB2X2NvcmU7dmFyeWluZyB2ZWMzIHZfaGl0VGVzdENvbG91cjt2YXJ5aW5nIHZlYzQgdl9saW5lRGF0YTt2YXJ5aW5nIHZlYzQgdl9iYXJ5Y2VudHJpYzt2YXJ5aW5nIHZlYzQgdl9wb3NpdGlvbjt2YXJ5aW5nIHZlYzMgdl9kYXNoaW5nO2ludCBhPTI7aW50IGI9MztpbnQgYz00O2ludCBkPTU7ZmxvYXQgZT0wLjAwMDE7ZmxvYXQgZj0xNS4wO2ludCBnKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgaChmbG9hdCBpLGZsb2F0IGope2Zsb2F0IGs9aS8yLjA7ZmxvYXQgbD1mbG9vcigoKGoraykvKGkraykpKzAuNSk7aWYoKGwqaSk+ail7bD0xLjA7fXJldHVybiBsO312ZWMyIG0odmVjMiBuLHZlYzIgbyx2ZWMyIHAsaW50IHEpe3ZlYzIgcjt2ZWMyIHM7aWYocT09MCl7cj1uO3M9KG8rcCkvMi4wO31lbHNlIGlmKHE9PTEpe3I9bztzPShuK3ApLzIuMDt9ZWxzZSBpZihxPT0yKXtyPXA7cz0obytuKS8yLjA7fXZlYzIgdD1ub3JtYWxpemUoci1zKTtyKz10L3Vfem9vbTtyZXR1cm4gcjt9ZmxvYXQgdShmbG9hdCB2LGZsb2F0IHcsZmxvYXQgeCl7ZmxvYXQgeT1tYXgoeC12LDAuMCk7ZmxvYXQgej1tYXgoZSx3LXYpO3JldHVybiBtaW4oMS4wLHkveik7fWZsb2F0IEEoKXtpZih1X3pvb20+MC4xNSl7cmV0dXJuIG1peCgwLjc1LDEuMCx1KDAuMTUsMC4yLHVfem9vbSkpO31pZih1X3pvb20+MC4wOCl7cmV0dXJuIG1peCgwLjQsMC43NSx1KDAuMDgsMC4xNSx1X3pvb20pKTt9cmV0dXJuIG1peCgwLjIsMC40LHUoMC4wMSwwLjA4LHVfem9vbSkpO312b2lkIG1haW4oKXtmbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejt2ZWM0IEM9YV9jb2xvdXIvMjU1LjA7dmVjNCBEPWFfY29sb3VyMi8yNTUuMDtpbnQgRT1nKGFfdmVydGV4SW5mby53KTtib29sIEY9RT09YTtib29sIEc9RT09Yjtib29sIEg9RT09Yztib29sIEk9RT09ZDt2ZWMyIHI7ZmxvYXQgSjtmbG9hdCBLO2lmKEkpe2ludCBxPWludChhX2luZGV4KTt2ZWMyIG49YV9wb3NpdGlvbjE7dmVjMiBvPWFfcG9zaXRpb24yO3ZlYzIgcD1hX3Bvc2l0aW9uMztmbG9hdCBMPWRpc3RhbmNlKG8scCk7ZmxvYXQgTT1ML3Vfem9vbTtmbG9hdCBLPTEuMC9NO3I9bShuLG8scCxxKTt2X2xpbmVEYXRhPXZlYzQoMC4wLDAuMCwwLjAsYV92ZXJ0ZXhJbmZvLncpO3ZfYmFyeWNlbnRyaWM9dmVjNChhX3ZlcnRleEluZm8ueHl6LEspO31lbHNle2Zsb2F0IE49MS4wL3Vfem9vbTtpZih1X2hpdFRlc3Q9PTEuMCl7Tj03LjAvdV96b29tO31mbG9hdCBCPTEuMC91X3Jlc29sdXRpb24uejtpZihHKXtCPW1heChCLHN0ZXAoMi41LGFfdmVydGV4SW5mby53KSoyLjApO312ZWMyIE89bm9ybWFsaXplKGFfcG9zaXRpb24yLWFfcG9zaXRpb24xKTt2ZWMyIFA9Ty91X3pvb207ZmxvYXQgUT1hX3ZlcnRleEluZm8ueS0xLjA7ZmxvYXQgUj1hX3ZlcnRleEluZm8ueCthX3ZlcnRleEluZm8uejt2ZWMyIFM9YV9wb3NpdGlvbjItYV9wb3NpdGlvbjE7dmVjMiBUPW5vcm1hbGl6ZSh2ZWMyKC1TLnksUy54KSk7aWYoaW50KGFfdmVydGV4SW5mby54KT09MCl7cj1hX3Bvc2l0aW9uMS1QO31lbHNle3I9YV9wb3NpdGlvbjIrUDt9ZmxvYXQgVT1hX3Bvc2l0aW9uMy54O2Zsb2F0IFY9bWF4KEEoKSxzbW9vdGhzdGVwKDAuMCwxLjAsVSp1X3pvb20pKTtpZihpbnQodV92aWV3SW5kZXBlbmRlbnQpPT0wKXtVPW1heCgoVSkqdV96b29tLEIpL3Vfem9vbTt9ZmxvYXQgVz1VK047dmVjMiBYPVQqKFcvMi4wKSpRO3I9citYO2Zsb2F0IFk9ZGlzdGFuY2UoYV9wb3NpdGlvbjEsYV9wb3NpdGlvbjIpO2Zsb2F0IFo9WSp1X3pvb207ZmxvYXQgYmE9KDEuMC9ZKS91X3pvb207aWYoRyl7ZmxvYXQgYmI9Wi80LjA7ZmxvYXQgYmM9WS8oVSoyLjApO2Zsb2F0IGJkPW1pbihiYixiYyk7dl9jb3JlPXZlYzQoUixjZWlsKGJkKSxiYSwwLjApO3ZfZGFzaGluZz12ZWMzKFUsVSwwLjUpO31lbHNlIGlmKEYpe2Zsb2F0IGk9bWF4KDIuMC91X3pvb20sVSoyLjApO2Zsb2F0IGJlPWgoaSxZKTtmbG9hdCBrPShZLWkqYmUpLyhiZS0xLjApO2Zsb2F0IGJmPWsqYmUvKFkrayk7dl9jb3JlPXZlYzQoUixiZS1iZixiYSwwLjApO2Zsb2F0IGJnPShpLyhpK2spKS8yLjA7dl9kYXNoaW5nPXZlYzMoaSxrLGJnKTt9ZWxzZSBpZihIKXtmbG9hdCBiaD1hX3Bvc2l0aW9uMy55O2Zsb2F0IGJpPWYqYmg7ZmxvYXQgYmo9bWF4KDMwLjAsVSozLjApO2Zsb2F0IGJrPWJqO2JpPW1pbihiayoxNi4wLGFicyhiaSkpKnNpZ24oYmgpO2Zsb2F0IGJsPTEwMDAuMCpiay9iaTtmbG9hdCBibT1tb2QodV90aW1lL2JsLDEuMCk7ZmxvYXQgYm49Ym0qYmo7dl9kYXNoaW5nPXZlYzMoYmosMC4wLGJuKTt2X2NvcmU9dmVjNChSLDAuMCxiYSwwLjApO31lbHNle3ZfY29yZT12ZWM0KFIsMC4wLGJhLDAuMCk7fWlmKGludChRKT09MSl7dl9saW5lRGF0YT12ZWM0KC1XLFUsWSxhX3ZlcnRleEluZm8udyk7fWVsc2V7dl9saW5lRGF0YT12ZWM0KFcsVSxZLGFfdmVydGV4SW5mby53KTt9aWYodV9hZGFwdGl2ZVN0eWxpbmcpe0MuYSo9VjtELmEqPVY7fX12ZWMyIGJvPXIvdV9yZXNvbHV0aW9uLnh5O3ZlYzIgYnA9Ym8qMi4wO3ZlYzIgYnE9YnAtMS4wO3ZfY29sb3VyPUM7dl9jb2xvdXIyPUQ7dl9oaXRUZXN0Q29sb3VyPWFfaGl0VGVzdENvbG91cjtnbF9Qb3NpdGlvbj11X3RyYW5zZm9ybSp2ZWM0KGJxKnZlYzIoMSwtMSksMCwxKTt9",Iy="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2VbN107dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHZlYzMgdV9yZXNvbHV0aW9uO3VuaWZvcm0gZmxvYXQgdV9zaGFkb3dUeXBlO3VuaWZvcm0gZmxvYXQgdV96b29tO3ZhcnlpbmcgdmVjNCB2X3RleENvb3JkO3ZhcnlpbmcgdmVjNCB2X2NvbG91cjt2YXJ5aW5nIHZlYzMgdl9oaXRUZXN0Q29sb3VyO3ZhcnlpbmcgdmVjMiB2X3RleHR1cmVCYW5rO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtjb25zdCBmbG9hdCBhPTMuMTQxNTkyNjUzNTg5NzkzMjM4NDYyNjQzMzgzMjc5NTtmbG9hdCBiKGZsb2F0IGMsZmxvYXQgZCl7ZmxvYXQgZT1sZW5ndGgodmVjMihkRmR4KGQpLGRGZHkoZCkpKSowLjcwNzEwNjc4MTE4NjU0NzU3O3JldHVybiBzbW9vdGhzdGVwKGMtZSxjK2UsZCk7fWludCBmKGZsb2F0IGEpe3JldHVybiBpbnQoZmxvb3IoYSswLjUpKTt9ZmxvYXQgZyhmbG9hdCBoKXtmbG9hdCBpPXVfcmVzb2x1dGlvbi56KnVfem9vbTtmbG9hdCBqPTEuMC1zdGVwKDEuMCxoKmkpO2Zsb2F0IGs9MS4wL2k7cmV0dXJuIG1heChoLGoqayk7fWZsb2F0IGwoZmxvYXQgaCl7ZmxvYXQgbT1iKHZfdGV4Q29vcmQueCxoKTtmbG9hdCBuPWIodl90ZXhDb29yZC55LGgpO2Zsb2F0IG89Yih2X3RleENvb3JkLnotdl90ZXhDb29yZC54LGgpO2Zsb2F0IHA9Yih2X3RleENvb3JkLnctdl90ZXhDb29yZC55LGgpO2Zsb2F0IHE9bWF4KG0sbik7ZmxvYXQgcj1tYXgobyxwKTtyZXR1cm4gbWF4KHEscik7fWZsb2F0IHModmVjMyB0KXt2ZWMzIHU9ZndpZHRoKHQpO3ZlYzMgdj1zbW9vdGhzdGVwKHZlYzMoMC4wKSx1KjMuMCx0KTtyZXR1cm4gbWluKG1pbih2Lngsdi55KSx2LnopO31mbG9hdCB3KGZsb2F0IHgsdmVjNCB5KXtmbG9hdCB6O2ludCBBPWYoeCk7aWYoQT09MCl7ej15LnI7fWVsc2UgaWYoQT09MSl7ej15Lmc7fWVsc2V7ej15LmI7fXJldHVybiB6O312ZWM0IEIoZmxvYXQgQyx2ZWM0IEQsZmxvYXQgRSl7ZmxvYXQgRj0oRC5yK0QuYitELmcpLzMuMDtmbG9hdCBHPXN0ZXAoMS4wLEYpKkU7ZmxvYXQgSD1HKihzdGVwKDAuMjUsQykqbWluKEYsMC4yNSkpO3ZlYzQgST12ZWM0KChELnJnYitIKSpELmEsRC5hKTtyZXR1cm4gQypJO31mbG9hdCBKKHZlYzIgSyxmbG9hdCBMLGZsb2F0IE0sZmxvYXQgaCxmbG9hdCBOKXtOPW1heCgwLjAsTi1oKTtmbG9hdCBPPUwvMi4wO2Zsb2F0IFA9TS8yLjA7ZmxvYXQgYT1PLU4taDtmbG9hdCBiPVAtTi1oO2Zsb2F0IHg9Sy54LU87ZmxvYXQgeT1LLnktUDtmbG9hdCBRPXBvdyhtYXgoYWJzKHgpLWEsMC4wKSwyLjApO2Zsb2F0IFI9cG93KG1heChhYnMoeSktYiwwLjApLDIuMCk7cmV0dXJuIFErUjt9ZmxvYXQgUyhmbG9hdCBUKXtyZXR1cm4gKGRpc3RhbmNlKHZfdGV4Q29vcmQuencsdmVjMigwLjUpKSpUKSp1X3pvb207fXZlYzQgVSh2ZWM0IEksZmxvYXQgVixmbG9hdCBOKXtmbG9hdCBXPXBvdyhOLDIuMCk7ZmxvYXQgWD1KKHZfdGV4Q29vcmQueHksdl90ZXhDb29yZC56LHZfdGV4Q29vcmQudywwLjAsTik7aWYoYWJzKHZfYm9yZGVyV2lkdGgpPjAuMCl7SSo9MS4wLWIoVyxYKTtYPUoodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LHZfYm9yZGVyV2lkdGgsTik7ZmxvYXQgWT1tYXgoMC4wLE4tdl9ib3JkZXJXaWR0aCk7ZmxvYXQgWj1wb3coWSwyLjApO0kqPWIoWixYKTt9ZWxzZXtJKj0xLjAtYihXLFgpO31yZXR1cm4gSTt9dmVjNCBiYSh2ZWM0IGJiLHZlYzQgYmMsZmxvYXQgRSl7ZmxvYXQgQz13KHZfdGV4dHVyZUJhbmsueSxiYik7cmV0dXJuIEIoQyxiYyxFKTt9ZmxvYXQgYmQoZmxvYXQgYmUpe3JldHVybiBtYXgoMC4yLHNtb290aHN0ZXAoMC4wLDUuMCxiZSkpO312b2lkIG1haW4oKXtmbG9hdCBiZj1hYnModl9zaGFwZVNpemUueik7ZmxvYXQgYmc9dl9zaGFwZVNpemUudztmbG9hdCBiaD1hYnModl9zaGFwZVNpemUueCk7ZmxvYXQgYmk9dl9zaGFwZVNpemUueTtmbG9hdCBiaj1taW4oYmgsYmkpO2Zsb2F0IGJlPSgoYmovMi4wKSp1X3pvb20pLTAuNTtmbG9hdCBoPWFicyh2X2JvcmRlcldpZHRoKTt2ZWM0IEk7aW50IGJrPWYodV9zaGFkb3dUeXBlKTtib29sIGJsPWYodl9zaGFwZVNpemUueCk+MDtib29sIGJtPWYodl9ib3JkZXJXaWR0aCk8MDtib29sIGJuPWJrPT0xO2Jvb2wgYm89Zih1X2hpdFRlc3QpPT0xO3ZlYzIgYnA9dl90ZXhDb29yZC56dztmbG9hdCBicT12X2RvbnV0U2VnbWVudC54O2Zsb2F0IGJyPXZfZG9udXRTZWdtZW50Lnk7ZmxvYXQgTj12X2RvbnV0U2VnbWVudC54O2Zsb2F0IFY7aW50IHg9Zih2X3RleHR1cmVCYW5rLngpO2Jvb2wgYnM9dl9ib3JkZXJXaWR0aD4wLjAmJmYodl9zaGFwZVNpemUueCk8MDtib29sIGJ0PXg9PS0zO2Jvb2wgYnU9YnEhPTAuMHx8YnIhPTAuMDtmbG9hdCBidjtpZihidXx8Ym0pe2lmKGJxPmEpe2JxLT0yLjAqYTt9aWYoYnI+YSl7YnItPTIuMCphO31mbG9hdCB4PWJwLngtMC41O2Zsb2F0IHk9YnAueS0wLjU7YnY9YXRhbih5LHgpO31pZihibyl7aWYoYms9PS0xKXtkaXNjYXJkO31lbHNle2Zsb2F0IGJ3PWxlbmd0aChzdGVwKDEuMCx2X2hpdFRlc3RDb2xvdXIpKTtJPXZlYzQodl9oaXRUZXN0Q29sb3VyLzI1NS4wLGJ3KTtpZihibCl7ZmxvYXQgYng9UyhiZik7SSo9MS4wLXN0ZXAoYmUsYngpO2lmKGg+MC4wKXtmbG9hdCBieT1oKnVfem9vbTtJKj1zdGVwKGJlLWJ5LGJ4KTt9aWYoYnUpe2lmKGJxPj1icil7SSo9c3RlcChicSxidikrKDEuMC1zdGVwKGJyLGJ2KSk7fWVsc2V7SSo9c3RlcChicSxidik7SSo9MS4wLXN0ZXAoYnIsYnYpO319fWVsc2UgaWYodl9kb251dFNlZ21lbnQueD4wLjApe1Y9ZyhoKTtmbG9hdCBiej1wb3coTiwyLjApO2Zsb2F0IGJBPUoodl90ZXhDb29yZC54eSx2X3RleENvb3JkLnosdl90ZXhDb29yZC53LDAuMCxOKTtJKj0xLjAtc3RlcChieixiQSk7fWVsc2UgaWYoYnMpe0kqPWwoaCk7fX19ZWxzZSBpZihibil7ZGlzY2FyZDt9ZWxzZXtJPXZfY29sb3VyLzI1NS4wO2Zsb2F0IGJCPUkuYTtpZih4Pj0wKXt2ZWM0IHk7ZmxvYXQgYkM9LTIuMC8zLjA7ZmxvYXQgYkQ9LTAuODtpZih4PT0wKXt5PXRleHR1cmUyRCh1X2ltYWdlWzBdLHZfdGV4Q29vcmQueHksYkQpO0k9YmEoeSxJLDEuMCk7fWVsc2UgaWYoeD09MSl7eT10ZXh0dXJlMkQodV9pbWFnZVsxXSx2X3RleENvb3JkLnh5LGJEKTtJPWJhKHksSSwxLjApO31lbHNlIGlmKHg9PTIpe3k9dGV4dHVyZTJEKHVfaW1hZ2VbMl0sdl90ZXhDb29yZC54eSxiRCk7ST1iYSh5LEksMS4wKTt9ZWxzZSBpZih4PT0zKXt5PXRleHR1cmUyRCh1X2ltYWdlWzNdLHZfdGV4Q29vcmQueHksYkMpO0k9YmEoeSxJLDAuMCk7fWVsc2UgaWYoeD09NCl7ST10ZXh0dXJlMkQodV9pbWFnZVs0XSx2X3RleENvb3JkLnh5LGJDKSpiQjt9ZWxzZSBpZih4PT01KXtJPXRleHR1cmUyRCh1X2ltYWdlWzVdLHZfdGV4Q29vcmQueHksYkMpKmJCO31lbHNlIGlmKHg9PTYpe0k9dGV4dHVyZTJEKHVfaW1hZ2VbNl0sdl90ZXhDb29yZC54eSxiQykqYkI7fX1lbHNle2Zsb2F0IGJCPUkuYTtJPXZlYzQoSS5yZ2IqYkIsYkIpO31pZihibCl7ZmxvYXQgYng9UyhiZik7SSo9MS4wLWIoYmUsYngpO2lmKGg+MC4wKXtmbG9hdCBieT1tYXgoMS4wLGgqdV96b29tKTtJKj1iKGJlLWJ5LGJ4KTtJKj1iZChiZSk7fWZsb2F0IGJFPXZfcGl4ZWwqMS41O2Zsb2F0IGJGPWJxLWJFO2Zsb2F0IGJHPWJxK2JFO2Zsb2F0IGJIPWJyLWJFO2Zsb2F0IGJJPWJyK2JFO2lmKGJ1KXtpZihicT49YnIpe0kqPXNtb290aHN0ZXAoYkYsYkcsYnYpKygxLjAtc21vb3Roc3RlcChiSCxiSSxidikpO31lbHNle0kqPXNtb290aHN0ZXAoYkYsYkcsYnYpO0kqPTEuMC1zbW9vdGhzdGVwKGJILGJJLGJ2KTt9fWVsc2UgaWYoYm0pe2Zsb2F0IGJKPWgqMi4wO2Zsb2F0IGJLPWJKLzIuMDtmbG9hdCBiTD0yLjAqKGEqKGJoLzIuMCkpO2Zsb2F0IGJNPWJ2LygyLjAqYSk7ZmxvYXQgYk49Zmxvb3IoKGJMK2JLKS8oYkorYkspLTEuMCk7ZmxvYXQgYk89c2luKCgoYk0qYk4pKSooMi4wKmEpKTtJKj1iKC0wLjUsYk8pO319ZWxzZSBpZih2X2RvbnV0U2VnbWVudC54PjAuMCl7Vj1nKGgpO0k9VShJLFYsTik7fWVsc2UgaWYoYnMpe1Y9ZyhoKTtJKj1sKFYpO0kqPWJkKGJlKTtpZihidCl7ZmxvYXQgYko9VioyLjA7ZmxvYXQgYks9VjtmbG9hdCBiTj1mbG9vcigodl90ZXhDb29yZC56K2JLKS8oYkorYkspKSswLjU7ZmxvYXQgYk89c2luKCgoKHZfdGV4Q29vcmQueC92X3RleENvb3JkLnopKmJOKSkqKDIuMCphKSk7SSo9c3RlcCgtMC40OSxiTyk7Yk49Zmxvb3IoKHZfdGV4Q29vcmQudytiSykvKGJKK2JLKSkrMC41O2JPPXNpbigoKCh2X3RleENvb3JkLnkvdl90ZXhDb29yZC53KSpiTikpKigyLjAqYSkpO0kqPWIoLTAuNDksYk8pO319fWdsX0ZyYWdDb2xvcj1JO30=",Ey="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzQgYV90ZXhDb29yZDthdHRyaWJ1dGUgdmVjMyBhX2hpdFRlc3RDb2xvdXI7YXR0cmlidXRlIGZsb2F0IGFfdmVydGV4SW5kZXg7YXR0cmlidXRlIHZlYzIgYV90ZXh0dXJlQmFuazthdHRyaWJ1dGUgdmVjNCBhX2NvbG91cjthdHRyaWJ1dGUgZmxvYXQgYV9jaXJjbGVSYWRpdXM7YXR0cmlidXRlIGZsb2F0IGFfd2lkdGg7YXR0cmlidXRlIGZsb2F0IGFfc3RhcnRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9lbmRBbmdsZTthdHRyaWJ1dGUgZmxvYXQgYV9hbmNob3I7dW5pZm9ybSB2ZWMzIHVfcmVzb2x1dGlvbjt1bmlmb3JtIG1hdDQgdV90cmFuc2Zvcm07dW5pZm9ybSBmbG9hdCB1X3pvb207dW5pZm9ybSBsb3dwIGZsb2F0IHVfaGl0VGVzdDt1bmlmb3JtIHNhbXBsZXIyRCB1X2FuY2hvclRleHR1cmU7dW5pZm9ybSBmbG9hdCB1X2FuY2hvclRleHR1cmVTaXplO3VuaWZvcm0gYm9vbCB1X3VzZUFuY2hvcjt1bmlmb3JtIGJvb2wgdV92aWV3SW5kZXBlbmRlbnQ7dW5pZm9ybSBib29sIHVfYWRhcHRpdmVTdHlsaW5nO3ZhcnlpbmcgZmxvYXQgdl9ib3JkZXJXaWR0aDt2YXJ5aW5nIHZlYzQgdl9zaGFwZVNpemU7dmFyeWluZyB2ZWM0IHZfdGV4Q29vcmQ7dmFyeWluZyB2ZWM0IHZfY29sb3VyO3ZhcnlpbmcgdmVjMyB2X2hpdFRlc3RDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4dHVyZUJhbms7dmFyeWluZyBmbG9hdCB2X3BpeGVsO3ZhcnlpbmcgdmVjMiB2X2RvbnV0U2VnbWVudDtpbnQgYShmbG9hdCBhKXtyZXR1cm4gaW50KGZsb29yKGErMC41KSk7fWZsb2F0IGIoZmxvYXQgYyl7dmVjMiBkPXZlYzIobW9kKGMsdV9hbmNob3JUZXh0dXJlU2l6ZSksZmxvb3IoYy91X2FuY2hvclRleHR1cmVTaXplKSk7ZCs9MC41O3ZlYzIgZT12ZWMyKGQvdV9hbmNob3JUZXh0dXJlU2l6ZSk7cmV0dXJuIHRleHR1cmUyRCh1X2FuY2hvclRleHR1cmUsZSkucjt9dmVjMiBmKGZsb2F0IGMpe3JldHVybiB2ZWMyKGIoYyksYihjKzEuMCkpO312ZWMyIGcodmVjMiBhKXtyZXR1cm4gZmxvb3IoYSswLjUpO312ZWMyIGgodmVjMiBpKXt2ZWMyIGo9aS91X3Jlc29sdXRpb24ueHk7dmVjMiBrPWoqMi4wO3JldHVybiBrLTEuMDt9dmVjMiBsKHZlYzIgaSl7aSs9MS4wO2kvPTIuMDtyZXR1cm4gaSp1X3Jlc29sdXRpb24ueHk7fXZlYzIgbSh2ZWMyIG4pe2Zsb2F0IG89bGVuZ3RoKG4qdV96b29tKTt2ZWMyIHA9bm9ybWFsaXplKG4pO3JldHVybiBwKihtYXgoMC4wLDIuMC1vKS91X3pvb20pO31mbG9hdCBtKGZsb2F0IHEpe2Zsb2F0IG89bGVuZ3RoKHEqdV96b29tKTtyZXR1cm4gbWF4KHEsKDIuMC1vKS91X3pvb20pO31mbG9hdCByKGZsb2F0IHEpe2Zsb2F0IG89cSp1X3pvb207cmV0dXJuIHNtb290aHN0ZXAoMi4wLDMuMCxvKTt9dmVjMiBzKGludCB0LGZsb2F0IHEpe3ZlYzIgcDtpZih0PT0wKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsLTEuMCkpO31lbHNlIGlmKHQ9PTEpe3A9bm9ybWFsaXplKHZlYzIoMS4wLC0xLjApKTt9ZWxzZSBpZih0PT0yKXtwPW5vcm1hbGl6ZSh2ZWMyKC0xLjAsMS4wKSk7fWVsc2UgaWYodD09Myl7cD1ub3JtYWxpemUodmVjMigxLjAsMS4wKSk7fXJldHVybiBwKmxlbmd0aCh2ZWMyKHEpKTt9dm9pZCBtYWluKCl7dmVjNCB1PWFfY29sb3VyO2Jvb2wgdj1hKHVfaGl0VGVzdCk9PTE7Ym9vbCB3PWFfY2lyY2xlUmFkaXVzPjAuMDtmbG9hdCB4PWFfY2lyY2xlUmFkaXVzO2ludCB5PWEoYV90ZXh0dXJlQmFuay54KTtmbG9hdCB6PTAuMDtib29sIEE9ZmFsc2U7dmVjMiBCPWFfcG9zaXRpb24ueHk7dmVjMiBDPWFfcG9zaXRpb247ZmxvYXQgRDtmbG9hdCBFO2Zsb2F0IEY7ZmxvYXQgRzt2ZWMyIHA7aW50IHQ9YShhX3ZlcnRleEluZGV4KTtpZih3KXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXt4PW0oeCk7fUQ9YWJzKHgpO0U9RDt9ZWxzZXtEPWFfdGV4Q29vcmQuei8yLjA7RT1hX3RleENvb3JkLncvMi4wO31GPUQqMi4wO0c9RyoyLjA7ZmxvYXQgSD0wLjA7aWYoeT4zKXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXtDKz1tKEIpO31IPWFfd2lkdGg7Qys9cyh0LEgvdV96b29tKTt9ZWxzZSBpZigoeT4tMSYmeTwzKXx8eT09LTQpe3o9YWJzKGFfd2lkdGgpO0E9YSh6KT4wO2lmKHVfYWRhcHRpdmVTdHlsaW5nKXt1LmEqPXIobWluKEQsRSkpO319ZWxzZXtpZih1X2FkYXB0aXZlU3R5bGluZyYmIXVfdmlld0luZGVwZW5kZW50KXtDKz1tKEIpO316PWFicyhhX3dpZHRoKTtBPWEoeik+MDt9ZmxvYXQgST1jZWlsKHovMi4wKTtpZihBKXtpZih2KXtmbG9hdCBKPSg3LjAvdV96b29tKSpzaWduKGFfd2lkdGgpO3orPUo7SSs9Y2VpbChKLzIuMCk7fXZlYzIgSz1zKHQsSSk7Qys9SztGKz1hYnMoSy54KjIuMCk7Rys9YWJzKEsueSoyLjApO31pZih1X3VzZUFuY2hvciYmYV9hbmNob3I+LTAuNSl7ZmxvYXQgTD1iKGFfYW5jaG9yKzIuMCk7dmVjMiBNPXZlYzIoc2luKC1MKSxjb3MoLUwpKTt2ZWMyIE49dmVjMigoQy54Kk0ueSkrQy55Kk0ueCwoQy55Kk0ueSktQy54Kk0ueCk7Qz1OK2YoYV9hbmNob3IpO31pZih2KXtDKj0xLjAtc3RlcChhX2hpdFRlc3RDb2xvdXIueCthX2hpdFRlc3RDb2xvdXIueSthX2hpdFRlc3RDb2xvdXIueiwwLjApO31nbF9Qb3NpdGlvbj11X3RyYW5zZm9ybSp2ZWM0KGgoQykqdmVjMigxLC0xKSwwLDEpO2lmKEEmJiF3KXt2ZWMyIE89Z2xfUG9zaXRpb24ueHk7Tz1sKE8pO089ZyhPKTtnbF9Qb3NpdGlvbi54eT1oKE8pO312X3RleENvb3JkPWFfdGV4Q29vcmQ7dl9jb2xvdXI9dTt2X2hpdFRlc3RDb2xvdXI9YV9oaXRUZXN0Q29sb3VyO3ZfdGV4dHVyZUJhbms9YV90ZXh0dXJlQmFuaztmbG9hdCBQPSh6LzIuMCkqc2lnbihhX2NpcmNsZVJhZGl1cyk7aWYodyl7ZmxvYXQgUT0oeCtQKSoyLjA7dl9zaGFwZVNpemU9dmVjNChRLFEsRixGKTt9ZWxzZXt2X3NoYXBlU2l6ZT12ZWM0KC1hX3RleENvb3JkLnorUCxhX3RleENvb3JkLnctUCwtYV90ZXhDb29yZC56K0kqc2lnbihhX2NpcmNsZVJhZGl1cyksYV90ZXhDb29yZC53LUkqc2lnbihhX2NpcmNsZVJhZGl1cykpO312X2JvcmRlcldpZHRoPXoqc2lnbihhX3dpZHRoKTt2X3BpeGVsPSgxLjAvKGFfY2lyY2xlUmFkaXVzKjIuMCkpL3Vfem9vbTt2X2RvbnV0U2VnbWVudD12ZWMyKGFfc3RhcnRBbmdsZSxhX2VuZEFuZ2xlKTt9",Cy="CiNpZmRlZiBHTF9PRVNfc3RhbmRhcmRfZGVyaXZhdGl2ZXMKCiNleHRlbnNpb24gR0xfT0VTX3N0YW5kYXJkX2Rlcml2YXRpdmVzIDogZW5hYmxlCgojZW5kaWYKcHJlY2lzaW9uIGhpZ2hwIGZsb2F0O3VuaWZvcm0gc2FtcGxlcjJEIHVfaW1hZ2U7dW5pZm9ybSBmbG9hdCB1X2dsb2JhbEFscGhhO3VuaWZvcm0gdmVjNCB1X2JhY2tncm91bmRDb2xvdXI7dmFyeWluZyB2ZWMyIHZfdGV4Q29vcmQ7dm9pZCBtYWluKCl7dmVjNCBhPXVfYmFja2dyb3VuZENvbG91ci8yNTUuMDthPXZlYzQoYS5yZ2IqYS5hLGEuYSk7Z2xfRnJhZ0NvbG9yPShhK3RleHR1cmUyRCh1X2ltYWdlLHZfdGV4Q29vcmQpKSp1X2dsb2JhbEFscGhhO30=",ky="cHJlY2lzaW9uIGhpZ2hwIGZsb2F0O2F0dHJpYnV0ZSB2ZWMyIGFfcG9zaXRpb247YXR0cmlidXRlIHZlYzIgYV90ZXhDb29yZDt2YXJ5aW5nIHZlYzIgdl90ZXhDb29yZDt2b2lkIG1haW4oKXtnbF9Qb3NpdGlvbj12ZWM0KGFfcG9zaXRpb24sMC4wLDEuMCk7dl90ZXhDb29yZD1hX3RleENvb3JkO30=",Sy={};Sy["line-arc-vertex"]=xy;Sy["line-bezier-vertex"]=wy;Sy["line-fragment"]=Ay;Sy["line-vertex"]=My;Sy["triangle-fragment"]=Iy;Sy["triangle-vertex"]=Ey
;Sy["renderToTexture-fragment"]=Cy;Sy["renderToTexture-vertex"]=ky;function Ly(e,t){for(var n=["webgl","experimental-webgl"],r=null,i=0;i<n.length;i++){try{r=e.getContext(n[i],t)}catch(e){}if(r)break}return r}function Ty(e){return Ly(document.createElement("canvas"),e)}function Ry(e,t,n){var r=Gy(e,[t,n]);r.vertexShader=t;r.fragmentShader=n;return r}function Zy(e,t){e.useProgram(t);e.bindBuffer(e.ARRAY_BUFFER,null);e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);e.bindRenderbuffer(e.RENDERBUFFER,null);e.bindFramebuffer(e.FRAMEBUFFER,null)}function By(){var e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),t=1;function n(n){t=n;e[0]*=n;e[4]*=n;e[8]*=1;e[1]*=n;e[5]*=n;e[9]*=1;e[2]*=n;e[6]*=n;e[10]*=1;e[3]*=n;e[7]*=n;e[11]*=1}function r(){return t}function i(t,n){e[12]+=e[0]*t+e[4]*n;e[13]+=e[1]*t+e[5]*n;e[14]+=e[2]*t+e[6]*n;e[15]+=e[3]*t+e[7]*n}function o(){return e}return{get:o,getZoomLevel:r,pan:i,zoom:n}}function Oy(e,t,n){var r=e.createShader(n),i=atob(Sy[t]);e.shaderSource(r,i);e.compileShader(r);if(!e.getShaderParameter(r,e.COMPILE_STATUS)){var o=e.getShaderInfoLog(r);e.deleteShader(r);throw new Error("Error in shader: "+o)}return r}function Gy(e,t){for(var n=e.createProgram(),r=0;r<t.length;++r)e.attachShader(n,t[r]);e.linkProgram(n);if(!e.getProgramParameter(n,e.LINK_STATUS)){var i=e.getProgramInfoLog(n);e.deleteProgram(n);throw new Error("Error in program linking:"+i)}return n}var Yy="undefined"!=typeof window,Fy=!1,Dy=!1;function Py(){Fy=!0}function zy(e,t){return e.some((function(e){return t.indexOf(e)>-1}))}function Vy(){if(Dy)return!Fy;if(Yy){var e="file:"!==document.location.protocol,t=["Google SwiftShader","Microsoft Basic Render Driver","VirtualBox","Parallels","VMware"],n=["VMware","VirtualBox"],r=["OES_standard_derivatives","OES_element_index_uint","ANGLE_instanced_arrays"],i=Ty({failIfMajorPerformanceCaveat:!0}),o=void 0;if(e=e&&!!i){var a=i.getSupportedExtensions(),u={};for(o=0;o<a.length;o++)u[a[o]]=!0;for(o=0;e&&o<r.length;o++)e=e&&u[r[o]]}if(e){var s=i.getExtension("WEBGL_debug_renderer_info");if(s){var l=i.getParameter(s.UNMASKED_VENDOR_WEBGL),f=i.getParameter(s.UNMASKED_RENDERER_WEBGL);e=!(zy(n,l)||zy(t,f))}s=null}i=null;Fy=Fy||!e;Dy=!0;return e}return!Fy}var Xy={longMonths:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longDays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],ampm:["AM","PM"],quarter:"Q",half:"H"},Wy=[31,28,31,30,31,30,31,31,30,31,30,31],Uy={milli:0,sec:1,min:2,hour:3,day:4,week:5,month:6,year:7};function Ny(e,t){return t?e-e%t:0}function jy(e){if(e<Uy.milli||Uy.year<e)throw new Error("bad unit range")}function Ky(e,t){return 1===e&&Hy(t)?29:Wy[e]}function Hy(e){return 1===new Date(e,1,29).getMonth()}function _y(e){return Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Jy(e){var t=new Date(e);return new Date(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())}function Qy(e,t,n){jy(t);var r=new Date(e);t>Uy.milli&&r.setUTCMilliseconds(0);t>Uy.sec&&r.setUTCSeconds(0);t>Uy.min&&r.setUTCMinutes(0);t>Uy.hour&&r.setUTCHours(0);t>=Uy.month&&r.setUTCDate(1);t>=Uy.year&&r.setUTCMonth(0);switch(t){case Uy.milli:r.setUTCMilliseconds(Ny(r.getUTCMilliseconds(),n));break;case Uy.sec:r.setUTCSeconds(Ny(r.getUTCSeconds(),n));break;case Uy.min:r.setUTCMinutes(Ny(r.getUTCMinutes(),n));break;case Uy.hour:r.setUTCHours(Ny(r.getUTCHours(),n));break;case Uy.day:break;case Uy.week:var i=r.getUTCDay(),o=i>=1?i-1:6;r.setTime(r.getTime()-24*o*60*60*1e3);break;case Uy.month:r.setUTCMonth(Ny(r.getUTCMonth(),n));break;case Uy.year:r.setUTCFullYear(Ny(r.getUTCFullYear(),n))}return r.getTime()}function qy(e,t,n){jy(t);if(t<=Uy.week){var r=n;t>Uy.milli&&(r*=1e3);t>Uy.sec&&(r*=60);t>Uy.min&&(r*=60);t>Uy.hour&&(r*=24);t>Uy.day&&(r*=7);return e+r}var i=new Date(e);switch(t){case Uy.month:var o=i.getUTCMonth()+n,a=o%12,u=Math.floor(o/12);a<0&&(a+=12);var s=i.getUTCDate();s=Math.min(s,Ky(a,i.getUTCFullYear()+u));i.setUTCDate(s);i.setUTCMonth(a);0!==u&&i.setTime(qy(i.getTime(),Uy.year,u));break;case Uy.year:if(1===i.getUTCMonth()&&29===i.getUTCDate()){Hy(i.getUTCFullYear()+n)||i.setTime(qy(i.getTime(),Uy.day,-1))}i.setUTCFullYear(i.getUTCFullYear()+n)}return i.getTime()}function $y(e){for(var t=""+e;t.length<2;)t="0"+t;return t}var eb=new RegExp("(f?f?f)|(s?s)|(m?m)|(h?h)|(H?H)|(t?t?t)|(d?d?d?d)|(M?M?M?M?M)|(Q?Q)|yyyy|yy","gm"),tb={f:function(e){return Math.floor(e.getUTCMilliseconds()/100)},ff:function(e){return $y(Math.floor(e.getUTCMilliseconds()/10))},fff:function(e){return $y(Math.floor(e.getUTCMilliseconds()))},s:function(e){return e.getUTCSeconds()},ss:function(e){return $y(e.getUTCSeconds())},m:function(e){return e.getUTCMinutes()},mm:function(e){return $y(e.getUTCMinutes())},h:function(e){return e.getUTCHours()%12||12},hh:function(e){return $y(e.getUTCHours()%12||12)},H:function(e){return e.getUTCHours()},HH:function(e){return $y(e.getUTCHours())},t:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)].charAt(0)},tt:function(e,t){return t.ampm[Math.floor(e.getUTCHours()/12)]},ttt:function(e,t){var n=Math.floor(e.getUTCHours()/12);return t.ampm[n+2]||t.ampm[n]},d:function(e){return e.getUTCDate()},dd:function(e){return $y(e.getUTCDate())},ddd:function(e,t){return t.shortDays[e.getUTCDay()]},dddd:function(e,t){return t.longDays[e.getUTCDay()]},M:function(e){return e.getUTCMonth()+1},MM:function(e){return $y(e.getUTCMonth()+1)},MMM:function(e,t){return t.shortMonths[e.getUTCMonth()]},MMMM:function(e,t){return t.longMonths[e.getUTCMonth()]},MMMMM:function(e,t){return t.shortMonths[e.getUTCMonth()].substr(0,1)},Q:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/3)+1;return t.quarter+r},QQ:function(e,t){var n=e.getUTCMonth(),r=Math.floor(n/6)+1;return t.half+r},yyyy:function(e){return e.getUTCFullYear()},yy:function(e){return $y(e.getUTCFullYear()%100)}};function nb(e,t,n){var r="number"==typeof e?new Date(e):e;return t.replace(eb,(function(e){return tb[e](r,n||Xy)}))}var rb="(?::)?",ib="(?:-|$)";new RegExp("^(\\d{4})"+ib+"(\\d{2})?"+ib+"(\\d{2})?"+"(?:T|$)"+"(\\d{2})?"+rb+"(\\d{2})?"+rb+"(\\d{2})?(?:Z)?(\\+|-)?(\\d{2})?"+rb+"(\\d{2})?");function ob(e){var t;e instanceof Date?t=_y(e):"number"==typeof e&&(t=Math.round(e));return t}var ab=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],ub="rgba(32, 32, 200, 0.67)";function sb(e){for(var t=[],n=0;n<e.length;n++)t[n]=cn(e[n],.8);return t}function lb(){var e=Uy,t={fontFamily:"sans-serif",fontSize:12},r={colours:["backColour","fontColour","sliderColour","sliderLineColour"]};function i(e,t){return nb(e,t,g.options.locale)}function o(t,n){var r=new Date(qy(t,e.year,n-1));return i(t,"yyyy - ")+i(r,"yyyy")}function u(e){return o(e,10)}function s(e){return o(e,50)}function l(e){return i(e,"yyyy")+"s"}function f(e){return i(e,"dmy"===g.options.locale.order?"d MMM yyyy":"MMM d, yyyy")}function c(e){return i(e,g.options.locale.h12?"h:mm tt":"HH:mm")}function d(e){return i(e,g.options.locale.h12?"h:mm:ss tt":"HH:mm:ss")}function h(e,t){if("histogram"===e){if("object"!=typeof t||!t)return!1;var n=t;if(n.colour&&("string"!=typeof n.colour||!_t(n.colour)))return!1;if(n.highlightColour&&("string"!=typeof n.highlightColour||!_t(n.highlightColour)))return!1}if("maxRange"===e&&"string"==typeof t)return"auto"===t;if("maxRange"===e||"minScale"===e){var i=["sec","min","hour","day","week","month","year"],o=t;return!!o.value&&"number"==typeof o.value&&!!o.units&&-1!==i.indexOf(o.units)}return!K(r.colours,e)||"string"==typeof t&&_t(t)}function v(e){if(E(e)){var t=e;"string"!=typeof t.groupBy&&null!==t.groupBy||(g.options.groups.groupBy=t.groupBy);null===t.categories?g.options.groups.categories=null:Array.isArray(t.categories)&&(t.categories.some((function(e){return!("string"==typeof e||"number"==typeof e)}))||(g.options.groups.categories=t.categories));if(Array.isArray(t.colours)&&t.colours.length){if(!t.colours.some((function(e){return!("string"==typeof e&&_t(e))}))){g.options.groups.colours=t.colours;g.computedGroupColours=t.colours}}else if(null===t.colours){g.options.groups.colours=null;g.computedGroupColours=ab}Array.isArray(t.hiColours)&&t.hiColours.length?t.hiColours.some((function(e){return!("string"==typeof e&&_t(e))}))||(g.options.groups.hiColours=t.hiColours):null===t.hiColours&&(g.options.groups.hiColours=null);g.computedGroupHiColours=g.options.groups.hiColours||sb(g.computedGroupColours)}}function p(e,n){"fontFamily"===e&&(g.options.fontFamily="string"==typeof n&&zn(n)||t.fontFamily);if("fontSize"===e){var r=+n;x(r)&&r>0&&(g.options.fontSize=r)}}var g={displayTime:function(e,t){return M(t)?t(e):i(e,t)},baseRangeLimits:{max:315576e7,min:3e3},options:{_area:{stdDev:7},area:{colour:ub},scale:{highlightColour:"#F2F2F2",showMajor:!0,showMinor:!0},backColour:"#FFFFFF",fontColour:Xt.grey,fontFamily:t.fontFamily,fontSize:t.fontSize,groups:{groupBy:null,categories:null,colours:null,hiColours:null},showControlBar:!0,showPlay:!0,showExtend:!1,showFit:!0,sliderColour:"rgba(255, 255, 255, 0.6)",sliderLineColour:"#bbb",sliders:"fixed",maxRange:"auto",minRange:3e3,minScale:{units:"sec",value:1},_showShadowCanvas:!1,histogram:{colour:"#d0d0d0",highlightColour:"#a9a9a9",markColour:"#ea7378",markHiColour:"#e03038"},heightChange:{animate:!0,time:200},locale:D(Xy,{order:"mdy",h12:!0}),playSpeed:60,type:"histogram"},getOptions:function(){return a(g.options,!0)},setOptions:function(e){if(E(e)){n(e,(function(e,n){if(z(g.options,n)){var r=n;if(r in t)p(r,e);else if("groups"===r)v(e);else{var i=e;E(g.options[r])&&(i=D(e,g.options[r]));h(r,i)&&(g.options[r]=i)}}}))}},hoverTime:50,defaultAnimationTime:200,sliderReleaseTime:200,doubleClickZoomTime:500,doubleClickZoomTimeFree:250,playingExtend:!1,defaultPlaySpeed:60,bars:{defaultFontSize:t.fontSize,major:{height:19,textbase:3,tickHeight:10},minor:{height:17,textbase:0,tickHeight:8}},grip:{lines:2,space:4,length:14,margin:2},controlbar:{height:30,space:4,colour:"#ddd"},fixedSideFactor:.5,freeSideFactor:.2,histogram:{dy:2,topdy:16,bardx:1,minwidth:11},computedGroupColours:ab,computedGroupHiColours:sb(ab),selection:{maxNumber:3,reducingFactor:.75,dotsize:3.5},rates:[{max:6,major:{units:e.sec,by:2,f:f},minor:{units:e.sec,by:1,f:d}},{max:15,major:{units:e.sec,by:5,f:f},minor:{units:e.sec,by:1,f:d}},{max:24,major:{units:e.sec,by:10,f:f},minor:{units:e.sec,by:2,f:d}},{max:60,major:{units:e.sec,by:15,f:f},minor:{units:e.sec,by:5,f:d}},{max:120,major:{units:e.sec,by:30,f:f},minor:{units:e.sec,by:10,f:d}},{max:360,major:{units:e.min,by:1,f:f},minor:{units:e.sec,by:30,f:d}},{max:1e3,major:{units:e.min,by:5,f:f},minor:{units:e.min,by:1,f:c}},{max:5e3,major:{units:e.min,by:15,f:f},minor:{units:e.min,by:5,f:c}},{max:15e3,major:{units:e.hour,by:1,f:f},minor:{units:e.min,by:15,f:c}},{max:6e4,major:{units:e.hour,by:6,f:f},minor:{units:e.hour,by:1,f:c}},{max:12e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:2,f:c}},{max:18e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:3,f:c}},{max:36e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:6,f:c}},{max:72e4,major:{units:e.day,by:1,f:f},minor:{units:e.hour,by:12,f:"ttt"}},{max:5e6,major:{units:e.week,by:1,f:function(t){var n,r,o=new Date(t),a=new Date(qy(t,e.day,6)),u="dmy"===g.options.locale.order;if(o.getUTCFullYear()===a.getUTCFullYear())if(o.getUTCMonth()===a.getUTCMonth()){n=u?"d - ":"MMM d - ";r=u?"d MMM yyyy":"d, yyyy"}else{n=u?"d MMM - ":"MMM d - ";r=u?"d MMM yyyy":"MMM d, yyyy"}else{n=u?"d MMM yyyy - ":"MMM d, yyyy - ";r=u?"d MMM yyyy":"MMM d, yyyy"}return i(o,n)+i(a,r)}},minor:{units:e.day,by:1,f:"d"}},{max:15e6,major:{units:e.month,by:1,f:"MMMM yyyy"},minor:{units:e.week,by:1,f:function(t){var n=qy(t,e.day,6);return i(t,"d - ")+i(n,"d")}}},{max:3e7,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMM"}},{max:75e6,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMM"}},{max:1e8,major:{units:e.month,by:3,f:"Q  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:2e8,major:{units:e.month,by:6,f:"QQ  yyyy"},minor:{units:e.month,by:1,f:"MMMMM"}},{max:36e7,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:3,f:"Q"}},{max:6e8,major:{units:e.year,by:1,f:"yyyy"},minor:{units:e.month,by:6,f:"QQ"}},{max:15e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:1,f:"'yy"}},{max:25e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:2,f:"'yy"}},{max:35e8,major:{units:e.year,by:10,f:u},minor:{units:e.year,by:5,f:"'yy"}},{max:115e8,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:10,f:"'yy"}},{max:2e10,major:{units:e.year,by:50,f:s},minor:{units:e.year,by:25,f:"'yy"}},{max:35e9,major:{units:e.year,by:100,f:l},minor:{units:e.year,by:25,f:"'yy"}},{max:8e10,major:{units:e.year,by:100,f:l},minor:{units:e.year,by:50,f:"'yy"}},{max:16e10,major:{units:e.year,by:200,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:4e11,major:{units:e.year,by:500,f:"yyyy"},minor:{units:e.year,by:100,f:""}},{max:1/0,major:{units:e.year,by:500,f:""},minor:{units:e.year,by:100,f:""}}]};return g}function fb(e,t,n){var r=[];e((function(e){if(e.startTotals.length){var i=e.startTotals[n]-e.endTotals[t];r.push(i)}}));return r}function cb(e,t,n,r,i,o){e((function(e,a){if(e){var u=e.startTotals[i]-e.endTotals[r];t.selvalues[a][n]=u;u>t.maxselvalue&&!o&&(t.maxselvalue=u)}}))}function db(e,t,n,r,i,o,a,u){var s,l,f=n.histogram,c=Qy(t.t1,f.units,f.by),d=r(c),h=0;e.bars=[];e.maxvalue=0;e.maxselvalue=0;a((function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]}));do{l=c>t.t2;var v=i(c),p=c,g=fb(o,d,s=r(c=qy(c,f.units,f.by))),m=g.reduce((function(e,t){return e+t}),0);m>e.maxvalue&&!l&&(e.maxvalue=m);var y=hb(u,p,c);cb(a,e,h,d,s,l);e.bars.push({x:v,mark:y,groupValues:g,value:m});h++;d=s}while(!l);e.count=h-1}function hb(e,t,n){return e.some((function(e){if(E(e)){var r=e;if(!V(r.dt1)&&!V(r.dt2)){var i=ob(r.dt1),o=ob(r.dt2);if(i<n&&o>t)return!0}}else{var a=ob(e);if(a>=t&&a<n)return!0}return!1}))}function vb(e,t,n,r,i,o){var a,u,s,l,f,c=[],d=e*t,h=qy(r.t1,Uy.milli,-d),v=qy(r.t2,Uy.milli,d),p=h,g=i(p);function m(e){s+=e.startTotals[u]-e.endTotals[u];l+=e.startTotals[u]-e.startTotals[g];f+=e.endTotals[u]-e.endTotals[g]}do{a=p>v;p=qy(p,Uy.milli,e/n);u=i(p);s=0;l=0;f=0;o(m);c.push({t:p,startValue:l,endValue:f,solidValue:s});g=u}while(!a);return c}var pb=8,gb=null,yb=null,bb=null;function xb(e,t,n){for(var r=[],i=0;i<2*n;i++){var o=(i-n)*e/pb;r.push(Math.exp(-o*o/t))}return r}function wb(e,t,n,r,i,o,a,u){var s,l=1,f=n.timeRate*l,c=t.t1,d=0,h=0,v=e.options._area.stdDev,p=Math.ceil(4*v),g=p*pb,m=vb(f,p,pb,t,r,o);if(v!==yb||f!==gb){var y=n.timeRate*v*2*(n.timeRate*v);bb=xb(f,y,g);gb=f;yb=v}do{s=c>t.t2;var b=i(c);c=qy(c,Uy.milli,f);for(var x=0,w=g+d*pb,A=Math.max(0,w-g),M=Math.min(m.length,w+g),I=A;I<M;I++){var E=m[I],C=void 0;C=I<=w?E.endValue:E.startValue;x+=bb[I-w+g]*C}x+=m[w].solidValue;x>h&&!s&&(h=x);a(d,b,x);d++}while(!s);u(d-1,h)}function Ab(e,t,n,r,i,o,a,u){function s(t,n,r){e.bars.push({x:n,value:r})}function l(t,n){e.count=t;e.maxvalue=n}u((function(t,n){e.hasSel[n]=!!t;e.selvalues[n]=e.selvalues[n]||[]}));e.bars=[];wb(t,n,r,i,o,a,s,l);function f(t){return function(n,r,i){e.selvalues[t][n]=i}}function c(t){return function(t,n){n>e.maxselvalue&&(e.maxselvalue=n)}}e.maxselvalue=0;u((function(e,a){e&&wb(t,n,r,i,o,(function(t){return t(e)}),f(a),c(a))}))}function Mb(e){return e.t<=e.other}function Ib(e){return e.t>=e.other}var Eb=/^_tbLine(.)/;function Cb(e){return e&&Eb.test(e)?"_tbLine":e}function kb(e){return(0===e.indexOf("_tb")?e.substr(3):e).toLowerCase()}function Sb(){return{startTotals:[0],endTotals:[0]}}function Lb(e,t,r){var i,o,u=0,s=0,l=r.rates,f=[],c={named:new Map,other:Sb()},d=[],h={t1:0,t2:0},v={t1:0,t2:0},p={},g={t1:0,t2:0},m=[],y=[],b=null,w=[1,1e3,6e4,36e5,864e5,6048e5,2592e6,31536e6];function A(){e.privateFire("redraw")}function M(e,t,n,r){h.t1=e;h.t2=t;v.t1=n;v.t2=r;if(i){o=T(v);A()}le=!0;ce=!0}function I(e,t){return w[e.units]*e.by/t>=r.histogram.minwidth}function C(){return r.options.fontSize/r.bars.defaultFontSize}function k(e){for(var t=C(),n=0;l[n].max<e*t&&n<l.length;)n++;return n}function S(e,t){for(var n=Uy[e],r=0;r<l.length;r++){var i=l[r].minor;if(i.units>n||i.units===n&&i.by>=t)return r>0?r-1:r}return l.length-2}function L(){var e=0;if(B()){var t=R(r.options.minScale);e=S(t.units,t.value)}return e}function T(e){for(var t=(e.t2-e.t1)/(i.x2-i.x1),n=k(t),r=L(),o=l[n=n<=r?r+1:n].major,a=l[n].minor;n>0&&I(l[n-1].minor,t)&&n-1>r;)n--;return{histogram:l[n].minor,major:o,minor:a,timeRate:t}}function R(e){return{units:z(Uy,e.units)?e.units:Uy.sec,value:x(e.value)?Math.round(Math.abs(e.value)):1}}function Z(e){return{units:z(Uy,e.units)?e.units:Uy.sec,value:x(e.value)?Math.round(Math.abs(e.value)):r.baseRangeLimits.max}}function B(){return!!r.options.minScale}function O(){return"auto"!==r.options.maxRange}function G(e){return r.options.sliders===e}function F(){var e,t=L(),n=l[t].max;if(G("fixed"))e=u/(1+r.freeSideFactor);else if(G("free")){n=1;var i=l[t+1].minor;e=w[i.units]*i.by}else e=u;return Math.round(n*e)}function D(){b=null;for(var e=0;e<m.length;e++){y[e]=null;m[e]=null}y.length=0;m.length=0}function P(e){d=[];for(var t,n=0;n<e.length;n++){var r=e[n];if(E(r)){var i="dt1"in r,o="dt2"in r;if(!i&&!o)throw new Error("mark: TimePeriod object must have a dt1 or dt2 property.");t=r;var u=i?Se(t.dt1):-1/0;if((o?Se(t.dt2):1/0)<u)throw new Error("mark: TimePeriod dt2 time must be after dt1 time.")}else t=r;d.push(a(t))}}function X(e){b=e;var t,n;for(t=0;t<e.length;t++){var i=e[t].index||0;if(i<r.selection.maxNumber&&e[t].id){var o=Y(e[t].id);if(o.length){m[i]=q(o);y[i]={startTotals:[],endTotals:[]};var a=0,u=0;for(n=0;n<f.length;n++){var s=f[n];y[i].startTotals[n]=a;y[i].endTotals[n]=u;if(s.id in m[i]){Mb(s)&&(a+=s.v);Ib(s)&&(u+=s.v)}}y[i].startTotals[n]=a;y[i].endTotals[n]=u;W(i,e[t].c)}else if(!o.length&&y[i]){y[i]=null;m[i]=null}}}}function W(e,t){var n={colour0:"rgb(114, 179, 0)",colour1:"rgb(255, 153, 0)",colour2:"rgb(178, 38, 9)"}["colour"+e];t&&_t(t)&&(n=t);r.selection["colour"+e]=n}function U(e){for(var t=0,n=f.length;t<n;){var r=Math.floor((t+n)/2),i=f[r].t;i!==e||Mb(f[r])||i--;i<e?t=r+1:n=r}return t}function N(e){return i.x1+(e-v.t1)/ye()}function j(e){return v.t1+(e-i.x1)*ye()}function K(e){return e>=i.bars.major.y1?"major":e>=i.bars.minor.y1?"minor":"histogram"}function H(e,t,n){var r,i=n||K(t),o=j(e);oe(i,(function(e,t){if(t>o){r={t1:e,t2:t,bar:i};return!0}return!1}));return r}function _(e,t){var r,i,o=U(e),a=U(t),u={},s={};for(r=0;r<o;r++)(i=f[r]).t!==i.other&&(s[i.id]=(s[i.id]||0)+(i.t<i.other?1:-1));n(s,(function(e,t){e>0&&(u[t]=!0)}));for(r=o;r<a;r++)u[f[r].id]=!0;return Object.keys(u)}function J(){var e=r.options.groups;return!(!e.groupBy||!e.categories)}function Q(e,t,n,r){for(var i=U(e),o=U(t),a=i;a<o;a++){var u=f[a];if(n?Mb(u):Ib(u)){var s=u.id;p[s]=(p[s]||0)+r}}}function ee(){var e=h.t1,t=h.t2,n=g.t1,r=g.t2;e<n?Q(e,n,!1,1):e>n&&Q(n,e,!1,-1);t>r?Q(r,t,!0,1):t<r&&Q(t,r,!0,-1);g.t1=e;g.t2=t}function te(){var e=ie(),t=e?2*(e.t2-e.t1):r.baseRangeLimits.max,n=r.baseRangeLimits.min;B()?n=F():r.options.minRange&&(n=Math.max(n,r.options.minRange));if(O()){var i=Z(r.options.maxRange),o=Uy[i.units];t=i.value*w[o]}else t=Math.max(t,Math.floor(4*n));return{max:t,min:n=Math.min(n,Math.floor(t/4))}}function ne(){var e=0,t=u,n=r.options.showControlBar?r.controlbar.height:0,o=C(),a=r.options.scale.showMinor?r.bars.minor.height*o:0,l=r.options.scale.showMajor?r.bars.major.height*o:0,f=s-n,c=f-l,d=c-a,h=d-r.histogram.dy,v=h-r.histogram.topdy,p=v*r.selection.reducingFactor;i={bars:{major:{y1:c,y2:f},minor:{y1:d,y2:c}},histogram:{ybase:h,maxbarh:v,maxselh:p},x1:e,y1:d,x2:t,y2:f,width:u,height:s}}function ie(){if(f.length>0){for(var e=0;f[e].t===-1/0;)e++;for(var t=f[e].t,n=f.length-1;f[n].t===1/0;)n--;return{t1:t,t2:f[n].t+1}}}function oe(e,t){var n,r=o[e],i=Qy(v.t1,r.units,r.by),a=!1;do{a=t(i,n=qy(i,r.units,r.by),N(i),N(n),r.f);i=n}while(!a&&i<=v.t2)}var ue,se={count:0,bars:[],hasSel:[],selvalues:[],maxvalue:0,maxselvalue:0},le=!0,fe={bars:[],count:0,hasSel:[],maxselvalue:0,maxvalue:0,selvalues:[]},ce=!0;function he(){if(le){db(se,v,o,U,N,nt,rt,d);le=!1}return se}function ve(){if(ce){Ab(fe,r,v,o,U,N,nt,rt);ce=!1}return fe}function pe(){return i}function ge(){return h}function me(){return v}function ye(){return o.timeRate}function be(e){var t=h.t1,n=h.t2,r="back"===e?-1:1,i=Uy.month;if(t===Qy(t,i,1)&&n===Qy(n,i,1)){var o=new Date(t),a=new Date(n),u=12*(a.getUTCFullYear()-o.getUTCFullYear())+(a.getUTCMonth()-o.getUTCMonth());t=qy(t,i,r*u);n=qy(n,i,r*u)}else{var s=r*(n-t);t+=s;n+=s}return{t1:t,t2:n}}function xe(){return f}function we(n){var i=ie();if(i&&h.t1>=i.t1&&n<=i.t1&&!r.playingExtend){t.trigger("start","data");e.fire("start",{type:"data"})}}function Ae(n){var r=ie();if(r&&h.t2<=r.t2&&n>=r.t2){t.trigger("end","data");e.fire("end",{type:"data"})}}function Me(e,t){"t1"===e?we(t):Ae(t);h[e]=t}function Ie(e){var t,n;if("t1"===e){t=v.t1;n=h.t2}else{t=h.t1;n=v.t2}if(G("fixed")){var r=n-t,i=Math.floor(.1*r);t+=i;n-=i}var o=te();if("t1"===e){t=Math.max(t,h.t2-o.max);n=Math.min(n,h.t2-o.min)}else{t=Math.max(t,h.t1+o.min);n=Math.min(n,h.t1+o.max)}var a=ie();a&&("t1"===e?n=Math.min(n,a.t2):t=Math.max(t,a.t1));return{min:t,max:n}}function Ee(){return f.length>0}function Ce(e,t,n){var r,i=e,o=t,a=ie(),u=n?(i+o)/2:(h.t1+h.t2)/2,s=te(),l=o-i;if(l>s.max){i=Math.ceil(u-s.max/2);o=Math.floor(u+s.max/2)}else if(l<s.min){i=Math.floor(u-s.min/2);o=Math.ceil(u+s.min/2)}if(a)if(o<a.t1){i+=r=a.t1-o;o+=r}else if(i>a.t2){i-=r=i-a.t2;o-=r}return{t1:i,t2:o}}function ke(e,t){return e>=i.x1&&e<=i.x2&&t>=0&&t<=i.y2}function Se(e){var t=ob(e);if(!x(t))throw new Error("load: invalid date in dt property. Value was: "+e);return t}function Le(e){for(var t=[],n=Y(e),r=0;r<n.length;r++){var i=n[r];if("object"==typeof i&&i){var o=i;if(o.id&&o.dt)for(var a=""+o.id,u=Y(o.dt),s=void 0===o.v?void 0:Y(o.v),l=E(o.d)?{d:o.d}:{},f=0;f<u.length;f++){var c=u[f],d=s&&s[f]||1;if(!x(d))throw new Error("load: invalid value in v property - must be numeric. Value was: "+d);if("object"!=typeof c||c instanceof Date){var h=Se(c);t.push(re({id:a,t:h,v:d,other:h},l))}else{var v=null!==c&&"dt1"in c,p=null!==c&&"dt2"in c;if(!c||!v&&!p)throw new Error("load: TimePeriod object must have a dt1 or dt2 property. Id was: "+a);var g=c,m=v?Se(g.dt1):-1/0,y=p?Se(g.dt2):1/0;if(y<m)throw new Error("load: TimePeriod dt2 time must be after dt1 time. Id was: "+a);t.push(re({id:a,t:m,v:d,other:y},l));y!==m&&t.push(re({id:a,t:y,v:d,other:m},l))}}}}return t.sort(Ge)}function Te(e,t,n,r,i){e.startTotals[t+1]=e.startTotals[t]+(n?i:0);e.endTotals[t+1]=e.endTotals[t]+(r?i:0)}function Re(e,t){var n=r.options.groups.categories,i=!1,o=Mb(e),a=Ib(e);if(J())for(var u=0;u<n.length;u++){var s=n[u],l=r.options.groups.groupBy,f=!(!e.d||e.d[l]!==s);i=i||f;Te(c.named.get(s),t,o,a,f?e.v:0)}Te(c.other,t,o,a,i?0:e.v)}function Ze(e){var t=Mb(e),n=Ib(e),r=0;t&&e.t<h.t2&&(r=1);n&&e.t<h.t1&&(r-=1);0!==r&&(p[e.id]=(p[e.id]||0)+r)}function Be(){b&&X(b);p={};c.named=new Map;c.other=Sb();J()&&r.options.groups.categories.forEach((function(e){c.named.set(e,Sb())}));for(var e=0;e<f.length;e++){var t=f[e];Ze(t);Re(t,e)}g.t1=h.t1;g.t2=h.t2;var n=Ce(g.t1,g.t2,!0);A();return n}function Oe(e,t){return e===t?0:e===1/0||t===-1/0?1:e===-1/0||t===1/0?-1:e-t}function Ge(e,t){var n=e.t===t.t?Oe(e.other,t.other):Oe(e.t,t.t);0===n&&(n=e.id===t.id?e.v-t.v:e.id>t.id?1:-1);return n}function Ye(e){var t=(e||{}).items;f=Le(t);D();d=[];return Be()}function Fe(e,t){for(var n=[],r=0,i=0;r<e.length&&i<t.length;){var o=Ge(e[r],t[i]);if(0===o){n.push(e[r]);r++;i++}else if(o<0){n.push(e[r]);r++}else{n.push(t[i]);i++}}for(;r<e.length;){n.push(e[r]);r++}for(;i<t.length;){n.push(t[i]);i++}return n}function De(e){var t=Le(e);if(t.length>0){f=0===f.length?t:t[0].t>f[f.length-1].t?f.concat(t):t[t.length-1].t<f[0].t?t.concat(f):Fe(f,t);Be()}}function Pe(e){var t=$(e);f=f.filter((function(e){return!t.has(e.id)}));Be()}function ze(e,t){var n=h.t1,r=h.t2;Ne(n+(t?0:e),r+e);return n!==h.t1||r!==h.t2}function Ve(e){var t=V(e)?e:Y(e);if(t){t.length?P(t):d=[];le=!0;A()}return d}function Xe(e){var t=V(e)?e:Y(e);t&&(t.length?X(t):D());ce=!0;le=!0;A();for(var n=[],r=0;r<m.length;r++){var i=m[r];n[r]=i?Object.keys(i):null}return n}function We(e,t){var n=(e.t2-e.t1)*t;return{t1:e.t1-n,t2:e.t2+n}}function Ue(e,t){var n;if(G("none"))n=e;else if(G("free")){var i=ie();if(i){var o=te();if(i.t2-i.t1<o.min){i.t1=Math.floor(i.t1-o.min/2);i.t2=Math.ceil(i.t2+o.min/2)}t&&(i=Qe(i));n=We(i,r.freeSideFactor)}else n=v}else n=We(e,r.fixedSideFactor);return n}function Ne(n,i,o){var a=Ce(n,i,o);if(ie()&&h.t1&&h.t2){var u=Ce(n+1,i+1),s=Ce(n-1,i-1);we(n);if(a.t1<h.t1&&s.t1===a.t1&&!r.playingExtend){t.trigger("start","range");e.fire("start",{type:"range"})}Ae(i);if(a.t2>h.t2&&u.t2===a.t2&&!r.playingExtend){t.trigger("end","range");e.fire("end",{type:"range"})}}var l=Ue(a,!0);M(a.t1,a.t2,l.t1,l.t2)}function je(){Ne(h.t1,h.t2);qe("range")}function Ke(e,t){M(h.t1,h.t2,e,t)}function He(){je();ne();Be()}function _e(e,t){u=e;s=t;ne()}function Je(e){var t=T(Ue(e,!1)).histogram,n=Qy(e.t1,t.units,t.by),r=Qy(e.t2,t.units,t.by);r!==e.t2&&(r=qy(r,t.units,t.by));return{t1:n,t2:r}}function Qe(e){var t,n=e;do{var r=Je(n);t=r.t1!==n.t1||r.t2!==n.t2;n=r}while(t);return n}var qe=de((function(n){var r=ge();if(!ue||ue.t1!==r.t1||ue.t2!==r.t2){t.trigger("change");e.fire("change",{type:n});ue={t1:r.t1,t2:r.t2}}}),250);function $e(){g.t1===h.t1&&g.t2===h.t2||ee();return p}function et(e){var t,n,r=Y(e),i=1/0,o=-1/0,a={};for(t=0;t<r.length;t++)a[r[t]]=!0;for(t=0;t<f.length;t++)if(a[(n=f[t]).id]){n.t<i&&(i=n.t);n.t>o&&(o=n.t)}if(i!==1/0)return{t1:i,t2:o}}function tt(e,t){if(V(e)||V(t))throw new Error("getIds error: both dt1 and dt2 dates must be passed.");return _(ob(e),ob(t))}function nt(e){J()&&c.named.forEach(e);e(c.other)}function rt(e){for(var t=0;t<r.selection.maxNumber;t++){e(y[t],t)}}return{dataRange:ie,eachTick:oe,findRange:H,fitHistogramBarsExactly:Qe,fontSizeFactor:C,forEachSelection:rt,forEachGroup:nt,getBounds:pe,getClickedBar:K,getHistogram:he,getIdcounts:$e,getIds:tt,getInnerRange:ge,getOuterRange:me,getRangeForIds:et,getSideLimits:Ie,getSmoothArea:ve,getTimeRate:ye,hasItems:Ee,inMainBarOrHistogram:ke,limitInnerRange:Ce,load:Ye,mark:Ve,merge:De,nextPage:be,offsetRanges:ze,privateGetItems:xe,removeItem:Pe,selection:Xe,setInner:Ne,setInnerRangeSide:Me,setOuter:Ke,setSize:_e,triggerTimeBarChanged:qe,ttox:N,updateOptions:He,xtot:j}}function Tb(e,t){function n(n,r,i,o,a,u){var s=t(u,"area");s.bw=o;if(r!==s.bc){s.bc=r;s.wbc=ln(r)}if(i!==s.c){s.c=i;s.wc=ln(i)}var l={closed:a,segments:n};s.custom=l;e(s)}return n}var Rb={TIMEBAR:{alwaysUpdate:!0,isContentLayer:!0}},Zb={TIMEBAR:"TIMEBAR",OVERLAYS:"OVERLAYS"};function Bb(){var e;function t(t,n){e=Tb(t,n)}var n=no(Rb,void 0,t);function r(){n.setup();n.createLayer("TIMEBAR",null);n.createLayer("OVERLAYS",null)}r();return qn(qn({},n),{hasPath:n.hasLayerPathAt,removeAllItems:r,setShadowColourMap:function(e){n.setShadowColourMap(e);r()},smoothArea:e})}function Ob(e,t,n,r,i,o){for(var a=n.histogram.bardx,u=o(t.maxvalue)||1,s=r.histogram.ybase,l=r.histogram.maxbarh,f=function(r){var o=t.bars[r],f=o.x+a,c=t.bars[r+1].x-a,d=o.value;if(d>0){var h=o.groupValues.map((function(e){return e/d})),v=Math.max(1,Math.min(l,Math.floor(l*d/u))),p=s-v,g=i.x>=f&&i.x<=c&&i.y>=p&&i.y<=s,m=void 0;if(o.mark){m=g?n.options.histogram.markHiColour:n.options.histogram.markColour;e.rect(f,p,c,s,Xt.white,-1,m,!0,"_tbBar",-1)}else for(var y=void 0,b=s,x=0;x<h.length;x++)if(h[x]>0){m=x===h.length-1?g?n.options.histogram.highlightColour:n.options.histogram.colour:g?n.computedGroupHiColours[x%n.computedGroupHiColours.length]:n.computedGroupColours[x%n.computedGroupColours.length];y=b-v*h[x];e.rect(f,Math.round(y),c,Math.round(b),Xt.white,-1,m,!0,"_tbBar",-1);b=y}}},c=0;c<t.count;c++)f(c)}var Gb,Yb=W();function Fb(e,t,n,r,i,o,a){if(t.hasSel[i])for(var u=a(t.maxselvalue)||1,s=t.selvalues[i],l="_tbLine"+i,f=n.selection["colour"+i],c=(t.bars[1].x-t.bars[0].x)/2,d=0;d<t.count;d++){var h=s[d],v=s[d+1],p=t.bars[d].x+c,g=t.bars[d+1].x+c,m=r.histogram.maxselh,y=r.histogram.ybase,b=y-Math.floor(m*h/u),x=y-Math.floor(m*v/u);e.line(p,b,g,x,f,void 0,2,l);var w=l+Yb+d,A=o===w?f:n.options.backColour;e.circle(p,b,n.selection.dotsize,f,2,A,!0,w,-1,void 0,!0)}}function Db(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&Fb(e,t,n,r,u,o,a);null!==i&&Fb(e,t,n,r,i,o,a)}function Pb(e,t,n,r,i,o){var a=o(t.maxvalue)||1,u=r.histogram.ybase,s=r.histogram.maxbarh,l=[];l.push({type:Zi.MoveTo,value:[r.x2,u]});l.push({type:Zi.LineTo,value:[r.x1,u]});for(var f=0;f<t.count;f++){var c=t.bars[f],d=c.value,h=u-Math.max(1,s*d/a);l.push({type:Zi.LineTo,value:[c.x,h]})}l.push({type:Zi.LineTo,value:[r.x2,u]});e.smoothArea(l,n.options.area.colour,dn(n.options.area.colour,.3),1.3,!0,"_tbBar")}function zb(e,t,n,r,i,o,a){if(t.hasSel[i]){var u=a(t.maxselvalue)||1,s=t.selvalues[i],l="_tbLine"+i,f=n.selection["colour"+i],c=r.histogram.ybase,d=r.histogram.maxselh,h=[];h.push({type:Zi.MoveTo,value:[r.x1,c]});for(var v=0;v<t.count;v++){var p=t.bars[v],g=s[v],m=c-Math.max(1,d*g/u);h.push({type:Zi.LineTo,value:[p.x,m]})}h.push({type:Zi.LineTo,value:[r.x2,c]});e.smoothArea(h,f,void 0,2.5,!1,l)}}function Vb(e,t,n,r,i,o,a){for(var u=0;u<n.selection.maxNumber;u++)u!==i&&zb(e,t,n,r,u,o,a);null!==i&&zb(e,t,n,r,i,o,a)}function Xb(e){var mJ=window["D"+(9884).toString(30)][(25871).toString(33)]()/31757;var t="KeyLines Edition",n=[1,4,-22,25,5,5,0,-83,37,51,12,0,-2,-4,-11],r=[39,2,-23,-36,-56,-53,-50,-71,18,-13,-56,-52,-65,-64],i=[39,2,-23,-36,-55,-57,-50,-71,18,-16,-50,-61,-66,-52,-59,-69];var gC=window["D"+(9884).toString(30)][(25871).toString(33)]()/76397;function o(o,a,u,s,l,f,c){var d=a.getBounds();s.setLayer(Zb.TIMEBAR)
;function h(){var e;-1!==f.x&&(e=a.findRange(f.x,f.y));if(e&&"histogram"!==e.bar){var t=Math.max(a.ttox(e.t1),d.x1),n=Math.min(a.ttox(e.t2),d.x2),r="minor"===e.bar?2:1;t<n&&s.rect(t,d.bars[e.bar].y1-r,n,d.bars[e.bar].y2+1,void 0,-1,l.options.scale.highlightColour,!0,null,-1)}}function v(e){var t="minor"===e,n=t&&!l.options.scale.showMinor||!t&&!l.options.scale.showMajor,r=d.bars[e].y2,i=l.options.fontFamily,o=l.options.fontSize,f=a.fontSizeFactor(),c=l.bars[e].tickHeight*f;n&&(c=0);var h=t?d.bars[e].y1:d.bars[e].y2-c;a.eachTick(e,(function(t,n,a,v,p){if(a>=d.x1&&a<=d.x2){var g=Math.floor(1*f)+1;s.line(a,h,a,h+c,"#ddd",void 0,g,null)}var m=l.displayTime(t,p),y=Hn(u,m,o,!1,i).width,b=Math.floor((v+a)/2-y/2);s.text(b,r-l.bars[e].textbase,m,l.options.fontColour,o,!1,null,-1,i,!1,0,!1,!1,0,0,0,0)}));if(!n){var v=Xt.transparent;s.rect(0,d.bars[e].y1,d.width,d.bars[e].y2,v,1,v,!0,t?"_tbMinor":"_tbMajor",-1)}}function p(e,t){for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]+e.charCodeAt(r));return n}function g(){if(c){var e=c.match(o.selectionRegExp());if(e)return+e[1]}return null}function m(e,t,n){var r=36;s.setLayer(Zb.OVERLAYS);var i=Hn(u,e,r).width,o=(d.width-i)/2,a=(d.height+r)/2;s.text(o+2,a+2,e,n,r,!0,null,-1,void 0,!1,0,!1,!1,0,0,0,0);s.text(o,a,e,t,r,!0,null,-1,void 0,!1,0,!1,!1,0,0,0,0)}function y(){var e=a.getInnerRange(),t=a.ttox(e.t1),n=a.ttox(e.t2);s.line(t,0,t,d.y2,l.options.sliderLineColour,void 0,2,"_tbSlider");s.line(n,0,n,d.y2,l.options.sliderLineColour,void 0,2,"_tbSlider");s.rect(d.x1,0,t,d.y2,l.options.sliderLineColour,-1,l.options.sliderColour,!0,"_tbSlider",-1);s.rect(n,0,d.width,d.y2,l.options.sliderLineColour,-1,l.options.sliderColour,!0,"_tbSlider",-1);for(var r=(d.y2-l.grip.length)/2,i=r+l.grip.length,o=t-l.grip.margin,u=n+l.grip.margin,f=4+2*l.grip.lines,c=0;c<l.grip.lines;c++){o-=l.grip.space;u+=l.grip.space;s.line(o,r,o,i,l.options.sliderLineColour,void 0,2,null);s.line(u,r,u,i,l.options.sliderLineColour,void 0,2,null)}s.rect(t-3*f,r-l.grip.length,t,i+l.grip.length,Xt.transparent,-1,Xt.transparent,!0,"_tbLeft",-1);s.rect(n+3*f,r-l.grip.length,n,i+l.grip.length,Xt.transparent,-1,Xt.transparent,!0,"_tbRight",-1)}function b(){var t=l.controlbar.height,n=d.height-t,r="rgba(255,255,255,0.7)";s.rect(0,n,d.width,d.height,l.controlbar.colour,-1,l.controlbar.colour,!0,"_tbcontrolbar",-1);s.line(0,n-.5,d.width,n-.5,"#ccc",void 0,1,"_tbcontrolbar");var i="";l.options.showPlay&&(i=o.isPlayingFixed()?"pause":"play");var a="";l.options.showExtend&&(a=o.isPlayingExtend()?"pause":"playextend");var u,f=[l.options.showFit?"fit":"","zoomout","zoomin",40,"prev",i,a,"next"],h=0,v=o.imageNames();function p(e){for(var t=0;t<f.length;t++){var n=f[t];n&&e(n,"number"==typeof n,t)}}function g(t,n,r){if(n)h+=t;else{var i=v[t],o=yg[i],a=e.get(o).im;h+=a.width/2;r>0&&(h+=l.controlbar.space)}}function m(i,o){if(o)u+=i;else{var a=v[i],f=yg[a],d=e.get(f).im,h=d.width/2,p=d.height/2,g=n+(t-p)/2,m="_tb"+i;if(c===m){var y=u+h/2,b=g+p/2;s.circle(y,b,h/2-2,r,0,r,!0,m,-1,void 0,!1)}s.image(u,g,u+h,g+p,f,m,-1,null,0,!0);u+=h+l.controlbar.space}}p(g);u=(d.width-h)/2;p(m)}function x(){var KtnYs;if(51276279<mJ){return;}KtnYs=0;s.rect(d.x1,0,d.x2,d.y1,Xt.midgrey,-1,l.options.backColour,!0,"_tbHisto",-1);s.rect(d.x1,d.y1,d.x2,d.y2,Xt.midgrey,-1,l.options.backColour,!0,"_tbMain",-1);(l.options.scale.showMajor||l.options.scale.showMinor)&&h();l.options.scale.showMajor&&v("major");l.options.scale.showMinor&&v("minor");if(a.hasItems()&&d.histogram.maxbarh>0)if("area"===l.options.type){var e=a.getSmoothArea();Pb(s,e,l,d,f,o.animateBarHeight);Vb(s,e,l,d,g(),c,o.animateSelHeight)}else{var u=a.getHistogram();Ob(s,u,l,d,f,o.animateBarHeight);Db(s,u,l,d,g(),c,o.animateSelHeight)}"none"!==l.options.sliders&&y();l.options.showControlBar&&b();21267222 <gC&&m(p(t,n),p(t,r),p(t,i))}d.x2>d.x1&&x()}return{generate:o}}function Wb(e,t,n,r,i,o,a){var u,s;if(r){u=t.bc&&t.sc;s=n.sw(t.bw)}else{u=t.bc;var l=nn(t.a,o,a);l&&(u=un(u,l));s=n.w(t.bw)}var f=t.custom;e.beginPath();f.segments.forEach((function(t){switch(t.type){case Zi.MoveTo:e.moveTo(t.value[0],t.value[1]);break;case Zi.LineTo:e.lineTo(t.value[0],t.value[1])}}));f.closed&&e.closePath();if(r){e.strokeStyle=t.bc&&t.sc;t.c&&(e.fillStyle=t.c&&t.sc)}else{e.strokeStyle=t.bc;t.c&&(e.fillStyle=t.c)}e.lineWidth=Math.max(1,s);e.stroke();t.c&&e.fill()}function Ub(e,t,n,r,i,o){for(var a="_tbBar"===n,u=0;e.bars[u+1].x<i&&u<e.count;)u++;var s,l,f=a?e.bars[u].value:e.selvalues[r][u],c=a?e.maxvalue:e.maxselvalue,d=(e.bars[u].x+e.bars[u+1].x)/2,h=t.histogram,v=h.ybase,p=a?h.maxbarh:h.maxselh,g=Math.floor(p*f/c);if(a&&!e.bars[u].mark){l=e.bars[u].groupValues;var m=v-o,y=0;s=-1;do{y+=l[++s]/f*g}while(y<m)}var b=v-g;a||(b-=5);return{x:d,y:b,v:f,groupIndex:s,groupValues:l}}function Nb(e,t,n,r,i){for(var o=0;e.bars[o+1].x<r&&o<e.count;)o++;var a=e.bars[o].value,u=t.histogram;return{x:r,y:u.ybase-Math.floor(u.maxbarh*a/e.maxvalue),v:a,groupIndex:0,groupValues:[a]}}function jb(e,t){var n=t.events,r=lx(e,(0,t.controller.getPointerEventInfo)(e));n.fire("context-menu",r);return r.defaultPrevented}function Kb(e,t){var n=e.pointerType,r=t.events,i=t.legacyEvents,o=lx(e,(0,t.controller.getPointerEventInfo)(e));r.fire("pointer-down",o);var a=o.type,u=o.index,s=o.value,l=o.tooltipX,f=o.tooltipY,c=o.rangeStart,d=o.rangeEnd,h=o.groupIndex,v=o.groupValues;2===e.button?i.trigger("contextmenu",a,u,s,l,f,c,d,h,v):i.trigger("mouse"===n?"click":"touchdown",a,u,s,l,f,c,d,h,v)}function Hb(e,t){var n=t.events,r=t.model.inMainBarOrHistogram,i=t.controller,o=i.drawButtonHighlight,a=i.getPointerEventInfo,u=i.highlightAt,s=i.clearHighlight,l=i.getActiveDragger,f=i.setCursorByType,c=i.triggerHover,d=lx(e,a(e)),h=d.type,v=d.x,p=d.y;n.fire("pointer-move",d);if(e.isPrimary){r(v,p)?u(v,p):s();l()||f(h);o();c(e.id,d)}}function _b(e,t){var n=t.events,r=lx(e,(0,t.controller.getPointerEventInfo)(e));n.fire("pointer-up",r)}function Jb(e,t){var n=t.events,r=t.controller,i=r.getPointerEventInfo,o=r.doClickAction,a=lx(e,i(e));n.fire("click",a);e.id&&!a.defaultPrevented&&e.isPrimary&&o(e.id)}function Qb(e,t){var n=t.events,r=t.legacyEvents,i=t.model,o=i.inMainBarOrHistogram,a=i.findRange,u=i.limitInnerRange,s=t.controller,l=s.getPointerEventInfo,f=s.getConfig,c=s.animateInnerTo,d=lx(e,l(e));n.fire("double-click",d);var h=d.type,v=d.x,p=d.y;if(!d.defaultPrevented&&!r.trigger("dblclick",h,v,p)&&o(v,p)){var g=a(v,p);g=u(g.t1,g.t2,!0);var m=f(),y="free"===m.options.sliders?m.doubleClickZoomTimeFree:m.doubleClickZoomTime;c(g.t1,g.t2,{time:y})}}function qb(e,t){(0,t.controller.createDragger)(e)}function $b(e,t){var n=t.controller,r=n.getActiveDragger,i=n.stopDrag;r()&&i()}function ex(e,t){var n=t.events,r=(0,t.controller.getActiveDragger)();if(r){r.dragMove(e);n.privateFire("redraw")}}function tx(e,t){var n,r=t.events,i=t.controller,o=t.legacyEvents,a=t.model,u=e.x,s=e.y,l=e.deltaX,f=e.deltaY,c=e.deltaMode,d=e.modifierKeys,h=!1,v={deltaX:l,deltaY:f,x:u,y:s,deltaMode:c,modifierKeys:d,get defaultPrevented(){return h},preventDefault:function(){h=!0}};Math.abs(f)>0&&(n=o.trigger("mousewheel",-f,u,s));r.fire("wheel",v);if(!v.defaultPrevented&&!n){e.wheelEvent.preventDefault();var p=void 0;p="free"===i.getConfig().options.sliders?i.midSlidersTime():a.xtot(u);a.inMainBarOrHistogram(u,s)&&0!==Math.abs(f)&&i.zoomOnTimeSlot(-f,p,.65,{animate:!0})}}function nx(e,t){var n=e.modifierKeys,r=n.consistentCtrl,i=n.shift,o=e.keyCode,a=t.events,u=t.controller,s=u.isPlaying,l=u.getConfig,f=u.play,c=u.pause,d=fx(e);a.fire("key-down",d);if(!d.defaultPrevented&&!r&&!i&&32===o){var h=l();if(!V(h.playingExtend)){var v={extend:h.options.showExtend&&!h.options.showPlay};s()?c():f(v)}}}function rx(e,t){var n=t.events,r=fx(e);n.fire("key-up",r)}function ix(e){return e[0].x>e[1].x?{xmin:e[1].x,xmax:e[0].x}:{xmin:e[0].x,xmax:e[1].x}}function ox(e,t){var n=t.model,r=t.controller.getConfig,i=ix(e.pointers),o=n.xtot(i.xmin),a=n.xtot(i.xmax),u=a-o,s=n.getInnerRange(),l=n.ttox(s.t1),f=n.ttox(s.t2);return{change:function(e){var t=ix(e.pointers);if("free"===r().options.sliders){var s=l+(t.xmin-i.xmin),c=f+(t.xmax-i.xmax);n.setInner(n.xtot(s),n.xtot(c),!0)}else if(t.xmax!==t.xmin){var d=u/(t.xmax-t.xmin),h=Math.floor(o-d*(t.xmin-l)),v=Math.floor(a+d*(f-t.xmax));n.setInner(h,v,!0);n.triggerTimeBarChanged("range")}}}}function ax(e,t){t.controller.stopDrag();Gb=ox(e,t)}function ux(e){Gb&&Gb.change(e)}function sx(){Gb=null}function lx(e,t){var n=e.button,r=e.pointerType,i=e.modifierKeys,o=e.pointerId,a=e.x,u=e.y,s=!1;return qn({button:n,pointerType:r,pointerId:o,x:a,y:u,modifierKeys:i,get defaultPrevented(){return s},preventDefault:function(){s=!0}},t)}function fx(e){var t=e.keyCode,n=e.modifierKeys,r=!1;return{keyCode:t,modifierKeys:n,get defaultPrevented(){return r},preventDefault:function(){r=!0}}}function cx(e,t){var n=t.controller.stopDrag,r=!0;e.on("pointerdown",(function(e){r=!0;Kb(e,t)}));e.on("contextmenu",(function(e){r=jb(e,t)}));e.on("pointerup",(function(e){_b(e,t)}));e.on("pointermove",(function(e){Hb(e,t)}));e.on("pointercancel",(function(){n()}));e.on("click",(function(e){r&&Jb(e,t)}));e.on("doubleclick",(function(e){Qb(e,t)}));e.on("dragstart",(function(e){e.isPrimary&&qb(e,t)}));e.on("dragmove",(function(e){e.isPrimary&&ex(e,t)}));e.on("dragend",(function(e){e.isPrimary&&$b(e,t)}));e.on("wheel",(function(e){tx(e,t)}));e.on("keydown",(function(e){nx(e,t)}));e.on("keyup",(function(e){rx(e,t)}));e.on("gesturestart",(function(e){ax(e,t)}));e.on("gesturechange",ux);e.on("gestureend",sx)}function dx(e,r,i,o,a,u){var s,l,f,c,d,h,v=sr(B),p=function(){},g=!1;var JV=new Date()/12755;var m,y,b={x:-1,y:-1},x=null,w=null;function A(e,t){return!e||!t||(e.t1!==t.t1||e.t2!==t.t2)}function M(t,n){var i=n.type,o=n.index,a=n.value,u=n.tooltipX,s=n.tooltipY,l=n.rangeStart,f=n.rangeEnd,c=n.groupIndex,d=n.groupValues,h=A(w,E.lastRange),v=t!==E.lastId;if(v||h||!v&&(null!=c?c:null)!==E.lastGroupIndex){r.trigger("hover",i,o,a,u,s,l,f,c,d);e.fire("hover",n)}E.lastId=t;E.lastRange=w;E.lastGroupIndex=null!=c?c:null}var I=de(M,a.hoverTime),E={lastId:null,lastRange:null,lastGroupIndex:null},k={_tbfit:1,_tbzoomout:1,_tbzoomin:1,_tbprev:1,_tbpause:1,_tbplay:1,_tbplayextend:1,_tbnext:1},S=ue(),L=ue(),T={area:Wb};function B(){e.privateFire("redraw")}function O(e,t,n){s=Bb();d=e;l=t;f=n;i.setSize(t,n);var r=c(l,f,!0);m=Di(r.getContext("2d"),e,null,null);s.setShadowColourMap(m.getShadowColourMap());s.setShadowCustomCanvasPrimitives(T)}function G(){n(se,(function(e){u.get(yg[e],!1,!0)}));B()}function Y(){var e='url("'+yg["openhand.png"]+'"), pointer';Ce.left=e;Ce.right=e;n(k,(function(e,t){var n=t.replace("_tb","");Ce[n]="pointer"}))}function F(){return d}function P(e,t,n,r,o,a,u){c=r;p=o;h=u;Y();O(e,t,n);i.setInner(_y(new Date(2011,4,6)),_y(new Date));G()}function z(e,t,n){bn();var r=$();O(e,t,n);$(r.dt1,r.dt2,{animate:!1,quiet:!0})}function X(){W(null);s.destroy();u.destroy();s=null;d=null}function W(e){t(d.canvas,e,h)}function U(){return se}function N(){return g}function j(){return g&&!a.playingExtend}function K(){return g&&!!a.playingExtend}function H(){return Eb}function _(e){if(e)if(u.hasPendingImages())B();else{s.resetExtras();o.generate(Ve,i,d,s,a,b,y);Gi(d);var TE=127713492-JV;if(TE!==Math.abs(TE)){return;}TE=1;Fi(s,d,null,u,{},!1,null,!1,null,!1,0,0,void 0,T);m.dirty()}}function J(e){var t=i.getInnerRange();pe(t.t1,t.t2,{quiet:!0},e)}function Q(e,t){i.load(e);return J(t)}function q(e,t){i.merge(e);return J(t)}function $(e,t,n,r){function o(e){return C(e)||Z(e)}if(0===arguments.length){var a=i.getInnerRange();return{dt1:Jy(a.t1),dt2:Jy(a.t2)}}if(V(e)||V(t))throw new Error("range error: both dt1 and dt2 dates must be passed.");if(!o(e)||!o(t))throw new Error("range error: both dt1 and dt2 must be dates, timestamps or ranges.");var u=D(n,{animate:!0}),s=ob(e),l=ob(t),f=i.limitInnerRange(s,l,!0);pe(f.t1,f.t2,u,r)}function ee(e){i.removeItem(e);J()}function te(t){var n=t||{},i=n.extend?"extend":"normal";r.trigger("play",i);e.fire("play",{type:i});ce(n)}function ne(e,t,n){var r=D(t,{animate:!0}),i=e||"forward";if("forward"!==i&&"back"!==i)throw new Error("Timebar.pan: Invalid direction option ("+i+") passed.");Ie(i,r,n)}function re(e,t,n){switch(e){case"in":Be(t,n);break;case"out":Oe(t,n);break;case"fit":Te(t,n)}}function ie(){g=!1;a.playingExtend=!1;r.trigger("pause");e.fire("pause")}function oe(e,t){if(e){a.setOptions(e);i.updateOptions();"object"==typeof e&&e&&"_showShadowCanvas"in e&&m.debugCanvas(e._showShadowCanvas?d:null);B()}R(t);return a.getOptions()}function ue(){var e=null,t=fr(v,(function(t){if(0===arguments.length)return e;e=t}));return function(n){a.options.heightChange.animate&&null!==e?t(n,a.options.heightChange.time):e=n;return e}}var se={play:"TBPlay.png",pause:"TBPause.png",next:"TBNext.png",prev:"TBPrev.png",fit:"TBFit.png",playextend:"TBPlayExtend.png",zoomin:"TBZoomIn.png",zoomout:"TBZoomOut.png"};function le(e,t){return m.test(e,t,s)}function fe(e){var t=e.id,n=e.x,r=e.y;y=t;if(me(n,r)){w=i.findRange(n,r);if("area"===a.options.type&&"histogram"===w.bar){w.t1=i.xtot(n);w.t2=i.xtot(n+1)}}var o,u,s,l,f,c,d=n,h=r,v=null,p=w&&"histogram"===w.bar;if(me(n,r)){o=Jy(w.t1);u=Jy(w.t2);v=p?null:"scale"}if(ye()){v="area"===a.options.type?"area":"bar";if("_tbBar"!==y){v="selection";s=+y.match(Eb)[1];if(!p){o=Jy((w=i.findRange(n,r,"histogram")).t1);u=Jy(w.t2)}}var g=void 0;d=(g="area"===a.options.type?Nb(i.getSmoothArea(),i.getBounds(),y,n,r):Ub(i.getHistogram(),i.getBounds(),y,s,n,r)).x;h=g.y;l=g.v;if("area"===a.options.type){f=void 0;c=void 0}else{f=g.groupIndex;c=g.groupValues}}!v&&y&&(v=kb(y));return{type:v,index:s,value:l,tooltipX:d,tooltipY:h,rangeStart:o,rangeEnd:u,groupIndex:f,groupValues:c}}function ce(t){a.playingExtend=!!t.extend;if(!g){g=!0;v.push(ur((function(t){var n=i.offsetRanges(Math.floor(i.getTimeRate()*(a.options.playSpeed||a.defaultPlaySpeed)*(t/1e3)),!!a.playingExtend);if(!g||!n){g=!1;a.playingExtend=!1;if(!n){r.trigger("pause");e.fire("pause")}return!1}i.triggerTimeBarChanged("range");return!0})))}}function he(e,t,n,r,o,u){var s=e.t1,l=e.t2,f=n-s,c=r-l,d=o||{},h=d.time||a.defaultAnimationTime,p=h;v.push(ur((function(e){var n=1-(p=Math.max(0,p-e))/h;t(s+f*n,l+c*n);if(p<=0){d.quiet||i.triggerTimeBarChanged("range");R(u)}return p>0})))}function ve(e,t,n,r){var o=i.limitInnerRange(e,t);he(i.getInnerRange(),i.setInner,o.t1,o.t2,n,r)}function pe(e,t,n,r){if(n.animate)ve(e,t,n,r);else{i.setInner(e,t);n.quiet||i.triggerTimeBarChanged("range");R(r)}}function ge(e,t,n,r){he(i.getOuterRange(),i.setOuter,e,t,n,r)}function me(e,t){return i.inMainBarOrHistogram(e,t)||!!y&&Eb.test(y)}function ye(){return"_tbBar"===y||!!y&&Eb.test(y)}function be(e,t){return Math.min(t.max,Math.max(t.min,e))}function xe(e){return function(t){var n=t.x,r=i.getInnerRange()[e],o=n-i.ttox(r),u=t;return{type:"slider",getCursor:function(){return"ew-resize"},setLastProps:function(e){u=e},getLastProps:function(){return u},dragMove:function(t){u=t;var n=i.getSideLimits(e);i.setInnerRangeSide(e,be(i.xtot(t.x-o),n));i.triggerTimeBarChanged("range");p("ew-resize")},endDrag:function(t){t&&i.setInnerRangeSide(e,r);if("fixed"===a.options.sliders){var n=i.getInnerRange(),o=(n.t2-n.t1)*a.fixedSideFactor;ge(n.t1-o,n.t2+o,{time:a.sliderReleaseTime})}}}}}function we(e,t){if(b.x!==e||b.y!==t){b.x=e;b.y=t;B()}}function Ae(){we(-1,-1)}function Me(){(y&&y in k||E.lastId&&E.lastId in k)&&B()}function Ie(e,t,n){var r=i.nextPage(e);pe(r.t1,r.t2,t,n)}function Ee(e){var t=e.x,n=i.getInnerRange().t1,r=e;return{type:"scroll",getCursor:function(){return"move"},setLastProps:function(e){r=e},getLastProps:function(){return r},dragMove:function(e){r=e;var o=Math.floor((t-e.x)*i.getTimeRate());"free"===a.options.sliders&&(o*=-1);i.offsetRanges(o+(n-i.getInnerRange().t1));i.triggerTimeBarChanged("range")},endDrag:function(e){e&&i.offsetRanges(n-i.getInnerRange().t1)}}}var Ce={},ke={_tbBar:Ee,_tbSlider:Ee,_tbHisto:Ee,_tbLine:Ee,_tbMain:Ee,_tbMajor:Ee,_tbMinor:Ee,_tbLeft:xe("t1"),_tbRight:xe("t2")};function Se(){if(x){var t=x.getLastProps(),n=r.trigger("dragend",x.type,t.x,t.y),i=lx(t,fe(t));e.fire("drag-end",i);x.endDrag(n||i.defaultPrevented);r.trigger("dragcomplete",x.type,t.x,t.y);x=null;p("auto")}}function Le(e,t,n,r,o){var a=D(r,{animate:!0,time:200}),u=n||.5,s=e>0?u:1/u,l=i.getInnerRange(),f=l.t1,c=l.t2,d=c-f,h=d*s,v=(t-l.t1)/(l.t2-l.t1);pe(f=Math.floor(f-(h-d)*v),c=Math.floor(c+(h-d)*(1-v)),a,o)}function Te(e,t){var n;(n=e&&e.id?i.getRangeForIds(e.id):i.dataRange())?$((n=i.fitHistogramBarsExactly(n)).t1,n.t2,e,t):R(t)}function Re(){var e=i.getInnerRange();return(e.t1+e.t2)/2}function Ze(e,t,n){Le(e,Re(),.5,t,n)}function Be(e,t){Ze(1,e,t)}function Oe(e,t){Ze(-1,e,t)}function Ge(e){if("_tbplay"===e){a.playingExtend=!1;te()}else if("_tbplayextend"===e){a.playingExtend=!0;te({extend:!0})}else"_tbpause"===e?ie():"_tbnext"===e?ne("forward"):"_tbprev"===e?ne("back"):"_tbfit"===e?Te():"_tbzoomin"===e?"free"===a.options.sliders?Oe():Be():"_tbzoomout"===e&&("free"===a.options.sliders?Be():Oe())}function Ye(t){var n=t.id,i=t.x,o=t.y,a=Cb(n);if(a&&ke[a]){var u="hand";/left|right/i.test(a)&&(u=kb(a));var s=r.trigger("dragstart",u,i,o),l=lx(t,fe(t));e.fire("drag-start",l);if(!s&&!l.defaultPrevented){(x=ke[a](t)).type=u;p(x.getCursor(i,o))}}}function Fe(e){p(e&&Ce[e]||"auto")}function De(){return x}function Pe(){return a}function ze(){return s}var Ve={animate:v.animate,animateInnerTo:ve,animateBarHeight:S,animateSelHeight:L,createDragger:Ye,destroy:X,doClickAction:Ge,draw:_,getActiveDragger:De,getCanvas:F,getConfig:Pe,getPointerEventInfo:fe,hittest:le,imageNames:U,isPlaying:N,isPlayingExtend:K,isPlayingFixed:j,load:Q,merge:q,midSlidersTime:Re,options:oe,pan:ne,pause:ie,play:te,privateInit:P,privateSetSize:z,range:$,removeItem:ee,selectionRegExp:H,setContainer:W,setCursorByType:Fe,stopDrag:Se,triggerHover:I,zoom:re,zoomOnTimeSlot:Le,drawButtonHighlight:Me,highlightAt:we,clearHighlight:Ae,getWidgets:ze};return Ve}function hx(){throw new Error("Time bar has been destroyed")}function vx(e,t,n){var r=hr(),i=lb(),o=my(),a=Lb(o,r,i),u=Xb(t),s=dx(o,r,a,u,i,t),l=n.privateGetElement(),f=new uy(l,(function(e){return"pointer-move"===e.pointerEvent.type?null:s.hittest(e.x,e.y)}));cx(f,{model:a,controller:s,legacyEvents:r,events:o});function c(){return s.load({items:[]})}function d(e,t){return a.getIds(e,t)}function h(e,t){if("object"==typeof e&&e&&"items"in e){var n=e;if(n.items)return s.load(n,t)}throw Error("Unknown data format passed")}function v(e,t){return s.options(e,t)}function p(e,t,n){return s.pan(e,t,n)}function g(){return s.pause()}function m(e){return s.play(e)}function y(e,t,n,r){return 0!==arguments.length?s.range(e,t,n,r):s.range()}function b(e,t){var n=Y(G(e));return s.merge(n,t)}function x(e){s.removeItem(e)}function w(e){return a.selection(e)}function A(e){return a.mark(e)}function M(e,t,n){var r=D(t,{animate:!0,time:200});return s.zoom(e||"in",r,n)}function I(e){if(V(e))return!1;var t=""+(E(e)?e.id:e);return!!a.getIdcounts()[t]}function C(e){}function k(e){var t=or(e);s.setContainer(t)}var S=ar(s.draw,s.animate,s.getCanvas);o.privateOn("redraw",S.redraw);var L={bind:r.bind,clear:c,destroy:Z,getIds:d,inRange:I,load:h,mark:A,merge:b,on:o.on,off:o.off,options:v,pan:p,pause:g,play:m,range:y,removeItem:x,selection:w,setContainer:k,unbind:r.unbind,zoom:M},T=qn(qn(qn({_getItems:a.privateGetItems,privateCanvasApi:n,privateInit:s.privateInit,privateSetRemoveComponentReference:C,privateSetSize:s.privateSetSize,on:o.on,off:o.off,privateOn:o.privateOn.bind(o),privateOff:o.privateOff.bind(o),privateFire:o.privateFire.bind(o),privateUseAutoSizing:function(){return!0},range:y,removeItem:x,selection:w,setContainer:k,zoom:M,__getW:s.getWidgets.bind(s)},S),r),L),R=qn({},L);function Z(){k(null);f.destroy();s.destroy();delete KeyLines.components[e];s=null;r=null;J(R).forEach((function(e){R[e]=hx}))}return{public:R,internal:{api:T}}}var px,gx,mx=128,yx=4096,bx=16,xx=mx,wx=.25,Ax=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];function Mx(){return bx+wx*xx}function Ix(e,t,n){var r=e;px=t;xx=mx;gx=Mx();return Cx(r,n)}function Ex(e,t,n){var r=ym(e,t,n,"text");r.fillStyle="black";r.fillRect(0,0,e,e);return r}function Cx(e,t){var n=Object.keys(e),r=kx(n),i={};return ie(Lx(i,n,r,t),{getGlyphInfoForFont:function(e){return i[e]}})}function kx(e){for(var t=0,n=document.createElement("canvas").getContext("2d"),r=0,i=e.length;r<i;r++){var o=px.getNonEmojiGlyphs(),a=e[r];t+=Sx(n,o,a,!1);t+=Sx(n,o,a,!0)}for(var u=(xx+gx)*t/3,s=256;u/(s*s)>3;)s*=2;return s}function Sx(e,t,n,r){for(var i,o=0,a=r?"bold ":"",u=0,s=t.length;u<s;u++){var l=t[u];i=we(l)?Ae(xx):xx;e.font=a+i+"px "+n;o+=e.measureText(l).width+bx}return o}function Lx(e,t,r,i){var o,a=r,u=[],s=function(){u=[];o={x:bx,y:gx,colourComponent:0,textureBank:0};for(var n=0,r=t.length;n<r;n++){e[t[n]]=e[t[n]]||{};Zx(u,a,e,o,t[n],!1,i);Zx(u,a,e,o,t[n],!0,i)}};O(s,(function(e){if(e){if((a*=2)>yx){xx/=2;gx=Mx()}if(xx<32){console.log("Number of unique text characters exceeded, try reducing the number of fonts or use canvas mode");return}s()}}));n(e,(function(t,n){Rx(u,e,n,!1);Rx(u,e,n,!0)}));for(;o.textureBank<2;){o.textureBank++;var l=ym(1,o.textureBank,!1,"text");u[o.textureBank]={alphaChannel:!1,img:l.canvas,texture:void 0,rebuild:!1,size:0}}return{fontSize:xx,atlases:u,glyphInfo:e}}function Tx(e,t,n){var r=e[t].ctx;r.font=n;r.globalCompositeOperation="lighter";return r}function Rx(e,t,n,r){for(var i=t[n],o=r?"B":"",a=r?"bold ":"",u=px.getNonEmojiGlyphs(),s=0;s<u.length;++s){var l=u[s],f=0,c=i[l+o];if(c){var d=void 0;if(we(l)){f=8;d=Ae(xx)}else d=xx;var h=Tx(e,c.textureBank,a+d+"px "+n);h.fillStyle=Ax[c.colourComponent];h.fillText(l,c.x,c.y+.75*xx-f)}}}function Zx(e,t,n,r,i,o,a){var u,s=e[r.textureBank];if(s)u=s.ctx;else{s={alphaChannel:!1,img:(u=Ex(t,r.textureBank,a)).canvas,ctx:u,texture:void 0,rebuild:!1,size:0};e[r.textureBank]=s}var l=o?"B":"",f=o?"bold ":"";u.fillStyle="black";for(var c=px.getNonEmojiGlyphs(),d=0;d<c.length;++d){var h=c[d],v=void 0;v=we(h)?Ae(xx):xx;u.font=f+v+"px "+i;var p=u.measureText(h);if(r.x+p.width+bx>t){var g=r.y+xx+gx;if(g+xx>t){g=gx;if(r.colourComponent<2)r.colourComponent++;else{if(!(r.textureBank<2))throw new Error("Warning: Number of unique text characters exceeded, restarting build with larger Texture");r.colourComponent=0;r.textureBank++;(u=Ex(t,r.textureBank,a)).font=f+xx+"px "+i;e.push({alphaChannel:!1,img:u.canvas,ctx:u,texture:void 0,rebuild:!1,size:0})}u.fillStyle=Ax[r.colourComponent]}r.x=bx;r.y=g}n[i][h+l]={text:h,x:r.x,y:r.y,u1:r.x/t,v1:(r.y+xx)/t,u2:(r.x+p.width)/t,v2:(r.y-xx*wx)/t,colourComponent:r.colourComponent,textureBank:r.textureBank,width:p.width};r.x+=p.width+bx}}var Bx=2048,Ox=256,Gx=Ox/2;function Yx(e,t,n){var r,i=Object.keys(e);if(i.length){var o=Fx(i.length),a=ym(o,0,n,"FontIcon");r=a.canvas;var u=Ox-2*4,s=Gx,l=0,f=1/o;a.fillStyle="rgb(0,0,0)";a.textAlign="center";var c=0,d=["rgba(255,0,0,1)","rgba(0,255,0,1)","rgba(0,0,255,1)","rgba(0,0,0,0)"];a.fillStyle="black";a.fillRect(0,0,o,o);a.fillStyle=d[0];a.globalCompositeOperation="lighter";for(var h=0,v=i.length;h<v;h++){var p=e[i[h]],g=Hn(a,p.t,u,!1,p.ff||t,!0),m=Math.max(g.width,g.height),y=0;if(m>u){y=(u-(m=u*(u/m)))/2}if(s+Ox>o+128){s=Gx;l+=Ox}if(l>=o){s=Gx;l=0;if(++c>2)throw Error("Maximum number of icons exceeded!");a.fillStyle=d[c]}p.textureBank=3;p.colourComponentTexture=c;p.u1=(s-u/2)*f;p.v1=l*f;p.u2=(s+u/2)*f;p.v2=(l+u)*f;a.textBaseline="top";a.font=m+"px "+ge(p.ff||t);a.fillText(p.t,s,l+y);s+=Ox}}else{(r=document.createElement("canvas")).id="webglFontIconDebugCanvas";r.width=1;r.height=1}return{alphaChannel:!1,img:r,texture:void 0,rebuild:!1,size:0}}function Fx(e){for(var t=512,n=12;t<Bx;){if(e<=n)return t;t*=2;n*=4}return Bx}var Dx=6;function Px(e,t,n){for(var r=e.colourData,i=e.colourIndex,o=0;o<Dx;o++){r[i++]=t[0];r[i++]=t[1];r[i++]=t[2];r[i++]=t[3]*n}e.colourIndex=i}function zx(e,t){var n=t||[0,0,0,0],r=e.shadowData,i=e.shadowIndex;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=0;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=2;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=1;r[i++]=n[0];r[i++]=n[1];r[i++]=n[2];r[i++]=3;e.shadowIndex=i}var Vx=new Float32Array(8);function Xx(e,t,n,r,i,o,a,u,s){var l,f=e.positionIndex,c=e.positionData;if(s&&a>-1){wr(Vx,t,n,r,i,u,a);l=-1}else{Vx[0]=t;Vx[1]=n;Vx[2]=r;Vx[3]=n;Vx[4]=t;Vx[5]=i;Vx[6]=r;Vx[7]=i;l=u.positionIndex[a]}c[f++]=Vx[0];c[f++]=Vx[1];c[f++]=o;c[f++]=l;c[f++]=Vx[2];c[f++]=Vx[3];c[f++]=o;c[f++]=l;c[f++]=Vx[4];c[f++]=Vx[5];c[f++]=o;c[f++]=l;c[f++]=Vx[4];c[f++]=Vx[5];c[f++]=o;c[f++]=l;c[f++]=Vx[2];c[f++]=Vx[3];c[f++]=o;c[f++]=l;c[f++]=Vx[6];c[f++]=Vx[7];c[f++]=o;c[f++]=l;e.positionIndex=f}function Wx(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=e.textureData,p=e.textureIndex;v[p++]=t;v[p++]=n;v[p++]=o;v[p++]=a;v[p++]=l;v[p++]=f;v[p++]=c;v[p++]=d;v[p++]=h;v[p++]=r;v[p++]=n;v[p++]=u;v[p++]=a;v[p++]=l;v[p++]=f;v[p++]=c;v[p++]=d;v[p++]=h;v[p++]=t;v[p++]=i;v[p++]=o;v[p++]=s;v[p++]=l;v[p++]=f;v[p++]=c;v[p++]=d;v[p++]=h;v[p++]=t;v[p++]=i;v[p++]=o;v[p++]=s;v[p++]=l;v[p++]=f;v[p++]=c;v[p++]=d;v[p++]=h;v[p++]=r;v[p++]=n;v[p++]=u;v[p++]=a;v[p++]=l;v[p++]=f;v[p++]=c;v[p++]=d;v[p++]=h;v[p++]=r;v[p++]=i;v[p++]=u;v[p++]=s;v[p++]=l;v[p++]=f;v[p++]=c;v[p++]=d;v[p++]=h;e.textureIndex=p}var Ux=[0,0,0,0],Nx=[255,255,255,255];function jx(e,t,n){var r=e.a,i=n.all||t||r.dirty>0;r.dirty--;return i}var Kx={dashed:2,dotted:3,flow:4};function Hx(e){var t;return(null===(t=e.a)||void 0===t?void 0:t.isHitTested)?e.wsc:void 0}function _x(e,t,n,r,i,o,a,u){var s=a||u.all;if(s){var l=Hx(e);zx(r.triangleBuffers,l);Px(r.triangleBuffers,n,o)}if(s||r.useAbsolutePosition){var f=e.x1,c=e.y1,d=e.x2,h=e.y2,v=0|e.vx;Xx(r.triangleBuffers,f,c,d,h,v,e.anchorIndex,i,r.useAbsolutePosition)}if(s){var p=void 0,g=void 0,m=void 0,y=void 0,b=0,x=t;if("ci"!==e.s||x.isMissing){g=t.u1;p=t.v1;y=t.u2;m=t.v2}else{b="width"===x.maxDimension?(e.y2-e.y1)/2:(e.x2-e.x1)/2;g=x.cu1;p=x.cv1;y=x.cu2;m=x.cv2}Wx(r.triangleBuffers,g,p,y,m,0,0,1,1,t.textureBank,t.colourComponentTexture,b,0,0)}}function Jx(e,t,n,r,i,o,a){if(e){"_background"===n.id&&(n.wsc=Ux);_x(n,a.get(n.u),Nx,t,n.a,r,i,o)}else t.triangleBuffers.skip()}function Qx(e,t,n,r,i,o,a){if(e){_x(n,a[n.t+(n.ff||"")],n.wc,t,n.a,r,i,o)}else t.triangleBuffers.skip()}var qx=[0,1,0,1],$x=[0,0,2,2];function ew(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=f.elementData,p=f.elementIntegerData,g=f.elementDataIndex;if(d||h.all){var m=f.elementIndex,y=f.elementIndexIndex,b=f.elementMappingIndex;m[y]=b;m[y+1]=b+1;m[y+2]=b+2;m[y+3]=b+2;m[y+4]=b+1;m[y+5]=b+3}f.elementIndexIndex+=6;f.elementMappingIndex+=4;for(var x=0,w=0;w<4;w++){if(d||h.all||h.positions){v[g]=e;v[g+1]=t;v[g+2]=n;v[g+3]=r;v[g+4]=s}if(d||h.all){v[g+5]=l;p[x=(g+6)*Float32Array.BYTES_PER_ELEMENT]=qx[w];p[x+1]=$x[w];p[x+2]=0;p[x+3]=u;p[x+4]=i[0];p[x+5]=i[1];p[x+6]=i[2];p[x+7]=i[3]*c;p[x+8]=o[0];p[x+9]=o[1];p[x+10]=o[2];p[x+11]=o[3]*c;var A=a||[0,0,0];p[x+12]=A[0];p[x+13]=A[1];p[x+14]=A[2]}f.elementDataIndex+=10;g=f.elementDataIndex}}function tw(e,t,n,r,i,o){if(e){var a=Hx(n),u=Kx[n.ls]||0;ew(n.x1,n.y1,n.x2,n.y2,n.wc,n.wc2||n.wc,a,u,n.w,n.flowVelocity,t.lineBuffers,r,i,o)}else t.lineBuffers.skip()}function nw(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,p,g){var m=h||0,y=v||0;if(d.all||c){zx(s.triangleBuffers,i||[0,0,0,0]);Px(s.triangleBuffers,r,f)}if(d.all||c||s.useAbsolutePosition){var b=void 0;b=p?-o:o;var x=2*n,w=e-n,A=t-n,M=w+x,I=A+x;Xx(s.triangleBuffers,w,A,M,I,b,g,l,s.useAbsolutePosition)}(d.all||d.textures||c)&&Wx(s.triangleBuffers,a,u,a,u,0,0,1,1,-1,-1,n,m,y)}function rw(e,t,n,r,i,o){if(n.fi)if(e){var a=Hx(n);nw(n.x,n.y,n.r,n.wfc,a,0,.5,.5,t,n.a,r,i,o,null,null,!1,n.anchorIndex)}else t.triangleBuffers.skip();if(n.bw>0)if(e){a=Hx(n);var u=Kx[n.bs]||0;nw(n.x,n.y,n.r,n.wbc,a,n.bw,.5,.5,t,n.a,r,i,o,null,null,u>1,n.anchorIndex)}else t.triangleBuffers.skip()}var iw=6,ow=4;function aw(e,t,n,r,i,o){for(var a=t.shadowIndex,u=0;u<ow;u++)for(var s=0;s<iw;s++){e[a++]=n;e[a++]=r;e[a++]=i;e[a++]=o}t.shadowIndex=a}function uw(e,t,n){for(var r=t.coreIndex,i=1;i<=ow;i++){e[r]=i;e[r+1]=n;e[r+3]=i+1;e[r+4]=n;e[r+6]=-i;e[r+7]=n;e[r+9]=-i;e[r+10]=n;e[r+12]=i+1;e[r+13]=n;e[r+15]=-(i+1);e[r+16]=n;r+=18}t.coreIndex=r}function sw(e,t,n,r,i,o,a,u){for(var s=n,l=r,f=t.positionIndex,c=0;c<ow;c++)for(var d=0;d<iw;d++){e[f++]=s;e[f++]=l;e[f++]=i;e[f++]=o;e[f++]=a;e[f++]=u}t.positionIndex=f}function lw(e,t,n,r,i){for(var o=t.colourIndex,a=0;a<ow;a++)for(var u=0;u<iw;u++){e[o++]=n[0];e[o++]=n[1];e[o++]=n[2];e[o++]=n[3]*i;e[o++]=r[0];e[o++]=r[1];e[o++]=r[2];e[o++]=r[3]*i}t.colourIndex=o}function fw(e,t,n,r,i,o,a,u,s,l,f,c,d,h,v,p){var g=l||[0,0,0,0];if(v||p.all){aw(e.shadowData,e,g[0],g[1],g[2],d);var m=u,y=s,b=c;if(i<0){m=s;y=u;b=-c}lw(e.colourData,e,m,y,h);uw(e.coreData,e,b);sw(e.positionData,e,t,n,r,o,a,f)}else p.positions&&sw(e.positionData,e,t,n,r,o,a,f)}function cw(e,t,n,r,i,o){var a=Hx(n);if(n.isDonut)e?nw(n.x,n.y,n.r,n.wbc,a,n.bw,.5,.5,t,n.a,r,i,o,n.sa,n.ea,!1,0):t.triangleBuffers.skip();else if(e){var u=Kx[n.ls]||1;fw(t.arcBuffers,n.x,n.y,n.r,n.off,n.sa,n.ea,n.wbc,n.wbc2||n.wbc,a,n.bw,n.flowVelocity,u,r,i,o)}else t.arcBuffers.skip()}var dw=65535,hw=ai;function vw(e,t,n){for(var r,i,o=4===t.xs.length,a=t.xs,u=a[0],s=a[1],l=a[2],f=a[3],c=t.ys,d=c[0],h=c[1],v=c[2],p=c[3],g=0,m=o?hw:hw/2,y=o?dw:Math.round(t.joinFraction*dw),b=(y/256|0)-128,x=y%256-128,w=2*(hw+1),A=2*(m+1),M=e.elementData,I=e.elementIntegerData,E=e.elementDataIndex,C=0;C<w;C++){if(C===A){u=(r=t.xs)[3],s=r[4],l=r[5],f=r[6];d=(i=t.ys)[3],h=i[4],v=i[5],p=i[6];g=2*m;m-=hw;b=((y=dw-y)/256|0)-128;x=y%256-128}M[E++]=u;M[E++]=d;M[E++]=s;M[E++]=h;M[E++]=l;M[E++]=v;M[E++]=f;M[E++]=p;M[E++]=n;var k=++E*Float32Array.BYTES_PER_ELEMENT;I[k++]=C-g;I[k++]=m;I[k++]=b;I[k++]=x;E+=4}e.elementDataIndex+=28*(hw+1)}function pw(e,t,n,r,i,o,a,u,s){for(var l,f,c=e.elementIndex,d=e.elementIndexIndex,h=e.elementMappingIndex,v=0;v<hw;v++){c[d++]=h;c[d++]=h+2;c[d++]=h+1;c[d++]=h+1;c[d++]=h+2;c[d++]=h+3;h+=2}
var p=n[0],g=n[1],m=n[2],y=n[3]*s,b=r[0],x=r[1],w=r[2],A=r[3]*s,M=i||[0,0,0],I=M[0],E=M[1],C=M[2],k=4===t.xs.length,S=t.xs,L=S[0],T=S[1],R=S[2],Z=S[3],B=t.ys,O=B[0],G=B[1],Y=B[2],F=B[3],D=0,P=k?hw:hw/2,z=k?dw:Math.round(t.joinFraction*dw),V=(z/256|0)-128,X=z%256-128,W=2*(hw+1),U=2*(P+1),N=e.elementData,j=e.elementIntegerData,K=e.elementDataIndex,H=0;for(v=0;v<W;v++){if(v===U){L=(l=t.xs)[3],T=l[4],R=l[5],Z=l[6];O=(f=t.ys)[3],G=f[4],Y=f[5],F=f[6];D=2*P;P-=hw;V=((z=dw-z)/256|0)-128;X=z%256-128}N[K++]=L;N[K++]=O;N[K++]=T;N[K++]=G;N[K++]=R;N[K++]=Y;N[K++]=Z;N[K++]=F;N[K++]=o;N[K++]=a;H=K*Float32Array.BYTES_PER_ELEMENT;j[H++]=v-D;j[H++]=P;j[H++]=V;j[H++]=X;j[H++]=p;j[H++]=g;j[H++]=m;j[H++]=y;j[H++]=b;j[H++]=x;j[H++]=w;j[H++]=A;j[H++]=I;j[H++]=E;j[H++]=C;j[H++]=u;K+=4}e.elementDataIndex+=28*(hw+1)}function gw(e,t,n,r,i,o){if(e&&n.bezier){var a=Kx[n.ls]||1,u=Hx(n);i||o.all?pw(t.bezierBuffers,n.bezier,n.wbc,n.wbc2||n.wbc,u,n.bw,n.flowVelocity,a,r):o.positions&&vw(t.bezierBuffers,n.bezier,n.bw);t.bezierBuffers.elementIndexIndex+=6*hw;t.bezierBuffers.elementMappingIndex+=2*(hw+1)}else t.bezierBuffers.skip()}function mw(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v=l||0;if(d||h.all){var p=Hx(e);zx(a.triangleBuffers,p);Px(a.triangleBuffers,o,s);Xx(a.triangleBuffers,t,n,r,i,v,e.anchorIndex,u,a.useAbsolutePosition);var g=r-t,m=i-n;Wx(a.triangleBuffers,g,m,0,0,g,m,g,m,c,0,-v,f,0)}else a.useAbsolutePosition&&Xx(a.triangleBuffers,t,n,r,i,v,e.anchorIndex,u,a.useAbsolutePosition)}function yw(e,t,n,r,i,o){var a=n.fi,u=n.bw>0;if(e){a&&mw(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,0,-1,i,o);if(u){var s=(Kx[n.bs]||0)>1?-3:-1;mw(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,0,s,i,o)}}else{a&&t.triangleBuffers.skip();u&&t.triangleBuffers.skip()}}function bw(e,t,n,r,i,o){var a=n.fi,u=n.bw>0;if(e){a&&mw(n,n.x1,n.y1,n.x2,n.y2,n.wfc,t,n.a,r,0,n.r,-1,i,o);if(u){var s=(Kx[n.bs]||0)>1?-3:-1;mw(n,n.x1,n.y1,n.x2,n.y2,n.wbc,t,n.a,r,n.bw,n.r,s,i,o)}}else{a&&t.triangleBuffers.skip();u&&t.triangleBuffers.skip()}}var xw=.109375;function ww(e,t,n,r,i,o,a,u){Wx(e,t,n,r,i,o,o,o,o,u,a,0,0,0)}function Aw(e,t,n,r,i,o,a,u,s){if(u.all||a||s){var l=xw,f=0;t.fs!==vn&&(l=pn/r*(t.fs/pn));for(var c=t.wmargin,d=t.fs*(t.pf/2),h=t.x1,v=t.y1+t.yOffset+d,p=0,g=n.length;p<g;p++){var m=n[p],y=r*l;zx(e,Ux);Px(e,t.wc,o);var b=m.width*l,x=0;m.textureBank<3&&(x=y*wx);Xx(e,h+f+c,v+y,h+(f+b)+c,v-x,0,t.anchorIndex,i,s);ww(e,m.u1,m.v1,m.u2,m.v2,y,m.colourComponent,m.textureBank);f+=b}}}function Mw(e,t,n,r,i,o,a,u){if(n.back)if(e){var s=n.fs*n.pf;mw(n,n.x1,n.y1,n.x2,n.y2+s,n.wbc,t,n.a,r,0,0,-4,i,o)}else t.triangleBuffers.skip();e?Aw(t.triangleBuffers,n,a,u,n.a,r,i,o,t.useAbsolutePosition):t.triangleBuffers.skipMany(a.length)}var Iw=5,Ew=3;function Cw(e,t,n,r,i){for(var o=t.shadowIndex,a=0;a<Ew;a++){e[o++]=n;e[o++]=r;e[o++]=i;e[o++]=Iw+a}t.shadowIndex=o}function kw(e,t){var n=t.coreIndex;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=1;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=0;e[n++]=1;t.coreIndex=n}function Sw(e,t,n,r,i,o,a,u){var s=t.positionIndex;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;e[s++]=n;e[s++]=r;e[s++]=i;e[s++]=o;e[s++]=a;e[s++]=u;t.positionIndex=s}function Lw(e,t,n,r,i,o,a){for(var u=t.colourIndex,s=0;s<Ew;s++){e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a;e[u++]=n;e[u++]=r;e[u++]=i;e[u++]=o*a}t.colourIndex=u}function Tw(e,t,n,r,i,o,a,u,s,l,f,c){var d=s||[0,0,0];(f||c.all)&&Cw(e.shadowData,e,d[0],d[1],d[2]);(c.colours||f||c.all)&&Lw(e.colourData,e,u[0],u[1],u[2],u[3],l);(f||c.all)&&kw(e.coreData,e);(c.positions||f||c.all)&&Sw(e.positionData,e,t,n,r,i,o,a)}function Rw(e,t,n,r,i,o,a,u,s,l,f,c){var d,h=e.elementData,v=e.elementIntegerData,p=e.elementDataIndex;if(f||c.all){var g=e.elementIndex,m=e.elementIndexIndex,y=e.elementMappingIndex;g[m]=y;g[m+1]=y+1;g[m+2]=y+2;d=s||[0,0,0,0]}e.elementIndexIndex+=3;e.elementMappingIndex+=3;for(var b=[[0,1,0],[1,0,0],[0,0,1]],x=0,w=0;w<3;w++){h[p]=t;h[p+1]=n;h[p+2]=r;h[p+3]=i;h[p+4]=o;h[p+5]=a;if(f||c.all){v[x=(p+10)*Float32Array.BYTES_PER_ELEMENT]=b[w][0];v[x+1]=b[w][1];v[x+2]=b[w][2];v[x+3]=w;v[x+4]=u[0];v[x+5]=u[1];v[x+6]=u[2];v[x+7]=u[3]*l;v[x+8]=u[0];v[x+9]=u[1];v[x+10]=u[2];v[x+11]=u[3]*l;v[x+12]=d[0];v[x+13]=d[1];v[x+14]=d[2];v[x+15]=Iw}e.elementDataIndex+=14;p=e.elementDataIndex}}function Zw(e,t,n,r,i,o,a,u,s,l,f,c){var d,h=e.elementData,v=e.elementIntegerData,p=e.elementDataIndex;if(f||c.all){var g=e.elementIndex,m=e.elementIndexIndex,y=e.elementMappingIndex;g[m]=y;g[m+1]=y+1;g[m+2]=y+2;d=s||[0,0,0,0]}e.elementIndexIndex+=3;e.elementMappingIndex+=3;var b=0;h[p]=t;h[p+1]=n;h[p+2]=r;h[p+3]=i;h[p+4]=o;h[p+5]=a;if(f||c.all){v[b=(p+6)*Float32Array.BYTES_PER_ELEMENT]=0;v[b+1]=1;v[b+2]=0;v[b+3]=Iw;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*l;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*l;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=0}e.elementDataIndex+=10;h[p=e.elementDataIndex]=t;h[p+1]=n;h[p+2]=r;h[p+3]=i;h[p+4]=o;h[p+5]=a;if(f||c.all){v[b=(p+6)*Float32Array.BYTES_PER_ELEMENT]=1;v[b+1]=0;v[b+2]=0;v[b+3]=Iw;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*l;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*l;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=1}e.elementDataIndex+=10;h[p=e.elementDataIndex]=t;h[p+1]=n;h[p+2]=r;h[p+3]=i;h[p+4]=o;h[p+5]=a;if(f||c.all){v[b=(p+6)*Float32Array.BYTES_PER_ELEMENT]=0;v[b+1]=0;v[b+2]=1;v[b+3]=Iw;v[b+4]=u[0];v[b+5]=u[1];v[b+6]=u[2];v[b+7]=u[3]*l;v[b+8]=u[0];v[b+9]=u[1];v[b+10]=u[2];v[b+11]=u[3]*l;v[b+12]=d[0];v[b+13]=d[1];v[b+14]=d[2];v[b+15]=2}e.elementDataIndex+=10}function Bw(e,t,n,r,i,o){var a=n.x1,u=n.y1,s=n.x2,l=n.y2,f=n.x3,c=n.y3,d=Hx(n);n.arrowhead===Ri.Line?Zw(t.lineBuffers,a,u,s,l,f,c,n.wfc,d,r,i,o):n.arrowhead===Ri.Arc?Tw(t.arcBuffers,a,u,s,l,f,c,n.wfc,d,r,i,o):n.arrowhead===Ri.Bezier&&Rw(t.bezierBuffers,a,u,s,l,f,c,n.wfc,d,r,i,o)}var Ow=3;function Gw(e,t,n,r,i,o,a,u,s,l,f,c,d,h){var v,p,g=t,m=n,y=r,b=i,x=o,w=a,A=f.positionIndex[e.anchorIndex],M=e.wsc||[0,0,0,0];if(h.all||h.shadow||d)for(p=0;p<Ow;p++){var I=l.triangleBuffers.shadowData,E=l.triangleBuffers.shadowIndex;I[E++]=M[0];I[E++]=M[1];I[E++]=M[2];I[E++]=0;l.triangleBuffers.shadowIndex=E}if(h.all||h.colours||d)for(p=0;p<Ow;p++){var C=l.triangleBuffers.colourData,k=l.triangleBuffers.colourIndex;C[k++]=u[0];C[k++]=u[1];C[k++]=u[2];C[k++]=u[3]*c;l.triangleBuffers.colourIndex=k}if(l.useAbsolutePosition&&e.anchorIndex>-1){var S=f.anchorBuffer.getData(),L=S[A],T=S[A+1],R=S[A+2];if(R){var Z=Math.sin(-R),B=Math.cos(-R),O=g*B+m*Z,G=m*B-g*Z;g=O;m=G;G=b*B-y*Z;y=O=y*B+b*Z;b=G;G=w*B-x*Z;x=O=x*B+w*Z;w=G}g+=L;m+=T;y+=L;b+=T;x+=L;w+=T;A=-1}if(h.all||d||l.useAbsolutePosition){v=l.triangleBuffers.positionIndex;var Y=l.triangleBuffers.positionData;Y[v++]=g;Y[v++]=m;Y[v++]=0;Y[v++]=A;Y[v++]=y;Y[v++]=b;Y[v++]=0;Y[v++]=A;Y[v++]=x;Y[v++]=w;Y[v++]=0;Y[v++]=A;l.triangleBuffers.positionIndex=v}if(h.all||h.textures||d){v=l.triangleBuffers.textureIndex;var F=l.triangleBuffers.textureData;F[v++]=0;F[v++]=1;F[v++]=0;F[v++]=0;F[v++]=s;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=1;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=s;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=1;F[v++]=0;F[v++]=s;F[v++]=0;F[v++]=0;F[v++]=0;F[v++]=0;l.triangleBuffers.textureIndex=v}}function Yw(e,t,n,r,i,o){if(n.arrowhead)Bw(e,t,n,r,i,o);else{n.fi&&Gw(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wfc,-2,t,n.a,r,i,o);n.bw>0&&Gw(n,n.x1,n.y1,n.x2,n.y2,n.x3,n.y3,n.wbc,-2,t,n.a,r,i,o)}}var Fw=4,Dw=4,Pw=9,zw=4;function Vw(e){var t,n=e.gl,r=Fw*Float32Array.BYTES_PER_ELEMENT,i=Pw*Float32Array.BYTES_PER_ELEMENT,o=zw*Uint8Array.BYTES_PER_ELEMENT,a=Dw*Uint8Array.BYTES_PER_ELEMENT;if(!n.triangleShader){var u=Oy(n,"triangle-vertex",n.VERTEX_SHADER),s=Oy(n,"triangle-fragment",n.FRAGMENT_SHADER);t=Ry(n,u,s);n.triangleShader={vertexShader:u,fragmentShader:s,program:t}}t=n.triangleShader.program;var l={transform:n.getUniformLocation(t,"u_transform"),textures:n.getUniformLocation(t,"u_image[0]"),resolution:n.getUniformLocation(t,"u_resolution"),hitTest:n.getUniformLocation(t,"u_hitTest"),shadowType:n.getUniformLocation(t,"u_shadowType"),zoom:n.getUniformLocation(t,"u_zoom"),anchorTexture:n.getUniformLocation(t,"u_anchorTexture"),anchorTextureSize:n.getUniformLocation(t,"u_anchorTextureSize"),useAnchor:n.getUniformLocation(t,"u_useAnchor"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")},f={position:n.getAttribLocation(t,"a_position"),anchor:n.getAttribLocation(t,"a_anchor"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),circleRadius:n.getAttribLocation(t,"a_circleRadius"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),textCoord:n.getAttribLocation(t,"a_texCoord"),vertexIndex:n.getAttribLocation(t,"a_vertexIndex"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),textureBank:n.getAttribLocation(t,"a_textureBank")};function c(e,r,i,o,a,u,s,l,f,c,d,y,w){n.useProgram(t);x(r,u,s,l,f,0|e.shadowType,c,d,e.useView,w);b(e);v(e);p(e);g(e);m(e,y);e.triangleBuffers.needsResize=!1;h(i,o,a,c);var A=3*e.triangleBuffers.numOfTriangles;A>0&&n.drawArrays(n.TRIANGLES,0,A)}function d(){Zy(n,t)}function h(e,t,n,r){var i,o;for(i=0,o=e.atlases.length;i<o;i++)y(e.atlases[i],i);t&&y(t,3);for(i=0,o=n.length;i<o;i++)y(n[i],i+4);y(r,7)}function v(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.shadowData));n.enableVertexAttribArray(f.shadowColour);n.enableVertexAttribArray(f.vertexIndex);n.vertexAttribPointer(f.shadowColour,3,n.UNSIGNED_BYTE,!1,a,0);n.vertexAttribPointer(f.vertexIndex,1,n.UNSIGNED_BYTE,!1,a,3)}function p(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.textureBuffer);(e.rebuildOptions.textures||e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.textureData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.textureData));n.enableVertexAttribArray(f.textCoord);n.enableVertexAttribArray(f.textureBank);n.enableVertexAttribArray(f.circleRadius);n.enableVertexAttribArray(f.startAngle);n.enableVertexAttribArray(f.endAngle);n.vertexAttribPointer(f.textCoord,4,n.FLOAT,!1,i,0);n.vertexAttribPointer(f.textureBank,2,n.FLOAT,!1,i,16);n.vertexAttribPointer(f.circleRadius,1,n.FLOAT,!1,i,24);n.vertexAttribPointer(f.startAngle,1,n.FLOAT,!1,i,28);n.vertexAttribPointer(f.endAngle,1,n.FLOAT,!1,i,32)}function g(e){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.colourBuffer);(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.colourData));n.enableVertexAttribArray(f.colour);n.vertexAttribPointer(f.colour,4,n.UNSIGNED_BYTE,!1,o,0)}function m(e,t){n.bindBuffer(n.ARRAY_BUFFER,e.triangleBuffers.positionBuffer);(e.rebuildOptions.all||e.alwaysUpdate||e.rebuildOptions.positions&&t)&&(e.triangleBuffers.needsResize?n.bufferData(n.ARRAY_BUFFER,e.triangleBuffers.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,e.triangleBuffers.positionData));n.enableVertexAttribArray(f.position);n.enableVertexAttribArray(f.width);n.enableVertexAttribArray(f.anchor);n.vertexAttribPointer(f.position,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(f.width,1,n.FLOAT,!1,r,8);n.vertexAttribPointer(f.anchor,1,n.FLOAT,!1,r,12)}function y(e,t){n.activeTexture(n["TEXTURE"+t]);if(!e.texture||e.rebuild){e.texture=n.createTexture();n.bindTexture(n.TEXTURE_2D,e.texture);n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);if(e.data){n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e.size,e.size,0,n.LUMINANCE,n.FLOAT,e.data);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST);e.data=void 0}else{var r=e.alphaChannel?n.RGBA:n.RGB;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);n.texImage2D(n.TEXTURE_2D,0,r,r,n.UNSIGNED_BYTE,e.img);n.generateMipmap(n.TEXTURE_2D);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR_MIPMAP_LINEAR);n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR);e.img=void 0}e.rebuild=!1}else n.bindTexture(n.TEXTURE_2D,e.texture)}function b(e){e.triangleBuffers.positionBuffer||(e.triangleBuffers.positionBuffer=n.createBuffer());e.triangleBuffers.textureBuffer||(e.triangleBuffers.textureBuffer=n.createBuffer());e.triangleBuffers.colourBuffer||(e.triangleBuffers.colourBuffer=n.createBuffer());e.triangleBuffers.shadowBuffer||(e.triangleBuffers.shadowBuffer=n.createBuffer())}function x(e,t,r,i,o,a,u,s,f,c){n.uniform3f(l.resolution,t,r,i);n.uniform1f(l.hitTest,o?1:0);n.uniform1iv(l.textures,[0,1,2,3,4,5,6]);n.uniformMatrix4fv(l.transform,!1,e.get());n.uniform1f(l.shadowType,a);n.uniform1f(l.zoom,e.getZoomLevel());n.uniform1f(l.viewIndependent,f?0:1);n.uniform1i(l.anchorTexture,7);n.uniform1f(l.anchorTextureSize,u.size);n.uniform1i(l.useAnchor,s?1:0);n.uniform1f(l.adaptiveStyling,c&&c.zoom&&c.zoom.adaptiveStyling?1:0)}return{drawItems:c,finish:d}}var Xw=10;function Ww(e){var t,n=e,r=Xw*Float32Array.BYTES_PER_ELEMENT;if(!n.lineShader){var i=Oy(n,"line-vertex",n.VERTEX_SHADER),o=Oy(n,"line-fragment",n.FRAGMENT_SHADER);t=Ry(n,i,o);n.lineShader={vertexShader:i,fragmentShader:o,program:t}}t=n.lineShader.program;n.getExtension("OES_standard_derivatives");n.getExtension("OES_element_index_uint");var a={position1:n.getAttribLocation(t,"a_position1"),position2:n.getAttribLocation(t,"a_position2"),position3:n.getAttribLocation(t,"a_position3"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),vertexInfo:n.getAttribLocation(t,"a_vertexInfo"),shadowColour:n.getAttribLocation(t,"a_hitTestColour"),index:n.getAttribLocation(t,"a_index")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),viewIndependent:n.getUniformLocation(t,"u_viewIndependent"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function s(){Zy(n,t)}function l(e,r,i,o,a,u,s,l,g){n.useProgram(t);p();f(i,o,a,u,s,0|e.shadowType,e.useView,l,g);c(r);h(e,r);r.needsResize=!1;d(r);v(r);p()}function f(e,t,r,i,o,a,s,l,f){n.uniform3f(u.resolution,t,r,i);n.uniformMatrix4fv(u.transform,!1,e.get());n.uniform1f(u.hitTest,o?1:0);n.uniform1f(u.zoom,e.getZoomLevel());n.uniform1f(u.shadowType,a);n.uniform1f(u.viewIndependent,s?0:1);n.uniform1f(u.adaptiveStyling,l&&l.zoom&&l.zoom.adaptiveStyling?1:0);var c=0;o||(c=(1-l.linkStyle.transition)/2);n.uniform1f(u.gradientStartFraction,c);n.uniform1f(u.time,f)}function c(e){e.elementBuffer||(e.elementBuffer=n.createBuffer());e.indexBuffer||(e.indexBuffer=n.createBuffer())}function d(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer);n.enableVertexAttribArray(a.position1);n.enableVertexAttribArray(a.position2);n.enableVertexAttribArray(a.position3);n.enableVertexAttribArray(a.vertexInfo);n.enableVertexAttribArray(a.colour);n.enableVertexAttribArray(a.colour2);n.enableVertexAttribArray(a.shadowColour);n.enableVertexAttribArray(a.index);n.vertexAttribPointer(a.position1,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(a.position2,2,n.FLOAT,!1,r,8);n.vertexAttribPointer(a.position3,2,n.FLOAT,!1,r,16);n.vertexAttribPointer(a.vertexInfo,4,n.UNSIGNED_BYTE,!1,r,24);n.vertexAttribPointer(a.colour,4,n.UNSIGNED_BYTE,!1,r,28);n.vertexAttribPointer(a.colour2,4,n.UNSIGNED_BYTE,!1,r,32);n.vertexAttribPointer(a.shadowColour,3,n.UNSIGNED_BYTE,!1,r,36);n.vertexAttribPointer(a.index,1,n.UNSIGNED_BYTE,!1,r,39)}function h(e,t){if(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions||e.rebuildOptions.colours||e.rebuildOptions.textures||e.rebuildOptions.shadow){n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer);t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.elementData);n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer);if(t.needsResize){n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW);t.needsResize=!1}else n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.elementIndex);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}function v(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=6*e.numOfLines+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}function p(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:l,finish:s}}var Uw=6,Nw=3,jw=4,Kw=8,Hw=Uw*Float32Array.BYTES_PER_ELEMENT,_w=Nw*Float32Array.BYTES_PER_ELEMENT,Jw=jw*Uint8Array.BYTES_PER_ELEMENT,Qw=Kw*Uint8Array.BYTES_PER_ELEMENT;function qw(e){var t,n=e;if(!n.arcShader){var r=Oy(n,"line-arc-vertex",n.VERTEX_SHADER),i=Oy(n,"line-fragment",n.FRAGMENT_SHADER);t=Ry(n,r,i);n.arcShader={vertexShader:r,fragmentShader:i,program:t}}t=n.arcShader.program;var o={position:n.getAttribLocation(t,"a_position"),radius:n.getAttribLocation(t,"a_radius"),startAngle:n.getAttribLocation(t,"a_startAngle"),endAngle:n.getAttribLocation(t,"a_endAngle"),width:n.getAttribLocation(t,"a_width"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),core:n.getAttribLocation(t,"a_core"),type:n.getAttribLocation(t,"a_lineType"),shadowColour:n.getAttribLocation(t,"a_hitTestColour")},a={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function u(){Zy(n,t)}function s(e,r,i,o,a,u,s,g){n.useProgram(t);l(r,i,o,a,u,0|e.shadowType,s,g);f(e);c(e);d(e);v(e);h(e);e.arcBuffers.needsResize=!1;e.arcBuffers.totalnumOfVertices>0&&n.drawArrays(n.TRIANGLES,0,e.arcBuffers.totalnumOfVertices);p()}function l(e,t,r,i,o,u,s,l){n.uniform3f(a.resolution,t,r,i);n.uniformMatrix4fv(a.transform,!1,e.get());n.uniform1f(a.hitTest,o?1:0);n.uniform1f(a.zoom,e.getZoomLevel());n.uniform1f(a.shadowType,u);n.uniform1f(a.adaptiveStyling,s&&s.zoom&&s.zoom.adaptiveStyling?1:0);var f=0;o||(f=(1-s.linkStyle.transition)/2);n.uniform1f(a.gradientStartFraction,f);n.uniform1f(a.time,l)}function f(e){e.arcBuffers.positionBuffer||(e.arcBuffers.positionBuffer=n.createBuffer());e.arcBuffers.colourBuffer||(e.arcBuffers.colourBuffer=n.createBuffer());e.arcBuffers.shadowBuffer||(e.arcBuffers.shadowBuffer=n.createBuffer());e.arcBuffers.coreBuffer||(e.arcBuffers.coreBuffer=n.createBuffer())}function c(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.colourBuffer);(e.rebuildOptions.colours||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.colourData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.colourData));n.enableVertexAttribArray(o.colour);n.enableVertexAttribArray(o.colour2);n.vertexAttribPointer(o.colour,4,n.UNSIGNED_BYTE,!1,Qw,0);n.vertexAttribPointer(o.colour2,4,n.UNSIGNED_BYTE,!1,Qw,4)}function d(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.shadowBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.shadowData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.shadowData));n.enableVertexAttribArray(o.shadowColour);n.enableVertexAttribArray(o.type);n.vertexAttribPointer(o.shadowColour,3,n.UNSIGNED_BYTE,!1,Jw,0);n.vertexAttribPointer(o.type,1,n.UNSIGNED_BYTE,!1,Jw,3)}function h(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.coreBuffer);(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.shadow)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.coreData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.coreData));n.enableVertexAttribArray(o.core);n.vertexAttribPointer(o.core,3,n.FLOAT,!1,_w,0)}function v(e){var t=e.arcBuffers;n.bindBuffer(n.ARRAY_BUFFER,t.positionBuffer);(e.rebuildOptions.positions||e.alwaysUpdate||e.rebuildOptions.all)&&(t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.positionData,n.STATIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.positionData));n.enableVertexAttribArray(o.position);n.enableVertexAttribArray(o.radius);n.enableVertexAttribArray(o.startAngle);n.enableVertexAttribArray(o.endAngle);n.enableVertexAttribArray(o.width);n.vertexAttribPointer(o.position,2,n.FLOAT,!1,Hw,0);n.vertexAttribPointer(o.radius,1,n.FLOAT,!1,Hw,8);n.vertexAttribPointer(o.startAngle,1,n.FLOAT,!1,Hw,12);n.vertexAttribPointer(o.endAngle,1,n.FLOAT,!1,Hw,16);n.vertexAttribPointer(o.width,1,n.FLOAT,!1,Hw,20)}function p(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:s,finish:u}}var $w=14;function eA(e){var t,n=e,r=$w*Float32Array.BYTES_PER_ELEMENT;if(!n.bezierShader){var i=Oy(n,"line-bezier-vertex",n.VERTEX_SHADER),o=Oy(n,"line-fragment",n.FRAGMENT_SHADER);t=Ry(n,i,o);n.bezierShader={vertexShader:i,fragmentShader:o,program:t}}t=n.bezierShader.program;n.getExtension("OES_element_index_uint");var a={p0:n.getAttribLocation(t,"a_p0"),p1:n.getAttribLocation(t,"a_p1"),p2:n.getAttribLocation(t,"a_p2"),p3:n.getAttribLocation(t,"a_p3"),width:n.getAttribLocation(t,"a_width"),flowVelocity:n.getAttribLocation(t,"a_flowVelocity"),colour:n.getAttribLocation(t,"a_colour"),colour2:n.getAttribLocation(t,"a_colour2"),core:n.getAttribLocation(t,"a_core"),type:n.getAttribLocation(t,"a_lineType"),shadowColour:n.getAttribLocation(t,"a_hitTestColour")},u={hitTest:n.getUniformLocation(t,"u_hitTest"),zoom:n.getUniformLocation(t,"u_zoom"),transform:n.getUniformLocation(t,"u_transform"),resolution:n.getUniformLocation(t,"u_resolution"),shadowType:n.getUniformLocation(t,"u_shadowType"),gradientStartFraction:n.getUniformLocation(t,"u_gradientStartFraction"),time:n.getUniformLocation(t,"u_time"),adaptiveStyling:n.getUniformLocation(t,"u_adaptiveStyling")};function s(){Zy(n,t)}function l(e,r,i,o,a,u,s,l,g){n.useProgram(t);p();f(i,o,a,u,s,0|e.shadowType,l,g);c(r);h(e,r);r.needsResize=!1;d(r);v(r);p()}function f(e,t,r,i,o,a,s,l){n.uniform3f(u.resolution,t,r,i);n.uniformMatrix4fv(u.transform,!1,e.get());n.uniform1f(u.hitTest,o?1:0);n.uniform1f(u.zoom,e.getZoomLevel());n.uniform1f(u.shadowType,a);n.uniform1f(u.adaptiveStyling,s&&s.zoom&&s.zoom.adaptiveStyling?1:0);var f=0;o||(f=(1-s.linkStyle.transition)/2);n.uniform1f(u.gradientStartFraction,f);n.uniform1f(u.time,l)}function c(e){e.elementBuffer||(e.elementBuffer=n.createBuffer());e.indexBuffer||(e.indexBuffer=n.createBuffer())}function d(e){n.bindBuffer(n.ARRAY_BUFFER,e.elementBuffer);n.enableVertexAttribArray(a.p0);n.enableVertexAttribArray(a.p1);n.enableVertexAttribArray(a.p2);n.enableVertexAttribArray(a.p3);n.enableVertexAttribArray(a.width);n.enableVertexAttribArray(a.flowVelocity);n.enableVertexAttribArray(a.colour);n.enableVertexAttribArray(a.colour2);n.enableVertexAttribArray(a.core);n.enableVertexAttribArray(a.shadowColour);n.enableVertexAttribArray(a.type);n.vertexAttribPointer(a.p0,2,n.FLOAT,!1,r,0);n.vertexAttribPointer(a.p1,2,n.FLOAT,!1,r,8);n.vertexAttribPointer(a.p2,2,n.FLOAT,!1,r,16);n.vertexAttribPointer(a.p3,2,n.FLOAT,!1,r,24);n.vertexAttribPointer(a.width,1,n.FLOAT,!1,r,32);n.vertexAttribPointer(a.flowVelocity,1,n.FLOAT,!1,r,36);n.vertexAttribPointer(a.core,4,n.BYTE,!1,r,40);n.vertexAttribPointer(a.colour,4,n.UNSIGNED_BYTE,!1,r,44);n.vertexAttribPointer(a.colour2,4,n.UNSIGNED_BYTE,!1,r,48);n.vertexAttribPointer(a.shadowColour,3,n.UNSIGNED_BYTE,!1,r,52);n.vertexAttribPointer(a.type,1,n.UNSIGNED_BYTE,!1,r,55)}function h(e,t){if(e.alwaysUpdate||e.rebuildOptions.all||e.rebuildOptions.positions||e.rebuildOptions.colours||e.rebuildOptions.textures||e.rebuildOptions.shadow){n.bindBuffer(n.ARRAY_BUFFER,t.elementBuffer);t.needsResize?n.bufferData(n.ARRAY_BUFFER,t.elementData,n.DYNAMIC_DRAW):n.bufferSubData(n.ARRAY_BUFFER,0,t.elementData);n.bindBuffer(n.ARRAY_BUFFER,null);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer);if(t.needsResize){n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.elementIndex,n.DYNAMIC_DRAW);t.needsResize=!1}else n.bufferSubData(n.ELEMENT_ARRAY_BUFFER,0,t.elementIndex);n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}}function v(e){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.indexBuffer);var t=e.totalnumOfVertices+3*e.numOfArrowheads;t>0&&n.drawElements(n.TRIANGLES,t,n.UNSIGNED_INT,0)}function p(){n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null);n.bindBuffer(n.ARRAY_BUFFER,null)}return{drawItems:l,finish:s}}var tA=4;function nA(e,t,n){var r,i,o={},a={},u="",s="",l={},f={textAtlas:!1,fontIcons:!1,imageAtlas:!1};function c(t,r){t.clearTextureAtlas(e.imageAtlases);e.imageAtlases=Em(n,r)}function d(t,n,o,a){i=a.isFloatingPointSupported(o._rendering.disableFloatTexture);if(n.all){e.layersToDraw.length=0;r=Qn(e.canvas);f.textAtlas=!1;f.fontIcons=!1;f.imageAtlas=!1}var u=o.linkStyle,s=!(!u||"along"!==u.glyphs);t.forEach((function(t){var r=Z(e.allLayers,t,!!n.all);n.all&&e.layersToDraw.push(r);r.useAbsolutePosition=!i&&(n.all||n.positions||t.alwaysUpdate)||s&&r.id.indexOf("LINK")>-1;p(r,n,t.fbAlpha);if(g(n,t.alwaysUpdate)||r.useAbsolutePosition){var a=t.primitives,u=t.numOfPrimitives;h(o);v(o);if(n.all||t.alwaysUpdate){var l=r.lineBuffers,c=r.arcBuffers,d=r.triangleBuffers,y=r.bezierBuffers;m(l,c,y,d);for(var b=0;b<u;b++){R(t.primitives[b],l,c,y,d)}}if(!f.textAtlas&&!f.fontIcons&&!f.imageAtlas){E(r);w(a,u,r)}}}));A(a,o._rendering.showTextAtlas);M(a,o._rendering.showFontIconAtlas);I(a,o._rendering.showImageAtlas);if(f.textAtlas||f.fontIcons||f.imageAtlas){f.fontIcons=!1;f.textAtlas=!1;f.imageAtlas=!1;n.all=!0;d(t,n,o,a)}l={}}function h(e){V(e.fontFamily)&&(e.fontFamily="sans-serif");if(u!==e.fontFamily||null===u){u=e.fontFamily;f.textAtlas=!0}l[u]=!0;a[u]=!0}function v(e){if(e.iconFontFamily&&s!==e.iconFontFamily){s=e.iconFontFamily;f.fontIcons=!0}}function p(e,t,n){e.fbAlpha=n;e.rebuildOptions={all:t.all,colours:t.colours,textures:t.textures,shadow:t.shadow,positions:t.positions}}function g(e,t){return e.all||e.textures||e.positions||e.shadow||e.colours||t}function m(e,t,n,r){t.numOfTriangles=0;e.numOfLines=0;e.numOfArrowheads=0;r.numOfTriangles=0;n.numOfBeziers=0;n.numOfArrowheads=0}var y={A:cw,B:gw,L:tw,I:b,TR:Yw,R:yw,RR:bw,C:rw,T:x};function b(e,t,r,i,o,a){Jx(e,t,r,i,o,a,n)}function x(n,i,a,s,l,c){if(c.all||l||i.useAbsolutePosition)if(a.isfi)Qx(n,i,a,s,l,c,o);else{Mw(n,i,a,s,l,c,t.getGlyphsFromText(a.t,a.ff,u,a.bo,f,r,e.textAtlas),e.textAtlas.fontSize)}}function w(t,n,r){for(var i,o=r.rebuildOptions,a=r.alwaysUpdate,u=0;u<n;u++){var s=1;(i=t[u]).a.bg&&(s*=e.alpha.background);i.a.gh&&(s*=e.alpha.ghost);var l=jx(i,a,o);y[i.p](l,r,i,s,a,o)}}function A(n,r){if(f.textAtlas||r){e.textAtlas&&n.clearTextureAtlas(e.textAtlas.atlases);e.textAtlas=Ix(l,t,r);a=l}}function M(t,n){if(f.fontIcons||!e.fontIconAtlas||n){t.clearTextureAtlas(e.fontIconAtlas);e.fontIconAtlas=Yx(o,s,n)}}function I(e,t){(f.imageAtlas||t)&&c(e,t)}function E(e){k(e.lineBuffers);S(e.arcBuffers);L(e.bezierBuffers);T(e.triangleBuffers)}function C(e,t,n){e.needsResize=e.needsResize||!t||n!==t.length}function k(e){e.elementIndexIndex=0;e.elementMappingIndex=0;e.elementDataIndex=0;e.elementIntegerDataIndex=0;var t=e.numOfLines*Xw*4;t+=e.numOfArrowheads*Xw*3;var n=6*e.numOfLines+3*e.numOfArrowheads;C(e,e.elementData,t);C(e,e.elementIndex,n);if(e.needsResize){e.elementData=new Float32Array(t);e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT);e.elementIndex=new Uint32Array(n)}}function S(e){e.positionIndex=0;e.colourIndex=0;e.shadowIndex=0;e.coreIndex=0;e.totalnumOfVertices=3*e.numOfTriangles;C(e,e.positionData,e.totalnumOfVertices*Uw);t();n();r();i();function t(){var t=e.totalnumOfVertices*Uw;e.needsResize&&(e.positionData=new Float32Array(t))}function n(){var t=e.totalnumOfVertices*Kw;e.needsResize&&(e.colourData=new Uint8Array(t))}function r(){var t=e.totalnumOfVertices*jw;e.needsResize&&(e.shadowData=new Uint8Array(t))}function i(){var t=e.totalnumOfVertices*Nw;e.needsResize&&(e.coreData=new Float32Array(t))}}function L(e){e.elementIndexIndex=0;e.elementMappingIndex=0;e.elementDataIndex=0;e.elementIntegerDataIndex=0;e.totalnumOfVertices=e.numOfBeziers*hw*6;var t=e.numOfBeziers*(hw+1)*2*$w;t+=e.numOfArrowheads*$w*3;var n=e.totalnumOfVertices+3*e.numOfArrowheads;C(e,e.elementData,t);C(e,e.elementIndex,n);if(e.needsResize){e.elementData=new Float32Array(t);e.elementIntegerData=new Uint8Array(e.elementData.buffer,0,e.elementData.length*Float32Array.BYTES_PER_ELEMENT);e.elementIndex=new Uint32Array(n)}}function T(e){var t=3;e.positionIndex=0;e.colourIndex=0;e.textureIndex=0;e.shadowIndex=0;e.totalnumOfVertices=e.numOfTriangles*t;var n=e.totalnumOfVertices*Fw;C(e,e.positionData,n);r();i();o();a();function r(){e.needsResize&&(e.positionData=new Float32Array(e.totalnumOfVertices*Fw))}function i(){e.needsResize&&(e.colourData=new Uint8Array(e.totalnumOfVertices*zw))}function o(){e.needsResize&&(e.textureData=new Float32Array(e.totalnumOfVertices*Pw))}function a(){e.needsResize&&(e.shadowData=new Uint8Array(e.totalnumOfVertices*Dw))}}function R(t,n,i,u,s){switch(t.p){case hn.arc:t.isDonut?s.numOfTriangles+=2:i.numOfTriangles+=2*tA;break;case hn.bezier:t.bezier&&(u.numOfBeziers+=1);break;case hn.line:n.numOfLines+=1;break;case hn.circle:t.bw>0&&(s.numOfTriangles+=2);t.fi&&(s.numOfTriangles+=2);break;case hn.rect:case hn.roundrect:t.fi&&(s.numOfTriangles+=2);t.bw>0&&(s.numOfTriangles+=2);break;case hn.text:var c=t.t,d=e.stringSplitter.unicodeAwareCharacters(c),h=d.length;if(t.isfi){var v=c+(t.ff||"");s.numOfTriangles+=2
;if(!o[v]){f.fontIcons=!0;o[v]={t:c,ff:t.ff}}}else{if(t.ff){l[t.ff]=!0;if(!a[t.ff]){f.textAtlas=!0;a[t.ff]=!0}}t.back&&(s.numOfTriangles+=2);r&&(h=ot(d,c).result.length);s.numOfTriangles+=2*h}break;case hn.triangle:if(t.arrowhead>0)t.arrowhead===Ri.Line?n.numOfArrowheads++:t.arrowhead===Ri.Bezier?u.numOfArrowheads++:i.numOfTriangles++;else{t.fi&&s.numOfTriangles++;t.bw>0&&s.numOfTriangles++}break;case"I":s.numOfTriangles+=2}}function Z(e,t,n){var r=e.get(t.id);if(r&&n)rA(r,t);else if(!r){r=iA(t);e.set(t.id,r)}return r}return{generate:d,updateImageTextures:c}}function rA(e,t){e.useFramebuffer=t.useFramebuffer;e.drawFramebuffer=t.drawFramebuffer;e.framebuffer=null;e.renderbuffer=null;e.framebufferTexture=null;e.fbAlpha=t.fbAlpha;e.useView=t.useView;e.shadowType=t.shadowType;e.rebuildOptions={};e.alwaysUpdate=t.alwaysUpdate;e.blatOverview=t.blatOverview;e.numOfPrimitives=t.numOfPrimitives;e.primitives=t.primitives;e.overview=t.overview;e.useAbsolutePosition=!1}function iA(e){var t={triangleBuffers:{colourIndex:0,needsResize:!1,numOfTriangles:0,positionIndex:0,shadowIndex:0,textureIndex:0,totalnumOfVertices:0,skip:function(){t.triangleBuffers.positionIndex+=6*Fw},skipMany:function(e){t.triangleBuffers.positionIndex+=6*Fw*e}},lineBuffers:{numOfLines:0,numOfArrowheads:0,needsResize:!1,elementDataIndex:0,elementDataIndexIndex:0,elementIndexIndex:0,elementIntegerDataIndex:0,elementMappingIndex:0,skip:function(){t.lineBuffers.elementDataIndex+=4*Xw}},arcBuffers:{colourIndex:0,coreIndex:0,numOfTriangles:0,needsResize:!1,positionIndex:0,shadowIndex:0,totalnumOfVertices:0,skip:function(){t.arcBuffers.positionIndex+=6*Uw*ow}},bezierBuffers:{elementDataIndex:0,elementIndexIndex:0,elementIntegerDataIndex:0,elementMappingIndex:0,numOfBeziers:0,totalnumOfVertices:0,numOfArrowheads:0,needsResize:!1,skip:function(){t.bezierBuffers.elementDataIndex+=2*$w*(1+hw)}},id:e.id,useFramebuffer:e.useFramebuffer,drawFramebuffer:e.drawFramebuffer,framebuffer:null,renderbuffer:null,framebufferTexture:null,fbAlpha:e.fbAlpha,useView:e.useView,shadowType:e.shadowType,rebuildOptions:{},alwaysUpdate:e.alwaysUpdate,blatOverview:e.blatOverview,numOfPrimitives:e.numOfPrimitives,primitives:e.primitives,overview:e.overview,useAbsolutePosition:!1};return t}function oA(e){var t,n=e;if(!n.rttShader){var r=Oy(n,"renderToTexture-vertex",n.VERTEX_SHADER),i=Oy(n,"renderToTexture-fragment",n.FRAGMENT_SHADER);t=Ry(n,r,i);n.rttShader={vertexShader:r,fragmentShader:i,program:t}}t=n.rttShader.program;var o=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,-1,1,0,1,1,-1,1,0,1,1,1,1]),a=n.createBuffer(),u={position:n.getAttribLocation(t,"a_position"),textCoord:n.getAttribLocation(t,"a_texCoord")},s={globalAlpha:n.getUniformLocation(t,"u_globalAlpha"),backgroundColour:n.getUniformLocation(t,"u_backgroundColour"),textures:n.getUniformLocation(t,"u_image")};function l(){Zy(n,t)}function f(e,r,i,a){n.useProgram(t);h(e,a);c(i||o);d(r,0);n.drawArrays(n.TRIANGLES,0,6)}function c(e){n.bindBuffer(n.ARRAY_BUFFER,a);n.bufferData(n.ARRAY_BUFFER,e,n.STATIC_DRAW);n.enableVertexAttribArray(u.position);n.enableVertexAttribArray(u.textCoord);n.vertexAttribPointer(u.position,2,n.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0);n.vertexAttribPointer(u.textCoord,2,n.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,8)}function d(e,t){n.activeTexture(n["TEXTURE"+t]);n.bindTexture(n.TEXTURE_2D,e)}function h(e,t){void 0===t&&(t=new Uint8Array([0,0,0,0]));n.uniform1f(s.globalAlpha,e);n.uniform4f(s.backgroundColour,t[0],t[1],t[2],t[3])}return{drawItems:f,finish:l}}function aA(e){var t,n,r,i,o,a,u=e.canvas,s=e.framebuffers,l=Z(),f=Ww(l),c=qw(l),d=eA(l),h=Vw(e),v=oA(l),p=null,g=new Uint8Array(4),m=l.getParameter(l.MAX_RENDERBUFFER_SIZE);function y(e){return!0!==e&&!!l.getExtension("OES_texture_float")}function b(t){w();c.finish();d.finish();f.finish();h.finish();e.imageAtlases.forEach((function(e){N(e)}));e.textAtlas&&A(e.textAtlas.atlases);N(e.fontIconAtlas);e.layersToDraw=[];e.allLayers=new Map;l.flush();l.finish();if(t){l.deleteProgram(l.arcShader.program);l.deleteProgram(l.lineShader.program);l.deleteProgram(l.rttShader.program);l.deleteProgram(l.triangleShader.program);Object.keys(e).forEach((function(t){delete e[t]}))}l=void 0;e.gl=void 0;f=void 0;c=void 0;d=void 0;h=void 0;v=void 0}function x(e){l.deleteFramebuffer(e.framebuffer);l.deleteRenderbuffer(e.renderbuffer);l.deleteTexture(e.texture)}function w(){H(e.framebuffers).forEach(x);e.framebuffers={};s=e.framebuffers}function A(e){e&&(Array.isArray(e)?e.forEach(N):N(e))}var M={data:new Float32Array(4),size:2,rebuild:!1};function I(t,s,f,c,d,h,v,p,g,m){n=u.clientWidth;r=u.clientHeight;a=g;var y=u.width/n;i=l.drawingBufferWidth;o=l.drawingBufferHeight;var b=e.layersToDraw,x=G(t),w=performance.now();e.view=t;if(a&&(m.positions||m.all)){M.rebuild=!0;M.size=p.getTextureSize();M.data=p.getData()}if(0===d.length){d.push(S());d.push(S());d.push(S())}var A=!1,I=h._showShadowCanvas;X();l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight);l.clear(l.COLOR_BUFFER_BIT);for(var E=0,C=b.length;E<C;E++){var L=b[E];if(h.overview&&h.overview.shown&&L.blatOverview&&s)k(s,f,c,d,h,w);else{if(!(v&&!L.useView)){L.drawFramebuffer&&(A=!0);R(L.drawFramebuffer);Y(L,x,n,r,y,f,c,d,h._showShadowCanvas,h,w);W(L)}if(L.useFramebuffer&&A){A=!1;X();O(L.useFramebuffer,I?1:L.fbAlpha);R(L.useFramebuffer);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT)}}}U()}function E(a,s){n=u.clientWidth;r=u.clientHeight;var f=u.width/n;i=l.drawingBufferWidth;o=l.drawingBufferHeight;if(e.layersToDraw.length>0){var c=G(e.view),d=i/u.clientWidth,h=a*d,v=o-s*d;R("shadow");l.viewport(0,0,l.drawingBufferWidth,l.drawingBufferHeight);l.clear(l.COLOR_BUFFER_BIT);for(var p=0,g=e.layersToDraw.length;p<g;p++){Y(e.layersToDraw[p],c,n,r,f,e.textAtlas,e.fontIconAtlas,e.imageAtlases,!0,null,0)}h>=0&&v>=0&&h<i&&v<o?l.readPixels(h,v,1,1,l.RGBA,l.UNSIGNED_BYTE,t):t=new Uint8Array([0,0,0,0]);l.clear(l.COLOR_BUFFER_BIT);X()}return t}function C(e,t,n,r,i,o,a,u,s){X();l.clearColor(1,1,1,1);I(e,t,n,r,i,o,a,u,s,{all:!0});var f=new Uint8Array(l.drawingBufferWidth*l.drawingBufferHeight*4);l.readPixels(0,0,l.drawingBufferWidth,l.drawingBufferHeight,l.RGBA,l.UNSIGNED_BYTE,f);return f}function k(t,i,o,a,s,f){n=u.clientWidth;var c=u.width/n,d=t.width(),h=t.height(),v=G(t);R("overview",d*c,h*c);var p=ln(s.overview.backColour)||[255,255,255,255];p[3]=255;var g=new Uint8Array(p);l.clearColor(0,0,0,0);l.clear(l.COLOR_BUFFER_BIT);for(var m=e.layersToDraw,y=0,b=m.length;y<b;y++){var x=m[y];x.overview&&Y(x,v,d,h,c,i,o,a,s._showShadowCanvas,s,f)}R(null);var w=B(d,h,n,r,s);O("overview",1,w,g);O("overview",1,w)}function S(){var e={alphaChannel:!1,img:g,rebuild:!1,size:0,texture:L()};l.texImage2D(l.TEXTURE_2D,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,g);return e}function L(){var e=l.createTexture();l.bindTexture(l.TEXTURE_2D,e);l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1);l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,!1);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST);l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST);return e}function T(e){e?l.bindFramebuffer(l.FRAMEBUFFER,e.framebuffer):X()}function R(e,t,n){void 0===t&&(t=0);void 0===n&&(n=0);var r=s[e]||null,i=l.RGBA,o=Math.max(1,t||l.drawingBufferWidth),a=Math.max(1,n||l.drawingBufferHeight),u=Math.min(m,o),f=Math.min(m,a),c=!1;if(r&&(r.bufferHeight!==n||r.bufferWidth!==t)){x(r);c=!0}if(e&&(!r||c)){r={framebuffer:l.createFramebuffer(),renderbuffer:l.createRenderbuffer(),texture:L(),bufferHeight:n,bufferWidth:t};s[e]=r;"shadow"===e&&(i=l.RGB);l.texImage2D(l.TEXTURE_2D,0,i,u,f,0,i,l.UNSIGNED_BYTE,null);l.bindFramebuffer(l.FRAMEBUFFER,r.framebuffer);l.bindRenderbuffer(l.RENDERBUFFER,r.renderbuffer);l.clearColor(0,0,0,0);l.renderbufferStorage(l.RENDERBUFFER,l.DEPTH_COMPONENT16,u,f);l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r.texture,0);l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r.renderbuffer);var d=l.checkFramebufferStatus(l.FRAMEBUFFER);if(l.FRAMEBUFFER_COMPLETE!==d)throw new Error(d.toString())}T(r);l.viewport(0,0,u,f)}function Z(){l=Ly(u,{antialias:!1,preferLowPowerToHighPerformance:!1,depth:!1,stencil:!1});e.gl=l;n=u.width;r=u.height;i=l.drawingBufferWidth;o=l.drawingBufferHeight;l.getExtension("OES_standard_derivatives");l.getExtension("OES_element_index_uint");l.viewport(0,0,i,o);l.blendFunc(l.ONE,l.ONE_MINUS_SRC_ALPHA);l.enable(l.BLEND);l.clearColor(0,0,0,0);e.framebuffers={};s=e.framebuffers;t=new Uint8Array(4);return l}function B(e,t,n,r,i){var o,a=1-e/n*2,u=1-t/r*2;switch(i.overview.p){case"ne":o=new Float32Array([a,u,0,0,1,u,1,0,a,1,0,1,a,1,0,1,1,u,1,0,1,1,1,1]);break;case"nw":o=new Float32Array([-1,u,0,0,-a,u,1,0,-1,1,0,1,-1,1,0,1,-a,u,1,0,-a,1,1,1]);break;case"sw":o=new Float32Array([-1,-1,0,0,-a,-1,1,0,-1,-u,0,1,-1,-u,0,1,-a,-1,1,0,-a,-u,1,1]);break;case"se":default:o=new Float32Array([a,-1,0,0,1,-1,1,0,a,-u,0,1,a,-u,0,1,1,-1,1,0,1,-u,1,1])}return o}function O(e,t,n,r){var i;s[e]&&(i=s[e].texture);v.drawItems(t,i,n,r)}function G(e){return e?{panX:e.offsetXtoWebglPanX(),panY:e.offsetYtoWebglPanY(),zoom:e.getZoomScale()}:{panX:0,panY:0,zoom:1}}function Y(e,t,n,r,i,o,a,u,s,l,f){F(e.useView,t.panX,t.panY,t.zoom);D(e,e.lineBuffers,n,r,i,s,l,f);P(e,n,r,i,s,l,f);z(e,e.bezierBuffers,n,r,i,s,l,f);V(e,o,a,u,n,r,i,s,l)}function F(e,t,n,r){p=By();if(e){p.pan(t,n);p.zoom(r)}else{p.pan(0,0);p.zoom(1)}}function D(e,t,n,r,i,o,a,u){f.drawItems(e,t,p,n,r,i,o,a,u)}function P(e,t,n,r,i,o,a){c.drawItems(e,p,t,n,r,i,o,a)}function z(e,t,n,r,i,o,a,u){d.drawItems(e,t,p,n,r,i,o,a,u)}function V(e,t,n,r,i,o,u,s,l){h.drawItems(e,p,t,n,r,i,o,u,s,M,a,e.useAbsolutePosition,l)}function X(){l.bindFramebuffer(l.FRAMEBUFFER,null)}function W(e){e.rebuildOptions.colours=!1;e.rebuildOptions.positions=!1;e.rebuildOptions.textures=!1;e.rebuildOptions.shadow=!1;e.rebuildOptions.all=!1}function U(){for(var e=0;e<8;e++){l.activeTexture(l["TEXTURE"+e]);l.bindTexture(l.TEXTURE_2D,null)}}function N(e){if(e&&e.texture){l.deleteTexture(e.texture);e.texture=void 0;e.ctx=void 0;e.img=void 0}}return{finish:b,isFloatingPointSupported:y,clearFramebuffers:w,clearTextureAtlas:A,render:I,drawShadowCanvas:E,getPixels:C}}function uA(e,t){var n="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ$£1234567890() ",r=new Map;function i(){return Object.keys(o).filter((function(e){return!r.get(e)}))}for(var o={},a=0,u=n.length;a<u;a++)o[n[a]]=!0;function s(e,t){for(var n=!1,i=!1,a=0,u=e.length;a<u;a++){var s=e[a];r.get(s)?n=!0:i=!0;o[s]||(o[s]=!0)}n&&(t.imageAtlas=!0);i&&(t.textAtlas=!0)}function l(n,i,o,a,u,l,f){var c,d,h=e.unicodeAwareCharacters(n);l&&(h=ot(h,n).result);var v,p,g,m,y=!1,b={},x=[],w=f.getGlyphInfoForFont(i||o),A=0;for(v=0,p=h.length;v<p;v++){d=c=h[v].text||h[v];r.has(c)||r.set(c,Ee(c));if(r.get(c)){m=t.has(c);g=t.getEmojiImage(c)}else{a&&(d+="B");m=!!(g=w[d])}if(m)x[A++]=g;else{b[c]=!0;y=!0}}y&&s(Object.keys(b),u);return x}return{getNonEmojiGlyphs:i,getGlyphsFromText:l}}function sA(e,t){return{canvas:e,layersToDraw:[],textAtlas:null,fontIconAtlas:null,imageAtlases:[],allLayers:new Map,framebuffers:{},alpha:{background:1,ghost:1},stringSplitter:t,imageList:null}}function lA(e,t,n,r){var i,o=n.all;if(n.all){i=[];t.layersToDraw.length=0}else i=t.layersToDraw.slice();var a={alwaysUpdate:!1,bg:!1,blatOverview:!1,drawFramebuffer:"",fbAlpha:0,id:"",numOfPrimitives:0,overview:!1,primitives:[],shadowType:0,useFramebuffer:"",useView:!1},u=null;function s(e,o){if(n.all){if(o.bg&&a&&!e.bg){a.useFramebuffer=u;u=null}a={id:e.path,blatOverview:e.blatOverview,shadowType:e.shadowType,overview:e.overview,useView:e.useView,alwaysUpdate:e.alwaysUpdate,bg:e.bg,fbAlpha:r.backgroundAlpha,primitives:[],numOfPrimitives:0,drawFramebuffer:"",useFramebuffer:""};if(e.bg){o.bg&&(u="bg");a.drawFramebuffer=u}i.push(a)}else(a=t.allLayers.get(e.path)).numOfPrimitives=0}function l(e){a.primitives[a.numOfPrimitives++]=e}e.forEach(l,s,!o,!1);if(u){a.useFramebuffer=u;u=null}return i}function fA(e,t,n){var r=null,i=null,o=null,a=null;function u(){r=sA(e,n);i=uA(n,t);o=nA(r,i,t);a=aA(r);t.resetUpdatedImages()}u();function s(e,t){if(r){r.alpha.ghost=e;r.alpha.background=t}}function l(){a.finish(!0);a=null;o=null;i=null;r=null}function f(){a.finish();u()}function c(e){return a.isFloatingPointSupported(e)}function d(){a.clearFramebuffers()}function h(e){o.updateImageTextures(a,e);t.imagesUpdated()}function v(e,t,n){var i=lA(e,r,t,n);o.generate(i,t,n,a)}function p(e,t,n,i,o,u){a.render(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture),u)}function g(e,t,n,i,o){return a.getPixels(e,t,r.textAtlas,r.fontIconAtlas,r.imageAtlases,n,i,o,c(n._rendering.disableFloatTexture))}function m(e,t){return a.drawShadowCanvas(e,t)}return{build:v,clearFramebuffers:d,destroy:l,draw:p,drawShadowCanvas:m,getPixels:g,isFloatingPointSupported:c,setAlpha:s,shutdownAndReset:f,updateTextures:h}}var cA=8888;function dA(e,t,n,i,o){var a,u,s=Zm(Pm,!1,i),l=au(),f=e.id,c=e.containerElement,d=void 0!==c,p=e.type;d||(a=e.elementToReplace);var g=!1;(c||a)&&(g=r(c||a));function m(e,t,n){var r,i=document.createElement("canvas");if(n&&g){i.dir="rtl";document.body.appendChild(i);i.style.display="none"}r=o?document.createElement("canvas").getContext("2d"):i.getContext("2d");i.context2d=r;i.height=t;i.width=e;return i}function y(){if(!wn.minimumFontChecked){for(var e="Hello",t=m(100,100).context2d,n=!1,r=function(n){In(t,n);return t.measureText(e).width},i=r(1),o=2;!n&&o<30;){(n=i!==r(o))&&An(o-1);o++}Mn(!0)}}var b=m(t,n,!0);b.style.display="block";var x=b.context2d;b.setAttribute("id",f);var w=null;if(o&&Vy()&&"chart"===p){w=fA(b,s,l);b.webgl=!0}if(c)c.appendChild(b);else if(!d){a.style.display="block";a.parentNode.replaceChild(b,a)}b.canvas=!0;var A=b;if(b.webgl){x.webgl=!0;x.webglCanvas=b}else x.webgl=!1;tr(b,x,o,!!c);y();var M=A.getAttribute("style")||"";M+="touch-action: none; outline: none;";A.setAttribute("style",M);A.setAttribute("tabindex",""+cA++);var I={id:function(){return f},privateGetContainer:T,privateGetElement:B,privateGetWebGLRenderer:Z,privateInternalSetSize:R,privateSetContainer:L},E="chart"===p?by(f,s,I,w,l):vx(f,s,I),C=E.internal,k=BA(E.public,C.api);function S(e){var t=b;"map"in C.api&&C.api.map().isShown()&&(t=C.api.privateGetMapContainer());t.style.cursor=e}C.api.privateInit(x,t,n,m,S,Pm,O);function L(e){(c=e)&&(g=r(c))}function T(){return c}function R(e,t){"privateMapSetSize"in C.api&&C.api.privateMapSetSize(e,t);A.width=e;A.height=t;var n=c&&C.api.privateUseAutoSizing();tr(A,x,o,!!n);C.api.privateSetSize(x,e,t,!!n)}function Z(){return w}function B(){return b}function O(){v(u);u=h(G)}function G(){if(!!A.parentElement){if(c&&c.clientWidth>0&&c.clientHeight>0){var e=c.clientWidth*devicePixelRatio,t=c.clientHeight*devicePixelRatio;if(A._currentWidth!==e||A._currentHeight!==t){A._currentWidth=e;A._currentHeight=t;UA(A,c.clientWidth,c.clientHeight)}}try{C.api.update()}finally{u=h(G)}}}C.api.privateOn("forceRedraw",(function(e){C.api.privateFire("redraw",e);C.api.update()}));u=h(G);return{element:b,publicApi:k,privateApi:C.api}}var hA=!1;try{var vA=Object.defineProperty({},"passive",{get:function(){hA=!0;return!1}});window.addEventListener("test",vA,vA);window.removeEventListener("test",vA,vA)}catch(e){hA=!1}function pA(e,t,n,r){var i=r||!1;hA?e.addEventListener(t,n,{capture:i,passive:!1}):e.addEventListener(t,n,i)}function gA(e,t){for(var n=0;n<e.length;n++)pA(document,e[n],t)}function mA(e,t){return yA(e,t)}function yA(e,t){var n=bA(t);return{x:Math.floor(e.pageX-n.left),y:Math.floor(e.pageY-n.top)}}function bA(e){var t={top:0,left:0};e&&(t=e.getBoundingClientRect());return{top:t.top+window.pageYOffset-document.documentElement.clientTop,left:t.left+window.pageXOffset-document.documentElement.clientLeft}}var xA="ggwp",wA={},AA={},MA="";function IA(e){e in wA&&delete wA[e]}var EA="auto";function CA(e){e&&(EA=e);return EA}function kA(){for(var e,t,n,r,i,o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];switch(o.length){case 0:throw new Error("createChart called with zero arguments");case 1:case 2:e=o[0];r=o[1];if(!(i=document.getElementById(e))){TA(e,r);return}t=i.clientWidth;n=i.clientHeight;break;default:e=o[0];t=+o[1];n=+o[2];r=o[3];if(!(i=document.getElementById(e))){TA(e,r);return}}PA({id:e,type:"chart",options:void 0,elementToReplace:i,containerElement:void 0},t,n,r)}function SA(e){throw LA(e)}function LA(e){return new Error('Cannot create KeyLines component. No element with id "'+e+'" exists in the DOM')}function TA(e,t){R(t,LA(e))}function RA(e){return+e.replace(/px$/,"")}function ZA(e,t){var n,r,i=e.containerElement||e.elementToReplace,o=e.options;function a(e){t&&h((function(){t(null,e)}))}function u(n,r){n?R(t,n):o?r.options(e.options,(function(){a(r)})):a(r)}if(i){n=i.clientWidth||RA(i.style.width);r=i.clientHeight||RA(i.style.height)}PA(e,n,r,u)}function BA(e,t){function n(){return arguments[0]===xA?t:Object.prototype.toString()}n.toString=function(){return{}.toString.toString()};return Object.defineProperty(e,"toString",{value:n,enumerable:!1})}var OA,GA={chart:0,timebar:0};function YA(e,t){function n(e){return V(e)||"chart"===e||"timebar"===e}var r=Y(e),i=r.every((function(e){return n(e.type)}));r.length<1?R(t,Error("No definition passed to KeyLines.create")):i?o(r,0,[]):R(t,Error("The type of component passed to KeyLines.create is not valid"));function o(e,n,r){function i(e){var t,n=e.type?e.type:"chart",r=void 0!==e.container,i="string"==typeof e&&e||e.id||!r&&e.element&&e.element.id||DA(n);if(r){if(wA[i])throw new Error("Component with id: "+i+" already exists");var o=e.container;if("string"==typeof o){if(!(t=document.getElementById(o)))throw new Error("Container not found, "+e.container)}else{if(null!==o&&!o.parentNode)throw new Error("Container not found, "+e.container);t=o}}if(!r){if(FA(e.element)&&e.id)throw new Error("Cannot pass a DOM element and an id to create, please pass only one.");if(e.element&&!FA(e.element))throw new Error("You must pass a DOM element to the components element property.")}var a={id:i,type:n,options:e.options,containerElement:t,elementToReplace:null};if(FA(e)){n="chart";a.type=n;a.elementToReplace=e;a.elementToReplace.id=i}else if(FA(e.element)){a.elementToReplace=e.element;a.elementToReplace.id=i}a.elementToReplace&&!a.elementToReplace.parentNode&&SA();if(!a.elementToReplace&&!r){a.elementToReplace=document.getElementById(i);a.elementToReplace||SA(i)}return a}var a;try{a=i(e[n])}catch(e){R(t,e);return}ZA(a,(function(i,a){if(i)R(t,i);else{r.push(a);var u=n+1;if(u>=e.length){var s=1===r.length?r[0]:r;t&&t(null,s)}else o(e,u,r)}}))}}function FA(e){return"object"==typeof e&&null!==e&&("object"==typeof HTMLElement&&e instanceof HTMLElement||1===e.nodeType)}function DA(e){GA[e]++;var t="KeyLines-"+e+"-"+GA[e];return wA[t]||document.getElementById(t)?DA(e):t}function PA(e,t,n,r){IA(e.id);var i=t||100,o=n||100;if("canvas"!==EA&&"chart"===e.type&&Vy())try{XA(e,i,o,!0,r)}catch(t){Py();XA(e,i,o,!1,r)}else if(VA())XA(e,i,o,!1,r);else{r("Could not create HTML5 canvas.")}}function zA(e){e&&(MA=e);return MA}function VA(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))}function XA(e,t,n,r,i){var o=e.id;try{var a=dA(e,t,n,MA,r);wA[o]=a.publicApi;AA[o]=a.privateApi;a.privateApi.privateSetRemoveComponentReference((function(){delete wA[o];delete AA[o]}))}catch(e){if(i){i(e);return}}wA[o].webgl=r;wA[o].canvas=!0;i&&i(null,wA[o])}function WA(e,t,n){var r=FA(e)?e:document.getElementById(e);if(!r)throw new Error("You must pass a valid id or DOM element.");var i=Math.round(t),o=Math.round(n);if(!(i<=0||o<=0)){var a=r.id,u=AA[a];if(u){if(void 0!==u.privateCanvasApi.privateGetContainer()){var s="KeyLines.setSize cannot be used on components created with the ";s+="container property, ";s+="the component will automatically resize to fill its container.";throw new Error(s)}UA(r,t,n)}else{r.style.width=t+"px";r.style.height=n+"px"}}}function UA(e,t,n){if(!x(t)||!x(n))throw new Error("KeyLines.setSize: Invalid width or height value passed. Both parameters should be numbers.");var r=e.id,i=AA[r];if(i){i.privateCanvasApi.privateInternalSetSize(t,n);var o=i.privateCanvasApi.privateGetWebGLRenderer();o&&o.clearFramebuffers()}}function NA(e){e&&e.images&&zA(e.images);return{images:MA}}function jA(){return KA(["webkitIsFullScreen","mozFullScreen","msFullscreenElement","fullScreenElement"])}function KA(e){for(var t=P,n=0;n<e.length;n++)if(t(document[e[n]]))return!!document[e[n]];return!1}"undefined"!=typeof document&&gA(["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","MSFullscreenChange"],qA);function HA(e){var t=P;return t(document.webkitCurrentFullScreenElement)?document.webkitCurrentFullScreenElement===e:t(document.mozFullScreenElement)?document.mozFullScreenElement===e:!!t(document.msFullscreenElement)&&document.msFullscreenElement===e}function _A(){var e=P;return!!e(document.webkitCurrentFullScreenElement)||(!!e(document.mozFullScreenElement)||!!e(document.msFullscreenEnabled)&&document.msFullscreenEnabled)}function JA(e,t){for(var n,r=0;!n&&r<t.length;r++)if(e[t[r]]){n=!0;e[t[r]]()}}function QA(e){JA(e,["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen","msRequestFullscreen"])}function qA(){OA&&requestAnimationFrame((function(){OA(jA())}))}function $A(e,t){OA=t;jA()&&HA(e)?JA(document,["cancelFullScreen","mozCancelFullScreen","webkitCancelFullScreen","msExitFullscreen"]):QA(e)}function eM(){if(VA()){var e=document.createElement("canvas").getContext("2d");return!!e.setLineDash||!!e.mozDash||!!e.webkitLineDash}return!1}function tM(){var e={},t=Ty({failIfMajorPerformanceCaveat:!1});if(t){e.version=t.getParameter(t.VERSION);var n=t.getExtension("WEBGL_debug_renderer_info");if(n){e.vendor=t.getParameter(n.UNMASKED_VENDOR_WEBGL);e.renderer=t.getParameter(n.UNMASKED_RENDERER_WEBGL)}}return e}function nM(){var e={account:"Licensed to Illunex Inc for EffectMall expires on Sat Jun 26 2021",eventErrors:{},isUsingWebGL:{},mode:CA(),options:{},paths:a(NA()),version:"KeyLines v6.1.2-56105 sdk"};Object.keys(wA).forEach((function(t){var n,r,i=wA[t],o=i.toString(xA);e.eventErrors[t]=null!=(r=null===(n=o)||void 0===n?void 0:n.getErrors())?r:[];e.isUsingWebGL[t]=!!i.webgl;e.options[t]=i.options()}));if("undefined"!=typeof navigator){e.platform=navigator.platform;e.userAgent=navigator.userAgent}if("undefined"!=typeof window){e.url=document.location.href;e.webgl=tM()}return e}function rM(e){var t=hr(),r=rh(my(),t),i=D(e,{selfLinks:!1}),o=hu({numbers:{x:!0,y:!0},strings:{id:!0,id1:!0,id2:!0},booleans:{hi:!0,a1:!0,a2:!0}});function u(e){function t(t){var r=a(t);o.typeCheck(r);var u=o.filterNodesAndLinks(r.items,{},{},{selfLinks:i.selfLinks,filterComboNodes:!0});o.ensureHiddenItemConsistency(u.nodes,u.links);n(u.nodes,(function(e){delete e.parentId}));n(u.links,(function(e){delete e.parentId}));e.privateSetProperties(u.nodes,u.links)}return t}function s(e){function t(){var t={};e.privateSetProperties(t,t)}return t}var l={load:u(r),clear:s(r)};return qn(qn({},r),l)}var iM,oM,aM="undefined"!=typeof window?window:global,uM="",sM=!1,lM=["create"],fM=["arrange","createLink","filter","foreground","range","animateProperties","expand","hide","layout","load","merge","options","pan","ping","setItem","setProperties","show","toDataURL","viewOptions","zoom"],cM=["combo","getGraphEngine","graph","map"],dM=["arrange","betweenness","close","closeness","combine","hide","transfer","open","options","show","uncombine"];function hM(e,t,n){if(!sM){iM=aM.Promise;oM=iM}n&&(uM=n);if(null==oM&&!iM&&!e)throw Error("[promisify] There's no valid Promise constructor available. It is not possible to promisify.");if(!yM(e))throw Error("[promisify] Promise constructor not valid. Please use a valid Promise implementation.");iM=e||oM;if(!sM){vM(t,lM,cM);H(t.components||{}).forEach((function(e){vM(e,fM,cM)}))}sM=!0}function vM(e,t,n){t.forEach((function(t){e[t]&&(e[t+uM]=pM(e[t],t,"create"===t))}));n&&n.forEach((function(t){e[t]&&(e[t+uM]=mM(e[t],dM))}));return e}function pM(e,t,n){return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];var o=Math.max(0,e.length-1);return gM(t,r)?e.apply(void 0,r):new iM((function(t,i){if(r.length===e.length&&M(r[o])){r.pop();m("A callback has been passed, but the function will return a Promise instead")}function a(e,n){if(e)return i(e);var r=Array.isArray(n),o=(r?n:[n]).map((function(e){return vM(e,fM,cM)}));return t(r?o:o[0])}r[o]=n?a:t;e.apply(void 0,r)}))}}function gM(e,t){return!(!/options$/i.test(e)||!V(t[0]))||"range"===e&&!t.length}function mM(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(void 0,n),o={},a=q(t);Object.keys(i).forEach((function(e){e in a?o[e+uM]=pM(i[e],e):o[e]=i[e]}));return o}}function yM(e){var t=e||iM,n=void 0!==t&&"resolve"in t&&"reject"in t;try{new t((function(e){n=n&&"function"==typeof e}))}catch(e){throw new Error("You must pass a valid promise constructor")}return n}var bM=function(){return lr.a||lr.b},xM={charts:wA,createChart:kA,imageBasePath:zA,setCanvasPaths:function(){},promisify:function(e,t){return hM(e,this,t)},components:wA,coords:function(e){return mA(e,document.getElementById(e.target.id))},create:YA,dashedLineSupport:eM,fullScreenCapable:_A,getFontIcon:Vn,getGraphEngine:rM,mode:CA,info:nM,paths:NA,setSize:WA,toggleFullScreen:$A,webGLSupport:Vy,Rendering:{mainChannel:bM}};"undefined"!=typeof window&&(window.KeyLines=xM);"undefined"!=typeof global&&(global.KeyLines=xM);return xM}));
